(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dbd8207"],{"09d3":function(t,e,a){"use strict";a("68ef"),a("aec8")},1148:function(t,e,a){"use strict";var i=a("a691"),o=a("1d80");t.exports=function(t){var e=String(o(this)),a="",n=i(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(a+=e);return a}},"2d6d":function(t,e,a){"use strict";var i=a("d282"),o=a("a142"),n=a("a8c1"),s=a("9884"),r=a("b222"),c=Object(i["a"])("dropdown-menu"),l=c[0],d=c[1];e["a"]=l({mixins:[Object(s["b"])("vanDropdownMenu"),Object(r["a"])({event:"click",method:"onClickOutside"})],props:{zIndex:[Number,String],activeColor:String,overlay:{type:Boolean,default:!0},duration:{type:[Number,String],default:.2},direction:{type:String,default:"down"},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return{offset:0}},computed:{scroller:function(){return Object(n["d"])(this.$el)},opened:function(){return this.children.some((function(t){return t.showWrapper}))},barStyle:function(){if(this.opened&&Object(o["c"])(this.zIndex))return{zIndex:1+this.zIndex}}},methods:{updateOffset:function(){if(this.$refs.bar){var t=this.$refs.bar.getBoundingClientRect();"down"===this.direction?this.offset=t.bottom:this.offset=window.innerHeight-t.top}},toggleItem:function(t){this.children.forEach((function(e,a){a===t?e.toggle():e.showPopup&&e.toggle(!1,{immediate:!0})}))},onClickOutside:function(){this.children.forEach((function(t){t.toggle(!1)}))}},render:function(){var t=this,e=arguments[0],a=this.children.map((function(a,i){return e("div",{attrs:{role:"button",tabindex:a.disabled?-1:0},class:d("item",{disabled:a.disabled}),on:{click:function(){a.disabled||t.toggleItem(i)}}},[e("span",{class:[d("title",{active:a.showPopup,down:a.showPopup===("down"===t.direction)}),a.titleClass],style:{color:a.showPopup?t.activeColor:""}},[e("div",{class:"van-ellipsis"},[a.slots("title")||a.displayTitle])])])}));return e("div",{class:d()},[e("div",{ref:"bar",style:this.barStyle,class:d("bar",{opened:this.opened})},[a]),this.slots("default")])}})},"331f":function(t,e,a){"use strict";a("754e")},"408a":function(t,e,a){var i=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"46a8":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("acd8"),a("a15b"),a("d81d"),a("99af");var i,o="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",n=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function s(t){var e=window.getComputedStyle(t),a=e.getPropertyValue("box-sizing"),i=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),o=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),s=n.map((function(t){return"".concat(t,":").concat(e.getPropertyValue(t))})).join(";");return{contextStyle:s,paddingSize:i,borderSize:o,boxSizing:a}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i||(i=document.createElement("textarea"),document.body.appendChild(i));var n=s(t),r=n.paddingSize,c=n.borderSize,l=n.boxSizing,d=n.contextStyle;i.setAttribute("style","".concat(d,";").concat(o)),i.value=t.value||t.placeholder||"";var u=i.scrollHeight,p={};"border-box"===l?u+=c:"content-box"===l&&(u-=r),i.value="";var h=i.scrollHeight-r;if(null!==e){var f=h*e;"border-box"===l&&(f=f+r+c),u=Math.max(f,u),p.minHeight="".concat(f,"px")}if(null!==a){var v=h*a;"border-box"===l&&(v=v+r+c),u=Math.min(v,u)}return p.height="".concat(u,"px"),i.parentNode&&i.parentNode.removeChild(i),i=null,p}},"61ae":function(t,e,a){"use strict";a("68ef"),a("a71a"),a("9d70"),a("3743"),a("1a04"),a("4d75"),a("b2cc")},"66b26":function(t,e,a){"use strict";a.r(e);var i,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"confirmOrder",staticClass:"body"},[a("nav-top",{attrs:{bstyle:"transparent",title:"确认订单"},on:{backEvent:function(e){return t.$router.go(-1)}}}),a("div",{staticClass:"user_info"},[a("div",{staticClass:"info"},[a("span",[t._v("提货人姓名：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.consigneeName,expression:"consigneeName"}],attrs:{placeholder:"请输入姓名"},domProps:{value:t.consigneeName},on:{input:function(e){e.target.composing||(t.consigneeName=e.target.value)}}})]),a("div",{staticClass:"info",staticStyle:{"margin-top":"12px"}},[a("span",[t._v("联系人电话：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.consigneePhoneNumber,expression:"consigneePhoneNumber"}],attrs:{placeholder:"请输入联系人电话"},domProps:{value:t.consigneePhoneNumber},on:{input:function(e){e.target.composing||(t.consigneePhoneNumber=e.target.value)}}})])]),a("div",{staticClass:"pick_up_address"},[a("div",{staticClass:"addres_title"},[a("div",{staticClass:"addres_title_text"},[t._v("团购提货地点")]),a("div",{staticClass:"change",on:{click:function(e){return t.$router.push("/selectAddress")}}},[t._v(" 切换提货地址 ")])]),a("div",{staticClass:"line"}),t.placelist.length?a("div",{staticClass:"addres_info"},[a("div",{staticClass:"addres_info_detail"},[a("div",{staticClass:"addres"},[a("div",{staticClass:"adders-key"},[t._v("提货联系人：")]),a("div",{staticClass:"adders-val"},[t._v(t._s(t.placelist[0].teamLeaderName)+" "+t._s(t.placelist[0].teamLeaderPhoneNumber))])]),a("div",{staticClass:"addres",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"adders-key"},[t._v("提货地址：")]),a("div",{staticClass:"adders-val"},[t._v(t._s(t.placelist[0].cucName)+t._s(t.placelist[0].cudName)+t._s(t.placelist[0].cuName))])])])]):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pick_up_address"},[t._m(0),a("div",{staticClass:"line"}),t._m(1)]),a("div",{staticClass:"goods_info"},[t._m(2),a("div",{staticClass:"goods_item"},[a("div",{staticClass:"goods_info_item"},[a("img",{attrs:{src:t.resouce.groupbuySkuPicurl[0],alt:""}}),a("div",{staticClass:"goods_info_detail"},[a("div",{staticClass:"goods_name"},[t._v(t._s(t.resouce.groupbuySkuName))]),a("div",{staticClass:"sell_price"},[t._v(" 销售价格：¥"+t._s(t.resouce.groupbuyLinePrice)+" ")]),a("div",{staticClass:"count_price"},[a("div",{staticClass:"bulk_price"},[t._v(" 团购价格：¥"+t._s(t.resouce.groupbuyBuyerPrice)+" ")])])])]),a("div",{staticClass:"stepper"},[a("van-stepper",{on:{change:function(e){return t.buyChange(e,t.resouce.groupbuyBuyerPrice)}},model:{value:t.buyNumber,callback:function(e){t.buyNumber=t._n(e)},expression:"buyNumber"}})],1),a("div",{staticClass:"line"})])]),a("div",{staticClass:"remark"},[a("span",[t._v("订单备注：")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textareaValue,expression:"textareaValue"}],ref:"textarea",style:{height:t.textareaHeight},attrs:{placeholder:"请输入备注"},domProps:{value:t.textareaValue},on:{input:function(e){e.target.composing||(t.textareaValue=e.target.value)}}})]),a("div",{ref:"nullBox"}),a("div",{staticClass:"pay_now"},[a("div",{staticClass:"pay_price"},[t._v("¥"+t._s(t.total))]),a("div",{staticClass:"pay",on:{click:t.confirmOrder}},[t._v("立即支付")])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addres_title"},[a("div",{staticClass:"addres_title_text"},[t._v("团购提货地点")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addres_info"},[a("textarea",{attrs:{placeholder:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods_title"},[a("div",{staticClass:"goods_title_text"},[t._v("商品信息")]),a("div",{staticClass:"line"})])}],s=a("ade3"),r=(a("61ae"),a("d314")),c=(a("09d3"),a("2d6d")),l=(a("f06a"),a("20fb")),d=(a("b0c0"),a("b680"),a("fb6a"),a("46a8")),u=a("a026"),p=a("901e"),h=a("ca00");u["default"].use(l["a"]);var f={name:"confirmOrder",components:(i={},Object(s["a"])(i,c["a"].name,c["a"]),Object(s["a"])(i,r["a"].name,r["a"]),i),props:{},data:function(){return{placelist:[],resouce:{},buyNumber:1,textareaHeight:"20px",textareaValue:"",consigneeName:"",consigneePhoneNumber:"",total:0,takeWays:[{text:"自提",value:1},{text:"送货上门",value:2}],takeWay:1,pageAvtive:!1}},activated:function(){this.pageAvtive?this.placelist=[this.$store.state.CharseInfo.masterPlace]:(this.getPlaceList(),this.resouce=this.$store.state.CharseInfo,this.total=Object(p["BigNumber"])(this.buyNumber).multipliedBy(this.$store.state.CharseInfo.groupbuyBuyerPrice).toFixed(2))},beforeRouteLeave:function(t,e,a){"/mall2/checkstand"==t.path?this.pageAvtive=!0:this.pageAvtive=!1,a()},methods:{getHeight:function(){this.textareaHeight=Object(d["a"])(this.$refs.textarea,1,null).height,this.$refs.confirmOrder.scrollTop=this.$refs.nullBox.offsetTop},confirmOrder:function(){var t=this;""!==this.consigneeName?h["a"].checkMobile(this.consigneePhoneNumber)?this.$http.post("/app/json/group_buying_order/createGroupBuyingOrder",{activityNo:this.$store.state.CharseInfo.activityId,teamLeaderNo:this.$store.state.CharseInfo.masterPlace.teamLeaderNo,deliveryMode:0,consigneeName:this.consigneeName,consigneePhoneNumber:this.consigneePhoneNumber,preProductSkuInfoList:[{skuId:this.$store.state.CharseInfo.skuid,buyNumber:this.buyNumber}],remark:this.textareaValue}).then((function(e){"success"==e.data.result?t.$router.push({path:"/mall2/checkstand",query:{isBulk:JSON.stringify(!0),bulkData:JSON.stringify({tradeNo:e.data.data.tradeNo,orderType:e.data.data.orderType,occurOuCode:e.data.data.occurOuCode,orderId:e.data.data.orderId,shoppingOrderId:e.data.data.shoppingOrderId,payAmount:e.data.data.payAmount})}}):t.$toast(e.data.info)})):this.$toast("请输入正确的手机号码"):this.$toast("请输入提货人姓名")},getPlaceList:function(){var t=this,e="/app/json/group_buying_head_info/findHeadInfoByList?validState=true&sortBy:headWeight_DESC&activityId=".concat(this.$store.state.CharseInfo.activityId);this.$http.get(e).then((function(e){0==e.data.status&&(t.$store.state.CharseInfo.masterPlace?t.placelist=[t.$store.state.CharseInfo.masterPlace]:(t.placelist=e.data.data.records,t.$store.commit("setCharseInfo",{masterPlace:t.placelist[0]})))}))["catch"]((function(t){}))},buyChange:function(t,e){this.total=Object(p["BigNumber"])(e).multipliedBy(t).toFixed(2)}},watch:{textareaValue:function(){this.textareaValue.length<=150?this.getHeight():this.textareaValue=String(this.textareaValue).slice(0,150)}}},v=f,m=(a("331f"),a("0c7c")),g=Object(m["a"])(v,o,n,!1,null,"478469f9",null);e["default"]=g.exports},"754e":function(t,e,a){},aec8:function(t,e,a){},b2cc:function(t,e,a){},b680:function(t,e,a){"use strict";var i=a("23e7"),o=a("a691"),n=a("408a"),s=a("1148"),r=a("d039"),c=1..toFixed,l=Math.floor,d=function(t,e,a){return 0===e?a:e%2===1?d(t,e-1,a*t):d(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},p=function(t,e,a){var i=-1,o=a;while(++i<6)o+=e*t[i],t[i]=o%1e7,o=l(o/1e7)},h=function(t,e){var a=6,i=0;while(--a>=0)i+=t[a],t[a]=l(i/e),i=i%e*1e7},f=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var i=String(t[e]);a=""===a?i:a+s.call("0",7-i.length)+i}return a},v=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){c.call({})}));i({target:"Number",proto:!0,forced:v},{toFixed:function(t){var e,a,i,r,c=n(this),l=o(t),v=[0,0,0,0,0,0],m="",g="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(e=u(c*d(2,69,1))-69,a=e<0?c*d(2,-e,1):c/d(2,e,1),a*=4503599627370496,e=52-e,e>0){p(v,0,a),i=l;while(i>=7)p(v,1e7,0),i-=7;p(v,d(10,i,1),0),i=e-1;while(i>=23)h(v,1<<23),i-=23;h(v,1<<i),p(v,1,1),h(v,2),g=f(v)}else p(v,0,a),p(v,1<<-e,0),g=f(v)+s.call("0",l);return l>0?(r=g.length,g=m+(r<=l?"0."+s.call("0",l-r)+g:g.slice(0,r-l)+"."+g.slice(r-l))):g=m+g,g}})},d314:function(t,e,a){"use strict";var i=a("d282"),o=a("1325"),n=a("1421"),s=a("9884"),r=a("7744"),c=a("ad06"),l=a("e41f"),d=Object(i["a"])("dropdown-item"),u=d[0],p=d[1];e["a"]=u({mixins:[Object(n["a"])({ref:"wrapper"}),Object(s["a"])("vanDropdownMenu")],props:{value:null,title:String,disabled:Boolean,titleClass:String,options:{type:Array,default:function(){return[]}},lazyRender:{type:Boolean,default:!0}},data:function(){return{transition:!0,showPopup:!1,showWrapper:!1}},computed:{displayTitle:function(){var t=this;if(this.title)return this.title;var e=this.options.filter((function(e){return e.value===t.value}));return e.length?e[0].text:""}},watch:{showPopup:function(t){this.bindScroll(t)}},beforeCreate:function(){var t=this,e=function(e){return function(){return t.$emit(e)}};this.onOpen=e("open"),this.onClose=e("close"),this.onOpened=e("opened")},methods:{toggle:function(t,e){void 0===t&&(t=!this.showPopup),void 0===e&&(e={}),t!==this.showPopup&&(this.transition=!e.immediate,this.showPopup=t,t&&(this.parent.updateOffset(),this.showWrapper=!0))},bindScroll:function(t){var e=this.parent.scroller,a=t?o["b"]:o["a"];a(e,"scroll",this.onScroll,!0)},onScroll:function(){this.parent.updateOffset()},onClickWrapper:function(t){this.getContainer&&t.stopPropagation()}},render:function(){var t=this,e=arguments[0],a=this.parent,i=a.zIndex,o=a.offset,n=a.overlay,s=a.duration,d=a.direction,u=a.activeColor,h=a.closeOnClickOverlay,f=this.options.map((function(a){var i=a.value===t.value;return e(r["a"],{attrs:{clickable:!0,icon:a.icon,title:a.text},key:a.value,class:p("option",{active:i}),style:{color:i?u:""},on:{click:function(){t.showPopup=!1,a.value!==t.value&&(t.$emit("input",a.value),t.$emit("change",a.value))}}},[i&&e(c["a"],{class:p("icon"),attrs:{color:u,name:"success"}})])})),v={zIndex:i};return"down"===d?v.top=o+"px":v.bottom=o+"px",e("div",[e("div",{directives:[{name:"show",value:this.showWrapper}],ref:"wrapper",style:v,class:p([d]),on:{click:this.onClickWrapper}},[e(l["a"],{attrs:{overlay:n,position:"down"===d?"top":"bottom",duration:this.transition?s:0,lazyRender:this.lazyRender,overlayStyle:{position:"absolute"},closeOnClickOverlay:h},class:p("content"),on:{open:this.onOpen,close:this.onClose,opened:this.onOpened,closed:function(){t.showWrapper=!1,t.$emit("closed")}},model:{value:t.showPopup,callback:function(e){t.showPopup=e}}},[f,this.slots("default")])])])}})}}]);