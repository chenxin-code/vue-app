(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cee1c0e","chunk-a8f2ea64"],{1759:function(t,e,s){"use strict";s("ab96")},"1c2ff":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"share"},[s("LiveStream",{directives:[{name:"show",rawName:"v-show",value:t.showLiveStream,expression:"showLiveStream"}],ref:"LiveStream",attrs:{list:t.list},on:{backEvent:t.backEvent}}),s("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.showPop,callback:function(e){t.showPop=e},expression:"showPop"}},[s("div",{staticClass:"subscribe-div"},[s("div",{staticClass:"top-div line_bottom"},[s("div",{staticClass:"header-img"},[s("img",{attrs:{src:t.shareInfo.liveHeadImg}})]),s("div",{staticClass:"title"},[t._v(t._s(t.shareInfo.liveTitle))])]),s("div",{staticClass:"content"},[t.isTimeOut?s("div",[s("div",{staticClass:"tip"},[s("span",[t._v("主播还在来的路上，可点击下方订阅按钮，我们会在主播开播后第一时间通知您~")])])]):s("div",[s("div",{staticClass:"start-time"},[t._v("直播时间："+t._s(t.shareInfo.startTime))]),s("div",{staticClass:"count-down-cell"},[s("span",[t._v("距离开始还剩：")]),s("Countdown",{attrs:{endTime:t.getCountdownTime},on:{timeOut:t.timeOut}})],1)]),0==t.shareInfo.isSubscribe?s("div",{staticClass:"btn line_circle subscribe-btn",on:{click:t.subscribe}},[t._v("订阅")]):s("div",{staticClass:"btn line_circle cancel-btn",on:{click:t.cancelSubscribe}},[t._v("取消订阅")])])])])],1)},a=[],n=(s("ac1f"),s("5319"),s("69f4")),o=s("7cff"),r={name:"share",components:{LiveStream:o["a"],Countdown:n["default"]},data:function(){return{showLiveStream:!1,showPop:!1,playId:"",detail:{},list:[],shareInfo:{},isTimeOut:!1}},computed:{getCountdownTime:function(){var t=this.$util.getDateFromString(this.shareInfo.startTime);return t}},methods:{cancelSubscribe:function(){var t=this;this.$Loading.open();var e="/app/json/live_broadcast/liveSubscribe",s={streamerId:this.shareInfo.id,isSubscribe:"0",type:"0"};this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?t.getShareInfo():t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("获取数据失败")}))},subscribe:function(){var t=this;this.$Loading.open();var e="/app/json/live_broadcast/liveSubscribe",s={streamerId:this.shareInfo.id,isSubscribe:"1",type:"1"};this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?t.getShareInfo():t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("获取数据失败")}))},timeOut:function(){this.isTimeOut=!0,this.getShareInfo()},backEvent:function(){this.showLiveStream=!1,this.$router.replace({path:"/live-stream/list",query:{backType:"backindex"}})},getDetailInfo:function(){var t=this;this.$Loading.open();var e="/app/json/live_broadcast/detail",s={lbId:this.playId};this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?(t.list=[s.data],t.detail=s.data,t.showLiveStream=!0,t.$refs.LiveStream.playDetail(t.detail)):t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("获取数据失败")}))},getShareInfo:function(){var t=this;this.$Loading.open();var e="/app/json/live_broadcast/getStreamerInfoByQrCode",s={liveQrCode:this.liveQrCode};this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?(t.shareInfo=s.data,t.playId=s.data.liveId,"1"==t.shareInfo.type?(t.showPop=!1,t.getDetailInfo()):t.showPop=!0):t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("获取数据失败")}))}},created:function(){this.liveQrCode=this.$route.query.liveQrCode||"",this.liveQrCode?this.getShareInfo():(this.playId=this.$route.query.playId||"",this.getDetailInfo())}},c=r,h=(s("1759"),s("0c7c")),d=Object(h["a"])(c,i,a,!1,null,"3e41b5a6",null);e["default"]=d.exports},"333a":function(t,e,s){},"69f4":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"countdown",class:{quan:"theme_bg_quan"==t.type}},[0==t.d||t.hiddenDay?t._e():s("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.d))]),0==t.d||t.hiddenDay?t._e():s("span",[t._v("天")]),s("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.h))]),t._v(" : "),s("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.m))]),t._v(" : "),s("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.s))])])},a=[],n=(s("4795"),s("e25e"),s("9d5d")),o={name:"countdown",props:["endTime","type","hiddenDay","callback"],components:{},data:function(){return{d:"0",h:"00",m:"00",s:"00",trigger:!0}},methods:{parsingTime:function(){var t=this;if(this.endTime){var e=this.$store.state.severTime.currentTime,s=this.endTime,i=s-e;this.d=0,this.h="0",this.m="0",this.s="0",i<0?this.trigger&&(this.trigger=!1,setTimeout((function(){t.$emit("timeOut")}),1e3)):(this.trigger=!0,i>59?(this.s=i%60,i=parseInt(i/60),i>59?(this.m=i%60,i=parseInt(i/60),i>23?(this.h=parseInt(i%24),i=parseInt(i/24),this.d=i):this.h=i):this.m=i):i>=0&&(this.s=i),this.h<10&&(this.h="0"+this.h),this.m<10&&(this.m="0"+this.m),this.s<10&&(this.s="0"+this.s))}}},created:function(){this.parsingTime(),n["a"].heartbeat()},destroyed:function(){n["a"].removeHeartbeat()},watch:{"$store.state.severTime.currentTime":function(){this.parsingTime()}}},r=o,c=(s("d49f"),s("0c7c")),h=Object(c["a"])(r,i,a,!1,null,"65b2d2d6",null);e["default"]=h.exports},"9d5d":function(t,e,s){"use strict";s("4795"),s("e25e"),s("0d03");var i,a=s("653a"),n=0,o={heartbeat:function(){n++,i||(i=window.setInterval((function(){var t=parseInt((new Date).getTime()/1e3);a["a"].state.severTime.currentTime=t+a["a"].state.severTime.jetlag}),1e3))},removeHeartbeat:function(){n>0&&n--,0==n&&(window.clearInterval(i),i=null)}};e["a"]=o},ab96:function(t,e,s){},d49f:function(t,e,s){"use strict";s("333a")}}]);