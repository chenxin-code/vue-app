(window.webpackJsonp=window.webpackJsonp||[]).push([[731],{"2D5r":function(t,n,e){"use strict";var o=e("LWgw");e.n(o).a},"Jl/B":function(t,n,e){"use strict";e.r(n);var o={data:function(){return{show:!1,answerList:[],options:[],actions:[]}},mounted:function(){this.getList(),this.getLetter()},methods:{getList:function(){var t=this,n={token:this.$store.state.login.token};this.$Loading.open(),this.$http.post("/app/jqGrid/prefer/getUserPreferSetList",n).then((function(n){console.log(n),t.$Loading.close();var e=n.data;if(0==e.status){var o=e.data||[];o.forEach((function(t){"2"==t.topicType?t.answer=[]:t.answer="",t.options.forEach((function(n){"1"==n.isAnswer&&("2"==t.topicType?t.answer.push(n.id):(t.answer=n.id,t.name=n.optionContent)),n.name=n.optionContent})),t.show=!1})),t.answerList=o,console.log(t.answerList)}else t.$Toast(e.info)}))},getLetter:function(){this.optionsObj=this.generateBig_1(),console.log(this.optionsObj)},generateBig_1:function(){for(var t=[],n=65;n<91;n++)t.push(String.fromCharCode(n));return t},select1:function(t){t.show=!0},onSelect:function(t,n){console.log(t,n),n.answer=t.id,n.name=t.name,n.show=!1},commit:function(){var t=this,n={preferSets:[]};this.answerList.forEach((function(t){var e={};e.id=t.id,e.topicType=t.topicType,e.title=t.title,e.options=[],t.options.forEach((function(n){"number"==typeof t.answer?String(t.answer):t.answer,"number"==typeof n.id?String(n.id):n.id,String(t.answer).indexOf(String(n.id))>-1&&e.options.push({id:n.id,optionContent:n.optionContent})})),n.preferSets.push(e)})),console.log(n),this.$Loading.open(),this.$http.post("/app/json/prefer/updatePreferSet",n).then((function(n){t.$Loading.close();var e=n.data;0==e.status?(t.$Toast("保存成功"),t.$router.go(-1)):t.$Toast(e.info)}))}}},s=(e("2D5r"),e("KHd+")),i=Object(s.a)(o,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("nav-top",{attrs:{title:"我的偏好"},on:{backEvent:function(n){return t.$router.go(-1)}}}),t._v(" "),e("nav-content",t._l(t.answerList,(function(n,o){return e("div",{staticClass:"box"},[1==n.topicType?e("div",{staticClass:"div2"},[e("p",[t._v(t._s(o+1)+"、"+t._s(n.title)+"（单选）")]),t._v(" "),e("van-radio-group",{model:{value:n.answer,callback:function(e){t.$set(n,"answer",e)},expression:"item.answer"}},t._l(n.options,(function(n,o){return e("van-radio",{key:o,attrs:{name:n.id}},[t._v(t._s(t.optionsObj[o])+" 、"+t._s(n.optionContent))])})),1)],1):t._e(),t._v(" "),2==n.topicType?e("div",{staticClass:"div3"},[e("p",[t._v(t._s(o+1)+"、"+t._s(n.title)+"（多选）")]),t._v(" "),e("van-checkbox-group",{model:{value:n.answer,callback:function(e){t.$set(n,"answer",e)},expression:"item.answer"}},t._l(n.options,(function(n,o){return e("van-checkbox",{key:o,attrs:{name:n.id}},[t._v(t._s(t.optionsObj[o])+" 、"+t._s(n.optionContent))])})),1)],1):t._e(),t._v(" "),3==n.topicType?e("div",{staticClass:"div3",staticStyle:{display:"flex"}},[e("p",[t._v(t._s(o+1)+"、"+t._s(n.title)+"（下拉）")]),t._v(" "),e("div",{staticClass:"xiala",staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.select1(n)}}},[e("span",[t._v(t._s(n.name||"请选择"))]),t._v(" "),e("span",{staticClass:"icon iconfont mall-xiala"})]),t._v(" "),e("van-action-sheet",{attrs:{actions:n.options},on:{select:function(e){return t.onSelect(e,n)}},model:{value:n.show,callback:function(e){t.$set(n,"show",e)},expression:"item.show"}})],1):t._e(),t._v(" "),e("div",{staticClass:"btnBox"},[e("div",{staticClass:"btn",on:{click:t.commit}},[t._v("保存")])])])})),0)],1)}),[],!1,null,"6b97ecd6",null);n.default=i.exports},LWgw:function(t,n,e){}}]);