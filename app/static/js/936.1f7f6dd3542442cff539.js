(window.webpackJsonp=window.webpackJsonp||[]).push([[936],{"2njm":function(e,t,s){},"8q6Y":function(e,t,s){"use strict";var a=s("2njm");s.n(a).a},Jxo7:function(e,t,s){"use strict";s.r(t);var a=(s("8q6Y"),s("KHd+")),n=Object(a.a)({data:function(){return{showKeyboard:!1,employeesCard:"",checkCard:!1,check:!1}},mounted:function(){},watch:{employeesCard:function(e,t){e.length>t.length?4!=e.length&&9!=e.length&&14!=e.length&&19!=e.length||(this.employeesCard+=" "):20!==e.length&&15!==e.length&&10!==e.length&&5!==e.length||(this.employeesCard=this.employeesCard.trim())}},methods:{deleteBtn:function(){this.employeesCard="",this.checkCard=!1},onInput:function(e){this.employeesCard.length<23&&(this.employeesCard=this.employeesCard+e),23==this.employeesCard.length?this.verifyCardNo(this.employeesCard):this.checkCard=!1},onDelete:function(){this.employeesCard=this.employeesCard.slice(0,this.employeesCard.length-1),this.checkCard=!1},bindEmployeeCard:function(){var e=this;23!=this.employeesCard.length?this.$Toast("请输入正确的员工卡号"):1==this.check&&this.$request.post("/app/json/app_employee_card/bindEmployeeCard",{cardNo:this.employeesCard.replace(/\s*/g,"")}).then((function(t){0===t.status?(e.$router.go(-1),e.$Toast("绑定成功")):e.$Toast(t.info?t.info:"绑定失败")}))},verifyCardNo:function(e){var t=this;this.$request.post("/app/json/app_employee_card/verifyCardNo",{cardNo:e.replace(/\s*/g,"")}).then((function(e){t.checkCard=!0,"success"===e.result?t.check=!0:t.check=!1}))}},components:{}},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"employees-card"},[s("nav-top",{attrs:{title:"绑定员工卡"},on:{backEvent:function(t){return e.$router.go(-1)}}}),e._v(" "),s("nav-content",{staticClass:"employees-card-container"},[s("div",{staticClass:"main"},[s("div",{staticClass:"inp"},[s("div",{staticClass:"left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.employeesCard,expression:"employeesCard"}],attrs:{type:"tel",readonly:"",clickable:"",placeholder:"输入员工卡卡号",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode)))"},domProps:{value:e.employeesCard},on:{click:function(t){e.showKeyboard=!0},input:function(t){t.target.composing||(e.employeesCard=t.target.value)}}}),e._v(" "),e.employeesCard?s("van-icon",{attrs:{size:"18px",name:"close"},on:{click:e.deleteBtn}}):e._e()],1),e._v(" "),e.checkCard?s("div",{staticClass:"right"},[e.check?s("van-icon",{attrs:{size:"20px",name:"checked",color:"#1ac502"}}):s("van-icon",{attrs:{size:"20px",name:"clear",color:"#F80F16"}})],1):e._e()]),e._v(" "),e.checkCard?s("div",{staticClass:"tips"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.check,expression:"check"}],staticClass:"info"},[e._v("这是一张可以绑定的员工卡！")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.check,expression:"!check"}],staticClass:"info"},[e._v("这张卡不能绑定！")])]):e._e()]),e._v(" "),s("div",{staticClass:"btn",class:{active:1==e.check},on:{click:e.bindEmployeeCard}},[e._v("绑定员工卡")]),e._v(" "),s("van-number-keyboard",{attrs:{show:e.showKeyboard,"close-button-text":"完成"},on:{blur:function(t){e.showKeyboard=!1},input:e.onInput,delete:e.onDelete}})],1)],1)}),[],!1,null,"572404f5",null);t.default=n.exports}}]);