(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d9b30a7"],{"00d6":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"scroll",staticClass:"scroll-wrapper",on:{touchstart:t.touchstart}},[s("div",{ref:"scrollContent",staticClass:"scroll-content"},[t._t("default")],2)])},o=[],i=(s("a9e3"),s("4795"),s("1fba"));s("4de4"),s("4160"),s("159b");function n(t,e){var s,a,o,i={absolute:!1,clone:!1,includeMargin:!1,display:"block"},n=[],u="";s=function(){var e=[];c(t,e),e.push(t),o=e.filter((function(t){return"none"===r(t,"display")})),u+="visibility: hidden !important; display: "+i.display+" !important; ",!0===i.absolute&&(u+="position: absolute !important; "),o.forEach((function(t,e){var s=t.getAttribute("style");n.push(s),t.setAttribute("style",s?s+";"+u:u)}))},a=function(){o.forEach((function(t,e){var s=n[e];void 0===s?t.removeAttribute("style"):t.setAttribute("style",s)}))},s();var l=0;return"width"==e?l=t.clientWidth:"height"==e&&(l=t.clientHeight),a(),l}function c(t,e){t&&t.parentElement&&(e.push(t.parentNode),c(t.parentElement,e))}function r(t,e){return t.style[e]?t.style[e]:t.currentStyle?t.currentStyle[e]:window.getComputedStyle(t,null)[e]}var u=n,l={name:"",props:{dataList:{type:Array,default:function(){return[]}},click:{type:Boolean,default:!0},percentWidth:{type:Number,default:0}},data:function(){return{}},mounted:function(){this._refresh()},methods:{touchstart:function(t){},disable:function(){this.scroll&&this.scroll.disable()},enable:function(){this.scroll&&this.scroll.enable()},_refresh:function(){var t=this;this.$nextTick((function(){setTimeout((function(){t._setWidth(),t._initScroll()}),200)}))},_setWidth:function(){if(this.$refs.scrollContent){for(var t=this.$refs.scrollContent.children,e=this.$refs.scroll.clientWidth,s=0,a=0;a<t.length;a++){var o=t[a];this.percentWidth&&(o.style.width=e*this.percentWidth/100+"px"),s+=u(o,"width")}this.$refs.scrollContent.style.width=s+10+"px"}},_initScroll:function(){this.$refs.scroll&&(this.scroll=new i["a"](this.$refs.scroll,{scrollX:!0,scrollY:!1,click:this.click,preventDefault:!1}))}},components:{},watch:{dataList:{handler:function(t){t&&t.length&&this._refresh()},immediate:!0}}},p=l,d=(s("297f"),s("0c7c")),f=Object(d["a"])(p,a,o,!1,null,"77eb9db6",null);e["a"]=f.exports},"0358":function(t,e,s){"use strict";s("abb3")},"26fb":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"coupon-jfhq",style:t.getBgDivStyle()},[""!=t.totalAccount&&t.moduleData.showTips?s("div",{staticClass:"tip"},[t._v("您的账户还有"),s("span",{staticClass:"theme_font_red"},[t._v(t._s(t.totalAccount))]),t._v(t._s(t.accTypeName()))]):t._e(),2==t.moduleData.styleTempl?s("div",[t.moduleData.rows.length>0||1!=t.usePorpData?s("div",{staticClass:"coupon-content style-h",style:t.getSidesStyle()},[s("HScroll",{attrs:{dataList:t.moduleData.rows,click:!1}},t._l(t.moduleData.rows,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"item-content"},[s("div",{staticClass:"coupon"},[s("img",{staticClass:"bg-img",attrs:{src:"static/images/hk/coupon-bg-2.png"}}),s("div",{staticClass:"couFaceValue"},[t._v(t._s(e.skuPropValues||"0元"))]),s("div",{staticClass:"name single-line"},[t._v(t._s(e.shortName))])]),s("div",{staticClass:"price single-line"},[s("PriceOrder",{attrs:{listitem:e,isRMBEnd:!0}})],1),s("div",{staticClass:"btn",on:{click:function(s){return t.exchangeEvent(e)}}},[t._v("立即兑换")])])])})),0)],1):t._e()]):3==t.moduleData.styleTempl?s("div",[t.moduleData.rows.length>0||1!=t.usePorpData?s("div",{staticClass:"coupon-content style-3",style:t.getSidesStyle()},t._l(t.moduleData.rows,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("img",{staticClass:"bg-img",attrs:{src:"static/images/hk/coupon-bg.png"}}),s("div",{staticClass:"coup-cont"},[s("div",{staticClass:"couFaceValue"},[t._v("¥"),s("span",[t._v(t._s(e.couFaceValue))])]),s("div",{staticClass:"center-info line_left"},[s("div",{staticClass:"title"},[t._v(t._s(e.couTypeTitle))]),s("div",{staticClass:"term"},[t._v("有效期：兑换成功后90天内有效")])]),s("div",{staticClass:"right-div"},[s("div",[t._v("兑换价")]),s("div",{staticClass:"price single-line"},[t._v(t._s(t.excTypeVal(e)||0)+t._s(t.excTypeName(e)))]),s("div",{staticClass:"btn",on:{click:function(s){return t.exchangeEvent(e)}}},[t._v("立即兑换")])])])])})),0):t._e()]):s("div",[t.moduleData.rows.length>0||1!=t.usePorpData?s("div",{staticClass:"coupon-content",style:t.getSidesStyle()},t._l(t.moduleData.rows,(function(e,a){return s("div",{key:a,staticClass:"coupon-item"},[s("ExchangeCoupon",{attrs:{couponInfo:e,entryType:1}},[100==e.soldNum?s("div",{staticClass:"operate out"},[s("p",{staticClass:"title"},[t._v("消耗"+t._s(t.excTypeName(e)))]),s("div",[s("span",{staticClass:"point-wrapper"},[s("img",{staticClass:"img",attrs:{src:t.excTypeIcon(e),alt:""}}),s("span",{staticClass:"point-num"},[t._v(t._s(t.excTypeVal(e)))])])]),s("div",{staticClass:"btn"},[t._v("已抢光")])]):s("div",{staticStyle:{height:"100%"}},[e.isExchangeSuccess?s("div",{staticClass:"operate"},[s("img",{staticClass:"exchange-success",attrs:{src:"static/image/coupon/convert.png",alt:""}}),s("div",{staticClass:"btn theme_bg_red",on:{click:t.useCoupon}},[t._v("去使用")]),s("div",{staticClass:"btn theme_bg_red",on:{click:function(e){return t.exchangeContinue(a)}}},[t._v("继续兑换")])]):s("div",{staticClass:"operate"},[s("p",{staticClass:"title"},[t._v("消耗"+t._s(t.excTypeName(e)))]),s("div",[s("span",{staticClass:"point-wrapper"},[s("img",{staticClass:"img",attrs:{src:t.excTypeIcon(e),alt:""}}),s("span",{staticClass:"point-num"},[t._v(t._s(t.excTypeVal(e)||0))])])]),s("div",{staticClass:"btn",on:{click:function(s){return t.redeemNow(e,a)}}},[t._v("立即兑换 ")])])])])],1)})),0):t._e()])])},o=[],i=(s("c975"),s("289d")),n=s("00d6"),c=s("96a4"),r=s("590c"),u=s("03c6"),l={name:"coupon-jfhq",props:["myIndex","usePorpData","propData"],computed:{pageData:function(){return 1==this.usePorpData?this.propData:this.$store.state.pageData},moduleData:function(){return this.pageData.moduleList[this.myIndex].data}},components:{PriceOrder:r["a"],HScroll:n["a"],ExchangeCoupon:c["a"]},mixins:[u["a"]],data:function(){return{totalAccount:"",accountType:""}},methods:{exchangeEvent:function(t){this.$market.exchangeCoupon(t)},accTypeName:function(){var t="积分";return 9===this.accountType&&(t=this.$store.state.globalConfig.Employees_wallet||"福豆"),t},checkScore:function(){var t=this;if(""!=this.$store.state.login.token||-1==this.$store.state.webtype){var e={token:this.$store.state.login.token,acctType:this.accountType,groupValue:"1"};this.$http.post("/app/json/acct/getAccountBaseInfo",e).then((function(e){var s=e.data;if(0==s.status&&((3===t.accountType||9===t.accountType)&&(t.totalAccount=s.data.balanceUnit),t.moduleData.showTips)){var a="兑换成功，您的账户剩余"+t.totalAccount+t.accTypeName();t.$Toast(a)}}))}},exchangeContinue:function(t){for(var e=[],s=0;s<this.moduleData.rows.length;s++)t==s&&(this.moduleData.rows[s].isExchangeSuccess=!1),e.push(this.moduleData.rows[s]);this.moduleData.rows=e},useCoupon:function(){this.$util.linkToCouponList()},confirmExchange:function(t,e){var s=this;if(-1!=this.$store.state.webtype){this.$Loading.open();var a={token:this.$store.state.login.token,deliveryType:2,virtualUserPhone:this.$store.state.login.phone};t.perDiscountEmpRewardsPrice?(a.carts=[{number:1,skuId:t.skuId,storeOuCode:t.storeOuCode,empRewardsPrice:t.perDiscountEmpRewardsPrice,price:0,selfActivityId:t.activityId}],a.payDigital=[{payDigital:t.perDiscountEmpRewardsPrice,acctType:"EmpRewards"}]):t.perDiscountRewardsPrice?(a.carts=[{number:1,skuId:t.skuId,storeOuCode:t.storeOuCode,rewardsPrice:t.perDiscountRewardsPrice,price:0,selfActivityId:t.activityId}],a.payDigital=[{payDigital:t.perDiscountRewardsPrice,acctType:"Rewards"}]):(a.carts=[{number:1,skuId:t.skuId,storeOuCode:t.storeOuCode,pointsPrice:t.points,price:0,selfActivityId:t.activityId}],a.payDigital=[{payDigital:t.points,acctType:"Points"}]),this.$http.post("/app/json/app_shopping_order/submit",a).then((function(t){var a=t.data;if(0==a.status){for(var o=[],i=0;i<s.moduleData.rows.length;i++)e==i&&(s.moduleData.rows[i].isExchangeSuccess=!0),o.push(s.moduleData.rows[i]);s.moduleData.rows=o,s.checkScore(!0)}else s.$Toast(a.info);s.$Loading.close()}))}},redeemNow:function(t,e){-1!=this.$store.state.webtype&&(t.distCntCurUser>=t.discountGoodsCntPerUser?this.$Toast("每人限购".concat(t.discountGoodsCntPerUser,"个，您已到达上限，去看看其它商品吧！")):0==t.remainNum?this.$Toast("已售完"):100==t.selfSoldNum?this.$Toast("今日可领取次数已用尽"):this.confirmExchange(t,e))},excTypeVal:function(t){return t.activityTags.indexOf("YouDouExCoupon")>=0?t.perDiscountEmpRewardsPrice:t.activityTags.indexOf("RewardExCoupon")>=0?t.perDiscountRewardsPrice:t.points},excTypeIcon:function(t){var e="";return e=t.activityTags.indexOf("YouDouExCoupon")>=0||t.activityTags.indexOf("RewardExCoupon")>=0?100==t.soldNum?"static/image/coupon/emp-reward-dis.png":"static/image/coupon/emp-reward.png":100==t.soldNum?"static/image/coupon/point-de.png":"static/image/coupon/point-icon.png",e},excTypeName:function(t){var e="";return e=t.activityTags.indexOf("YouDouExCoupon")>=0||t.activityTags.indexOf("RewardExCoupon")>=0?this.$store.state.globalConfig.Employees_wallet||"福豆":"积分",e},_getMyData:function(){var t=this;if(null!=this.moduleData.couponFrom){var e=this.$market.apiBaseURL()+"/app/json/product/getAppProSearchList",s={page:1,rows:this.moduleData.couponFrom.number};""!=this.$store.state.login.token&&-1!=this.$store.state.webtype&&(s.token=this.$store.state.login.token),s.activityId=this.moduleData.couponFrom.activity.activityId,"513"==this.moduleData.productType&&(s.productType="513"),this.$http.post(e,s).then((function(e){var s=e.data;if(0==s.status){t.moduleData.rows=[];for(var a=s.data.list,o=0;o<a.length;o++){var i=t.$market.dataProcessing(a[o]);t.moduleData.rows.push(i)}if(a.length>0){var n=a[0];n.activityTags.indexOf("YouDouExCoupon")>=0||n.activityTags.indexOf("RewardExCoupon")>=0?t.accountType=9:t.accountType=3,t.checkScore()}}}),(function(t){}))}},getBgDivStyle:function(){var t="",e=this.moduleData.bgImgUrl;""!=e&&(t+="background: url('"+e+"') no-repeat center center / 100% 100%;");var s=this.moduleData.bgColor;return""!=s&&(t+="background-color: "+s+";"),t},getSidesStyle:function(){var t="",e=this.moduleData.sidesMargin;return e>0&&(t+="margin-left: "+e+"%; margin-right: "+e+"%;"),t},modeleReshow:function(){this._getMyData()}},created:function(){var t=this;this.moduleData.rows=[],this._getMyData(),i["a"].$on("CouponHQRefresh",(function(){t._getMyData()}))}},p=l,d=(s("0358"),s("0c7c")),f=Object(d["a"])(p,a,o,!1,null,"2015e432",null);e["default"]=f.exports},"297f":function(t,e,s){"use strict";s("6438")},6438:function(t,e,s){},"96a4":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"coupon-container"},[s("div",{staticClass:"coupon-left",on:{click:t.moveToDetail}},[s("div",{staticClass:"media-object",class:[t.formatCouType(t.couponInfo.couTypeCategoryAlias)]},[t.couponInfo.couPicReal||t.couponInfo.couPic?[0==t.entryType?s("img",{staticClass:"img",attrs:{src:t.couponInfo.couPicReal,alt:""}}):1==t.entryType?s("img",{staticClass:"img",attrs:{src:t.couponInfo.couPic,alt:""}}):t._e()]:[1!=t.couponInfo.isHideAmount?[10==t.couponInfo.couCategory?[s("div",{staticClass:"media-object-price-info"},[s("span",{staticClass:"unit"},[t._v("￥")]),s("span",{staticClass:"price"},[t._v(t._s(t.dealwithCouFaceValue(t.couponInfo.couFaceValue)))])])]:20==t.couponInfo.couCategory?[s("div",{staticClass:"media-object-price-info"},[s("span",{staticClass:"unit"},[t._v("￥")]),s("span",{staticClass:"price"},[t._v(t._s(t.dealwithCouFaceValue(t.couponInfo.couFaceValue)))])]),s("div",{staticClass:"msg"},[t._v("满"+t._s(t.couponInfo.couThresholdAmount)+"元可用")])]:40==t.couponInfo.couCategory?[t.couponInfo.couDiscountValue?s("div",{staticClass:"media-object-price-info"},[s("span",{staticClass:"price"},[t._v(t._s(t.getDiscount(t.couponInfo.couDiscountValue)))]),s("span",{staticClass:"unit"},[t._v("折")])]):s("div",{staticClass:"media-object-price-info"},[s("span",{staticClass:"price"},[t._v("折扣券")])]),s("div",{staticClass:"msg"},[t._v("满"+t._s(t.couponInfo.couThresholdAmount)+"元可用")])]:[s("div",{staticClass:"media-object-price-info"},[s("span",{staticClass:"unit"},[t._v("￥")]),s("span",{staticClass:"price"},[t._v(t._s(t.couponInfo.couFaceValue))])])]]:[s("span",[t._v(t._s(t.couponInfo.couTypeTitle))])]]],2),(0==t.entryType&&t.couponInfo.couFaceValueType,s("div",{staticClass:"content"},[s("p",{staticClass:"name single-line coupon-title"},[t._v(t._s(t.couponInfo.couTypeTitle))])]))]),s("div",{staticClass:"coupon-right"},[t._t("default")],2)])},o=[],i=(s("a9e3"),s("e25e"),{JY:"bg-color-4",CZ:"bg-color-3",DSF:"bg-color-2",BLD:"bg-color-1",SC:"bg-color-0"}),n={name:"",props:{disabled:{type:Boolean,default:!1},couponInfo:{type:Object,required:!1,default:function(){return{}}},entryType:{type:Number,required:!1,default:0}},data:function(){return{}},mounted:function(){},methods:{dealwithCouFaceValue:function(t){return Number(t)>100?parseInt(t):t},getDiscount:function(t){return 1e3*t/100},calAmount:function(t){return t?(t=parseInt(t),t):0},calRandomAmount:function(t,e){return t&&e?t+"-"+e:"0-0"},formatCouType:function(t){return this.couponInfo.couPicReal||this.couponInfo.couPic?"":t&&i[t]?i[t]:"bg-color-1"},moveToDetail:function(){this.$emit("moveDetail",this.couponInfo)}},components:{}},c=n,r=(s("e5de"),s("0c7c")),u=Object(r["a"])(c,a,o,!1,null,"4541b098",null);e["a"]=u.exports},abb3:function(t,e,s){},aea9:function(t,e,s){},e5de:function(t,e,s){"use strict";s("aea9")}}]);