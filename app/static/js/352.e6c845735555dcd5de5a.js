(window.webpackJsonp=window.webpackJsonp||[]).push([[352],{"0xSJ":function(t,e,a){"use strict";var s=a("0oIA"),i=a("EyXw"),n=a("FCEd"),o=a("mISK"),r=a("d0T1"),l=a("rQYt"),c=a("5B+z"),u=Object(s.a)("dropdown-item"),p=u[0],d=u[1];e.a=p({mixins:[Object(n.a)({ref:"wrapper"}),Object(o.a)("vanDropdownMenu")],props:{value:null,title:String,disabled:Boolean,titleClass:String,options:{type:Array,default:function(){return[]}},lazyRender:{type:Boolean,default:!0}},data:function(){return{transition:!0,showPopup:!1,showWrapper:!1}},computed:{displayTitle:function(){var t=this;if(this.title)return this.title;var e=this.options.filter((function(e){return e.value===t.value}));return e.length?e[0].text:""}},watch:{showPopup:function(t){this.bindScroll(t)}},beforeCreate:function(){var t=this,e=function(e){return function(){return t.$emit(e)}};this.onOpen=e("open"),this.onClose=e("close"),this.onOpened=e("opened")},methods:{toggle:function(t,e){void 0===t&&(t=!this.showPopup),void 0===e&&(e={}),t!==this.showPopup&&(this.transition=!e.immediate,this.showPopup=t,t&&(this.parent.updateOffset(),this.showWrapper=!0))},bindScroll:function(t){var e=this.parent.scroller;(t?i.b:i.a)(e,"scroll",this.onScroll,!0)},onScroll:function(){this.parent.updateOffset()},onClickWrapper:function(t){this.getContainer&&t.stopPropagation()}},render:function(){var t=this,e=arguments[0],a=this.parent,s=a.zIndex,i=a.offset,n=a.overlay,o=a.duration,u=a.direction,p=a.activeColor,v=a.closeOnClickOverlay,h=this.options.map((function(a){var s=a.value===t.value;return e(r.a,{attrs:{clickable:!0,icon:a.icon,title:a.text},key:a.value,class:d("option",{active:s}),style:{color:s?p:""},on:{click:function(){t.showPopup=!1,a.value!==t.value&&(t.$emit("input",a.value),t.$emit("change",a.value))}}},[s&&e(l.a,{class:d("icon"),attrs:{color:p,name:"success"}})])})),f={zIndex:s};return"down"===u?f.top=i+"px":f.bottom=i+"px",e("div",[e("div",{directives:[{name:"show",value:this.showWrapper}],ref:"wrapper",style:f,class:d([u]),on:{click:this.onClickWrapper}},[e(c.a,{attrs:{overlay:n,position:"down"===u?"top":"bottom",duration:this.transition?o:0,lazyRender:this.lazyRender,overlayStyle:{position:"absolute"},closeOnClickOverlay:v},class:d("content"),on:{open:this.onOpen,close:this.onClose,opened:this.onOpened,closed:function(){t.showWrapper=!1,t.$emit("closed")}},model:{value:t.showPopup,callback:function(e){t.showPopup=e}}},[h,this.slots("default")])])])}})},CdMl:function(t,e,a){"use strict";a("aO+S"),a("rshv")},LW2U:function(t,e,a){"use strict";var s=a("0oIA"),i=a("oUJm"),n=a("qMEG"),o=a("mISK"),r=a("siKa"),l=Object(s.a)("dropdown-menu"),c=l[0],u=l[1];e.a=c({mixins:[Object(o.b)("vanDropdownMenu"),Object(r.a)({event:"click",method:"onClickOutside"})],props:{zIndex:[Number,String],activeColor:String,overlay:{type:Boolean,default:!0},duration:{type:[Number,String],default:.2},direction:{type:String,default:"down"},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return{offset:0}},computed:{scroller:function(){return Object(n.d)(this.$el)},opened:function(){return this.children.some((function(t){return t.showWrapper}))},barStyle:function(){if(this.opened&&Object(i.c)(this.zIndex))return{zIndex:1+this.zIndex}}},methods:{updateOffset:function(){if(this.$refs.bar){var t=this.$refs.bar.getBoundingClientRect();"down"===this.direction?this.offset=t.bottom:this.offset=window.innerHeight-t.top}},toggleItem:function(t){this.children.forEach((function(e,a){a===t?e.toggle():e.showPopup&&e.toggle(!1,{immediate:!0})}))},onClickOutside:function(){this.children.forEach((function(t){t.toggle(!1)}))}},render:function(){var t=this,e=arguments[0],a=this.children.map((function(a,s){return e("div",{attrs:{role:"button",tabindex:a.disabled?-1:0},class:u("item",{disabled:a.disabled}),on:{click:function(){a.disabled||t.toggleItem(s)}}},[e("span",{class:[u("title",{active:a.showPopup,down:a.showPopup===("down"===t.direction)}),a.titleClass],style:{color:a.showPopup?t.activeColor:""}},[e("div",{class:"van-ellipsis"},[a.slots("title")||a.displayTitle])])])}));return e("div",{class:u()},[e("div",{ref:"bar",style:this.barStyle,class:u("bar",{opened:this.opened})},[a]),this.slots("default")])}})},PeCu:function(t,e,a){"use strict";var s=a("eMQY");a.n(s).a},T7q0:function(t,e,a){"use strict";a.r(e),a("Ya7C");var s,i=a("0xSJ"),n=(a("CdMl"),a("LW2U")),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t};function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l={name:"myPackage",components:(s={},r(s,n.a.name,n.a),r(s,i.a.name,i.a),s),data:function(){return{isLoading:!0,finished:!1,cardList:[],show:!1,type:"定制游",useState:[0],value1:-1,option1:[{text:"全部",value:-1},{text:"定制游",value:0},{text:"礼宾车",value:1},{text:"签证",value:2}],pageInfo:{page:0,rows:10},tempUseState:0}},methods:{loadMore:function(){var t=this,e="",a=o({useStateList:this.useState},this.pageInfo);switch(this.value1){case-1:e="/app/json/equity_use_travel/equityUseOrder",delete a.useStateList,a.useState=this.tempUseState;break;case 0:e="/app/json/equity_use_travel/getTravelList";break;case 1:e="/app/json/equity_use_car/getCarList";break;case 2:e="/app/json/equity_use_visa/getVisaList"}this.isLoading=!0,this.pageInfo.page++,this.$Loading.open(),this.$http.post(e,a).then((function(e){t.isLoading=!1;var a,s=e.data;0==s.status?s.data instanceof Array?(s.data.forEach((function(e){-1==t.value1?51005==e.equityTypeCode?e.showType=0:51001==e.equityTypeCode?e.showType=1:51006==e.equityTypeCode&&(e.showType=2):e.showType=t.value1})),(a=t.cardList).push.apply(a,function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(s.data)),t.cardList.length>=s.totalRecords&&(t.finished=!0)):t.finished=!0:(t.finished=!0,t.$Toast(s.info)),t.$Loading.close()})).catch((function(e){t.finished=!0,t.$Toast(e),t.$Loading.close()}))},changeTabs:function(t){this.tempUseState=t,this.useState[0]!=t&&(this.pageInfo={page:0,rows:10},this.cardList=[],this.isLoading=!0,this.finished=!1,this.useState=[],3==t?(this.useState.push(3),this.useState.push(4)):this.useState.push(t),this.loadMore())},select:function(t){this.pageInfo={page:0,rows:10},this.cardList=[],this.isLoading=!0,this.finished=!1,this.loadMore()},variClass:function(t){var e="";switch(t){case 1:e="pickUp";break;case 2:e="passport";break;case 0:e="cust-travel";break;default:e=""}return e},variStatus:function(t,e){var a="";switch(t){case 1:a=1==e.serviceType?"接机":"送机";break;case 2:a="签证";break;case 0:a="定制游";break;default:a=""}return a},variStatus1:function(t){var e="";switch(t[0]){case 0:e="未受理";break;case 1:e="受理中";break;case 2:e="已受理";break;case 3:e="已取消";break;default:e=""}return e},variStatus2:function(t){var e="";switch(t[0]){case 0:e="noget";break;case 1:e="getting";break;case 2:e="geted";break;case 3:e="canceled";break;default:e=""}return e},onSelect:function(t){this.type=t.name,this.show=!1,this.loadMore()},cancel:function(t){var e=this;console.log(666,t);var a="";switch(this.value1){case 0:a="/app/json/equity_use_travel/appUpdateTravelStatus";break;case 1:a="/app/json/equity_use_car/appUpdateCarStatus";break;case 2:a="/app/json/equity_use_visa/appUpdateVisaStatus";break;case-1:"51006"==t.equityTypeCode?a="/app/json/equity_use_visa/appUpdateVisaStatus":"51005"==t.equityTypeCode?a="/app/json/equity_use_travel/appUpdateTravelStatus":"51001"==t.equityTypeCode&&(a="/app/json/equity_use_car/appUpdateCarStatus")}var s={useState:4,id:t.id};this.$http.post(a,s).then((function(t){var a=t.data;0==a.status?(e.$Toast("取消成功"),e.cardList=[],e.loadMore()):e.$Toast(a.info)})).catch((function(t){e.$Toast(t)}))}},beforeRouteLeave:function(t,e,a){"/coupon_service_detail"!=t.path&&this.$keepaliveHelper.deleteCache(this),a()},created:function(){this.loadMore()}},c=(a("PeCu"),a("KHd+")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-top",{on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),a("nav-content",{staticClass:"package"},[a("van-dropdown-menu",[a("van-dropdown-item",{attrs:{options:t.option1},on:{change:t.select},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1),t._v(" "),a("van-tabs",{attrs:{color:"#C9A063"},on:{click:t.changeTabs}},[a("van-tab",{attrs:{title:"未受理"}}),t._v(" "),a("van-tab",{attrs:{title:"受理中"}}),t._v(" "),a("van-tab",{attrs:{title:"已受理"}}),t._v(" "),a("van-tab",{attrs:{title:"已取消"}})],1),t._v(" "),a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",offset:200},on:{load:t.loadMore},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[0!==t.cardList.length?a("ul",{staticClass:"card-c"},t._l(t.cardList,(function(e,s){return a("li",{key:s,staticClass:"item"},[a("div",{staticClass:"btn-con"},[a("van-button",{staticClass:"type",class:t.variClass(t.value1),attrs:{round:"",type:"info"}},[t._v(t._s(t.variStatus(e.showType,e)))]),t._v(" "),a("van-button",{staticClass:"status",class:t.variStatus2(t.useState),attrs:{square:"",type:"primary"}},[t._v(t._s(t.variStatus1(t.useState)))])],1),t._v(" "),1==e.showType?a("div",{staticClass:"content"},[a("div",{staticClass:"time"},[a("label",{staticClass:"label-name"},[t._v("预约时间：")]),a("span",{staticClass:"real-name"},[t._v(t._s(e.useBeginTime))])]),t._v(" "),a("div",{staticClass:"from"},[a("label",{staticClass:"label-name"},[t._v("from：")]),a("span",{staticClass:"real-name"},[t._v(" "+t._s(e.useStartPlace))])]),t._v(" "),a("div",{staticClass:"to"},[a("label",{staticClass:"label-name"},[t._v("to：")]),a("span",{staticClass:"real-name"},[t._v(t._s(e.useEndPlace))])]),t._v(" "),a("div",{staticClass:"bordNo"},[a("label",{staticClass:"label-name"},[t._v("航班号：")]),a("span",{staticClass:"real-name"},[t._v(" "+t._s(e.flightNo))])])]):t._e(),t._v(" "),2==e.showType?a("div",{staticClass:"content"},[a("div",{staticClass:"time"},[a("label",{staticClass:"label-name"},[t._v("计划出行日期：")]),a("span",{staticClass:"real-name"},[t._v(t._s(e.useBeginTime.split(" ")[0]))])]),t._v(" "),a("div",{staticClass:"from"},[a("label",{staticClass:"label-name"},[t._v("签证国家：")]),a("span",{staticClass:"real-name"},[t._v(" "+t._s(e.targetPlace))])])]):t._e(),t._v(" "),0==e.showType?a("div",{staticClass:"content"},[a("div",{staticClass:"time"},[a("label",{staticClass:"label-name"},[t._v("计划出行日期：")]),a("span",{staticClass:"real-name"},[t._v(t._s(e.useBeginTime.split(" ")[0]))])]),t._v(" "),a("div",{staticClass:"from"},[a("label",{staticClass:"label-name"},[t._v("出发城市：")]),a("span",{staticClass:"real-name"},[t._v(" "+t._s(e.useStartPlace))])]),t._v(" "),a("div",{staticClass:"to"},[a("label",{staticClass:"label-name"},[t._v("目的地：")]),a("span",{staticClass:"real-name"},[t._v(t._s(e.useEndPlace))])])]):t._e(),t._v(" "),0==t.useState[0]?a("div",{staticClass:"handle"},[a("van-button",{staticClass:"btn",attrs:{round:"",type:"primary"},on:{click:function(a){return t.cancel(e)}}},[t._v("取消预约")])],1):t._e()])})),0):t._e()])],1)],1)}),[],!1,null,"4b13675e",null);e.default=u.exports},Ya7C:function(t,e,a){"use strict";a("aO+S"),a("pxog"),a("nXDD"),a("N0PS"),a("GgQP"),a("TXUN"),a("sswI")},eMQY:function(t,e,a){}}]);