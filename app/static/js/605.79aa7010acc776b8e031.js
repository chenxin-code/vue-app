(window.webpackJsonp=window.webpackJsonp||[]).push([[605],{Qu8T:function(e,t,o){},R80z:function(e,t,o){"use strict";o.r(t),o("4X9F");var r=o("IkEG"),n=o("db0i"),i=(o("p46w"),o("sxGJ")),s=o.n(i),a={name:"index",components:{},data:function(){return{payInfo:{},payWay:[],hasToPay:!1,payTime:0,selectedPayWay:null,occurOuCode:"",getResultTimes:0,tradeNo:"",payment:"",isSubstitutePay:0,substitutePayActive:-1,substitutePayWay:[{tips:"单",name:"单人代付"},{tips:"多",name:"多人代付"}],showCopyBtn:!1,copyBtn:null,isSuccessed:!1,lbId:"",lsProductName:"",isBulk:!1,bulkData:{},isX:!1}},methods:{getCopyText:function(){return window.location.href+"&token="+this.$store.state.login.token},copyLink:function(){var e=this;this.copyBtn.on("success",(function(t){e.$Toast("复制成功，请用默认浏览器，打开复制的链接地址，并且支付订单！"),e.showCopyBtn=!1,setTimeout((function(){e.$MessageBox.confirm("复制成功，请用默认浏览器，打开复制的链接地址，并且支付订单！","提示",{confirmButtonText:"我已支付"}).then((function(t){e.getResultTimes=0,e.enterSuccess()})).catch((function(e){}))}),2e3)})),this.copyBtn.on("error",(function(e){console.log(e)}))},backEvent:function(){localStorage.getItem("fromShoppingCar")?(localStorage.removeItem("fromShoppingCar"),this.$router.push({path:"/mall2/orderlist",query:{selectedIndex:0}})):this.$router.go(-1)},payWaySelected:function(e){""!=e.payModeSub?(console.log(e),this.selectedPayWay=e,this.substitutePayActive=-1):this.$Toast("暂未开通！")},payEvent:function(){var e=this;if(console.log("微信h5支付：：：：：：",this.selectedPayWay.payModeSub),console.log("代付支付：：：：：：：：：",this.$store.state.globalConfig.replace_pay_enable,this.isSubstitutePay),console.log("团购订单：：：：：：：：：",this.$route.query.type),console.log("砍价订单：：：：：：：：：",this.$route.query.isWashCarOrder),console.log("砍价订单：：：：：：：：：",this.$route.query.washingWay),console.log("砍价订单：：：：：：：：：",this.$route.query.isGroup),null!=this.selectedPayWay)if("210004"==this.selectedPayWay.payModeSub&&this.$util.isWeiXin())r.a.confirm({title:"提示",message:"请在默认浏览器中打开",showCancelButton:!1,confirmButtonText:"知道了"});else if(this.hasToPay=!0,this.payTime=(new Date).getTime(),1==this.$store.state.globalConfig.replace_pay_enable&&this.isSubstitutePay)n.a.substitutePayEvent(this.selectedPayWay,this.payInfo.orderType,this.payInfo.orderId,this.payInfo.payAmount).then((function(t){e.$route.query.payInfo.style,e.enterSuccess()})).catch((function(){e.hasToPay=!1}));else if("app_purchase_order"==this.$route.query.type)n.a.payPurchaseEvent(this.selectedPayWay,this.payInfo.orderType,this.payInfo.orderId).then((function(t){e.$route.query.payInfo.style,e.enterSuccess()})).catch((function(){e.hasToPay=!1}));else{var t="";if(1==this.$route.query.isWashCarOrder?(t="/carWash/paySuccess?orderId="+this.payInfo.orderId+"&orderType="+this.payInfo.orderType+"&tradeNo="+this.payInfo.tradeNo+"&deliverCheckcode="+this.payInfo.deliverCheckcode+"&deviceCode="+this.$route.query.deviceCode+"&storeOuCode="+this.$route.query.storeOuCode+"&stationName="+this.$route.query.stationName,2!=this.$route.query.washingWay&&"2"!=this.$route.query.washingWay||(t="/carWash/scanPaySuccess?state=3&orderId="+this.payInfo.orderId+"&orderType="+this.payInfo.orderType+"&tradeNo="+this.payInfo.tradeNo+"&deliverCheckcode="+this.payInfo.deliverCheckcode+"&deviceCode="+this.$route.query.deviceCode+"&storeOuCode="+this.$route.query.storeOuCode+"&stationName="+this.$route.query.stationName)):"1"==this.$route.query.isGroup&&(t="/group_detail?skuId="+this.$route.query.skuId+"&productType="+this.$route.query.productType+"&groupId="+this.$route.query.groupId+"&orderId="+this.$route.query.orderId+"&mktGroupBuyId="+this.$route.query.mktGroupBuyId+"&formPaySuccess=1"),this.isBulk)return void n.a.payEvent(this.selectedPayWay,this.bulkData.orderType,this.bulkData.orderId,"/paySuccess").then((function(t){console.log("paySuccess"),e.enterSuccess(t)})).catch((function(){e.hasToPay=!1}));if(2==this.$store.state.webtype||3==this.$store.state.webtype){var o=!1;"1"==this.$route.query.isGroup?(o=!0,this.setWxOrderInfo({skuId:this.$route.query.skuId,productType:this.$route.query.productType,groupId:this.$route.query.groupId,orderId:this.$route.query.orderId,mktGroupBuyId:this.$route.query.mktGroupBuyId,formPaySuccess:"1"},t,o)):(o=!1,this.setWxOrderInfo({state:3,orderId:this.payInfo.orderId,orderType:this.payInfo.orderType,tradeNo:this.payInfo.tradeNo,tag:1,deliverCheckcode:this.payInfo.deliverCheckcode,deviceCode:this.$route.query.deviceCode,storeOuCode:this.$route.query.storeOuCode,stationName:this.$route.query.stationName,selectedIndex:"1",orderCategory:this.$route.query.orderCategory,vipUnitUserCode:this.$route.query.vipUnitUserCode,type:this.$route.query.type||""},t,o))}else n.a.payEvent(this.selectedPayWay,this.payInfo.orderType,this.payInfo.orderId,t).then((function(t){"travel"==e.$route.query.payInfo.style?e.enterSuccess():e.enterSuccess(t)})).catch((function(){e.hasToPay=!1}))}else this.$Toast("请选择支付方式！")},setWxOrderInfo:function(e,t,o){var r=this;this.$http.post("/app/json/home/vueAppTempData",{tempData:e}).then((function(e){var i;0==e.data.status&&(i=e.data.data,n.a.payEvent(r.selectedPayWay,r.payInfo.orderType,r.payInfo.orderId,t,i,o).then((function(e){"travel"==r.$route.query.payInfo.style?r.enterSuccess():r.enterSuccess(e)})).catch((function(){r.hasToPay=!1})))}))},substitutePayEvent:function(){var e=this;n.a.payEvent({payMode:500,payModeSub:0==this.substitutePayActive?500001:500002},this.payInfo.orderType,this.payInfo.orderId).then((function(t){e.$router.push({path:"/substitute_pay",query:{payType:e.substitutePayActive,payInfo:t.payInfo,tradeNo:t.tradeNo}})}))},pustLiveStreamMsg:function(){var e=this;if(""!=this.lbId){var t={lbId:this.lbId,content:"【下单】成功下单 "+this.lsProductName+" 🎉🎉🎉"};this.$http.post("/app/json/live_broadcast/comment",t).then((function(t){var o=t.data;0==o.status||e.$Toast(o.info)}),(function(e){console.log(e)}))}},enterSuccess:function(e){if(!this.isSuccessed)if(this.pustLiveStreamMsg(),this.isSuccessed=!0,"1"!=this.$route.query.isGroup)if("songli"!=this.$route.query.buyType){if(1==this.$route.query.isContractOrder)return this.hasToPay=!1,void this.$router.replace({path:"/contract-order-success",query:{packageRefuelId:this.$route.query.packageRefuelId,bundleName:this.$route.query.bundleName,rebateNum:this.$route.query.rebateNum}});if(1==this.$route.query.isWashCarOrder){this.hasToPay=!1;var t="/carWash/paySuccess";return 2!=this.$route.query.washingWay&&"2"!=this.$route.query.washingWay||(t="/carWash/scanPaySuccess"),void this.$router.replace({path:t,query:{state:3,orderId:this.payInfo.orderId,orderType:this.payInfo.orderType,tradeNo:this.payInfo.tradeNo,deliverCheckcode:this.payInfo.deliverCheckcode,deviceCode:this.$route.query.deviceCode,storeOuCode:this.$route.query.storeOuCode,stationName:this.$route.query.stationName}})}console.log("唤起邻里邦支付平台");var o={state:3,orderId:this.payInfo.orderId,orderType:this.payInfo.orderType,tradeNo:this.payInfo.tradeNo,tag:1,deliverCheckcode:this.payInfo.deliverCheckcode,deviceCode:this.$route.query.deviceCode,storeOuCode:this.$route.query.storeOuCode,stationName:this.$route.query.stationName};console.log(o),localStorage.setItem("currentOrderDetails",JSON.stringify(o)),r=JSON.parse(JSON.parse(e.payInfo)),window.location.href="x-engine-json://yjzdbill/YJBillPayment?args="+encodeURIComponent(JSON.stringify({businessCstNo:r.businessCstNo,platMerCstNo:r.platMerCstNo,tradeMerCstNo:r.tradeMerCstNo,billNo:r.billNo,appScheme:"x-engine-c",payType:!1}))+"&callback="+encodeURIComponent(location.origin+"/app-vue/app/index.html#/mall2/paysuccess?selectedIndex=1&orderCategory="+this.$route.query.orderCategory+"&vipUnitUserCode="+this.$route.query.vipUnitUserCode+"&type="+this.$route.query.type+"&ret={ret}")}else this.$router.replace({path:"/config-giftBox",query:{payInfo:this.$route.query.payInfo,carts:this.$route.query.giftCards,songliGoodsImgs:JSON.stringify(this.songliGoodsImgs),deliveryType:this.$route.query.deliveryType}});else{console.log("res-----------",e);var r=JSON.parse(JSON.parse(e.payInfo));window.location.href="x-engine-json://yjzdbill/YJBillPayment?args="+encodeURIComponent(JSON.stringify({businessCstNo:r.businessCstNo,platMerCstNo:r.platMerCstNo,tradeMerCstNo:r.tradeMerCstNo,billNo:r.billNo,appScheme:"x-engine-c",payType:!1}))+"&callback="+encodeURIComponent(location.origin+"/app-vue/app/index.html#/group_detail?skuId="+this.$route.query.skuId+"&productType="+this.$route.query.productType+"&groupId="+this.$route.query.groupId+"&orderId="+this.$route.query.orderId+"&mktGroupBuyId="+this.$route.query.mktGroupBuyId+"&formPaySuccess='1'&ret={ret}")}},setPayWays:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("travel"!=t.$route.query.style){e.next=6;break}return e.next=3,n.a.getPayWays("200104",t.occurOuCode);case 3:t.payWay=e.sent,e.next=27;break;case 6:if(1!=t.$store.state.globalConfig.replace_pay_enable||1!=t.isSubstitutePay){e.next=12;break}return e.next=9,n.a.getPayWays("200001007",t.occurOuCode);case 9:t.payWay=e.sent,e.next=27;break;case 12:if(1!=t.$route.query.isWashCarOrder){e.next=18;break}return e.next=15,n.a.getPayWays("200030",t.occurOuCode);case 15:t.payWay=e.sent,e.next=27;break;case 18:if(!t.isBulk){e.next=24;break}return e.next=21,n.a.getPayWays("200501",t.bulkData.occurOuCode);case 21:t.payWay=e.sent,e.next=27;break;case 24:return e.next=26,n.a.getPayWays("200001",t.occurOuCode);case 26:t.payWay=e.sent;case 27:t.payWay.length>0&&(t.selectedPayWay=t.payWay[0]);case 28:case"end":return e.stop()}}),e,t)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,o){return function r(n,i){try{var s=t[n](i),a=s.value}catch(e){return void o(e)}if(!s.done)return Promise.resolve(a).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(a)}("next")}))})()},checkPayResult:function(){var e=this;this.$Loading.open();var t={token:this.$store.state.login.token,tradeNo:this.payInfo.tradeNo};this.$http.post("/app/json/app_shopping_order/queryPayState",t).then((function(t){e.$Loading.close();var o=t.data;if(0==o.status)if(1==o.data.state)e.enterSuccess();else{if(e.getResultTimes++,e.getResultTimes>2)return;setTimeout((function(){e.checkPayResult()}),500)}}),(function(t){e.$Loading.close()}))},substitutePayClick:function(e,t){this.selectedPayWay={},this.substitutePayActive=t}},created:function(){this.$route.query.isBulk&&this.$route.query.bulkData&&(this.isBulk=JSON.parse(this.$route.query.isBulk),this.bulkData=JSON.parse(this.$route.query.bulkData)),this.lbId=this.$route.query.lbId||"",this.lsProductName=this.$route.params.lsProductName||"",this.isSubstitutePay=this.$route.query.isSubstitutePay||0,this.occurOuCode=this.$route.query.occurOuCode?this.$route.query.occurOuCode:"",this.payInfo=this.$route.query.payInfo?JSON.parse(this.$route.query.payInfo):{},this.$mallCommon.dataProcessing(this.payInfo),this.setPayWays(),/iphone/gi.test(navigator.userAgent)&&812==screen.height&&375==screen.width?(console.log("是iphonex"),this.isX=!0):(console.log("不是iphonex"),this.isX=!1)},mounted:function(){var e=this;this.$bridgefunc.enterForegroundCallBack((function(){if(!e.isSuccessed){var t=(new Date).getTime()-e.payTime;e.hasToPay&&t>3e3&&(e.hasToPay=!1,e.getResultTimes=0,e.checkPayResult())}})),this.$refs.copybtn&&(this.copyBtn=new s.a(this.$refs.copybtn))},activated:function(){},beforeRouteLeave:function(e,t,o){this.$keepaliveHelper.deleteCache(this),o()}},u=(o("YoL4"),o("KHd+")),c=Object(u.a)(a,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"index mall2"},[o("nav-top",{on:{backEvent:e.backEvent}}),e._v(" "),o("nav-content",[o("div",{staticClass:"block-div"},[o("div",[o("div",{staticClass:"flex-row"},[o("div",{staticClass:"theme_font_common"},[e._v("\n            需支付：\n            "),o("span",{staticClass:"font-small theme_font_red"},[e._v("￥")]),e._v(" "),e.isBulk?e._e():o("span",{staticClass:"price-z theme_font_red"},[e._v(e._s(e.payInfo.dpedData.integer))]),e._v(" "),e.isBulk?e._e():o("span",{staticClass:"left-no-space font-small theme_font_red"},[e._v("."+e._s(e.payInfo.dpedData.decimals))]),e._v(" "),e.isBulk?o("span",{staticClass:"price-z theme_font_red"},[e._v(e._s(e.$util.toDecimal2(e.bulkData.payAmount)))]):e._e()])]),e._v(" "),o("div",{staticClass:"flex-row"},[e.isBulk?o("div",{staticClass:"theme_font_common"},[e._v("\n            交易号："+e._s(e.bulkData.tradeNo)+"\n          ")]):o("div",{staticClass:"theme_font_common"},[e._v("\n            交易号："+e._s(e.payInfo.tradeNo)+"\n          ")])])])]),e._v(" "),o("div",{staticClass:"block-div"},[o("div",{staticClass:"flex-row"},[o("div",{staticClass:"title"},[e._v("支付方式")])]),e._v(" "),e._l(e.payWay,(function(t){return o("div",{key:t.text,staticClass:"flex-row",on:{click:function(o){return e.payWaySelected(t)}}},[o("div",{staticClass:"icon-div"},[o("img",{attrs:{src:t.icon}})]),e._v(" "),o("div",{staticClass:"full"},[e._v(e._s(t.text))]),e._v(" "),o("div",{staticClass:"selected-mark"},[e.selectedPayWay.payModeSub!=t.payModeSub?o("i",{staticClass:"iconfont mall-weixuanzhong theme_font_tint"}):e._e(),e._v(" "),e.selectedPayWay.payModeSub==t.payModeSub?o("i",{staticClass:"iconfont mall-xuanzhong theme_font_red"}):e._e()])])}))],2),e._v(" "),o("div",{staticClass:"bottom-box"},[-1===e.substitutePayActive&&0==e.isBulk?o("div",{staticClass:"bottom-btn theme_font_white theme_standard_bg",on:{click:e.payEvent}},[e._v("\n        支付￥"+e._s(e.$util.toDecimal2(e.payInfo.payAmount))+"元\n      ")]):e.isBulk?o("div",{staticClass:"bottom-btn theme_font_white theme_standard_bg",on:{click:e.payEvent}},[e._v("\n        支付￥"+e._s(e.$util.toDecimal2(e.bulkData.payAmount))+"元\n      ")]):o("div",{staticClass:"bottom-btn theme_font_white theme_standard_bg",on:{click:e.substitutePayEvent}},[e._v("\n        找人代付￥"+e._s(e.$util.toDecimal2(e.payInfo.payAmount))+"元\n      ")]),e._v(" "),e.isX?o("div",{staticClass:"adapter-iphoneX"}):e._e()])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.showCopyBtn,expression:"showCopyBtn"}],staticClass:"copy-div"},[o("div",{staticClass:"text"},[e._v("请用默认浏览器打开")]),e._v(" "),o("div",{staticClass:"btn-div"},[o("div",{ref:"copybtn",staticClass:"copy-btn",attrs:{"data-clipboard-text":e.getCopyText()},on:{click:e.copyLink}},[e._v("\n        复制链接\n      ")])])])],1)}),[],!1,null,"1ff87d52",null);t.default=c.exports},YoL4:function(e,t,o){"use strict";var r=o("Qu8T");o.n(r).a},sxGJ:function(e,t,o){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
var r;r=function(){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),i=u(o(1)),s=u(o(3)),a=u(o(4));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(o),r.listenClick(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),n(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===r(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,a.default)(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,o=!!document.queryCommandSupported;return t.forEach((function(e){o=o&&!!document.queryCommandSupported(e)})),o}}]),t}();function l(e,t){var o="data-clipboard-"+e;if(t.hasAttribute(o))return t.getAttribute(o)}e.exports=c},function(e,t,o){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),s=(r=o(2))&&r.__esModule?r:{default:r},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=o+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,s.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,s.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":n(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=a},function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var o=e.hasAttribute("readonly");o||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),o||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),n=document.createRange();n.selectNodeContents(e),r.removeAllRanges(),r.addRange(n),t=r.toString()}return t}},function(e,t){function o(){}o.prototype={on:function(e,t,o){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:o}),this},once:function(e,t,o){var r=this;function n(){r.off(e,n),t.apply(o,arguments)}return n._=t,this.on(e,n,o)},emit:function(e){for(var t=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),r=0,n=o.length;r<n;r++)o[r].fn.apply(o[r].ctx,t);return this},off:function(e,t){var o=this.e||(this.e={}),r=o[e],n=[];if(r&&t)for(var i=0,s=r.length;i<s;i++)r[i].fn!==t&&r[i].fn._!==t&&n.push(r[i]);return n.length?o[e]=n:delete o[e],this}},e.exports=o},function(e,t,o){var r=o(5),n=o(6);e.exports=function(e,t,o){if(!e&&!t&&!o)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(o))throw new TypeError("Third argument must be a Function");if(r.node(e))return function(e,t,o){return e.addEventListener(t,o),{destroy:function(){e.removeEventListener(t,o)}}}(e,t,o);if(r.nodeList(e))return function(e,t,o){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,o)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,o)}))}}}(e,t,o);if(r.string(e))return function(e,t,o){return n(document.body,e,t,o)}(e,t,o);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var o=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===o||"[object HTMLCollection]"===o)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,o){var r=o(7);function n(e,t,o,n,i){var s=function(e,t,o,n){return function(o){o.delegateTarget=r(o.target,t),o.delegateTarget&&n.call(e,o)}}.apply(this,arguments);return e.addEventListener(o,s,i),{destroy:function(){e.removeEventListener(o,s,i)}}}e.exports=function(e,t,o,r,i){return"function"==typeof e.addEventListener?n.apply(null,arguments):"function"==typeof o?n.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return n(e,t,o,r,i)})))}},function(e,t){if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}}])},e.exports=r()}}]);