(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67913326"],{"476d":function(e,t,s){"use strict";var o="/app/json/micro_store_front_end/applyMicroStore",a="/app/json/micro_store_front_end/queryMicroStoreOpenState",n="/app/json/micro_store_front_end/queryMicroStoreOpenProcess",i="/app/json/micro_store_front_end/queryMicroStoreForProfit",r="/app/json/micro_store_front_end/getRewardTypeList",c="/app/json/micro_store_front_end/cashEarningsDetail",l="/app/json/micro_store_front_end/getMonthProfitList",p="/app/json/micro_store_front_end/getEmployeeInfoByUserId",d="/app/json/micro_store_front_end/queryMicroStoreForDecoration",u="/app/json/micro_store_front_end/updateMicroStoreInfoById",f="/app/json/micro_store_front_end/saveBankInfo";t["a"]={methods:{applyData:function(e){return this.$http.post(o,e)},stateData:function(e){return this.$http.post(a,e)},stateDatahn:function(e){return this.$http.post(n,e)},profitData:function(e){return this.$http.post(i,e)},profitDatahn:function(e){return this.$http.post(c,e)},monthData:function(e){return this.$http.post(l,e)},detailData:function(e){return this.$http.post(p,e)},modifyData:function(e){return this.$http.post(d,e)},getRewardData:function(e){return this.$http.post(r,e)},modifyafterData:function(e){return this.$http.post(u,e)},modifyBankData:function(e){return this.$http.post(f,e)}}}},a2f2:function(e,t,s){"use strict";s("dffb")},dffb:function(e,t,s){},f05d:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"body"},[s("nav-top",{attrs:{title:"我的微店"},on:{backEvent:function(t){return e.$router.go(-1)}}}),s("nav-content",[e.showView&&1!=e.$store.state.globalConfig.microshop_open?s("van-cell-group",[s("van-field",{attrs:{label:"员工号",disabled:""},model:{value:e.employeeCode,callback:function(t){e.employeeCode=t},expression:"employeeCode"}}),s("van-field",{attrs:{label:"员工姓名",disabled:""},model:{value:e.employeeName,callback:function(t){e.employeeName=t},expression:"employeeName"}}),s("van-field",{attrs:{type:"tel",label:"手机号",disabled:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),s("van-field",{attrs:{label:"所属部门",disabled:""},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}}),s("div",{staticClass:"publicInvoiceDiv"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.msgCode,expression:"msgCode"}],attrs:{placeholder:"请输入短信验证码"},domProps:{value:e.msgCode},on:{input:function(t){t.target.composing||(e.msgCode=t.target.value)}}})]),s("div",{staticClass:"mingxi"},[s("count-button",{ref:"countBtn",staticClass:"theme_standard_font",attrs:{phone:e.phone},on:{getSmsEvent:e.getMsgCode}})],1)])],1):e._e(),1==e.$store.state.globalConfig.microshop_open?s("div",{staticClass:"openDiv"},[s("div",{staticClass:"divPic"},[s("div",[s("img",{staticClass:"img",attrs:{src:e.$store.state.globalConfig.microshop_backgroundurl?e.$store.state.globalConfig.microshop_backgroundurl:"static/image/microShop/mishbac.png",alt:""}})]),s("div",{staticClass:"radios"},[s("div",{staticClass:"div1"},[s("div",{staticClass:"agree"},[s("div",{staticClass:"ifselect",class:e.isChecked?"is-selected":"unselect",on:{click:function(t){return e.allSelect()}}},[s("i",{staticClass:"selected-icon"})]),s("p",{staticClass:"text"},[e._v("我同意"),s("span",[s("router-link",{attrs:{to:"/micro_sho/agreement"}},[e._v("《微店开通条款》")])],1)])])]),1==e.$store.state.globalConfig.microshop_open&&0==e.isChecked?s("div",{staticClass:"answer theme_bg_red1 theme_bg_red2",on:{click:e.submit}},[e._v("申请开通 ")]):e._e(),1==e.$store.state.globalConfig.microshop_open&&1==e.isChecked?s("div",{staticClass:"answer theme_bg_red1",on:{click:e.submitBtn}},[e._v("申请开通 ")]):e._e()])])]):e._e(),e.showView||1==e.$store.state.globalConfig.microshop_open?e._e():s("div",{staticClass:"noPass"},[s("div",[s("img",{attrs:{src:"static/image/microShop/icon.png",alt:""}})]),s("p",{staticClass:"p1"},[e._v("很遗憾，微店申请未通过...")]),s("p",{staticClass:"p2"},[e._v("原因："+e._s(e.reason))])]),s("div",{staticClass:"answerBox"},[e.showView&&1!=e.$store.state.globalConfig.microshop_open?s("div",{staticClass:"answer theme_bg_red",on:{click:e.commit}},[e._v("立即申请 ")]):e._e(),e.showView||1==e.$store.state.globalConfig.microshop_open?e._e():s("div",{staticClass:"answer theme_bg_red",on:{click:e.commitAgain}},[e._v("重新提交申请 ")])])],1),s("van-popup",{staticClass:"successBox",on:{"click-overlay":e.returnUp},model:{value:e.successView,callback:function(t){e.successView=t},expression:"successView"}},[s("img",{staticClass:"img1",attrs:{src:"static/image/microShop/succee-icon.png"}}),s("p",[e._v("申请成功！")])]),s("van-popup",{staticClass:"successBox",on:{"click-overlay":e.returnUp},model:{value:e.stateView,callback:function(t){e.stateView=t},expression:"stateView"}},[s("img",{attrs:{src:"static/image/microShop/shen.png"}}),s("p",[e._v("正在审核中，敬请期待......")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.referrer,expression:"referrer"}]},[s("van-popup",{staticClass:"successBox successBox1 ",attrs:{"close-on-click-overlay":!1},model:{value:e.referrer,callback:function(t){e.referrer=t},expression:"referrer"}},[s("div",{staticClass:"referrerUser"},[s("div",{staticClass:"referrer"},[s("span",{staticClass:"span"},[e._v("开店邀请码")]),s("div",{staticClass:"sacn"},[s("mt-field",{attrs:{label:"邀请码",placeholder:"请输入邀请码"},on:{change:e.changeRfrCodeType},model:{value:e.referrerUserId,callback:function(t){e.referrerUserId=t},expression:"referrerUserId"}},[s("img",{attrs:{src:"static/image/fuelcard//btn_Sweep.png",width:"25",height:"25"},on:{click:e.sweep}})])],1),e.info?s("span",{staticClass:"tip"},[e._v(e._s(e.info))]):e._e()]),s("div",{staticClass:"grayBtn"},[s("span",{on:{click:function(t){e.referrer=!1}}},[e._v("无邀请码")]),s("span",{staticClass:"theme_bg_red",on:{click:e.getReferrer}},[e._v("提交邀请码")])])])])],1)],1)},a=[],n=s("5530"),i=(s("e7e5"),s("d399")),r=s("476d"),c=(s("653a"),s("2f62")),l=s("b90b"),p={name:"openIndex",mixins:[r["a"]],data:function(){return{employeeCode:"",employeeName:"",phone:"",departmentName:"",departmentNo:"",radio:!1,isChecked:!1,msgCode:"",showView:!0,registerView:!1,reason:"",stateView:!1,backgroundImgUrl:"",successView:!1,referrerUserId:"",closeView:!1,referrer:!1,rfrCodeType:"",info:""}},watch:{msgCode:function(e){this.msgCode=this.$util.checkVerifyCodeLenght(this.msgCode)}},created:function(){},mounted:function(){var e=this;if(1==this.$store.state.globalConfig.microshop_open){var t=this,s={token:t.$store.state.login.token};t.stateDatahn(s).then((function(t){if(0==t.data.status){var s=t.data.data||{};0==s.empFlag&&(e.referrer=!0)}else Object(i["a"])(t.data.info)}))}else this.loadState(),this.loadDetail()},computed:Object(n["a"])({},Object(c["c"])(["getPutaggregate"])),methods:Object(n["a"])(Object(n["a"])({},Object(c["d"])(["putaggregate"])),{},{loadState:function(){var e=this,t=this,s={token:t.$store.state.login.token};t.stateData(s).then((function(s){if("success"===s.data.result){t.reason=s.data.data.reviewOpinion;var o=s.data.data;e.putaggregate(o),0==o.approvalState?t.stateView=!0:2==o.approvalState?t.showView=!1:o.approvalState}else Object(i["a"])(s.data.info)}))},allSelect:function(){this.isChecked?this.isChecked=!1:this.isChecked=!0},changeRfrCodeType:function(){this.rfrCodeType=1},sweep:function(){var e=this;this.$bridgefunc.scanCode((function(t){e.rfrCodeType=2,e.theScanCode=t.code,e.referrerUserId=t.code}))},loadDetail:function(){var e=this,t={token:e.$store.state.login.token};e.detailData(t).then((function(t){if("success"===t.data.result){var s=t.data.data;e.employeeCode=s.employeeCode,e.employeeName=s.employeeName,e.phone=s.phone,e.departmentName=s.departmentName,e.departmentNo=s.departmentNo}else Object(i["a"])(t.data.info)}))},getReferrer:function(){var e=this,t={token:this.$store.state.login.token,referrerUserId:this.referrerUserId,rfrCodeType:this.rfrCodeType};this.$request.post("/app/json/micro_store_front_end/saveReferrerUserId",t).then((function(t){"success"==t.result?(e.$toast("提交成功"),e.referrer=!1):(e.info=t.info||"",e.$Toast(t.info))}))},getMsgCode:function(e,t){var s=this;if(""!=this.phone)if(this.$util.checkMobile(this.phone)){this.$refs.countBtn.startTime(),this.$Loading.open();var o="/app/json/login/sendSms",a={smsType:"1020",phone:this.phone,imgVerifyCode:e,uuid:t};this.$http.post(o,a).then((function(e){s.$Loading.close();var t=e.data;0==t.status?s.$Toast("获取验证码成功"):(s.$refs.countBtn.resetClock(),s.$Toast(t.info?t.info:"获取短信验证码失败"))}),(function(e){s.$Loading.close(),s.$refs.countBtn.resetClock(),s.$Toast("系统运行过程中遇到问题，请稍候再试")}))}else this.$Toast("请输入正确的手机号码！");else this.$Toast("手机号不能为空!")},submit:function(){this.$Toast("请先勾选开通条款")},submitBtn:function(){this.$router.push({path:"/micro_sho/authentication"})},commit:function(){var e=this,t=this;if(""!=t.msgCode){this.$Loading.open();var s={token:t.$store.state.login.token,employeeCode:t.employeeCode,employeeName:t.employeeName,phone:t.phone,phoneCode:t.msgCode,departmentName:t.departmentName,departmentNo:t.departmentNo};t.applyData(s).then((function(s){e.$Loading.close(),"success"===s.data.result?t.successView=!0:Object(i["a"])(s.data.info)}))}else this.$Toast("验证码不能为空")},commitAgain:function(){this.showView=!0},returnUp:function(){this.$router.go(-1)}}),components:{CountButton:l["a"]}},d=p,u=(s("a2f2"),s("0c7c")),f=Object(u["a"])(d,o,a,!1,null,"4359ab10",null);t["default"]=f.exports}}]);