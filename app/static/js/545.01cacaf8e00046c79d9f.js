(window.webpackJsonp=window.webpackJsonp||[]).push([[545],{"+XF0":function(t,e,s){"use strict";var a=s("rWG4");s.n(a).a},"/bah":function(t,e,s){"use strict";s.r(e);var a=s("X/9M"),i=s("JgFO"),n={name:"rebate-bonus-list",mixins:[a.a],data:function(){return{tabId:"1",complete:!1,page:0,rows:10,title:"",payTypeCodes:"100,300",source:8,dictKey:"",statusObj:{is:10,status:"1",effective:"envelopes-red",invalid:"envelopes-grey",payTypeCodes:"100,300",totalAddUnit:"",totalConsumeUnit:"",expireBalanceUnit:"",url:"/app/json/acct/getAccountPaymentList",groupValue:""},tabs:[{text:"奖励明细",id:"1"},{text:"消费明细",id:"2"},{text:"过期明细",id:"3"}],details:"",expireUnit:"0"}},mounted:function(){this.dictKey=this.$route.query.dictKey,this.getlist()},methods:{getlist:function(){var t=this;this.$Loading.open();var e={token:this.$store.state.login.token,alias:"rewards_group"};this.$http.post("/app/json/app_dict/getDictByAlias",e).then((function(e){var s=e.data;t.$Loading.close(),0==s.status?(s.data||[]).forEach((function(e){if(t.dictKey==e.dictKey){t.statusObj.groupValue=e.dictKey,t.getAboutExpireUnit(e.dictKey),t.title=e.dictValue;var s={token:t.$store.state.login.token,acctType:8,groupValue:t.statusObj.groupValue};t.$http.post("/app/json/acct/getAccountBaseInfo",s).then((function(e){var s=e.data||{};0==s.status?(t.details=s.data,t.statusObj.totalAddUnit=t.details.totalAddUnit,t.statusObj.totalConsumeUnit=t.details.totalConsumeUnit,t.statusObj.expireBalanceUnit=t.details.expireBalanceUnit,t.complete=!0):t.$Toast(s.info)}))}})):t.$Toast(s.info)}))},getAboutExpireUnit:function(t){var e=this,s={token:this.$store.state.login.token,acctType:8,groupValue:t,queryDays:this.$store.state.globalConfig.Count_overdue_days};this.$http.post("/app/json/acct/getAboutExpireUnit",s).then((function(t){var s=t.data;0==s.status?e.expireUnit=s.data.aboutExpireBalanceUnit:e.$Toast("获取当前过期积分失败")}))},openInfo:function(){this.$router.push({path:"/mall2/expire-integralinfo",query:{expireUnit:this.expireUnit,acctType:8,groupValue:this.statusObj.groupValue,title:this.title}})},backEvent:function(){this.$router.go(-1)},tabEvent:function(t){this.tabId!=t&&(this.tabId=t,this.statusObj.status=t,1==t?this.statusObj.payTypeCodes="100,300":2==t?this.statusObj.payTypeCodes="200":3==t&&(this.statusObj.payTypeCodes="400"))}},components:{commonList:i.a}},o=(s("+XF0"),s("KHd+")),c=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rebate-bonus-details"},[s("nav-top",{attrs:{title:t.title},on:{backEvent:t.backEvent}}),t._v(" "),t.complete?s("nav-content",{staticClass:"rebate-bonus-details-container"},[s("div",{staticClass:"main"},[s("div",{staticClass:"integral-title",class:{one:2==t.dictKey,two:3==t.dictKey}},[s("div",{staticClass:"now-integral"},[s("p",{staticClass:"explain-num"},[t._v(t._s(t.details.balanceUnit))]),t._v(" "),s("p",{staticClass:"text"},[t._v("当前余额")])])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"top"},[0!=t.expireUnit?s("div",{staticClass:"tips"},[t._v("余额过期提醒：您有"),s("span",{staticClass:"num",on:{click:t.openInfo}},[t._v(" "+t._s(t.expireUnitexpireUnit||"0")+" ")]),t._v("余额即将过期，请尽快使用！")]):t._e(),t._v(" "),s("div",{staticClass:"tabs"},t._l(t.tabs,(function(e){return s("div",{key:e.id,staticClass:"tab-item",class:{active:e.id===t.tabId},on:{click:function(s){return t.tabEvent(e.id)}}},[s("div",{staticClass:"text"},[t._v("\n                "+t._s(e.text)+"\n              ")])])})),0)]),t._v(" "),s("commonList",{ref:"list",attrs:{statusObj:t.statusObj,source:t.source}})],1)])]):t._e()],1)}),[],!1,null,"d07370b4",null);e.default=c.exports},"X/9M":function(t,e,s){"use strict";e.a={methods:{getPaymentBaseList:function(t){return this.$http.post("/account/json/acct_rewards/getPaymentBaseList",t)}}}},rWG4:function(t,e,s){}}]);