(window.webpackJsonp=window.webpackJsonp||[]).push([[706],{YBkp:function(t,e,s){"use strict";var i=s("ZAgX");s.n(i).a},ZAgX:function(t,e,s){},eVxm:function(t,e,s){"use strict";var i;function d(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.r(e);var r={name:"my-pickup-address",components:{Sitelist:s("b5Mo").a},data:function(){return{myList:[],reSetPickupAddress:!1,pageType:0,skuIds:[],productType:""}},methods:(i={_setDefaultPickupAddress:function(t){this.reSetPickupAddress=!1;var e={token:this.$store.state.login.token,selfId:t.id};this.$store.state.mall2.zitiAddress,this.$http.post("/app/json/user_address/addDefaultAddress",e).then((function(t){}),(function(t){}))},deletePickupAddress:function(t){var e=this;t.id==this.$store.state.mall2.zitiAddress.id&&(this.reSetPickupAddress=!0);var s={token:this.$store.state.login.token,storeId:t.id};this.$Loading.open(),this.$http.post("/app/json/user_address/deleteUserAddressSelflift",s).then((function(t){e.$Loading.close();var s=t.data;0==s.status?e._getAddressList():e.$Toast(s.info)}),(function(t){e.$Loading.close()}))},addPickupAddress:function(){var t="/mall2/selfliftingsite",e={productType:this.productType,skuIds:JSON.stringify(this.skuIds)};this.isOpenCard&&(e.isOpenCard=this.isOpenCard),"0"==this.pageType?this.$router.replace({path:t,query:e}):this.$router.push({path:t,query:e})}},d(i,"_setDefaultPickupAddress",(function(t){var e={token:this.$store.state.login.token,selfId:t};this.$http.post("/app/json/user_address/addDefaultAddress",e).then((function(t){}),(function(t){}))})),d(i,"selectItem",(function(t){5==this.pageType||this.$store.state.mall2.zitiAddress.id!=t.id?"0"!=this.pageType&&"5"!=this.pageType||(this.$store.state.mall2.zitiAddress=t,this._setDefaultPickupAddress(t.id),this.$bridgefunc.vuexStorage(),this.backEvent()):this.backEvent()})),d(i,"_getAddressList",(function(){var t=this;this.$Loading.open();var e={token:this.$store.state.login.token,posx:this.$store.state.currentLocation.posx,posy:this.$store.state.currentLocation.posy,skuIds:this.skuIds};this.isOpenCard&&(e.isOpenCard=this.isOpenCard),6==this.productType&&(e.productType=this.productType),this.$http.post("/app/json/user_address/loadUserAddressSelfliftList",e).then((function(e){t.$Loading.close();var s=e.data;if(0==s.status){var i=s.data;i.length>0&&t.reSetPickupAddress&&t._setDefaultPickupAddress(i[0]),t.myList=i}else t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("获取数据失败")}))})),d(i,"backEvent",(function(){this.$router.go(-1)})),i),created:function(){this.skuIds=this.$route.query.skuIds?JSON.parse(this.$route.query.skuIds):[],this.pageType=this.$route.query.pageType?this.$route.query.pageType:"0",this.productType=this.$route.query.productType||"",this.isOpenCard=this.$route.query.isOpenCard||"",this._getAddressList()},beforeRouteLeave:function(t,e,s){this.$keepaliveHelper.deleteCache(this),s()}},a=(s("YBkp"),s("KHd+")),n=Object(a.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-pickup-address mall2"},[s("nav-top",{on:{backEvent:t.backEvent}}),t._v(" "),s("nav-content",[t.myList.length>0?s("div",{staticClass:"scroll-div"},[s("sitelist",{attrs:{pageType:t.pageType,selectedId:t.$store.state.mall2.zitiAddress.id,showDistance:!0,"site-list":t.myList},on:{selectsite:t.selectItem,deletePickupAddress:t.deletePickupAddress}})],1):t._e(),t._v(" "),s("div",{staticClass:"bottom-btn theme_bg_red theme_font_white",on:{click:t.addPickupAddress}},[t._v("添加常用自提点")])])],1)}),[],!1,null,"52aafbdb",null);e.default=n.exports}}]);