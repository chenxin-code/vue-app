(window.webpackJsonp=window.webpackJsonp||[]).push([[13,61],{"22sX":function(e,t,i){"use strict";var s=i("oYWQ");i.n(s).a},UevV:function(e,t,i){"use strict";var s={data:function(){return{showSelect:!1,initData:{title:"请选择地区"},region:[],selectedItems:[]}},props:["receiver"],mounted:function(){},methods:{receiverInputChange:function(e){var t=e.target.value;t.length>50&&(t=t.slice(0,50),this.$Toast("收货人最大输入50个字")),this.receiverName=t},selectRegion:function(){console.log("selectRegion"),this.showSelect=!0,this._getRegionData(0)},selectedItemsEvent:function(e){var t=e.item;this.selectedItems=e.selecteds;var i={};if(this.selectedItems.length>0){for(var s=0;s<4;s++){var n={id:"",name:""};this.selectedItems.length>s&&(n=this.selectedItems[s]),0==s?(i.provinceId=n.id,i.provinceName=n.name):1==s?(i.cityId=n.id,i.cityName=n.name):2==s?(i.countryId=n.id,i.countryName=n.name):3==s&&(i.townId=n.id,i.townName=n.name)}this.$emit("info",i)}if(4==this.selectedItems.length)return this.showSelect=!1,this.region=this.selectedItems,void this.getRegionText();this._getRegionData(t.id)},regionCloseEvent:function(){this.showSelect=!1},_getRegionData:function(e){var t=this;this.$Loading.open();var i={token:this.$store.state.login.token,parentId:e};this.$http.post("/app/json/area/loadAreaList",i).then((function(e){t.$Loading.close();var i=e.data;if(0==i.status){var s=i.data;s.length>0?t.$nextTick((function(){this.$refs.regionselect.pushCustomOptions(s)})):(t.showSelect=!1,t.region=t.selectedItems,t.getRegionText())}else t.$Toast(i.info)}),(function(e){t.$Loading.close(),t.$Toast("获取数据失败")}))},getRegionText:function(){for(var e="",t=0;t<this.region.length;t++)e+=this.region[t].name;this.receiver.regionText=e,this.$refs.regionselect.reset(null)}},components:{RegionSelect:i("hDEW").default}},n=(i("hxMV"),i("KHd+")),a=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"address"},[i("li",{staticClass:"details-item"},[i("div",{staticClass:"left"},[e._v("收货人姓名")]),e._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receiver.receiverName,expression:"receiver.receiverName"}],attrs:{type:"text",placeholder:"请输入收货人姓名"},domProps:{value:e.receiver.receiverName},on:{input:function(t){t.target.composing||e.$set(e.receiver,"receiverName",t.target.value)}},nativeOn:{"!input":function(t){return e.receiverInputChange(t)}}})])]),e._v(" "),i("li",{staticClass:"details-item"},[i("div",{staticClass:"left"},[e._v("收货人手机号")]),e._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receiver.mobile,expression:"receiver.mobile"}],attrs:{type:"tel",placeholder:"请输入收货人手机号"},domProps:{value:e.receiver.mobile},on:{input:function(t){t.target.composing||e.$set(e.receiver,"mobile",t.target.value)}}})])]),e._v(" "),i("li",{staticClass:"details-item"},[i("div",{staticClass:"left"},[e._v("选择区域")]),e._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receiver.regionText,expression:"receiver.regionText"}],attrs:{type:"text",disabled:"",placeholder:"请选择区域"},domProps:{value:e.receiver.regionText},on:{input:function(t){t.target.composing||e.$set(e.receiver,"regionText",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"icon",on:{click:function(t){return t.stopPropagation(),e.selectRegion(t)}}},[i("img",{attrs:{width:"20px",height:"20px",src:"static/image/mall2/area.png"}})])]),e._v(" "),i("li",{staticClass:"details-item"},[i("div",{staticClass:"left"},[e._v("详细地址")]),e._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.receiver.address,expression:"receiver.address"}],attrs:{type:"text",placeholder:"请输入详细地址"},domProps:{value:e.receiver.address},on:{input:function(t){t.target.composing||e.$set(e.receiver,"address",t.target.value)}}})])]),e._v(" "),e.showSelect?i("RegionSelect",{ref:"regionselect",attrs:{initData:e.initData},on:{selectedItemsEvent:e.selectedItemsEvent,closeEvent:e.regionCloseEvent}}):e._e()],1)}),[],!1,null,"adb91ff6",null);t.a=a.exports},ey8M:function(e,t,i){},g7oO:function(e,t,i){},hDEW:function(e,t,i){"use strict";i.r(t);var s={name:"",props:{initData:{type:Object,default:{}}},data:function(){return{popShow:!1,selectedIndexs:[],selectedItems:[],dataCache:[],cusOptions:[],cusIndex:0,initAreas:[],myTimeout:null}},methods:{close:function(){var e=this;this.popShow=!1,this.myTimeout&&(clearTimeout(this.myTimeout),this.myTimeout=null),this.myTimeout=setTimeout((function(){e.$emit("closeEvent","")}),240)},reSelect:function(e){if(1!=this.initData.canNotReselect){var t=this.selectedItems.length-e;console.log(t),this.selectedItems.splice(e,t),this.selectedIndexs.splice(e,t);var i=this.dataCache[e];this.dataCache.splice(e+1,t),this.cusOptions=i}},selectOption:function(e,t){this.cusIndex=t,this.selectedItems.push(e),this.selectedIndexs.push(t),this.cusOptions=[];var i={item:e,selecteds:this.selectedItems};this.$emit("selectedItemsEvent",i)},pushCustomOptions:function(e){if(0==this.selectedIndexs.length&&(this.selectedIndexs=[],this.selectedItems=[],this.dataCache=[],this.cusIndex=0),this.dataCache.push(e),this.cusOptions=e,this.initAreas&&this.initAreas.length>0){for(var t=this.initAreas.shift(),i=!1,s=0;s<e.length;s++){var n=e[s];if(this.$util.areaEqual(t,n.name)){i=!0,this.selectOption(n,s);break}}0==i&&(this.initAreas=[])}},reset:function(e){this.selectedIndexs=[],this.selectedItems=[],this.cusIndex=0,e?(this.dataCache=[],this.dataCache.push(e),this.cusOptions=e):(this.cusOptions=this.dataCache[0],this.dataCache=[],this.dataCache.push(this.cusOptions))}},created:function(){try{this.initAreas=JSON.parse(JSON.stringify(this.initData.initAreas))}catch(e){this.initAreas=[]}},mounted:function(){this.popShow=!0}},n=(i("22sX"),i("KHd+")),a=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"region-select"},[i("div",{staticClass:"other-div",on:{click:e.close}}),e._v(" "),i("transition",{attrs:{name:"pop_transiton"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.popShow,expression:"popShow"}],staticClass:"select-content"},[i("div",{staticClass:"close-btn",on:{click:e.close}},[i("img",{attrs:{src:"static/image/mall/close.png"}})]),e._v(" "),i("div",{staticClass:"font-medium-l-x title"},[e._v(e._s(e.initData.title?e.initData.title:"请选择区域"))]),e._v(" "),i("div",{staticClass:"selected-item font-medium"},[e._l(e.selectedItems,(function(t,s){return i("div",{staticClass:"item-div",on:{click:function(t){return e.reSelect(s)}}},[i("div",{staticClass:"item-text"},[e._v(e._s(t.name))])])})),e._v(" "),e.cusOptions.length>0?i("div",{staticClass:"item-div"},[i("div",{staticClass:"item-text item-selected theme_font_red"},[e._v("请选择")])]):e._e()],2),e._v(" "),i("div",{staticClass:"options-div"},e._l(e.cusOptions,(function(t,s){return i("div",{staticClass:"option",on:{click:function(i){return e.selectOption(t,s)}}},[e._v(e._s(t.name))])})),0)])])],1)}),[],!1,null,"60a4d13e",null);t.default=a.exports},hxMV:function(e,t,i){"use strict";var s=i("g7oO");i.n(s).a},lTco:function(e,t,i){"use strict";var s=i("L2JU"),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},a={data:function(){return{columns:[],showOil:!1}},props:{isOpenPopup:{type:Boolean,default:!1},title:{type:String,default:"选择油库"}},mounted:function(){},methods:{onCancel:function(){this.showOil=!1},onConfirm:function(e,t){this.showOil=!1,this.$emit("getOilInfo",e),this.$emit("getOilNameNum",e),this.$emit("getOilCard",e)},openPopup:function(){1==this.isOpenPopup?this.showOil=!0:this.showOil=!1},queryPickUpDepot:function(){var e=this;this.$request.post("/app/json/app_oil_sale/queryPickUpDepot",{vipUnitUserCode:this.vipUnitUser.vipUnitUserId}).then((function(t){if(0===t.status){var i=[];t.data.map((function(e){return i.push({text:e.name,code:e.code}),i})),e.columns=i,e.$emit("getPickUpDepot",i)}else e.$Toast(t.info?t.info:"获取自提油库失败")}))},appQueryTakeOilCardList:function(){var e=this;this.$request.post("/app/json/app_oil_appoint/appQueryTakeOilCardList",{vipUnitUserCode:this.vipUnitUser.vipUnitUserId}).then((function(t){if(0===t.status){var i=[];t.data.map((function(e){return i.push({text:e.userCard}),i})),e.columns=i}else e.$Toast(t.info?t.info:"获取提油卡失败")})).catch((function(e){console.log(e)}))},appQueryTakeOilNameList:function(){var e=this;this.$request.post("/app/json/app_oil_appoint/appQueryTakeOilNameList",{vipUnitUserCode:this.vipUnitUser.vipUnitUserId}).then((function(t){if(0===t.status){var i=[];t.data.map((function(e){return i.push({text:e.oilname}),i})),e.columns=i}else e.$Toast(t.info?t.info:"获取油品名称失败")})).catch((function(e){console.log(e)}))}},computed:n({},Object(s.c)(["vipUnitUser"])),components:{}},o=(i("xQ2Z"),i("KHd+")),c=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"icon-info",on:{click:e.openPopup}},[e._m(0)]),e._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:e.showOil,callback:function(t){e.showOil=t},expression:"showOil"}},[i("van-picker",{attrs:{"show-toolbar":"",title:e.title,columns:e.columns},on:{cancel:e.onCancel,confirm:e.onConfirm}})],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon"},[t("img",{attrs:{width:"20px",height:"20px",src:"static/image/mall2/area.png"}})])}],!1,null,"638721b8",null);t.a=c.exports},oYWQ:function(e,t,i){},xQ2Z:function(e,t,i){"use strict";var s=i("ey8M");i.n(s).a}}]);