(window.webpackJsonp=window.webpackJsonp||[]).push([[882],{FcX9:function(t,e,s){},rM15:function(t,e,s){"use strict";s.r(e),s("W34l");var i={name:"near",components:{},data:function(){return{stations:[],token:null,erudaTimes:0,clickTime:-1}},methods:{showEruda:function(){var t=(new Date).getTime();t-this.clickTime<1e3||-1==this.clickTime?(this.erudaTimes+=1,this.clickTime=t,5==this.erudaTimes&&(eruda.init(),this.erudaTimes=0,this.clickTime=-1)):(this.erudaTimes=0,this.clickTime=-1)},selectedStation:function(t){this.getStoreInfo(t.standardCode),this.$store.commit("setStationInfo",t)},getStoreInfo:function(t){var e=this;this.$STLoading.open(),this.$http.post("/app/json/hy_station/getStoreInfo",{standardCode:t}).then((function(t){var s=t.data;e.$STLoading.close(),0==s.status?(e.$store.state.mall2.zitiAddress.id=s.data.storeId,e.$store.state.mall2.zitiAddress.storeCode=s.data.storeCode,e.$store.state.mall2.zitiAddress.storeName=s.data.storeName||e.$store.state.refuelStation.stationName,e.$store.state.mall2.zitiAddress.mchOuCode=s.data.merchantOuCode,e.$store.state.mall2.zitiAddress.id&&!e.$store.state.mall2.zitiAddress.mchOuCode?e.$store.state.staticDeliverType="1":e.$store.state.mall2.zitiAddress.mchOuCode&&!e.$store.state.mall2.zitiAddress.id&&(e.$store.state.staticDeliverType="2"),e.$router.go(-1)):e.$Toast(s.info)})).catch((function(t){e.$Toast("getStoreInfo err "+t),e.$STLoading.close()}))},getNearStations:function(t,e){this.$Loading.open();var s={token:window.localStorage.getItem("token"),posx:t?t.longitude:void 0,posy:t?t.latitude:void 0,isShowCommon:1,getType:2,count:5},i=this;this.$http.post("/app/json/hy_station/getStationList",s).then((function(t){i.$Loading.close();var s=t.data;0==s.status?(i.stations=s.data,e&&e()):i.$Toast({message:s.info,position:"bottom",duration:2e3})}),(function(t){i.$Loading.close()}))}},mounted:function(){this.$store.state.currentLocation.posx?this.getNearStations({longitude:this.$store.state.currentLocation.posx,latitude:this.$store.state.currentLocation.posy}):this.getNearStations(null)}},a=(s("zwL/"),s("KHd+")),o=Object(a.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"near-station mall2"},[s("nav-top",{on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),s("nav-content",[s("div",{staticClass:"scroll-div"},[t._l(t.stations,(function(e,i){return s("div",{key:i,staticClass:"shadow-cell theme_bg_white",on:{click:function(s){return t.selectedStation(e)}}},[s("div",{staticClass:"site-cell"},[s("div",{staticClass:"left-info"},[s("div",{staticClass:"site-title margin-con theme_font_black"},[s("span",[t._v(t._s(e.stationName))]),t._v(" "),0==i?s("span",{staticClass:"nearest theme_bg_red"},[t._v("最近")]):t._e(),t._v(" "),1==e.isShowCommon?s("span",{staticClass:"nearest theme_bg_red"},[t._v("常用")]):t._e()]),t._v(" "),s("div",{staticClass:"tip margin-con theme_font_gray"},[t._v("地址："+t._s(e.address||"暂无"))])]),t._v(" "),s("div",{staticClass:"right-con"},[e.distance?s("div",{staticClass:"distence-con"},[t._v(t._s(t.$util.toDecimal2(e.distance/1e3))+"km")]):t._e(),t._v(" "),s("i",{staticClass:"iconfont",class:e.stationCode==t.$store.state.refuelStation.stationCode?"mall-xuanzhong theme_font_red":"mall-weixuanzhong theme_font_gray"})])])])})),t._v(" "),s("div",{staticClass:"eruda-s",on:{click:t.showEruda}})],2)])],1)}),[],!1,null,"0dc4fe6e",null);e.default=o.exports},"zwL/":function(t,e,s){"use strict";var i=s("FcX9");s.n(i).a}}]);