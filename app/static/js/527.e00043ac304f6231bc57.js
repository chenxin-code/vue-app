(window.webpackJsonp=window.webpackJsonp||[]).push([[527],{"33JZ":function(t,a,i){},"5enR":function(t,a,i){"use strict";var e=i("33JZ");i.n(e).a},CEw4:function(t,a,i){"use strict";a.a={methods:{exportinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/importUserInvoiceHead",t)},golddetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/detailsOfInvoiceInfo",t)},invoicetipData:function(t){return this.$http.post("/app/json/news/getNewsList",t)},refundData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceRushRed",t)},cardMoData:function(t){return this.$http.post("/app/json/card/getUserCardList",t)},mingxiData:function(t){return this.$http.post("/app/json/user_invoice_assistant/detailsOfInvoiceList",t)},malldetailData:function(t){return this.$http.post("/app/json/app_shopping_order/detail",t)},shopdetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/convenienceStoredetail",t)},oildetailData:function(t){return this.$http.post("/app/json/refuel_center/detail",t)},hisdetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceContentDetails",t)},hisData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceContentDetailsList",t)},mallData:function(t){return this.$http.post("/app/json/app_shopping_order/queryOrder",t)},storeData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryConvenienceStoreOrder",t)},appData:function(t){return this.$http.post("/app/json/refuel_center/queryOrder",t)},goldData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryCashIn",t)},walletData:function(t){return this.$http.post("/app/json/user_invoice_assistant/sinopecWalletInvoiceList",t)},cardData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserRefuelingCardInfoList",t)},commitselfinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/orderInvoicingInMall",t)},commitselfcardinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/gasCardInvoice",t)},commitselfgoldinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/cashInInvoicing",t)},emailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceModifyMailbox",t)},histroydetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoiceDetails",t)},histroyData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoicedList",t)},riseData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserInvoiceHeadList",t)},openedData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoicedList",t)},commitData:function(t){return this.$http.post("/app/json/user_invoice_assistant/addOrUpdateUserInvoiceHead",t)},delData:function(t){return this.$http.post("/app/json/user_invoice_assistant/deleteUserInvoiceHead",t)},morenData:function(t){return this.$http.post("/app/json/user_invoice_assistant/setDefaultUserInvoiceHead",t)},detailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoiceDetails",t)},souData:function(t){return this.$http.post("/app/json/user_invoice_assistant/searchInvoiceList",t)},soudetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserInvoiceHeadDetails",t)},tijiaoData:function(t){return this.$http.post("/app/json/user_invoice_assistant/addInvoicing",t)},saoData:function(t){return this.$http.post("/app/json/user_invoice_assistant/getResultFromQrcode",t)},morentitleData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryDefaultTittle",t)},daikaiData:function(t){return this.$http.post("/app/json/user_invoice_assistant/unInvoicingList",t)},chakanData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserInvoiceHeadDetails",t)}}}},TaIO:function(t,a,i){"use strict";i.r(a);var e={name:"cardOrder",mixins:[i("CEw4").a],data:function(){return{listData:[],show:!1,radio:"1",radioList:[],allRadio:!1,cardView:!1,cardnoView:!0,cardName:"",startTime:"",endTime:"",loading:!1,finished:!1,totalMoney:0,nodeNo:"",orderList:[],actions:[{cardno:""}],page:0,cardType:""}},created:function(){this.time()},mounted:function(){console.log(this.$store.state.globalConfig.timeLimitInvoicing)},methods:{select:function(t){console.log(t),this.nodeNo=t.nodeNo,this.cardName=t.cardno,this.cardType=t.cardType,this.show=!1,this.finished=!1,this.listData=[],this.page=0,this.loadIndex()},cardList:function(){var t=this,a=this,i={token:this.$store.state.login.token,startTime:a.startTime,endTime:a.endTime};a.cardMoData(i).then((function(i){i.data.result&&(a.actions=i.data.data||[],a.actions.length>0?(a.actions.forEach((function(t){a.$set(t,"name",t.cardno)})),a.cardName=a.actions[0].name,a.nodeNo=a.actions[0].nodeNo,t.cardType=a.actions[0].cardType,a.loadIndex(),0!=a.actions.length&&(a.cardView=!0,a.show=!1)):(console.log("加油卡列表为空"),a.loading=!1,a.finished=!0,a.cardnoView=!1))}))},loadIndex:function(){var t=this;t.page=t.page+1;var a={token:this.$store.state.login.token,startTime:t.startTime,endTime:t.endTime,cardNo:t.cardName,needDetail:1,pageNumber:t.page,pageSize:10,invoiceUse:0};t.loading=!0,t.cardData(a).then((function(a){if("success"===a.data.result){var i=a.data.data.refuelingCardInfoLists||[];t.listData=t.listData.concat(i)||[],t.page>=a.data.data.page&&(t.finished=!0),0==t.listData.length&&(t.finished=!0)}else t.finished=!0;t.loading=!1}))},selectData:function(){this.radioList.length==this.listData.length?this.allRadio=!0:this.radioList.length<this.listData.length&&(this.allRadio=!1);var t=this;t.totalMoney=0,t.radioList.forEach((function(a){t.totalMoney=Number((t.totalMoney+Number(a.actualAmount)).toFixed(2))}))},allSelect:function(){var t=this;t.allRadio=!t.allRadio,1==t.allRadio?(t.radioList=[],t.listData.forEach((function(a){t.radioList.push(a)}))):t.radioList=[]},next:function(){var t=this;t.idArray=[],t.radioList.forEach((function(a){t.idArray.push(a.id),t.orderList.push(a)})),t.$router.push({path:"/openinvoiceDetail",query:{idArray:t.idArray,orderList:JSON.stringify(t.orderList),totalMoney:t.totalMoney,type:"cardOrder",cardNo:t.cardName,cardType:t.cardType,startTime:t.startTime,endTime:t.endTime,nodeNo:t.nodeNo}})},onSelect:function(t){this.show=!1,this.cardName=t.name,this.finished=!1,this.page=0,this.loadIndex()},cards:function(){this.actions.length>0&&(this.cardView=!1,this.show=!0)},getPreMonthDay:function(t,a){var i=t.split("-"),e=i[0],s=i[1],n=i[2],o=new Date(e,s,0);o=o.getDate();var r=e,c=parseInt(s)-a;c<=0&&(r=parseInt(r)-parseInt(c/12==0?1:Math.abs(parseInt(c/12))+1),c=12-Math.abs(c)%12);var l=n,p=new Date(r,c,0);return l>(p=p.getDate())&&(l=p),c<10&&(c="0"+c),r+"-"+c+"-"+l},getCurrentMonthLast:function(){return new Date},getCurrentMonthFirst:function(){var t=new Date,a=t.getFullYear(),i=t.getMonth()-2,e=t.getDate();return i>=1&&i<=9&&(i="0"+i),e>=0&&e<=9&&(e="0"+e),a+i+e},format:function(t,a){var i={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t},time:function(){var t=this.getCurrentMonthLast(),a=this.format("yyyy-MM-dd",t),i=this.$store.state.globalConfig.timeLimitInvoicing?Number(this.$store.state.globalConfig.timeLimitInvoicing):1;console.log(i);var e=this.getPreMonthDay(a,i);1==this.$store.state.globalConfig.gz_timeLimitInvoicing?(this.startTime="20200314".replace(/-/g,"")+"000000",this.endTime=this.format("yyyyMMdd235959",t)):(this.startTime=e.replace(/-/g,"")+"000000",this.endTime=this.format("yyyyMMdd235959",t))}}},s=(i("5enR"),i("KHd+")),n=Object(s.a)(e,(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"body"},[i("nav-top",{attrs:{title:"加油卡订单"},on:{backEvent:function(a){return t.$router.go(-1)}}}),t._v(" "),i("nav-content",[t.$store.state.globalConfig.invoicePromptStatement?i("van-notice-bar",{attrs:{scrollable:!0}},[t._v(t._s(t.$store.state.globalConfig.invoicePromptStatement))]):i("van-notice-bar",{attrs:{scrollable:!0}},[t._v("可开票订单请尽量在"+t._s(t.$store.state.globalConfig.timeLimitInvoicing)+"个月内自助开具发票！")]),t._v(" "),t.cardnoView?i("div",{staticClass:"selectCard"},[i("span",[t._v("选择卡号")]),t._v(" "),i("div",{on:{click:t.cards}},[i("span",[t._v(t._s(t.cardName))]),t._v(" "),i("span",{staticClass:"iconfont mall-xialasanjiao"})])]):t._e(),t._v(" "),i("van-list",{attrs:{finished:t.finished,"finished-text":""},on:{load:t.cardList},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.listData,(function(a,e){return t.listData.length>0?i("div",{key:e,staticClass:"publicInvoice"},[i("div",{staticClass:"operation"},[i("van-checkbox-group",{on:{change:t.selectData},model:{value:t.radioList,callback:function(a){t.radioList=a},expression:"radioList"}},[i("van-checkbox",{attrs:{name:a,"checked-color":"#F80F16"}})],1),t._v(" "),i("div",{staticClass:"operationImg"},[i("div",{staticClass:"titleContent"},[i("span",{staticClass:"titleMessage"},[t._v("卡号："+t._s(a.cardNo))])]),t._v(" "),i("div",{staticClass:"titleContent"},[i("span",{staticClass:"titleMessage"},[t._v(t._s(a.opeTime))])]),t._v(" "),i("div",{staticClass:"titleContent"},[i("span",{staticClass:"titleMessage"},[t._v(t._s(a.nodeName))])])]),t._v(" "),i("div",{staticClass:"mall-jiantou"},[i("span",{staticClass:"span"},[t._v(t._s(a.actualAmount))]),t._v("元\n          ")])],1)]):t._e()})),0),t._v(" "),0==t.listData.length?i("div",{staticClass:"publicInvoice"},[i("div",{staticClass:"emptyDiv"},[i("img",{attrs:{src:"static/image/invoice/p4@2x.png",alt:""}}),t._v(" "),i("span",[t._v("暂无订单记录！")])])]):t._e()],1),t._v(" "),t.listData.length>0?i("div",{staticClass:"summary"},[t._v(t._s(t.radioList.length?t.radioList.length:0)+" 个加油订单，总计 "),i("span",[t._v(t._s(t.totalMoney))]),t._v(" 元，共"),i("span",[t._v(" "+t._s(t.radioList.length)+" ")]),t._v("张发票")]):t._e(),t._v(" "),t.listData.length>0?i("div",{staticClass:"bottomTab"},[i("div",{staticClass:"left left1"},[i("div",{staticClass:"img"},[i("van-checkbox",{attrs:{"checked-color":"#F80F16"},on:{click:t.allSelect},model:{value:t.allRadio,callback:function(a){t.allRadio=a},expression:"allRadio"}})],1),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"left theme_bg_red right",on:{click:t.next}},[t._m(1)])]):t._e(),t._v(" "),i("van-action-sheet",{attrs:{actions:t.actions},on:{select:t.select},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}})],1)}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("span",[this._v("全选")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("span",[this._v("下一步")])])}],!1,null,"a0ef5ac0",null);a.default=n.exports}}]);