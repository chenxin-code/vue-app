(window.webpackJsonp=window.webpackJsonp||[]).push([[638],{BziQ:function(t,e,s){"use strict";s.r(e),s("4X9F");var i,o,n,a=s("IkEG"),d=s("Gedb"),l=s("L2JU"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},c={name:"",data:function(){return{titleTop:"设置6位支付密码",firstPwd:"",secondPwd:"",showKeyboardF:!0,showKeyboardSMS:!0,showFirstPwd:!0,title:"输入6位支付密码",noEqually:!1,equallyInfo:"两次密码不一致,请重新输入",isSet:"",active:!1,sms:"",auth_time:0,sendAuthCode:!0,pwdInput:!0,imgModal:!1,imgCode:"",imgCodeUrl:"",uuid:"",originalPwd:"",phone:""}},created:function(){},mounted:function(){this.phone=this.$store.state.login.phone,this.phone=this.phone.substring(this.phone.length-4),this.isSet=this.$route.query.isSet,1==this.isSet&&(this.titleTop="验证原6位数字支付密码",this.title="验证原6位数字支付密码")},methods:r({onInputF:function(t){var e=this;if(this.firstPwd=(this.firstPwd+t).slice(0,6),6==this.firstPwd.length)if(1!=this.isSet)this.title="再次确认支付密码",this.showKeyboardF=!1,this.showFirstPwd=!1,this.noEqually=!1;else{this.$Loading.open();var s={token:this.$store.state.login.token,originalPwd:Object(d.a)(this.firstPwd),payPwdMode:11};this.$http.post("/app/json/user/validPayPwd",s).then((function(t){e.$Loading.close();var s=t.data;0==s.status?a.a.alert({title:"提示",message:"密码验证成功"}).then((function(){e.originalPwd=e.firstPwd,e.pwdInput=!1,e.titleTop="身份验证",e.active=!0})):(e.noEqually=!0,e.equallyInfo=s.info,e.firstPwd="",3007==s.errorCode&&a.a.alert({title:"提示",message:"密码已被锁定!"}).then((function(){e.$router.go(-1)})))}),(function(t){e.$Loading.close(),e.$Toast("请求数据失败！")}))}},onInputS:function(t){var e=this,s=this;if(s.secondPwd=(s.secondPwd+t).slice(0,6),6==s.secondPwd.length)if(s.secondPwd!=s.firstPwd)s.noEqually=!0,this.equallyInfo="两次密码不一致,请重新输入",s.showKeyboardF=!0,s.showFirstPwd=!0,s.secondPwd="",s.firstPwd="",s.title="输入6位支付密码";else if(1==s.$route.query.isSet){s.$Loading.open();var i={token:s.$store.state.login.token,originalPwd:Object(d.a)(s.originalPwd),userPayPwd:Object(d.a)(s.firstPwd),confirmPwd:Object(d.a)(s.secondPwd),smsVerifyCode:s.sms,phone:s.$store.state.login.phone,payPwdMode:8};s.$http.post("/app/json/user/modifyPayPwd",i).then((function(t){s.$Loading.close();var e=t.data;0==e.status?(s.title="密码修改成功",a.a.alert({title:"提示",message:"密码修改成功"}).then((function(){s.$router.go(-1)}))):a.a.alert({title:"提示",message:e.info}).then((function(){s.$router.go(-1)}))}),(function(t){s.$Loading.close(),s.$Toast("请求数据失败！")}))}else if(s.$route.query.sms){s.$Loading.open();var o={token:s.$store.state.login.token,userPayPwd:Object(d.a)(s.firstPwd),confirmPwd:Object(d.a)(s.secondPwd),smsVerifyCode:s.$route.query.sms,phone:s.$store.state.login.phone};s.$http.post("/app/json/user/forgetPayPwd",o).then((function(t){s.$Loading.close();var i=t.data;0==i.status?(e.title="密码重置成功",a.a.alert({title:"提示",message:"密码重置成功"}).then((function(){s.$router.go(-2)}))):a.a.alert({title:"提示",message:i.info}).then((function(){s.$router.go(-1)}))}),(function(t){s.$Loading.close(),s.$Toast("请求数据失败！")}))}else{s.$Loading.open();var n={token:s.$store.state.login.token,userPayPwd:Object(d.a)(s.firstPwd),confirmPwd:Object(d.a)(s.secondPwd),payPwdMode:8};s.$http.post("/app/json/user/setUserPayPwd",n).then((function(t){s.$Loading.close();var i=t.data;0==i.status?(s.title="密码设置成功",a.a.alert({title:"提示",message:"密码设置成功"}).then((function(){"rebate"==e.$route.query.source&&(e.setIsPwdSet(e.$assign({},e.isPwdSet,{status:1,pwd:s.secondPwd})),e.$bridgefunc.vuexStorage()),s.$router.go(-1)}))):a.a.alert({title:"提示",message:i.info}).then((function(){s.$router.go(-1)}))}),(function(t){s.$Loading.close(),s.$Toast("请求数据失败！")}))}},getVerifyImg:function(){var t=this;this.uuid=this.$util.randomString(),this.$Loading.open();var e={token:this.$store.state.login.token,uuid:this.uuid};this.$http.post("/app/json/login/getVerifyImg",e).then((function(e){t.$Loading.close();var s=e.data;0==s.status?t.imgCodeUrl=s.data:t.$toast(e.info||"获取图片验证码失败！")}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},confirmImgCode:function(){var t=this;if(""==this.imgCode)this.$toast("请输入图形码");else{this.imgModal=!1,this.sendAuthCode=!1,this.auth_time=119;var e=setInterval((function(){t.auth_time--,t.auth_time<=0&&(t.sendAuthCode=!0,clearInterval(e))}),1e3);this.getCode()}},getCode:function(){var t=this;this.$Loading.open();var e={token:this.$store.state.login.token,phone:this.$store.state.login.phone,smsType:"1120",imgVerifyCode:this.imgCode,uuid:this.uuid};this.$http.post("/app/json/login/sendSms",e).then((function(e){t.$Loading.close();var s=e.data;0==s.status?t.imgCodeUrl=s.data:(t.sendAuthCode=!0,t.$toast(e.info||"短信发送失败！"))}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},modifyPwd:function(){""==this.sms?a.a.alert({title:"提示",message:"请输入短信验证码"}).then((function(){})):(this.titleTop="设置6位支付密码",this.title="输入6位支付密码",this.equallyInfo="",this.firstPwd="",this.isSet=0,this.pwdInput=!0,this.active=!1)},onDelete:function(){this.firstPwd=this.firstPwd.slice(0,this.firstPwd.length-1),this.secondPwd=this.secondPwd.slice(0,this.secondPwd.length-1),this.sms=this.sms.slice(0,this.sms.length-1)},sendSms:function(){this.imgModal=!0,this.getVerifyImg()}},Object(l.d)(["setIsPwdSet"])),computed:r({},Object(l.c)(["isPwdSet"])),components:(i={},o=a.a.name,n=a.a,o in i?Object.defineProperty(i,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[o]=n,i)},u=(s("j4tt"),s("KHd+")),h=Object(u.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"no-set-pwd"},[i("nav-top",{attrs:{title:t.titleTop},on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),i("div",{staticClass:"pwd-div",class:{mask:t.active}},[i("div",{staticClass:"topDiv"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.pwdInput,expression:"pwdInput"}],staticClass:"pwd-input"},[i("p",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),i("van-password-input",{directives:[{name:"show",rawName:"v-show",value:t.showFirstPwd,expression:"showFirstPwd"}],attrs:{value:t.firstPwd}}),t._v(" "),i("van-password-input",{directives:[{name:"show",rawName:"v-show",value:!t.showFirstPwd,expression:"!showFirstPwd"}],attrs:{value:t.secondPwd}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.pwdInput,expression:"!pwdInput"}],staticClass:"yzPhone"},[i("div",{staticClass:"top"},[i("div",{staticClass:"title"},[t._v("验证手机号")]),t._v(" "),i("div",{staticClass:"tips"},[t._v("输入手机尾号"+t._s(t.phone)+"接受到的短信验证码")]),t._v(" "),i("van-field",{attrs:{center:"",clearable:"",maxlength:"4",autosize:"",placeholder:"请输入短信验证码"},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}},[i("van-button",{directives:[{name:"show",rawName:"v-show",value:t.sendAuthCode,expression:"sendAuthCode"}],staticClass:"theme_font_red_i",attrs:{slot:"button",size:"small",type:"default"},on:{click:t.sendSms},slot:"button"},[t._v("发送验证码\n            ")]),t._v(" "),i("van-button",{directives:[{name:"show",rawName:"v-show",value:!t.sendAuthCode,expression:"!sendAuthCode"}],staticClass:"theme_font_red_i",attrs:{slot:"button",size:"small",type:"default"},slot:"button"},[t._v(t._s(t.auth_time)+"秒后重发\n            ")])],1)],1),t._v(" "),i("div",{staticClass:"two-btn"},[i("div",{staticClass:"cancel",on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"query theme_bg_red_i",on:{click:t.modifyPwd}},[t._v("确定")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.imgModal,expression:"imgModal"}],staticClass:"modal-container img-modal-container"},[i("div",{staticClass:"modal"},[i("div",{staticClass:"content"},[i("div",{staticClass:"title"},[t._v("图像验证码")]),t._v(" "),i("div",{staticClass:"msg img-code-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.imgCode,expression:"imgCode"}],staticClass:"input-control",attrs:{type:"text",placeholder:"请输入图形验证码"},domProps:{value:t.imgCode},on:{input:function(e){e.target.composing||(t.imgCode=e.target.value)}}}),t._v(" "),i("img",{staticClass:"img img-code",attrs:{src:t.imgCodeUrl,mode:"scaleToFill",alt:""}}),t._v(" "),i("img",{staticClass:"img refresh",attrs:{src:s("tI0l"),mode:"widthFix",alt:""},on:{click:t.getVerifyImg}})])]),t._v(" "),i("div",{staticClass:"modal-btn-group"},[i("div",{staticClass:"modal-btn",on:{click:function(e){t.imgModal=!1}}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"modal-btn confirm theme_bg_red_i",on:{click:t.confirmImgCode}},[t._v("确定")])])])]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.noEqually,expression:"noEqually"}],staticClass:"info"},[t._v(t._s(t.equallyInfo))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.pwdInput,expression:"pwdInput"}]},[i("van-number-keyboard",{attrs:{show:t.showKeyboardF},on:{input:t.onInputF,delete:t.onDelete}}),t._v(" "),i("van-number-keyboard",{attrs:{show:!t.showKeyboardF},on:{input:t.onInputS,delete:t.onDelete}})],1)])],1)}),[],!1,null,"5baccd70",null);e.default=h.exports},j4tt:function(t,e,s){"use strict";var i=s("lGMu");s.n(i).a},lGMu:function(t,e,s){},tI0l:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkYzOTdFMjM4RDc1RDExRTg5OTAzREZFNjI1OTIzRDIyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkYzOTdFMjM5RDc1RDExRTg5OTAzREZFNjI1OTIzRDIyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RjM5N0UyMzZENzVEMTFFODk5MDNERkU2MjU5MjNEMjIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RjM5N0UyMzdENzVEMTFFODk5MDNERkU2MjU5MjNEMjIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5iAM1OAAACsUlEQVR42ryXSUhVURjHr6/XAE2kDVAbpUUDtAgqaBMUZES1KmigVcOzGTLCBtpEVFRCNBjvSWEUbQpaiGREExFBLWoRNFnQTtTUrDQ0o98H/yuXy/W+m897P/hx7nc87/zP8J1zPouy2awTwcbCalgOC2Gm6vqhDd7CE7iTyWTeR+mwKI/wNKiCbTDeiWbP4QQDaByqcAWcgQnyu8E6ewbvoAVGw3RYDKtgjuf3tgLoZz7lcrkZfNfb7/GPDCY8Cq7DBvnNcBquwk9/Yzoa+EbABnBUgzDrgT3QDnfhK+1L7Q/pAFGb1VL516ASvkdZYzp9YbHAAJZpoKUqX/rbpnx+nUT/wl7YGlXUN4BHFPPgtqoWhQlvh4363geXnCEaM55FUa2l7g5q4y71VDV0tDSXncJsl008oL7XL3xIx6VZe1qoXYA/MMJX3+gVHqdlNjsFXYWqssefKQ6EtUkp9E38l6I4EUvpGjS7H3RO4xRe4LlpErO0LnyzD0kIctQsiPvc4DJrTUB0MkWT3fNpJ1krg4n28Nge//A8gXHbFJWdJvxFzuwEhN1ns8mEX8lZkoCwq/E6pfNrttLz6McRWLa3K+Q2mHCDrskxSnHish3KWDrhQUpP1xXPY1Ecw2xLKA7KreEu73Hf47PQoai7GMNs7ZktUUZa7U0Evnmew02e0Q3HbA9TrJdbyWzb/RlInZI8R9ll1TCJnpRbi+gNfyIw8JRqj9cos5yvLLHtPwUto6mBtaqqVz/OYMKWmqxTsG3REpVrBWq1Jfnu4golAZNUbfnzbmbbHzWh3wznFRRmffAYniqh71C9CczV5WAZ6kjVW8K/H8FbYclekN3UGbeg26kBlIswa9EszyHaFfYeh5nN6hgcV6bi/tNWpqP3W+nrR3gD9+Ahgr354uCfAAMAO5m0o+27b6gAAAAASUVORK5CYII="}}]);