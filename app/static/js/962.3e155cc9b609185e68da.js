(window.webpackJsonp=window.webpackJsonp||[]).push([[962],{"+PtL":function(t,a,e){"use strict";e.r(a);var o=e("0FX9"),s=e.n(o),i=e("2nGb"),r=e("L2JU"),n=e("lR8Q"),l=e.n(n),c=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},d={name:"microshopQrcode",components:{QRCode:s.a},data:function(){return{imgUrl:"",detailData:{}}},computed:c({},Object(r.c)(["getPutaggregate"])),mounted:function(){var t=this;this.detailData=this.$route.query.profitObj&&JSON.parse(this.$route.query.profitObj),console.log(this.detailData.pictureUrl),this.$nextTick((function(){var a=""+t.$store.state.globalConfig.wxBaseUrl+i.a.shareUrl+"/micro_sho/shop_around";"2"==t.$store.state.globalConfig.micro_shop_check_page_type&&(a=""+t.$store.state.globalConfig.wxBaseUrl+i.a.shareUrl+"/micro_sho/shop_around1");var e=a+"?storeID="+t.detailData.storeCode+"&id="+t.detailData.id;console.log(11,e),s.a.toCanvas(document.getElementById("qrcode"),e,{margin:0,width:160})})),this.setOssImg(this.detailData.pictureUrl?this.detailData.pictureUrl:this.$store.state.globalConfig.microshop_headurl)},methods:{setOssImg:function(t){var a=this;this.imgUrl="",this.$request.post("/app/json/home/getFileBase64",{filePath:t}).then((function(t){0==t.status?(t.data?a.imgUrl="data:image/png;base64,"+(t.data||""):a.$Toast("getFileBase64 返回为空"),console.log("res",t)):a.$Toast(t.info)}))},downloadImg:function(){var t=this,a=document.querySelector(".myShop"),e=parseInt(window.getComputedStyle(a).width),o=parseInt(window.getComputedStyle(a).height),s=document.createElement("canvas");s.width=2*e,s.height=2*o,s.getContext("2d").scale(2,2);var i={useCORS:!0,scale:2,canvas:s,backgroundColor:"#000"};console.log(this.$refs.imageWrapper),l()(this.$refs.imageWrapper,i).then((function(a){var e=a.toDataURL("image/png");console.log(e),t.codeShow=!1;var o=e.split("base64,");t.$bridgefunc.savePhoto(o[1],(function(a){"1"==a?(t.detailData.popupShow=!1,t.$emit("setshareData",t.detailData),t.$Toast("保存成功！")):t.$Toast("保存失败！")}))}))}}},h=(e("6rt3"),e("KHd+")),p=Object(h.a)(d,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"body"},[e("nav-top",{attrs:{title:"我的微店"},on:{backEvent:function(a){return t.$router.go(-1)}}}),t._v(" "),e("nav-content",[e("div",{staticClass:"content"},[e("div",{ref:"imageWrapper",staticClass:"myShop",attrs:{id:"myShop"}},[e("div",{staticClass:"myShopTu"},[e("div",{staticClass:"myShopTop"},[e("img",{attrs:{src:t.imgUrl,alt:""}}),t._v(" "),e("div",{staticClass:"text"},[e("span",{staticClass:"name"},[t._v(t._s(t.detailData.storeName?t.detailData.storeName:"店铺名称"))]),t._v(" "),e("p",{staticClass:"jianjie"},[t._v("简介："+t._s(t.detailData.storeProfile?t.detailData.storeProfile:"请设置简介"))])])]),t._v(" "),e("div",{staticStyle:{width:"80%",height:"0","border-bottom":"rgb(243, 176, 176) 2px dashed",margin:"16px auto"}}),t._v(" "),e("div",{staticClass:"qrcode"},[e("canvas",{attrs:{id:"qrcode"}}),t._v(" "),e("p",[t._v("扫一扫，逛微店")])])])])]),t._v(" "),e("div",{staticClass:"answer theme_bg_red",on:{click:t.downloadImg}},[t._v("保存图片")])])],1)}),[],!1,null,"24fbb6af",null);a.default=p.exports},"6rt3":function(t,a,e){"use strict";var o=e("x3Jf");e.n(o).a},x3Jf:function(t,a,e){}}]);