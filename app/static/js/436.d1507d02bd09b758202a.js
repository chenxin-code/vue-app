(window.webpackJsonp=window.webpackJsonp||[]).push([[436],{"+tY/":function(t,a,s){},"EmR+":function(t,a,s){"use strict";a.a={methods:{dealWithPrice:function(t){if(!(t=Number(t)))return[0,0,"0.00"];var a=(t=String(t.toFixed(2))).split(".")[1],s=t.split(".")[0];return[s,a,s+"."+a]}}}},Zq3a:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAAH7+Yj7AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAAE40lEQVRYCcWYTWhcVRTHM180doLk06Qk6hAiEVETjBUsWgeq+IEoCLH4QY0LLbpIIwpVd65E3Oha0YXFheJGqd3ECIJFwaLEdCGCUppFJ9+0Tprv8XeGOS937rvvYzoTfTCce8/5n/8599zz7ntvmpocV8LUtba2lmSe6OzszG9tbX1vGr2xoBTpKWXgVIphZGQk4wUCtSzgRCLxTcJ2WVlZ8YBlPhsQHEQCmVd7e/vr4i2/XU4QPsqKl8ROyTiXyzUjNiv6KlGVoGmB9bCG6+3t7VBbmVEnItfW1i40Nzc3sf6Zubm5r0xb5JgIP1ctxvYwFjfuA/b09OQI/7fpJAtKqqKtre2UMNgg7EuC8e2XOqrU8iQrg6pQCjJlOTTgfnHgOmUalU10vsUYK20ygd5iDKaxyvhJQ+cemqyK8IVWQ1zZ1dU1vLm5+RP4feJTE2GpVErQy6eRj7oClgvnMqiuo6NjbHt7+1Odh0ktZFpB0sqrq6u/Eb1PdZDpMFQmk8mbFJCmBj0cKX8Ui8XrVVmjPLa0tHRRfZw1pH9/INP7FRQkabTPlpeXj5l2J6EJcLWG2CGbhexGE1vW2wrX3EWqm2DjIzNUB5M0iEyxsaVJGuQUO8MgAtWzkc9R17G6Ccn6E0hfFGL68ZFrIuSB0Eodf4UjJ0R6SW29O0WVYZL7+OGdnZ0zAZvygfjGypD6vE+jvxEWTIMEZjgwMLBvYWFBjqVhyMK4pMnPK8CXISfMQQ6FHwFkFBQlW1pa9s/Ozl4VnEfIst4kk3ejnB32LZbrBU+z7ZOAjkQty0FUVrHcvGlLojhnKmodc0BIebwrieKk7BDXq5425oBGfseGejVUA7V8jOWf1nmY1FYxMb7nKBl/K0Ci324C7TErOmvrZO4jVBDH+nmchnRuy6GhoQdsncx9S7ZBriOLQFdZyX4bK/PADA2w6xXiHsNeNYzMUNB2lq7NUNY4GQp2wnNIJl/TcV1SsrQzdREGnjY2mDb6kP68xdbb81g1tJ32Ys7bcxcvxsfljiXxAxKD8df/S4Kjo6OpqampJ3ianCAZ5/1Bfn/S6oP/SYJ8Mg7yDBgn6AsklJXqhF1U7nIqlerjAXQlds+EEZq27u7u7MbGhrzfjZPMrWLj5dOERI13MpnMXXyfXRFg3RXkzjkMzwl+coD4PgrR1XRRuQcXFxe/U6eaKshWHaBvXuF3HIIblKRRkjv7ZTM54Q1MMJ/Pp6enp59im6SRDwm4xq0Sl9gXffceD5yPbAdvi3luyuNNGvl5ErrOBu7lnOS+5I592hUjQWK/k1Dos9fl2EDdOZ5NdwfxySvNHfLw4pJ/d94GWAgC74G+wLdquX2CuL0ttgFymE5OTh5Ff5IK32nbGzDf4Di5eX5+/lIYV2CCLie+JQ6RrLwvP469Jl+bL51OH+Qg/sXW2/O6gtC/n5PsMzZp1Jzj5Ch37BdROLHHfT9yctG/z9K3Z5zGACX4t+ImJxR1VVBzoJJnqeS9Og+RH3NDvhRi95kakiDJyX9WM8jbfBF2FVMkd2R3Gm9U1xZrCLat1N/fP4z0/lFSW0X+NTEx8ZClizVtSAU1krzJrK+vX2Du/aVM0v/w66XvLiuuFtmQCmrAQqFQzGazgyRUrOhKvJ2MXGtyyttwST/2cePM8LuvXvJ/ATbQs32MVWgTAAAAAElFTkSuQmCC"},cung:function(t,a,s){"use strict";var i=s("+tY/");s.n(i).a},"lNf/":function(t,a,s){"use strict";function i(t){if(Array.isArray(t)){for(var a=0,s=Array(t.length);a<t.length;a++)s[a]=t[a];return s}return Array.from(t)}s.r(a);var e={mixins:[s("EmR+").a],data:function(){return{isShowBuyModal:!1,imageList:[],swiperOption:{speed:500,pagination:{el:".swiper-pagination"},autoplay:!0,loop:!0,observer:!0,observeParents:!0},specActiveIndex:0,specificationList:[],purchaseNum:1,storeInfoData:{},productInfoData:{proSkuMediaModel:{}},inventory:1,skuId:this.$route.query.skuId,facilitiesList:[],entryType:0}},mounted:function(){this.entryType=this.$route.query.entryType||0,this.initDetail()},methods:{choseFeature:function(t,a){this.productInfoData.featureList[a].featureValueList.forEach((function(t){t.isSelect=!1})),t.isSelect=!0,this.$forceUpdate();var s=[];this.productInfoData.featureList.forEach((function(t){t.featureValueList.forEach((function(t){t.isSelect&&s.push(t.featureValueId)}))})),this.initDetail(s)},initDetail:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$STLoading.open(),this.$http.post("/app/json/product/getAppProDetail",{skuId:this.skuId,deliverType:2,productType:5,featureValueIds:a}).then((function(a){var s=a.data;if(t.$STLoading.close(),0==s.status){t.productInfoData=s.data,t.skuId=s.data.skuId,s.data.picUrls instanceof Array&&(t.imageList=s.data.picUrls);var e=[];s.data.featureList instanceof Array&&s.data.featureList.forEach((function(t){e.push.apply(e,i(t.featureValueList))})),e.forEach((function(t){s.data.myFeatureValueList.forEach((function(a){t.featureId==a.featureId&&t.featureValueId==a.featureValueId&&(t.isSelect=!0)}))})),t.getStockNum(),0==t.entryType&&t.getApplicableStores()}else t.$Toast(s.info)})).catch((function(a){t.$Toast("getAppProDetail err "+a),t.$STLoading.close()}))},showBigImageEvent:function(){},goToApplicableStores:function(){this.$router.push({path:"/applicable_stores",query:{skuId:this.skuId,storeOuCode:this.productInfoData.storeOuCode}})},confirm:function(){var t=this;this.$STLoading.open();var a={deliveryType:2,carts:[{skuId:this.skuId,storeOuCode:this.productInfoData.storeOuCode,number:this.purchaseNum,selfActivityId:"",checked:1}]};this.$http.post("/app/json/app_cart/SettleCart",a).then((function(s){var i=s.data;0==i.status?t.$router.push({name:"confirm_order",params:{occurData:i.data.occur[0],settleCartData:a,skuName:t.productInfoData.skuName,salePrice:t.productInfoData.activityPrice,phMainUrl:t.productInfoData.phMainUrl}}):t.$Toast(i.info),t.$STLoading.close()})).catch((function(a){t.$Toast("SettleCart err "+a),t.$STLoading.close()}))},getApplicableStores:function(){var t=this;this.$STLoading.open(),this.$http.post("/app/json/app_cou_service/queryCanUseStoreList",{skuId:this.skuId,storeOuCode:this.productInfoData.storeOuCode,posx:this.$store.state.currentLocation.posx,posy:this.$store.state.currentLocation.posy,getType:1,page:1,rows:1}).then((function(a){var s=a.data;t.$STLoading.close(),0==s.status?s.data instanceof Array&&s.data[0]&&(t.storeInfoData=s.data[0],t.storeInfoData.allStoreNum=s.totalRecords||0,t.getFacilityList()):t.$Toast(s.info)})).catch((function(a){t.$Toast("queryCanUseStoreList err "+a),t.$STLoading.close()}))},getFacilityList:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/app_store/queryFacilityList",{storeId:this.storeInfoData.id}).then((function(a){t.$Loading.close();var s,e=a.data;0==e.status?e.data instanceof Array&&e.data.length>0&&(s=t.facilitiesList).push.apply(s,i(e.data)):t.$Toast(e.info)})).catch((function(a){t.$Loading.close(),t.$Toast("queryFacilityList err "+a)}))},goToMap:function(){this.$bridgefunc.baiduNav({startlong:this.$store.state.currentLocation.posx,startlat:this.$store.state.currentLocation.posy,endlong:this.storeInfoData.posx,endlat:this.storeInfoData.posy,type:"nav"})},getStockNum:function(){var t=this;this.$http.post("/app/json/app_stock/querySkuStockByApp",{productList:[{skuId:this.productInfoData.skuId}],deliverType:2,storeCode:this.productInfoData.storeOuCode}).then((function(a){var s=a.data;0==s.status?t.inventory=s.data.productList[0].stockCurrentNumber:t.$Toast(s.info)})).catch((function(a){t.$Toast("querySkuStockByApp err "+a)}))},dealwithTime:function(){return this.storeInfoData&&this.storeInfoData.openingTime&&this.storeInfoData.closingTime?this.storeInfoData.openingTime+" - "+this.storeInfoData.closingTime:"暂无 - 暂无"}}},o=(s("cung"),s("KHd+")),r=Object(o.a)(e,(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"container"},[i("div",{staticClass:"content-c"},[i("div",{staticClass:"swiper-container"},[i("div",{staticClass:"back-btn",on:{click:function(a){return t.$router.go(-1)}}},[i("i",{staticClass:"iconfont mall-fanhui"})]),t._v(" "),i("swiper",{staticStyle:{height:"200px"},attrs:{options:t.swiperOption}},[t._l(t.imageList,(function(a,s){return i("swiper-slide",{key:s},[i("div",{staticClass:"swiper-item",on:{click:t.showBigImageEvent}},[i("img",{staticClass:"prod-img",attrs:{src:a}})])])})),t._v(" "),i("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1),t._v(" "),i("div",{staticClass:"service-info"},[i("p",{staticClass:"ser-name"},[t._v(t._s(t.productInfoData.skuName))]),t._v(" "),i("div",{staticClass:"price-c"},[i("span",{staticClass:"current-price"},[t._v("¥"+t._s(t.dealWithPrice(t.productInfoData.activityPrice)[2]))]),t._v(" "),t.productInfoData.activityPrice!=t.productInfoData.salePrice?i("span",{staticClass:"old-price"},[t._v("¥"+t._s(t.dealWithPrice(t.productInfoData.salePrice)[2]))]):t._e()])]),t._v(" "),0==t.entryType?i("div",{staticClass:"public-block store-info"},[i("div",{staticClass:"top-info",on:{click:t.goToApplicableStores}},[i("p",{staticClass:"title"},[t._v("适用门店")]),t._v(" "),i("p",{staticClass:"match-num"},[t._v("共"+t._s(t.storeInfoData.allStoreNum)+"家"),i("i",{staticClass:"iconfont mall-gengduojiantou arrow-icon"})])]),t._v(" "),i("div",{staticClass:"bottom-info",on:{click:t.goToMap}},[i("div",{staticClass:"airport-info"},[i("p",{staticClass:"name"},[t._v(t._s(t.storeInfoData.storeName))]),t._v(" "),i("p",{staticClass:"time"},[t._v("时间："+t._s(t.dealwithTime()))]),t._v(" "),i("p",{staticClass:"address"},[t._v(t._s(t.storeInfoData.address))])]),t._v(" "),i("div",{staticClass:"navigation-info"},[i("img",{staticClass:"icon-nav",attrs:{src:s("Zq3a"),alt:""}}),t._v(" "),i("span",{staticClass:"nav-text"},[t._v(t._s(t.$util.toDecimal2(t.storeInfoData.distance/1e3))+"km")])])])]):t._e(),t._v(" "),t.facilitiesList.length>0?i("div",{staticClass:"public-block store-facilities"},[i("p",{staticClass:"title"},[t._v("门店设施")]),t._v(" "),i("ul",{staticClass:"facilities-list"},t._l(t.facilitiesList,(function(a,s){return i("li",{key:s,staticClass:"item"},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:a.facilityIconUrl,alt:""}})]),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(a.facilityName))])])})),0)]):t._e(),t._v(" "),i("div",{staticClass:"public-block prod-info"},[i("p",{staticClass:"title"},[t._v("产品介绍")]),t._v(" "),i("div",{staticClass:"prod-content",domProps:{innerHTML:t._s(t.productInfoData.proSkuMediaModel.mobileDetail)}})])]),t._v(" "),i("div",{staticClass:"chum-public-btn bottom-btn"},[i("van-button",{attrs:{round:"",block:"",type:"info",color:"linear-gradient(270deg,rgba(49,49,49,1) 0%,rgba(84,84,84,1) 51%,rgba(49,49,49,1) 100%)"},on:{click:function(a){t.isShowBuyModal=!0}}},[t._v("立即购买")])],1),t._v(" "),i("van-popup",{staticClass:"buy-modal",attrs:{position:"bottom",closeable:""},model:{value:t.isShowBuyModal,callback:function(a){t.isShowBuyModal=a},expression:"isShowBuyModal"}},[i("div",{staticClass:"prod-info"},[i("img",{staticClass:"prod-img",attrs:{src:t.productInfoData.phMainUrl,alt:""}}),t._v(" "),i("div",{staticClass:"right"},[i("p",{staticClass:"name"},[t._v(t._s(t.productInfoData.skuName))]),t._v(" "),i("div",{staticClass:"price"},[i("span",{staticClass:"current-price"},[t._v("¥"+t._s(t.dealWithPrice(t.productInfoData.activityPrice)[2]))]),t._v(" "),t.productInfoData.activityPrice!=t.productInfoData.salePrice?i("span",{staticClass:"old-price"},[t._v("¥"+t._s(t.dealWithPrice(t.productInfoData.salePrice)[2]))]):t._e()])])]),t._v(" "),i("div",{staticClass:"specification"},t._l(t.productInfoData.featureList,(function(a,s){return i("div",{key:s,staticClass:"speci-c"},[i("p",{staticClass:"title"},[t._v(t._s(a.featureName))]),t._v(" "),i("ul",{staticClass:"speci-list"},t._l(a.featureValueList,(function(a,e){return i("li",{key:e,staticClass:"item",class:{active:a.isSelect},on:{click:function(i){return t.choseFeature(a,s)}}},[t._v(t._s(a.featureValue))])})),0)])})),0),t._v(" "),i("div",{staticClass:"purchase-quantity"},[i("p",{staticClass:"title"},[t._v("购买数量（库存"+t._s(t.inventory)+"）")]),t._v(" "),i("van-stepper",{staticClass:"reset-setpper",attrs:{min:1,integer:"",max:t.inventory},model:{value:t.purchaseNum,callback:function(a){t.purchaseNum=a},expression:"purchaseNum"}})],1),t._v(" "),i("div",{staticClass:"chum-public-btn modal-submit-btn"},[i("van-button",{attrs:{round:"",block:"",type:"info",color:"linear-gradient(270deg,rgba(49,49,49,1) 0%,rgba(84,84,84,1) 51%,rgba(49,49,49,1) 100%)"},on:{click:t.confirm}},[t._v("立即购买")])],1)])],1)}),[],!1,null,"534c3d58",null);a.default=r.exports}}]);