(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4621816"],{"07ff":function(t,e,i){},"4db8":function(t,e,i){},7273:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABTUlEQVRIS73Uvy5FQRDH8e+v0SoRCYlKo9GJF7ghCpVKxSNolZ5ColPphAKJCCFqjdpTiJCMTLI32dzYe87+ObY/+zkzv9kRjY+ZzQALkj6mXa2WrpmtA1fAPHAs6SR1fzM4oPfAbMBeJW0MCv+BGrAn6WIwOIHuSzofLONS1H+oOOMatBiuRYvgFmg23ArNghPooaSzkiXUa7hao70qNrM14CnaSL4ciisdd2dqxQF9i1rZBO2s2Mwcis9BaaaTc9BV8SS8KemlZJhy4VXgPfroE9iS9FCLd061ma0Aj8BiwL6AUS3eCTtmZsvAc0u8FzwE3htujWfBEe6ZL0WZ70i6yxm4bDjgPmj+rMb4N7CdgxfBLfBiOMK97f7k/PSuvAoO+Fxoe4zvSrqelnk1nMB/Qua3KbwJnMBvJI0GhyP8FPAdfyTp8l/gnHf8C8iaph82lunDAAAAAElFTkSuQmCC"},"8bbf":function(t,e,i){"use strict";i("4db8")},"9fa5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"oil-order_background"},[i("Navigation",{attrs:{title:"加油记录",hasBack:"1",rightText:"筛选"},on:{backEvent:t.backEvent,rightClick:t.rightClick}}),i("div",{staticClass:"content_div",style:{marginTop:t.topHeight+"px"}},[t._m(0),t.unFinishedOrder?i("div",{staticClass:"content-item unFinished"},[i("ul",{staticClass:"ul"},t._l(t.unFinishedOrder,(function(e,n){return i("li",{key:n,staticClass:"li"},[i("div",{staticClass:"li-item"},[i("span",{staticClass:"item-left"},[i("span",[t._v("订单号：")]),i("span",[t._v(t._s(e.orderNo))])]),i("span",{staticClass:"item-right item-top"},[t._v("￥"+t._s(e.payAmount))])]),i("div",{staticClass:"li-item"},[i("span",{staticClass:"item-left"},[t._v(t._s(e.createTime))]),i("span",{staticClass:"item-right item-bottom"},[t._v("开具发票")])])])})),0)]):t._e(),i("div",{staticClass:"content-item finished"},[i("pull-to",{staticClass:"pullTo",attrs:{"bottom-load-method":t.getMore,"top-load-method":t.refresh}},[i("ul",{staticClass:"ul"},t._l(t.finishedOrder,(function(e,n){return i("li",{key:n,staticClass:"li",on:{click:function(e){return t.slectOrder(n)}}},[i("div",{staticClass:"li-item"},[i("span",{staticClass:"item-left"},[i("span",[t._v("订单号：")]),i("span",[t._v(t._s(e.orderNo))])]),i("span",{staticClass:"item-right item-top"},[t._v("￥"+t._s(e.payAmount))])]),i("div",{staticClass:"li-item"},[i("span",{staticClass:"item-left"},[t._v(t._s(e.createTime))]),"00"==t.checkFp(e)?i("span",{staticClass:"item-right item-bottom notHelp"},[t._v("不支持")]):t._e(),"01"==t.checkFp(e)?i("span",{staticClass:"item-right item-bottom",on:{click:function(e){return t.openInvoice(n)}}},[t._v("开具发票")]):t._e(),"02"==t.checkFp(e)?i("span",{staticClass:"item-right item-bottom openSuccess",on:{click:function(i){return t.lookInvoice(e)}}},[t._v("已开发票")]):t._e()])])})),0)])],1),t.hightSlected&&t.slectedData?i("hight-slected-page",{style:{top:t.topHeight+"px"},attrs:{pageData:t.slectedData},on:{dismiss:t.hightDismiss,heightSlect:t.heightSlect}}):t._e()],1)],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-item top"},[i("span",{staticClass:"title"},[t._v("全部订单")]),i("img",{staticClass:"img",attrs:{src:"static/image/refuel/calendar.png"}})])}],a=(i("0d03"),i("d3b7"),i("25f0"),i("e25e"),i("4160"),i("159b"),i("ac1f"),i("1276"),i("76a0")),o=i("b5f2"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom",on:{scroll:function(t){t.stopPropagation()},click:t.dismiss}},[i("div",{staticClass:"content"},[t.pageData.payModes?i("div",{staticClass:"content-item"},[i("div",{staticClass:"item-title"},[t._v("支付方式：")]),i("div",{staticClass:"item-detail"},t._l(t.pageData.payModes,(function(e,n){return i("span",{key:n,class:n===t.paySlected?"slected-span":"span",on:{click:function(e){return e.stopPropagation(),t.payModeSlected(n)}}},[t._v(t._s(e.channelInfo))])})),0)]):t._e(),i("div",{staticClass:"content-bottom"},[i("span",{staticClass:"left-span",on:{click:function(e){return t.bottomClick("0")}}},[t._v("取消")]),i("span",{staticClass:"right-span",on:{click:function(e){return t.bottomClick("1")}}},[t._v("确定")])])])])},r=[],h={name:"",props:["pageData"],components:{},data:function(){return{paySlected:0}},methods:{testFunc:function(){},payModeSlected:function(t){this.paySlected=t},bottomClick:function(t){"0"==t?this.dismiss():this.$emit("heightSlect",this.pageData.payModes[this.paySlected])},dismiss:function(){this.$emit("dismiss")}},created:function(){}},u=h,l=(i("f816"),i("0c7c")),d=Object(l["a"])(u,c,r,!1,null,"c9aa537c",null),p=d.exports,f={name:"mine-card-record",components:{PullTo:PullTo,Toast:a["Toast"],Navigation:o["a"],hightSlectedPage:p},data:function(){return{topHeight:0,tag:0,paySlected:0,slectedData:{},finishedOrder:[],unFinishedOrder:null,hightSlected:!1,pageNum:"1",pageSize:"10",finishOptionDefault:{queryType:"0",channelType:"",pageNum:"1",pageSize:"10",startDate:"",endDate:""},finishQueryOption:{}}},methods:{lookInvoice:function(t){Object(a["Toast"])({message:"请到电子发票>我的发票查看",position:"bottom",duration:2e3})},getMore:function(t){this.pageNum=(parseInt(this.pageNum)+1).toString(),this.finishQueryOption.pageNum=this.pageNum;var e=this;this.queryFinishOrder().then((function(i){i.forEach((function(t){e.finishedOrder.push(t)})),t("done")}))["catch"]((function(){t("fail")}))},refresh:function(t){this.pageNum=1,this.finishQueryOption.pageNum=this.pageNum;var e=this;this.queryFinishOrder().then((function(i){e.finishedOrder=i,t("done")}))["catch"]((function(){t("fail")}))},rightClick:function(){this.hightSlected=!0},backEvent:function(){this.$bridgefunc.customGo(-1)},queryPayModeList:function(){var t="/app/json/refuel/getRefuelChannels",e=this;this.$http.post(t,{token:this.$store.state.login.token}).then((function(t){var i=t.data;0==i.status?e.slectedData.payModes=i.data:Object(a["Toast"])({message:i.info?i.info:"",position:"bottom",duration:2e3})}),(function(t){e.$Loading.close(),Object(a["Toast"])({message:"",position:"bottom",duration:2e3})}))},queryUnFinishOrder:function(){var t="/app/json/refuel/queryRefuelRecords",e={token:this.$store.state.login.token},i=this;this.$http.post(t,e).then((function(t){i.$Loading.close();var e=t.data;0==e.status?i.unFinishedOrder=e.data:Object(a["Toast"])({message:e.info?e.info:"",position:"bottom",duration:2e3})}),(function(t){i.$Loading.close(),Object(a["Toast"])({message:"",position:"bottom",duration:2e3})}))},queryFinishOrder:function(){var t=this,e=this,i=new Promise((function(i,n){e.$Loading.open();var s="/app/json/refuel/queryFinishedRecord",o={token:e.$store.state.login.token,queryType:e.finishQueryOption.queryType,channelType:e.finishQueryOption.channelType,pageNum:e.finishQueryOption.pageNum,pageSize:e.finishQueryOption.pageSize,startDate:e.finishQueryOption.startDate,endDate:e.finishQueryOption.endDate};t.$http.post(s,o).then((function(t){e.$Loading.close();var s=t.data;0==s.status?i(s.data):(Object(a["Toast"])({message:s.info?s.info:"消费记录查询失败",position:"bottom",duration:2e3}),n())}),(function(t){e.$Loading.close(),Object(a["Toast"])({message:"消费记录查询失败",position:"bottom",duration:2e3}),n()}))}));return i},payModeSlected:function(t){this.paySlected=t},slectOrder:function(t){},openInvoice:function(t){var e=this.finishedOrder[t],i={type:"00",record:e},n=this;this.$bridgefunc.vuexStorage((function(){n.$bridgefunc.customPush({path:"/selectinvoice",isnativetop:"1",query:{fPContentMessage:encodeURIComponent(JSON.stringify(i))}})}))},checkFp:function(t){if("110"==t.channel||"908"==t.channel)return t.invoiceNo.length>0?"02":"01";if("907"==t.channel){var e=t.remark,i=e.split("-")[1];return"1"==i?t.invoiceNo.length>0?"02":"01":"00"}return"00"},hightDismiss:function(){this.hightSlected=!1},heightSlect:function(t){this.hightSlected=!1,this.finishQueryOption=this.finishOptionDefault,this.finishQueryOption.channelType=t.channelCode,this.finishQueryOption.queryType="1";var e=this;this.queryFinishOrder().then((function(t){e.finishedOrder=t}))}},mounted:function(){var t=this;this.$bridgefunc.registePageShow((function(){t.queryFinishOrder().then((function(e){t.finishedOrder=e}))}))},created:function(){this.topHeight=this.$store.state.barHeight+this.$market.getNavHeight();var t=this;this.finishQueryOption=this.finishOptionDefault,this.queryFinishOrder().then((function(e){t.finishedOrder=e})),this.queryPayModeList(),this.queryUnFinishOrder()},computed:{}},g=f,m=(i("8bbf"),Object(l["a"])(g,n,s,!1,null,"29aa6709",null));e["default"]=m.exports},b2ca:function(t,e,i){},b5f2:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigation",style:t.getTotalHeight()},[n("div",{staticClass:"navigation-content",style:{top:this.$store.state.barHeight+"px"}},["1"==t.hasBack?n("div",{staticClass:"back-div",on:{click:function(e){return t.backEvent()}}},[n("img",{staticClass:"back-img",attrs:{src:i("7273")}})]):t._e(),n("div",{staticClass:"page-title"},[t._v(t._s(t.title))])])])},s=[],a={name:"",props:["title","hasBack"],data:function(){return{}},methods:{backEvent:function(){this.$emit("backEvent","")},getTotalHeight:function(){return"height:"+(this.$store.state.barHeight+this.$market.getNavHeight())+"px;"}},created:function(){}},o=a,c=(i("dbe2"),i("0c7c")),r=Object(c["a"])(o,n,s,!1,null,"10d89d92",null);e["a"]=r.exports},dbe2:function(t,e,i){"use strict";i("b2ca")},f816:function(t,e,i){"use strict";i("07ff")}}]);