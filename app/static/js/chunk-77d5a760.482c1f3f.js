(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77d5a760"],{"15f5":function(t,i,a){},e201:function(t,i,a){"use strict";a.r(i);var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"container"},[a("van-tabs",{staticClass:"reset-tab",attrs:{"title-active-color":"#5076B8",color:"#5076B8",border:!1,"line-width":"20px","line-heigh":"3px"},on:{change:t.changeTab},model:{value:t.tabActive,callback:function(i){t.tabActive=i},expression:"tabActive"}},[a("van-tab",{attrs:{title:"加油动态"}}),a("van-tab",{attrs:{title:"我的绩效"}}),a("van-tab",{attrs:{title:"我的客户"}})],1),0==t.tabActive?a("div",{staticClass:"refueling-dynamic"},[a("div",{staticClass:"block"},[a("ul",{staticClass:"month-tab"},[a("li",{staticClass:"item",class:{active:0==t.queryDynamicTimeType},on:{click:function(i){return t.changeDynamicQueryTime(0)}}},[t._v(t._s(t.showDynamicMonth)+"月"),a("van-icon",{staticClass:"icon-arrow",attrs:{name:"arrow-down"}})],1),a("li",{staticClass:"item",class:{active:1==t.queryDynamicTimeType},on:{click:function(i){return t.changeDynamicQueryTime(1)}}},[t._v("累计")])]),a("div",{staticClass:"amount-info"},[a("p",{staticClass:"num"},[t._v(t._s(t.oilTotalInfo.oilLitre||0)+"L")]),a("p",{staticClass:"name"},[t._v("合计加油")])])]),a("div",{staticClass:"block dynamic-container"},[a("div",{staticClass:"filter-info"},[a("div",{staticClass:"select-filter"},[t.queryDynamicMonth&&1==t.queryDynamicTimeType?a("van-tag",{attrs:{plain:"",type:"primary",closeable:"",size:"medium",color:"#5076b8"},on:{close:t.clearQueryDynamicMonth}},[t._v(t._s(t.queryDynamicMonth))]):t._e()],1),a("div",{staticClass:"filter-btn",on:{click:t.openFilterPopup}},[t._v("筛选"),a("van-icon",{staticClass:"icon-filter-btn",attrs:{name:"play"}})],1)]),a("van-list",{staticClass:"dynamic-list-container",attrs:{finished:t.dynamicFinished,"finished-text":"没有更多了",offset:200},on:{load:t.loadDynamicMore},model:{value:t.isDynamicLoading,callback:function(i){t.isDynamicLoading=i},expression:"isDynamicLoading"}},[a("ul",{staticClass:"dynamic-list"},t._l(t.dynamicList,(function(i,s){return a("li",{key:s,staticClass:"item"},[a("div",{staticClass:"top-info"},[a("div",{staticClass:"dynamic-item"},[a("div",{staticClass:"label"},[t._v("交易单号：")]),a("div",{staticClass:"content"},[t._v(t._s(i.orderNo))])]),a("div",{staticClass:"dynamic-item"},[a("div",{staticClass:"label"},[t._v("交易类型：")]),a("div",{staticClass:"content"},[t._v(t._s(i.payModeStr))])]),a("div",{staticClass:"dynamic-item"},[a("div",{staticClass:"label"},[t._v("加油升数：")]),a("div",{staticClass:"content"},[t._v(t._s(i.oilLiter)+"L")])]),a("div",{staticClass:"dynamic-item"},[a("div",{staticClass:"label"},[t._v("交易金额：")]),a("div",{staticClass:"content"},[t._v(t._s(i.amount))])]),a("div",{staticClass:"dynamic-item"},[a("div",{staticClass:"label"},[t._v("实际金额：")]),a("div",{staticClass:"content"},[t._v(t._s(i.realAmount))])]),a("div",{staticClass:"dynamic-item"},[a("div",{staticClass:"label"},[t._v("优惠赠送：")]),a("div",{staticClass:"content spec",on:{click:function(a){return t.toRebateDetails(i)}}},[t._v("详情"),a("van-icon",{staticClass:"icon-arrow",attrs:{name:"arrow"}})],1)]),a("div",{staticClass:"dynamic-item"},[a("div",{staticClass:"label"},[t._v("交易品类：")]),a("div",{staticClass:"content"},[t._v(t._s(i.oilName))])]),a("div",{staticClass:"dynamic-item"},[a("div",{staticClass:"label"},[t._v("交易时间：")]),a("div",{staticClass:"content"},[t._v(t._s(i.opeTime))])]),a("div",{staticClass:"dynamic-item"},[a("div",{staticClass:"label"},[t._v("交易站点：")]),a("div",{staticClass:"content"},[t._v(t._s(i.stationOuName))])])]),a("div",{staticClass:"btm-user-info",on:{click:function(a){return t.dynamicPerClick(i)}}},[a("div",{staticClass:"left-info"},[a("img",{staticClass:"avatar",attrs:{src:i.avtUrl,alt:""}}),a("p",{staticClass:"name"},[t._v(t._s(i.nickName)+"/"+t._s(i.userPhone))])]),a("van-icon",{staticClass:"icon-arrow",attrs:{name:"arrow"}})],1)])})),0)])],1)]):1==t.tabActive?a("div",{staticClass:"performance"},[a("div",{staticClass:"block"},[a("ul",{staticClass:"month-tab"},[a("li",{staticClass:"item",class:{active:0==t.queryTimeType},on:{click:function(i){return t.changeQueryTime(0)}}},[t._v(t._s(t.showMonth)+"月"),a("van-icon",{staticClass:"icon-arrow",attrs:{name:"arrow-down"}})],1),a("li",{staticClass:"item",class:{active:1==t.queryTimeType},on:{click:function(i){return t.changeQueryTime(1)}}},[t._v("累计")])]),a("div",{staticClass:"amount-info",on:{click:t.toPerformanceDesc}},[a("p",{staticClass:"num"},[t._v(t._s(t.$util.toDecimal2(t.cumulatInfo.performance)))]),a("p",{staticClass:"name"},[t._v("绩效金额")]),a("van-icon",{staticClass:"icon-right-arrow",attrs:{name:"arrow"}})],1)]),a("div",{staticClass:"block leaderboard"},[a("p",{staticClass:"title"},[a("span",{on:{click:t.showEruda}},[t._v("贡献排行榜")]),a("span",{staticClass:"title-sub"},[t._v("累计加油金额："+t._s(t.$util.toDecimal2(t.cumulatInfo.totalAmount))+"RMB")])]),a("van-list",{staticClass:"personal-list",attrs:{finished:t.finished,"finished-text":"没有更多了",offset:200},on:{load:t.loadMore},model:{value:t.isLoading,callback:function(i){t.isLoading=i},expression:"isLoading"}},[0!==t.personalList.length?a("ul",{staticClass:"personal-c"},t._l(t.personalList,(function(i,s){return a("li",{key:s,staticClass:"item",on:{click:function(a){return t.perClick(i)}}},[a("div",{staticClass:"left"},[a("img",{staticClass:"avatar",attrs:{src:i.userWxUrl,alt:""}})]),a("div",{staticClass:"center"},[a("p",{staticClass:"name-info"},[a("span",[t._v(t._s(i.userWxName))]),t._v("/"),a("span",[t._v(t._s(i.userWxRemark))])]),a("p",{staticClass:"refuel-info"},[a("span",[t._v(t._s(t.$util.toDecimal2(i.orderTotalAmount))+"RMB")])])]),a("div",{staticClass:"right"},[a("van-icon",{attrs:{name:"arrow"}})],1)])})),0):t._e()])],1)]):a("div",{staticClass:"clientele"},[a("div",{staticClass:"block total-info"},[a("div",{staticClass:"total-num"},[a("p",{staticClass:"num"},[t._v(t._s(t.cumulativeCustomersInfo.allCustomerNum))]),a("p",{staticClass:"name"},[t._v("累计客户")])]),a("div",{staticClass:"total-integral"},[a("p",{staticClass:"num"},[t._v(t._s(t.cumulativeCustomersInfo.allActiveCustomerNum))]),a("p",{staticClass:"name"},[t._v("累计活跃")])])]),a("ul",{staticClass:"func-list"},t._l(t.funcList,(function(i,s){return a("li",{key:s,staticClass:"item",on:{click:function(a){return t.funcClick(i)}}},[a("p",{staticClass:"name"},[t._v(t._s(i.name))]),a("van-icon",{staticClass:"clientele-arrow-icon",attrs:{name:"arrow"}})],1)})),0)]),a("van-popup",{attrs:{position:"bottom","close-on-click-overlay":!1},model:{value:t.isShowDatePicker,callback:function(i){t.isShowDatePicker=i},expression:"isShowDatePicker"}},[a("div",{staticClass:"date-picker-btn"},[a("span",{staticClass:"btn",on:{click:function(i){t.isShowDatePicker=!1}}},[t._v("取消")]),a("span",{staticClass:"btn confirm",on:{click:t.confirmDate}},[t._v("确定")])]),1==t.openDatePickerType?a("div",{staticClass:"oil-input",on:{click:function(i){i.stopPropagation(),t.isShowOilTypePicker=!0}}},[a("div",{staticClass:"label"},[t._v("油品")]),a("div",{staticClass:"content"},[t._v(t._s(t.choseOilType.name))]),"全部"!=t.choseOilType.name?a("van-icon",{staticClass:"icon-clear-oil-type",attrs:{name:"close"},on:{click:function(i){i.stopPropagation(),t.choseOilType.name="全部"}}}):t._e()],1):t._e(),a("van-datetime-picker",{attrs:{type:"year-month","max-date":t.maxDate,"show-toolbar":!1,formatter:t.formatter},model:{value:t.currentDate,callback:function(i){t.currentDate=i},expression:"currentDate"}})],1),a("van-popup",{attrs:{position:"bottom","close-on-click-overlay":!1},model:{value:t.isShowDayPicker,callback:function(i){t.isShowDayPicker=i},expression:"isShowDayPicker"}},[a("div",{staticClass:"date-picker-btn"},[a("span",{staticClass:"btn",on:{click:function(i){t.isShowDayPicker=!1}}},[t._v("取消")]),a("span",{staticClass:"btn confirm",on:{click:t.confirmDay}},[t._v("确定")])]),a("div",{staticClass:"oil-input",on:{click:function(i){i.stopPropagation(),t.isShowOilTypePicker=!0}}},[a("div",{staticClass:"label"},[t._v("油品")]),a("div",{staticClass:"content"},[t._v(t._s(t.choseOilType.name))])]),a("van-picker",{ref:"dayPicker",attrs:{"visible-item-count":5,columns:t.dayColumns},on:{change:t.changeDayPicker}})],1),a("van-popup",{attrs:{position:"bottom","close-on-click-overlay":!1},model:{value:t.isShowOilTypePicker,callback:function(i){t.isShowOilTypePicker=i},expression:"isShowOilTypePicker"}},[a("div",{staticClass:"date-picker-btn"},[a("span",{staticClass:"btn",on:{click:function(i){t.isShowOilTypePicker=!1}}},[t._v("取消")]),a("span",{staticClass:"btn confirm",on:{click:t.confirmOilType}},[t._v("确定")])]),a("van-picker",{ref:"oilTypePicker",attrs:{"value-key":"name","visible-item-count":5,columns:t.oilTypeColumns}})],1)],1)},e=[],n=a("5530"),o=a("2909"),c=(a("c3a6"),a("ad06")),r=(a("0d03"),a("a9e3"),a("d3b7"),a("ddb0"),a("b0c0"),a("99af"),a("c1df")),l=a.n(r),u={components:{Icon:c["a"]},data:function(){return{pageInfo:{page:0,rows:10},dynamicList:[],tabActive:0,queryTimeType:0,isLoading:!1,finished:!0,personalList:[],funcList:[{name:"未注册会员",customerType:-1},{name:"油滴会员",customerType:2},{name:"活跃用户",customerType:4},{name:"非活跃用户",customerType:5}],currentDate:new Date,maxDate:new Date,isShowDatePicker:!1,queryMonth:l()().format("YYYY-MM"),showMonth:l()().format("M"),cumulatInfo:{},cumulativeCustomersInfo:{allCustomerNum:0,allActiveCustomerNum:0},clickTime:-1,vConsoleTimes:0,showDynamicMonth:l()().format("M"),queryDynamicMonth:l()().format("YYYY-MM"),queryDynamicTimeType:0,isShowDayPicker:!1,dayColumns:[{values:[],defaultIndex:0},{values:["至"],defaultIndex:0},{values:[],defaultIndex:0}],openDatePickerType:0,isShowOilTypePicker:!1,oilTypeColumns:[{value:"",name:"全部"},{value:92,name:"92汽油"},{value:95,name:"95汽油"},{value:98,name:"98汽油"},{value:0,name:"柴油"}],choseOilType:{name:"全部"},isDynamicLoading:!1,dynamicFinished:!1,oilTotalInfo:{orderAmount:"",oilLitre:""},queryStartDay:"",queryEndDay:""}},mounted:function(){this.$route.query.token?(this.$store.state.login.token=this.$route.query.token,this.initOilTotal()):alert("获取token错误！");for(var t=1;t<=Number(l()().endOf("month").format("D"));t++)this.dayColumns[0].values.push(t+"日"),this.dayColumns[2].values.push(t+"日")},methods:{showEruda:function(){var t=(new Date).getTime();t-this.clickTime<1e3||-1==this.clickTime?(this.vConsoleTimes+=1,this.clickTime=t,5==this.vConsoleTimes&&(eruda.init(),this.vConsoleTimes=0,this.clickTime=-1)):(this.vConsoleTimes=0,this.clickTime=-1)},initCumulativeInfo:function(){var t=this;this.$Loading.open();var i="/app/json/wechat_qy/queryEmpPerformanceThisMonth",a={};0==this.queryTimeType?(i="/app/json/wechat_qy/queryEmpPerformanceThisMonth",a={calMonth:this.queryMonth}):(i="/app/json/wechat_qy/queryEmpPerformanceAll",a={}),this.$http.post(i,a).then((function(i){t.$Loading.close();var a=i.data;0==a.status?t.cumulatInfo=a.data:t.$Toast(a.info)}))["catch"]((function(i){t.$Loading.close(),t.$Toast("queryEmpPerformanceThisMonth err ".concat(i))}))},initCustomerList:function(){var t=this;this.$Loading.open(),this.personalList=[];var i="/app/json/wechat_qy/queryCustomerOrderListThisMonth",a={};0==this.queryTimeType?(i="/app/json/wechat_qy/queryCustomerOrderListThisMonth",a={calMonth:this.queryMonth}):(i="/app/json/wechat_qy/queryCustomerOrderListAll",a={}),this.$http.post(i,a).then((function(i){t.$Loading.close();var a,s=i.data;0==s.status?s.data instanceof Array&&s.data.length>0&&(a=t.personalList).push.apply(a,Object(o["a"])(s.data)):t.$Toast(s.info)}))["catch"]((function(i){t.$Loading.close(),t.$Toast("queryEmpPerformanceThisMonth err ".concat(i))}))},getCustomerNum:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/wechat_qy/queryCustomerNum",{}).then((function(i){t.$Loading.close();var a=i.data;0==a.status?a.data&&(t.cumulativeCustomersInfo=a.data):t.$Toast(a.info)}))["catch"]((function(i){t.$Loading.close(),t.$Toast("queryCustomerNum err ".concat(i))}))},changeTab:function(t){1==t?(this.initCumulativeInfo(),this.initCustomerList()):2==t&&(this.initCustomerList(),this.getCustomerNum()),this.currentDate=new Date},changeQueryTime:function(t){this.queryTimeType=t,0==t?(this.openDatePickerType=2,this.isShowDatePicker=!0):(this.currentDate=new Date,this.initCumulativeInfo(),this.initCustomerList())},loadMore:function(){},perClick:function(t){this.$router.push({path:"/performance-contribution-ranking",query:{userId:t.userId,userWxUrl:t.userWxUrl,userWxName:t.userWxName,orderTotalAmount:t.orderTotalAmount,calMonth:t.calMonth,userPhone:t.userPhone}})},dynamicPerClick:function(t){this.$router.push({path:"/performance-contribution-ranking",query:{userId:t.userId,userWxUrl:t.avtUrl,userWxName:t.nickName,orderTotalAmount:t.amount,calMonth:t.opeTime,userPhone:t.userPhone}})},formatter:function(t,i){return"year"===t?"".concat(i,"年"):"month"===t?"".concat(i,"月"):i},confirmDate:function(t){if(0==this.openDatePickerType){this.showDynamicMonth=l()(this.currentDate).format("MM"),this.queryDynamicMonth=l()(this.currentDate).format("YYYY-MM"),this.dayColumns[0].values=[],this.dayColumns[2].values=[];for(var i=1;i<=Number(l()(this.currentDate).endOf("month").format("D"));i++)this.dayColumns[0].values.push(i+"日"),this.dayColumns[2].values.push(i+"日");this.pageInfo={page:0,rows:10},this.dynamicList=[],this.isDynamicLoading=!1,this.dynamicFinished=!1,this.initOilTotal(),this.loadDynamicMore()}else 1==this.openDatePickerType?(this.queryDynamicMonth=l()(this.currentDate).format("YYYY-MM"),this.pageInfo={page:0,rows:10},this.dynamicList=[],this.isDynamicLoading=!1,this.dynamicFinished=!1,this.loadDynamicMore()):(this.showMonth=l()(this.currentDate).format("MM"),this.queryMonth=l()(this.currentDate).format("YYYY-MM"),this.initCumulativeInfo(),this.initCustomerList());this.isShowDatePicker=!1},toPerformanceDesc:function(){var t="";t=0==this.queryTimeType?this.queryMonth:"",this.$router.push({path:"/performance-desc",query:{calMonth:t}})},funcClick:function(t){this.$router.push({path:"/performance-member-list",query:{customerType:t.customerType}})},changeDynamicQueryTime:function(t){this.queryDynamicTimeType=t,this.queryStartDay="",this.queryEndDay="",this.choseOilType={name:"全部"},0==t?(this.openDatePickerType=0,this.isShowDatePicker=!0):(this.queryDynamicMonth="",this.pageInfo={page:0,rows:10},this.dynamicList=[],this.isDynamicLoading=!1,this.dynamicFinished=!1,this.loadDynamicMore(),this.initOilTotal())},clearQueryDynamicMonth:function(){this.queryDynamicMonth="",this.pageInfo={page:0,rows:10},this.dynamicList=[],this.isDynamicLoading=!1,this.dynamicFinished=!1,this.loadDynamicMore()},confirmDay:function(){var t=this.$refs.dayPicker.getValues();this.queryStartDay=t[0].substr(0,t[0].length-1),this.queryEndDay=t[2].substr(0,t[2].length-1),this.queryStartDay=this.queryStartDay.length<2?"0"+this.queryStartDay:this.queryStartDay,this.queryEndDay=this.queryEndDay.length<2?"0"+this.queryEndDay:this.queryEndDay,this.isShowDayPicker=!1,this.pageInfo={page:0,rows:10},this.dynamicList=[],this.isDynamicLoading=!1,this.dynamicFinished=!1,this.loadDynamicMore()},openFilterPopup:function(){var t=this;0==this.queryDynamicTimeType?(this.isShowDayPicker=!0,this.$nextTick((function(){if(t.showDynamicMonth==l()().format("M"))t.$refs.dayPicker.setColumnIndex(2,Number(l()().format("D")));else{var i=l()(t.queryDynamicMonth).endOf("month").format("D");t.$refs.dayPicker.setColumnIndex(2,Number(i))}}))):1==this.queryDynamicTimeType&&(this.openDatePickerType=1,this.isShowDatePicker=!0)},changeDayPicker:function(t,i,a){var s="",e="";0==a?(s=i[a],e=i[2]):2==a&&(s=i[0],e=i[a]),Number(s.substr(0,s.length-1))>Number(e.substr(0,e.length-1))&&t.setColumnValue(0==a?2:0,0==a?s:e)},confirmOilType:function(){this.choseOilType=this.$refs.oilTypePicker.getValues()[0],this.isShowOilTypePicker=!1},loadDynamicMore:function(){var t=this;this.pageInfo.page++,this.$Loading.open();var i="";"全部"!=this.choseOilType.name&&(i=this.choseOilType.value);var a="";a=this.queryStartDay&&this.queryEndDay?"".concat(l()(this.queryDynamicMonth).startOf("month").format("YYYY-MM"),"-").concat(this.queryStartDay," 00:00:00TO").concat(l()(this.queryDynamicMonth).endOf("month").format("YYYY-MM"),"-").concat(this.queryEndDay," 23:59:59"):this.queryDynamicMonth?l()(this.queryDynamicMonth).startOf("month").format("YYYY-MM-DD")+" 00:00:00TO"+l()(this.queryDynamicMonth).endOf("month").format("YYYY-MM-DD")+" 23:59:59":"",this.$http.post("/app/json/wechat_qy/queryDynamicCustomerOilOrd",Object(n["a"])({oilNo:i,monthTime:a},this.pageInfo)).then((function(i){t.$Loading.close(),t.isDynamicLoading=!1;var a=i.data;if(0==a.status)if(a.data instanceof Array&&a.data.length>0){var s,e=!1;if(t.dynamicList.length>0)for(var n=0;n<t.dynamicList.length;n++)if(t.dynamicList[n].orderNo==a.data[0].orderNo){e=!0;break}if(!e)(s=t.dynamicList).push.apply(s,Object(o["a"])(a.data));t.dynamicList.length>=a.totalRecords&&(t.dynamicFinished=!0)}else t.dynamicFinished=!0;else t.dynamicFinished=!0,t.$Toast(a.info)}))["catch"]((function(i){t.$Loading.close(),t.$Toast("queryDynamicCustomerOilOrd err ".concat(i))}))},initOilTypeList:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/wechat_qy/getOilTypeTree",{}).then((function(i){t.$Loading.close();var a=i.data;0==a.status?t.oilTypeColumns=a.data||[]:t.$Toast(a.info)}))["catch"]((function(i){t.$Loading.close(),t.$Toast("getOilTypeTree err ".concat(i))}))},initOilTotal:function(){var t=this;this.$Loading.open();var i="";i=0==this.queryDynamicTimeType?this.queryDynamicMonth:"",this.$http.post("/app/json/wechat_qy/queryCustomerOilTotal",{calMonth:i}).then((function(i){t.$Loading.close();var a=i.data;0==a.status?t.oilTotalInfo=a.data||{}:t.$Toast(a.info)}))["catch"]((function(i){t.$Loading.close(),t.$Toast("queryCustomerOilTotal err ".concat(i))}))},toRebateDetails:function(t){this.$router.push({path:"/performance-rebate-details",query:{userId:t.userId,orderNo:t.orderNo}})}}},m=u,h=(a("f868"),a("0c7c")),y=Object(h["a"])(m,s,e,!1,null,"7a2f4d33",null);i["default"]=y.exports},f868:function(t,i,a){"use strict";a("15f5")}}]);