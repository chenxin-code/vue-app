(window.webpackJsonp=window.webpackJsonp||[]).push([[384],{"+tDh":function(t,i,e){t.exports=e.p+"static/img/bg11.49789a3.png"},"1aSc":function(t,i,e){"use strict";var s=e("LJ14");e.n(s).a},F4cU:function(t,i,e){t.exports=e.p+"static/img/icon1@2x.4c91a49.png"},LJ14:function(t,i,e){},jW8M:function(t,i,e){"use strict";e.r(i),e("W34l"),e("2nGb"),e("7ny5");var s={name:"",mixins:[e("yV1S").a],data:function(){return{prizeObj:{},money:"",shareView:!1,sharedView:!1,couPic:"static/image/microShop/succee-icon.png",desc:"",receiveNum:"",residueNum:"",peopleList:[],isReceiveAward:!1,getPrize:[]}},mounted:function(){console.log("sssss",this.$route.query.couNo),this.loadIndex()},computed:{bg:function(){return e("+tDh")}},methods:{get:function(){var t=this,i={token:this.$store.state.login.token,couNo:this.$route.query.couNo};t.getData(i).then((function(i){if(console.log(i),"success"===i.data.result){var e=i.data.data.mktAwardModelList||[];e.length>0&&(t.getPrize=e,t.sharedView=!0,t.loadIndex())}else t.$toast(i.data.info)}))},use:function(){this.$router.replace({path:"/coupon_list"})},close:function(){this.sharedView=!1},backEvent:function(){3==this.$store.state.webtype&&1===window.history.length?wx.miniProgram.reLaunch({url:"/pages/common/home/index"}):this.$router.go(-1)},loadIndex:function(){var t=this,i={token:this.$store.state.login.token,couNo:this.$route.query.couNo};t.detailData(i).then((function(i){if(console.log(i),"success"===i.data.result){var e=i.data.data||{};t.desc=e.desc,t.receiveNum=e.receiveNum?e.receiveNum:0,t.residueNum=e.residueNum?e.residueNum:0,t.prizeObj=e.awardSetings[0]||{},console.log(t.prizeObj.couPic),t.prizeObj.couPic.indexOf("%")>=0?t.prizeObj.couPic=t.prizeObj.couPic.slice(6,t.prizeObj.couPic.length-6):t.prizeObj.couPic=t.prizeObj.couPic,console.log(t.prizeObj.couPic),t.peopleList=e.awards||[],1==e.isReceiveAward?t.isReceiveAward=!1:t.isReceiveAward=!0}else t.$toast(i.data.info)}))}},components:{}},a=(e("1aSc"),e("KHd+")),c=Object(a.a)(s,(function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("nav-top",{attrs:{bgImg:t.bg},on:{backEvent:function(i){return t.$router.go(-1)}}}),t._v(" "),s("nav-content",[s("div",{staticClass:"share-container"},[s("div",{staticClass:"layout-top"},[s("img",{staticClass:"img",attrs:{src:"static/image/microShop/title@2x.png",alt:""}}),t._v(" "),s("p",{staticClass:"p"},[t._v(t._s(t.desc))]),t._v(" "),s("div",{staticClass:"couponDiv"},[s("ul",[s("li",[s("div",{staticClass:"coupon-left",style:{backgroundImage:"url("+(t.prizeObj.couPic?t.prizeObj.couPic:t.couPic)+")"}}),t._v(" "),s("div",{staticClass:"coupon-right"},[s("div",{staticClass:"double-line"},[s("span",{staticClass:"text"},[t._v(t._s(t.prizeObj.couTypeTitle))])]),t._v(" "),s("div",{staticClass:"time-wrapper"},[s("span",{staticClass:"time"},[t._v(t._s(t.prizeObj.validStartDate)+"-"+t._s(t.prizeObj.validEndDate))])]),t._v(" "),s("div",{staticClass:"status"})])])])]),t._v(" "),t.isReceiveAward?s("div",{staticClass:"btn",on:{click:t.get}},[t._v("领取优惠券")]):s("div",{staticClass:"btn",on:{click:t.use}},[t._v("立即使用")])]),t._v(" "),s("div",{staticClass:"layout-bottom"},[s("div",{staticClass:"title"},[t._v("已有"+t._s(t.receiveNum?t.receiveNum:0)+"人领取，还剩"+t._s(t.residueNum?t.residueNum:0)+"人可领取")]),t._v(" "),s("div",{staticClass:"list"},[t._l(t.peopleList,(function(i,a){return t.peopleList.length>0?s("div",{key:a,staticClass:"item"},[s("img",{staticClass:"avatar",attrs:{src:e("F4cU"),alt:""}}),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(i.joinUserNickName))])]),t._v(" "),s("div",{staticClass:"time"},[t._v(t._s(i.createTime))])])]):t._e()})),t._v(" "),0==t.peopleList.length?s("div",{staticClass:"item"},[s("p",[t._v("暂无数据")])]):t._e()],2)])])]),t._v(" "),s("van-popup",{staticClass:"stateBox",model:{value:t.shareView,callback:function(i){t.shareView=i},expression:"shareView"}},[s("img",{attrs:{src:"static/image/microShop/jiantou@2x.png",alt:""}}),t._v(" "),s("p",[t._v("请点击右上角进行分享")])]),t._v(" "),t.sharedView?s("div",{staticClass:"boxModel",on:{click:t.close}},[s("div",{staticClass:"tip shared"},[s("i",{staticClass:"icon iconfont mall-guanbi",on:{click:t.close}}),t._v(" "),s("p",{staticClass:"p"},[t._v("领取成功")]),t._v(" "),s("div",{staticClass:"prizes"},t._l(t.getPrize,(function(i,e){return s("p",{key:e},[t._v("恭喜您获得"+t._s(i.awardName)+t._s(i.awardNum))])})),0)])]):t._e()],1)}),[],!1,null,"27718ae4",null);i.default=c.exports},yV1S:function(t,i,e){"use strict";i.a={methods:{listData:function(t){return this.$http.post("/app/json/fission_activity/getShareUsedCoupons",t)},sharecont:function(t){return this.$http.post("/app/json/fission_activity/share",t)},prize:function(t){return this.$http.post("/app/json/fission_activity/sharedReceiveAward",t)},detailData:function(t){return this.$http.post("/app/json/fission_activity/shareDetails",t)},getData:function(t){return this.$http.post("/app/json/fission_activity/beSharedReceiveAward",t)}}}}}]);