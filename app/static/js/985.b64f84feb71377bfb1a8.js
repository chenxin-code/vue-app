(window.webpackJsonp=window.webpackJsonp||[]).push([[985],{"PUQ/":function(t,e,a){"use strict";var i=a("xk6y");a.n(i).a},m08m:function(t,e,a){"use strict";a.r(e);var i=a("wd/R"),s=a.n(i),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o={data:function(){return{tabs:["推荐购物","推荐加油"],startTime:"",endTime:"",isLoading:!0,finished:!1,pageInfo:{page:0,rows:10},currentTab:0,orderList:[],showDatePicker:!1,DatePicker:!1,maxDate:new Date,startDate:new Date(new Date-5184e5),endDate:new Date,totalInfo:{}}},mounted:function(){this.startTime=s()().subtract(6,"days").format("YYYY-MM-DD"),console.log(this.startDate),this.endTime=s()().format("YYYY-MM-DD"),console.log(this.endDate),this.loadMore()},methods:{formatter:function(t,e){return"year"===t?e+"年":"month"===t?e+"月":e},seeDetails:function(t){this.$router.push({path:"/recommend-commodity/recommended-detail",query:{source:this.currentTab,statisticsTime:t}})},loadMore:function(){var t=this;this.isLoading=!0,this.pageInfo.page++,this.$Loading.open();var e="",a={},i=s()(this.startDate).startOf("day").format("YYYY-MM-DD")+"TO"+s()(this.endDate).endOf("day").format("YYYY-MM-DD");console.log(i),0==this.currentTab?(e="/app/jqGrid/app_recommend/queryOneselfRecommendShoppingList",a=n({statisticsTime:i},this.pageInfo)):(e="/app/jqGrid/app_recommend/queryOneselfRecommendOilList",a=n({statisticsTime:i},this.pageInfo)),this.$http.post(e,a).then((function(e){console.log("res.data",e.data),t.isLoading=!1;var a,i=e.data;0==i.status?i.data instanceof Array?((a=t.orderList).push.apply(a,function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(i.data)),t.finished=!0):t.finished=!0:(t.finished=!0,t.$Toast(i.info)),t.$Loading.close()})).catch((function(e){t.$Toast("queryCouServicePro err "+e),t.$Loading.close()}))},confirmChoseDate:function(){console.log("startData",this.startDate),this.startTime=s()(this.startDate).format("YYYY-MM-DD"),this.showDatePicker=!1,this.pageInfo={page:0,rows:10},this.orderList=[],this.isLoading=!0,this.finished=!1,this.loadMore()},endConfirmChoseDate:function(){this.endTime=s()(this.endDate).format("YYYY-MM-DD"),this.DatePicker=!1,this.pageInfo={page:0,rows:10},this.orderList=[],this.isLoading=!0,this.finished=!1,this.loadMore()},changeTab:function(t){this.currentTab!=t&&(this.currentTab=t,this.pageInfo={page:0,rows:10},this.orderList=[],this.isLoading=!0,this.finished=!1,this.loadMore())},orderClick:function(t){this.$router.push({path:"/recommend-commodity/recommended-order-detail",query:{orderPayType:t.orderPayType,orderType:t.orderType,orderId:t.id,userId:t.userId,tradeNo:t.tradeNo,customType:this.currentTab}})}}},r=(a("PUQ/"),a("KHd+")),c=Object(r.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-top",{on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),a("nav-content",{staticClass:"container"},[a("ul",{staticClass:"top-tab"},t._l(t.tabs,(function(e,i){return a("li",{key:i,staticClass:"item",class:{active:t.currentTab==i},on:{click:function(e){return t.changeTab(i)}}},[t._v(t._s(e))])})),0),t._v(" "),a("div",{staticClass:"total-info"},[a("div",{staticClass:"date",on:{click:function(e){t.showDatePicker=!0}}},[a("p",{staticClass:"time"},[t._v(t._s(t.startTime))]),t._v(" "),a("van-icon",{attrs:{name:"arrow-down"}})],1),t._v(" "),a("span",{staticStyle:{padding:"0 5px"}},[t._v("-")]),t._v(" "),a("div",{staticClass:"date",on:{click:function(e){t.DatePicker=!0}}},[a("p",{staticClass:"time"},[t._v(t._s(t.endTime))]),t._v(" "),a("van-icon",{attrs:{name:"arrow-down"}})],1)]),t._v(" "),a("van-list",{staticClass:"order-list",attrs:{finished:t.finished,"finished-text":"没有更多了",offset:200},on:{load:t.loadMore},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("ul",{staticClass:"order-c"},t._l(t.orderList,(function(e,i){return a("li",{key:i,staticClass:"item",on:{click:function(a){return t.seeDetails(e.statisticsTime)}}},[a("div",{staticClass:"left"},[a("p",{staticClass:"phone"},[a("span",{staticClass:"tip",class:{orange:0!==t.currentTab}},[t._v("共"+t._s(e.recommendedOrderNum)+"笔订单 总金额"+t._s(0!==t.currentTab?e.recommendedOilNum:e.recommendedShoppingNum)+"元")])]),t._v(" "),a("p",{staticClass:"time"},[t._v(t._s(e.statisticsTime))])]),t._v(" "),a("div",{staticClass:"right"},[a("p",{staticClass:"amount"},[t._v("+"+t._s(t.$util.toDecimal2(e.empRebate)))]),t._v(" "),a("div",{staticClass:"details-btn"},[t._v("查看明细"),a("van-icon",{attrs:{name:"arrow"}})],1)])])})),0)])],1),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showDatePicker,callback:function(e){t.showDatePicker=e},expression:"showDatePicker"}},[a("van-datetime-picker",{attrs:{"max-date":t.maxDate,formatter:t.formatter,type:"date"},on:{confirm:t.confirmChoseDate,cancel:function(e){t.showDatePicker=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.DatePicker,callback:function(e){t.DatePicker=e},expression:"DatePicker"}},[a("van-datetime-picker",{attrs:{"max-date":t.maxDate,formatter:t.formatter,type:"date"},on:{confirm:t.endConfirmChoseDate,cancel:function(e){t.DatePicker=!1}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1)}),[],!1,null,"19996195",null);e.default=c.exports},xk6y:function(t,e,a){}}]);