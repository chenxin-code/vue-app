(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2ba7e76"],{"084c":function(t,s,e){"use strict";var i="/app/json/user_invoice_assistant/queryUserInvoiceHeadList",a="/app/json/user_invoice_assistant/queryInvoicedList",n="/app/json/user_invoice_assistant/queryInvoiceDetails",o="/app/json/user_invoice_assistant/addOrUpdateUserInvoiceHead",r="/app/json/user_invoice_assistant/deleteUserInvoiceHead",c="/app/json/user_invoice_assistant/setDefaultUserInvoiceHead",u="/app/json/user_invoice_assistant/searchInvoiceList",p="/app/json/user_invoice_assistant/queryUserInvoiceHeadDetails",d="/app/json/user_invoice_assistant/addInvoicing",l="/app/json/user_invoice_assistant/getResultFromQrcode",h="/app/json/user_invoice_assistant/queryDefaultTittle",v="/app/json/user_invoice_assistant/unInvoicingList",f="/app/json/user_invoice_assistant/queryUserInvoiceHeadDetails",m="/app/json/user_invoice_assistant/queryInvoicedList",_="/app/json/user_invoice_assistant/queryInvoiceDetails",D="/app/json/user_invoice_assistant/invoiceModifyMailbox",y="/app/json/user_invoice_assistant/orderInvoicingInMall",$="/app/json/user_invoice_assistant/gasCardInvoice",g="/app/json/refuel_center/queryOrder",w="/app/json/app_shopping_order/queryOrder",I="/app/json/user_invoice_assistant/queryCashIn",C="/app/json/user_invoice_assistant/sinopecWalletInvoiceList",j="/app/json/user_invoice_assistant/queryUserRefuelingCardInfoList",k="/app/json/user_invoice_assistant/queryConvenienceStoreOrder",L="/app/json/user_invoice_assistant/invoiceContentDetailsList",x="/app/json/user_invoice_assistant/invoiceContentDetails",S="/app/json/user_invoice_assistant/detailsOfInvoiceList",b="/app/json/app_shopping_order/detail",A="/app/json/user_invoice_assistant/convenienceStoredetail",T="/app/json/refuel_center/detail",N="/app/json/user_invoice_assistant/detailsOfInvoiceInfo",q="/app/json/card/getUserCardList",M="/app/json/news/getNewsList",R="/app/json/user_invoice_assistant/invoiceRushRed",O="/app/json/user_invoice_assistant/cashInInvoicing",F="/app/json/user_invoice_assistant/importUserInvoiceHead";s["a"]={methods:{exportinvoiceData:function(t){return this.$http.post(F,t)},golddetailData:function(t){return this.$http.post(N,t)},invoicetipData:function(t){return this.$http.post(M,t)},refundData:function(t){return this.$http.post(R,t)},cardMoData:function(t){return this.$http.post(q,t)},mingxiData:function(t){return this.$http.post(S,t)},malldetailData:function(t){return this.$http.post(b,t)},shopdetailData:function(t){return this.$http.post(A,t)},oildetailData:function(t){return this.$http.post(T,t)},hisdetailData:function(t){return this.$http.post(x,t)},hisData:function(t){return this.$http.post(L,t)},mallData:function(t){return this.$http.post(w,t)},storeData:function(t){return this.$http.post(k,t)},appData:function(t){return this.$http.post(g,t)},goldData:function(t){return this.$http.post(I,t)},walletData:function(t){return this.$http.post(C,t)},cardData:function(t){return this.$http.post(j,t)},commitselfinvoiceData:function(t){return this.$http.post(y,t)},commitselfcardinvoiceData:function(t){return this.$http.post($,t)},commitselfgoldinvoiceData:function(t){return this.$http.post(O,t)},emailData:function(t){return this.$http.post(D,t)},histroydetailData:function(t){return this.$http.post(_,t)},histroyData:function(t){return this.$http.post(m,t)},riseData:function(t){return this.$http.post(i,t)},openedData:function(t){return this.$http.post(a,t)},commitData:function(t){return this.$http.post(o,t)},delData:function(t){return this.$http.post(r,t)},morenData:function(t){return this.$http.post(c,t)},detailData:function(t){return this.$http.post(n,t)},souData:function(t){return this.$http.post(u,t)},soudetailData:function(t){return this.$http.post(p,t)},tijiaoData:function(t){return this.$http.post(d,t)},saoData:function(t){return this.$http.post(l,t)},morentitleData:function(t){return this.$http.post(h,t)},daikaiData:function(t){return this.$http.post(v,t)},chakanData:function(t){return this.$http.post(f,t)}}}},"0e76":function(t,s,e){"use strict";e("582f")},"49cc":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"body"},[e("nav-top",{attrs:{title:"历史发票"},on:{backEvent:function(s){return t.$router.go(-1)}}},[e("div",{staticClass:"shareBox",on:{click:function(s){t.sideFiltrateModalShow=!0}}},[e("span",{staticClass:"iconfont mall-shaixuan"})])]),e("nav-content",[e("div",[t._l(t.listData,(function(s,i){return t.listData.length>0?e("div",{key:i,staticClass:"publicInvoice"},[e("div",{on:{click:function(e){return t.toDetail(s)}}},[e("div",{staticClass:"div1"},[e("span",[t._v("申请时间："+t._s(s.createTime))]),e("span",[t._v(t._s(s.makeOutStatusName))])]),e("div",{staticClass:"div1"},[2!=t.$store.state.webtype?e("span",[t._v(t._s(s.orderTypeName))]):t._e(),e("span",[t._v("可开票金额："+t._s(s.amount)+"元")])])]),0==s.makeOutStatus||2==s.makeOutStatus?e("span",{staticClass:"reInvoice",on:{click:function(e){return t.reorder(s)}}},[t._v("重新开票")]):t._e(),1==s.isShowFlushRed&&"1"==s.makeOutStatus&&t.isDuringDate(s.createTime)?e("span",{staticClass:"reInvoice",on:{click:function(e){return t.refundInvoice(s)}}},[t._v("退票")]):t._e(),1==s.makeOutStatus&&1==t.$store.state.globalConfig.isShowInvoiceQrCode?e("span",{staticClass:"reInvoice",on:{click:function(e){return t.Printing(s)}}},[t._v("打印发票二维码")]):t._e()]):t._e()})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.titleView,expression:"titleView"}]},[e("p",{directives:[{name:"show",rawName:"v-show",value:0==t.listData.length,expression:"listData.length==0"}],staticClass:"nullData"},[t._v("暂无可查询数据")])])],2)]),e("van-overlay",{attrs:{show:t.showCode},on:{click:function(s){t.showCode=!1}}},[e("div",{staticClass:"wrapper",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"block"},[e("canvas",{attrs:{id:"qrcode"}}),e("van-icon",{attrs:{name:"close"},on:{click:function(s){t.showCode=!1}}})],1)])]),e("transition",{attrs:{name:"filtrate-mask"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.sideFiltrateModalShow,expression:"sideFiltrateModalShow"}],staticClass:"filtrate-modal-mask",on:{click:function(s){t.sideFiltrateModalShow=!1}}})]),e("transition",{attrs:{name:"filtrate"}},[t.sideFiltrateModalShow?e("div",{ref:"sideFiltrateModal",staticClass:"filtrate-modal-wrapper"},[e("div",{staticClass:"box"},[e("div",{staticClass:"screen1"},[e("span",{staticClass:"span"},[t._v("发票状态")]),e("div",t._l(t.statusList,(function(s,i){return e("span",{key:i,class:{red:1==s.redData},on:{click:function(e){return t.statusData(s)}}},[t._v(t._s(s.state))])})),0)]),e("div",{staticClass:"screen1"},[e("span",{staticClass:"span"},[t._v("发票类型")]),e("div",t._l(t.typeList,(function(s,i){return e("span",{key:i,class:{red:1==s.redData},on:{click:function(e){return t.typeData(s)}}},[t._v(t._s(s.ordertype))])})),0)]),e("div",{staticClass:"screen1 screen2"},[e("span",{staticClass:"span"},[t._v("发票金额")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.minAmount,expression:"minAmount"}],attrs:{placeholder:"最低金额（元）",type:"number"},domProps:{value:t.minAmount},on:{input:function(s){s.target.composing||(t.minAmount=s.target.value)}}}),e("span",[t._v("~")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.maxAmount,expression:"maxAmount"}],attrs:{placeholder:"最高金额（元）",type:"number"},domProps:{value:t.maxAmount},on:{input:function(s){s.target.composing||(t.maxAmount=s.target.value)}}})])])]),e("div",{staticClass:"filtrate-btn"},[e("div",{on:{click:t.reset}},[t._v("重置")]),e("div",{staticClass:"theme_bg_red",on:{click:t.sure}},[t._v("确定")])])]):t._e()])],1)},a=[],n=(e("e7e5"),e("d399")),o=(e("4160"),e("159b"),e("e25e"),e("0d03"),e("084c")),r=e("d055"),c=e.n(r),u=e("c1df"),p=e.n(u),d={name:"historyInvoice",components:{QRCode:c.a},mixins:[o["a"]],data:function(){return{listData:[],sideFiltrateModalShow:!1,id:"",heightMoney:"",lowMoney:"",titleView:!1,statusList:[{state:"待处理",redData:!1,stateNum:3},{state:"已开票",redData:!1,stateNum:1},{state:"开票失败",redData:!1,stateNum:2}],typeList:[{ordertype:"加油订单开票",redData:!1,orderNum:100},{ordertype:"商品订单开票",redData:!1,orderNum:200}],invoiceStatus:"",orderType:"",minAmount:"",maxAmount:"",showCode:!1,index:null}},created:function(){this.loadData()},mounted:function(){},methods:{loadData:function(){var t=this,s=this,e={token:this.$store.state.login.token,invoiceStatus:s.invoiceStatus,orderType:s.orderType,minAmount:s.minAmount,maxAmount:s.maxAmount};s.histroyData(e).then((function(e){if(e.data.result){s.titleView=!0;var i=e.data.data||[];i.forEach((function(s){s.isShowFlushRed=t.$store.state.globalConfig.isShowFlushRed})),s.listData=i}}))},reset:function(){this.typeList.forEach((function(t){t.redData=!1})),this.statusList.forEach((function(t){t.redData=!1})),this.invoiceStatus="",this.orderType="",this.minAmount="",this.maxAmount=""},sure:function(){this.loadData(),this.sideFiltrateModalShow=!1,this.invoiceStatus="",this.orderType="",this.minAmount="",this.maxAmount="",this.statusList.forEach((function(t){t.redData=!1})),this.typeList.forEach((function(t){t.redData=!1}))},statusData:function(t){this.statusList.forEach((function(t){t.redData=!1})),t.redData=!0,this.invoiceStatus=t.stateNum},typeData:function(t){this.typeList.forEach((function(t){t.redData=!1})),t.redData=!0,this.orderType=t.orderNum},toDetail:function(t){this.$router.push({path:"/historyDetail",query:{id:t.id,orderTypeName:t.orderTypeName}})},Printing:function(t){t.invoicePdfAddr?(this.showCode=!0,this.$nextTick((function(){c.a.toCanvas(document.getElementById("qrcode"),t.invoicePdfAddr)}))):this.$Toast("二维码为空")},reorder:function(t){var s=this;this.$http.post("/app/json/user_invoice_assistant/againInvoice",{id:t.id}).then((function(t){var e=t.data;0==e.status?(s.$Toast("重新开票成功"),s.loadData()):s.$Toast(e.info)}))},isDuringDate:function(t){if(this.$store.state.globalConfig.invoiceRushRedLimitDays){var s=parseInt(this.$store.state.globalConfig.invoiceRushRedLimitDays),e=p()(new Date(t)).add(s,"days").format("YYYY-MM-DD hh:mm:ss"),i=new Date(e).getTime(),a=(new Date).getTime(),n=i-a;return n>0}return!0},refundInvoice:function(t){var s=this,e=this,i={token:this.$store.state.login.token,orderId:t.orderId,transactionRecord:t.transactionRecord};if(1==this.$store.state.globalConfig.isEditInvoiceTitle){var a=this;a.$router.push({name:"taitou",params:{userInvoiceHeadId:t.userInvoiceHeadId||"",orderId:t.orderId||"",transactionRecord:t.transactionRecord,id:t.id||"",type:1,fromPage:"history"}})}else this.$Loading.open(),e.refundData(i).then((function(t){s.$Loading.close(),"success"===t.data.result?n["a"].success("退票成功"):Object(n["a"])(t.data.info)}))}}},l=d,h=(e("0e76"),e("0c7c")),v=Object(h["a"])(l,i,a,!1,null,"32017cee",null);s["default"]=v.exports},"582f":function(t,s,e){}}]);