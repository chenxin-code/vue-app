(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45608df0"],{1148:function(t,a,i){"use strict";var s=i("a691"),e=i("1d80");t.exports=function(t){var a=String(e(this)),i="",o=s(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(a+=a))1&o&&(i+=a);return i}},1264:function(t,a,i){"use strict";i("a9e3"),i("b680"),i("ac1f"),i("1276"),i("99af");a["a"]={methods:{dealWithPrice:function(t){if(t=Number(t),!t)return[0,0,"0.00"];t=String(t.toFixed(2));var a=t.split(".")[1],i=t.split(".")[0];return[i,a,"".concat(i,".").concat(a)]}}}},"408a":function(t,a,i){var s=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},"63c2":function(t,a,i){},"66ad":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAAH7+Yj7AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAAE40lEQVRYCcWYTWhcVRTHM180doLk06Qk6hAiEVETjBUsWgeq+IEoCLH4QY0LLbpIIwpVd65E3Oha0YXFheJGqd3ECIJFwaLEdCGCUppFJ9+0Tprv8XeGOS937rvvYzoTfTCce8/5n/8599zz7ntvmpocV8LUtba2lmSe6OzszG9tbX1vGr2xoBTpKWXgVIphZGQk4wUCtSzgRCLxTcJ2WVlZ8YBlPhsQHEQCmVd7e/vr4i2/XU4QPsqKl8ROyTiXyzUjNiv6KlGVoGmB9bCG6+3t7VBbmVEnItfW1i40Nzc3sf6Zubm5r0xb5JgIP1ctxvYwFjfuA/b09OQI/7fpJAtKqqKtre2UMNgg7EuC8e2XOqrU8iQrg6pQCjJlOTTgfnHgOmUalU10vsUYK20ygd5iDKaxyvhJQ+cemqyK8IVWQ1zZ1dU1vLm5+RP4feJTE2GpVErQy6eRj7oClgvnMqiuo6NjbHt7+1Odh0ktZFpB0sqrq6u/Eb1PdZDpMFQmk8mbFJCmBj0cKX8Ui8XrVVmjPLa0tHRRfZw1pH9/INP7FRQkabTPlpeXj5l2J6EJcLWG2CGbhexGE1vW2wrX3EWqm2DjIzNUB5M0iEyxsaVJGuQUO8MgAtWzkc9R17G6Ccn6E0hfFGL68ZFrIuSB0Eodf4UjJ0R6SW29O0WVYZL7+OGdnZ0zAZvygfjGypD6vE+jvxEWTIMEZjgwMLBvYWFBjqVhyMK4pMnPK8CXISfMQQ6FHwFkFBQlW1pa9s/Ozl4VnEfIst4kk3ejnB32LZbrBU+z7ZOAjkQty0FUVrHcvGlLojhnKmodc0BIebwrieKk7BDXq5425oBGfseGejVUA7V8jOWf1nmY1FYxMb7nKBl/K0Ci324C7TErOmvrZO4jVBDH+nmchnRuy6GhoQdsncx9S7ZBriOLQFdZyX4bK/PADA2w6xXiHsNeNYzMUNB2lq7NUNY4GQp2wnNIJl/TcV1SsrQzdREGnjY2mDb6kP68xdbb81g1tJ32Ys7bcxcvxsfljiXxAxKD8df/S4Kjo6OpqampJ3ianCAZ5/1Bfn/S6oP/SYJ8Mg7yDBgn6AsklJXqhF1U7nIqlerjAXQlds+EEZq27u7u7MbGhrzfjZPMrWLj5dOERI13MpnMXXyfXRFg3RXkzjkMzwl+coD4PgrR1XRRuQcXFxe/U6eaKshWHaBvXuF3HIIblKRRkjv7ZTM54Q1MMJ/Pp6enp59im6SRDwm4xq0Sl9gXffceD5yPbAdvi3luyuNNGvl5ErrOBu7lnOS+5I592hUjQWK/k1Dos9fl2EDdOZ5NdwfxySvNHfLw4pJ/d94GWAgC74G+wLdquX2CuL0ttgFymE5OTh5Ff5IK32nbGzDf4Di5eX5+/lIYV2CCLie+JQ6RrLwvP469Jl+bL51OH+Qg/sXW2/O6gtC/n5PsMzZp1Jzj5Ch37BdROLHHfT9yctG/z9K3Z5zGACX4t+ImJxR1VVBzoJJnqeS9Og+RH3NDvhRi95kakiDJyX9WM8jbfBF2FVMkd2R3Gm9U1xZrCLat1N/fP4z0/lFSW0X+NTEx8ZClizVtSAU1krzJrK+vX2Du/aVM0v/w66XvLiuuFtmQCmrAQqFQzGazgyRUrOhKvJ2MXGtyyttwST/2cePM8LuvXvJ/ATbQs32MVWgTAAAAAElFTkSuQmCC"},"94d7":function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("div",{staticClass:"content-c"},[s("div",{staticClass:"swiper-container"},[s("div",{staticClass:"back-btn",on:{click:function(a){return t.$router.go(-1)}}},[s("i",{staticClass:"iconfont mall-fanhui"})]),s("swiper",{staticStyle:{height:"200px"},attrs:{options:t.swiperOption}},[t._l(t.imageList,(function(a,i){return s("swiper-slide",{key:i},[s("div",{staticClass:"swiper-item",on:{click:t.showBigImageEvent}},[s("img",{staticClass:"prod-img",attrs:{src:a}})])])})),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1),s("div",{staticClass:"service-info"},[s("p",{staticClass:"ser-name"},[t._v(t._s(t.productInfoData.skuName))]),s("div",{staticClass:"price-c"},[s("span",{staticClass:"current-price"},[t._v("¥"+t._s(t.dealWithPrice(t.productInfoData.activityPrice)[2]))]),t.productInfoData.activityPrice!=t.productInfoData.salePrice?s("span",{staticClass:"old-price"},[t._v("¥"+t._s(t.dealWithPrice(t.productInfoData.salePrice)[2]))]):t._e()])]),0==t.entryType?s("div",{staticClass:"public-block store-info"},[s("div",{staticClass:"top-info",on:{click:t.goToApplicableStores}},[s("p",{staticClass:"title"},[t._v("适用门店")]),s("p",{staticClass:"match-num"},[t._v("共"+t._s(t.storeInfoData.allStoreNum)+"家"),s("i",{staticClass:"iconfont mall-gengduojiantou arrow-icon"})])]),s("div",{staticClass:"bottom-info",on:{click:t.goToMap}},[s("div",{staticClass:"airport-info"},[s("p",{staticClass:"name"},[t._v(t._s(t.storeInfoData.storeName))]),s("p",{staticClass:"time"},[t._v("时间："+t._s(t.dealwithTime()))]),s("p",{staticClass:"address"},[t._v(t._s(t.storeInfoData.address))])]),s("div",{staticClass:"navigation-info"},[s("img",{staticClass:"icon-nav",attrs:{src:i("66ad"),alt:""}}),s("span",{staticClass:"nav-text"},[t._v(t._s(t.$util.toDecimal2(t.storeInfoData.distance/1e3))+"km")])])])]):t._e(),t.facilitiesList.length>0?s("div",{staticClass:"public-block store-facilities"},[s("p",{staticClass:"title"},[t._v("门店设施")]),s("ul",{staticClass:"facilities-list"},t._l(t.facilitiesList,(function(a,i){return s("li",{key:i,staticClass:"item"},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:a.facilityIconUrl,alt:""}})]),s("span",{staticClass:"name"},[t._v(t._s(a.facilityName))])])})),0)]):t._e(),s("div",{staticClass:"public-block prod-info"},[s("p",{staticClass:"title"},[t._v("产品介绍")]),s("div",{staticClass:"prod-content",domProps:{innerHTML:t._s(t.productInfoData.proSkuMediaModel.mobileDetail)}})])]),s("div",{staticClass:"chum-public-btn bottom-btn"},[s("van-button",{attrs:{round:"",block:"",type:"info",color:"linear-gradient(270deg,rgba(49,49,49,1) 0%,rgba(84,84,84,1) 51%,rgba(49,49,49,1) 100%)"},on:{click:function(a){t.isShowBuyModal=!0}}},[t._v("立即购买")])],1),s("van-popup",{staticClass:"buy-modal",attrs:{position:"bottom",closeable:""},model:{value:t.isShowBuyModal,callback:function(a){t.isShowBuyModal=a},expression:"isShowBuyModal"}},[s("div",{staticClass:"prod-info"},[s("img",{staticClass:"prod-img",attrs:{src:t.productInfoData.phMainUrl,alt:""}}),s("div",{staticClass:"right"},[s("p",{staticClass:"name"},[t._v(t._s(t.productInfoData.skuName))]),s("div",{staticClass:"price"},[s("span",{staticClass:"current-price"},[t._v("¥"+t._s(t.dealWithPrice(t.productInfoData.activityPrice)[2]))]),t.productInfoData.activityPrice!=t.productInfoData.salePrice?s("span",{staticClass:"old-price"},[t._v("¥"+t._s(t.dealWithPrice(t.productInfoData.salePrice)[2]))]):t._e()])])]),s("div",{staticClass:"specification"},t._l(t.productInfoData.featureList,(function(a,i){return s("div",{key:i,staticClass:"speci-c"},[s("p",{staticClass:"title"},[t._v(t._s(a.featureName))]),s("ul",{staticClass:"speci-list"},t._l(a.featureValueList,(function(a,e){return s("li",{key:e,staticClass:"item",class:{active:a.isSelect},on:{click:function(s){return t.choseFeature(a,i)}}},[t._v(t._s(a.featureValue))])})),0)])})),0),s("div",{staticClass:"purchase-quantity"},[s("p",{staticClass:"title"},[t._v("购买数量（库存"+t._s(t.inventory)+"）")]),s("van-stepper",{staticClass:"reset-setpper",attrs:{min:1,integer:"",max:t.inventory},model:{value:t.purchaseNum,callback:function(a){t.purchaseNum=a},expression:"purchaseNum"}})],1),s("div",{staticClass:"chum-public-btn modal-submit-btn"},[s("van-button",{attrs:{round:"",block:"",type:"info",color:"linear-gradient(270deg,rgba(49,49,49,1) 0%,rgba(84,84,84,1) 51%,rgba(49,49,49,1) 100%)"},on:{click:t.confirm}},[t._v("立即购买")])],1)])],1)},e=[],o=i("2909"),n=(i("4160"),i("159b"),i("99af"),i("1264")),r={mixins:[n["a"]],data:function(){return{isShowBuyModal:!1,imageList:[],swiperOption:{speed:500,pagination:{el:".swiper-pagination"},autoplay:!0,loop:!0,observer:!0,observeParents:!0},specActiveIndex:0,specificationList:[],purchaseNum:1,storeInfoData:{},productInfoData:{proSkuMediaModel:{}},inventory:1,skuId:this.$route.query.skuId,facilitiesList:[],entryType:0}},mounted:function(){this.entryType=this.$route.query.entryType||0,this.initDetail()},methods:{choseFeature:function(t,a){var i=this.productInfoData.featureList[a];i.featureValueList.forEach((function(t){t.isSelect=!1})),t.isSelect=!0,this.$forceUpdate();var s=[];this.productInfoData.featureList.forEach((function(t){t.featureValueList.forEach((function(t){t.isSelect&&s.push(t.featureValueId)}))})),this.initDetail(s)},initDetail:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$STLoading.open(),this.$http.post("/app/json/product/getAppProDetail",{skuId:this.skuId,deliverType:2,productType:5,featureValueIds:a}).then((function(a){var i=a.data;if(t.$STLoading.close(),0==i.status){t.productInfoData=i.data,t.skuId=i.data.skuId,i.data.picUrls instanceof Array&&(t.imageList=i.data.picUrls);var s=[];i.data.featureList instanceof Array&&i.data.featureList.forEach((function(t){s.push.apply(s,Object(o["a"])(t.featureValueList))})),s.forEach((function(t){i.data.myFeatureValueList.forEach((function(a){t.featureId==a.featureId&&t.featureValueId==a.featureValueId&&(t.isSelect=!0)}))})),t.getStockNum(),0==t.entryType&&t.getApplicableStores()}else t.$Toast(i.info)}))["catch"]((function(a){t.$Toast("getAppProDetail err ".concat(a)),t.$STLoading.close()}))},showBigImageEvent:function(){},goToApplicableStores:function(){this.$router.push({path:"/applicable_stores",query:{skuId:this.skuId,storeOuCode:this.productInfoData.storeOuCode}})},confirm:function(){var t=this;this.$STLoading.open();var a={deliveryType:2,carts:[{skuId:this.skuId,storeOuCode:this.productInfoData.storeOuCode,number:this.purchaseNum,selfActivityId:"",checked:1}]};this.$http.post("/app/json/app_cart/SettleCart",a).then((function(i){var s=i.data;0==s.status?t.$router.push({name:"confirm_order",params:{occurData:s.data.occur[0],settleCartData:a,skuName:t.productInfoData.skuName,salePrice:t.productInfoData.activityPrice,phMainUrl:t.productInfoData.phMainUrl}}):t.$Toast(s.info),t.$STLoading.close()}))["catch"]((function(a){t.$Toast("SettleCart err ".concat(a)),t.$STLoading.close()}))},getApplicableStores:function(){var t=this;this.$STLoading.open(),this.$http.post("/app/json/app_cou_service/queryCanUseStoreList",{skuId:this.skuId,storeOuCode:this.productInfoData.storeOuCode,posx:this.$store.state.currentLocation.posx,posy:this.$store.state.currentLocation.posy,getType:1,page:1,rows:1}).then((function(a){var i=a.data;t.$STLoading.close(),0==i.status?i.data instanceof Array&&i.data[0]&&(t.storeInfoData=i.data[0],t.storeInfoData.allStoreNum=i.totalRecords||0,t.getFacilityList()):t.$Toast(i.info)}))["catch"]((function(a){t.$Toast("queryCanUseStoreList err ".concat(a)),t.$STLoading.close()}))},getFacilityList:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/app_store/queryFacilityList",{storeId:this.storeInfoData.id}).then((function(a){t.$Loading.close();var i,s=a.data;0==s.status?s.data instanceof Array&&s.data.length>0&&(i=t.facilitiesList).push.apply(i,Object(o["a"])(s.data)):t.$Toast(s.info)}))["catch"]((function(a){t.$Loading.close(),t.$Toast("queryFacilityList err ".concat(a))}))},goToMap:function(){this.$bridgefunc.baiduNav({startlong:this.$store.state.currentLocation.posx,startlat:this.$store.state.currentLocation.posy,endlong:this.storeInfoData.posx,endlat:this.storeInfoData.posy,type:"nav"})},getStockNum:function(){var t=this;this.$http.post("/app/json/app_stock/querySkuStockByApp",{productList:[{skuId:this.productInfoData.skuId}],deliverType:2,storeCode:this.productInfoData.storeOuCode}).then((function(a){var i=a.data;0==i.status?t.inventory=i.data.productList[0].stockCurrentNumber:t.$Toast(i.info)}))["catch"]((function(a){t.$Toast("querySkuStockByApp err ".concat(a))}))},dealwithTime:function(){return this.storeInfoData&&this.storeInfoData.openingTime&&this.storeInfoData.closingTime?"".concat(this.storeInfoData.openingTime," - ").concat(this.storeInfoData.closingTime):"暂无 - 暂无"}}},c=r,l=(i("ecd1"),i("0c7c")),u=Object(l["a"])(c,s,e,!1,null,"56f56de3",null);a["default"]=u.exports},b680:function(t,a,i){"use strict";var s=i("23e7"),e=i("a691"),o=i("408a"),n=i("1148"),r=i("d039"),c=1..toFixed,l=Math.floor,u=function(t,a,i){return 0===a?i:a%2===1?u(t,a-1,i*t):u(t*t,a/2,i)},p=function(t){var a=0,i=t;while(i>=4096)a+=12,i/=4096;while(i>=2)a+=1,i/=2;return a},d=function(t,a,i){var s=-1,e=i;while(++s<6)e+=a*t[s],t[s]=e%1e7,e=l(e/1e7)},f=function(t,a){var i=6,s=0;while(--i>=0)s+=t[i],t[i]=l(s/a),s=s%a*1e7},h=function(t){var a=6,i="";while(--a>=0)if(""!==i||0===a||0!==t[a]){var s=String(t[a]);i=""===i?s:i+n.call("0",7-s.length)+s}return i},v=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){c.call({})}));s({target:"Number",proto:!0,forced:v},{toFixed:function(t){var a,i,s,r,c=o(this),l=e(t),v=[0,0,0,0,0,0],A="",g="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(A="-",c=-c),c>1e-21)if(a=p(c*u(2,69,1))-69,i=a<0?c*u(2,-a,1):c/u(2,a,1),i*=4503599627370496,a=52-a,a>0){d(v,0,i),s=l;while(s>=7)d(v,1e7,0),s-=7;d(v,u(10,s,1),0),s=a-1;while(s>=23)f(v,1<<23),s-=23;f(v,1<<s),d(v,1,1),f(v,2),g=h(v)}else d(v,0,i),d(v,1<<-a,0),g=h(v)+n.call("0",l);return l>0?(r=g.length,g=A+(r<=l?"0."+n.call("0",l-r)+g:g.slice(0,r-l)+"."+g.slice(r-l))):g=A+g,g}})},ecd1:function(t,a,i){"use strict";i("63c2")}}]);