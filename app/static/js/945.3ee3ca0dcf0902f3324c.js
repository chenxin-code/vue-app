(window.webpackJsonp=window.webpackJsonp||[]).push([[945],{"6wgU":function(e,s,t){"use strict";t.r(s);var i=t("2nGb"),o=t("J66h"),a={data:function(){return{isVisible:!1,message:"",receiveModal:!1,receiveType:"1",receiveTitle:"先到先得",columns:[{type:1,title:"先到先得"},{type:2,title:"拼手气"}],g_skuId:"",g_num:"",deliverType:"",goodsInfo:{},payInfo:{},flag:!1,configGiftBoxData:{},wishNo:""}},mounted:function(){var e=this,s=JSON.parse(this.$route.query.carts);this.payInfo=JSON.parse(this.$route.query.payInfo),console.log(this.$route.query),this.g_skuId=s[0].skuId,this.g_num=s[0].number,this.deliverType=this.$route.query.deliveryType,this.$request.post("/app/json/product/getAppProDetail",{skuId:this.g_skuId,deliverType:this.deliverType}).then((function(s){0===s.status?e.goodsInfo=s.data:e.$Toast(s.info)})),this.$request.post("/app/json/app_shopping_order/detail",{orderId:this.payInfo.orderId,orderType:this.payInfo.orderType}).then((function(s){0==s.status?e.wishNo=s.data.wishNo:e.$Toast(s.info)})),this.$request.post("/app/json/app_send_gift_order/getSendGiftRemark",{type:"1"}).then((function(s){0===s.status?e.message=s.data.message:e.$Toast(s.info)}))},methods:{receiveHandle:function(){this.receiveModal=!0},onConfirm:function(e){this.receiveModal=!1,this.receiveType=e.type,this.receiveTitle=e.title},shareFriendsHandle:function(){var e=this,s={wishNo:this.wishNo,orderId:this.payInfo.orderId,orderType:this.payInfo.orderType,proSkuId:this.g_skuId,totalNum:this.g_num,proImgUrl:this.goodsInfo.phMainUrl,proName:this.goodsInfo.skuName,receiveType:this.receiveType,isVisible:this.isVisible?1:0},t={goodsName:this.goodsInfo.skuName,goodsImg:this.goodsInfo.phMainUrl};if(this.flag){var a={title:"来自"+this.$store.state.userInfo.realName+"的礼单",sharetext:this.goodsInfo.skuName,imageurl:this.goodsInfo.phMainUrl,detailurl:this.$store.state.globalConfig.wxBaseUrl+i.a.shareUrl+"/receive-gift?userId="+this.configGiftBoxData.userId+"&orderId="+this.configGiftBoxData.orderId+"&goodsDetails="+o.Base64.encode(JSON.stringify(t))};console.log(a),this.$bridgefunc.wechatShare(a)}else this.$request.post("/app/json/app_send_gift_order/configGiftBox",s).then((function(s){if(0===s.status){e.flag=!0,e.configGiftBoxData=s.data,e.$Toast("配置成功!");var a={title:"来自"+e.$store.state.userInfo.realName+"的礼单",sharetext:e.goodsInfo.skuName,imageurl:e.goodsInfo.phMainUrl,detailurl:e.$store.state.globalConfig.wxBaseUrl+i.a.shareUrl+"/receive-gift?userId="+s.data.userId+"&orderId="+s.data.orderId+"&goodsDetails="+o.Base64.encode(JSON.stringify(t))};console.log(a),e.$bridgefunc.wechatShare(a)}else e.$Toast(s.info)}))}}},r=(t("vPY/"),t("KHd+")),n=Object(r.a)(a,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("nav-top",{attrs:{title:"配置礼盒"},on:{backEvent:function(s){return e.$router.go(-1)}}}),e._v(" "),t("nav-content",{staticClass:"giftBox-content"},[t("div",{staticClass:"giftBox-details"},[t("p",{staticClass:"gift-form"},[e._v("来自"),t("span",{staticClass:"fromUser"},[e._v(e._s(e.$store.state.userInfo.realName))]),e._v("的礼单")]),e._v(" "),t("div",{staticClass:"goods-info boxShadow"},[t("div",{staticClass:"left"},[t("img",{attrs:{src:e.goodsInfo.phMainUrl,alt:"",width:"70",height:"70"}})]),e._v(" "),t("div",{staticClass:"right"},[t("div",{staticClass:"goods-info-title"},[e._v(e._s(e.goodsInfo.skuName))]),e._v(" "),t("div",{staticClass:"goods-info-number"},[t("p",{staticClass:"goods-price color_r"}),e._v(" "),t("p",{staticClass:"goods-number"},[e._v("*"+e._s(e.g_num))])])])]),e._v(" "),t("div",{staticClass:"isVisible boxShadow"},[t("p",[e._v("收礼人互相可见")]),e._v(" "),t("van-switch",{attrs:{"active-color":"#ee0a24","inactive-color":"#ccc",size:"14"},model:{value:e.isVisible,callback:function(s){e.isVisible=s},expression:"isVisible"}})],1),e._v(" "),t("div",{staticClass:"receive-mode boxShadow"},[t("p",[e._v("领取方式")]),e._v(" "),t("div",{staticClass:"mode-check"},[t("p",{staticClass:"mode-title"},[e._v(e._s(e.receiveTitle)),t("span",[e._v("(每人限领一份)")])]),e._v(" "),t("van-icon",{attrs:{name:"arrow",size:"14"},on:{click:e.receiveHandle}})],1)]),e._v(" "),t("div",{staticClass:"message-inp boxShadow"},[t("p",[e._v("留言")]),e._v(" "),t("van-field",{attrs:{rows:"3",autosize:"",type:"textarea",maxlength:"20",placeholder:"请输入留言","show-word-limit":""},model:{value:e.message,callback:function(s){e.message=s},expression:"message"}})],1),e._v(" "),t("van-popup",{attrs:{position:"bottom"},model:{value:e.receiveModal,callback:function(s){e.receiveModal=s},expression:"receiveModal"}},[t("van-picker",{attrs:{"show-toolbar":"",title:"领取方式",columns:e.columns,"value-key":"title"},on:{cancel:function(s){e.receiveModal=!1},confirm:e.onConfirm}})],1)],1),e._v(" "),t("div",{staticClass:"btns-receive btns"},[t("div",{on:{click:e.shareFriendsHandle}},[e._v("分享给好友")])])])],1)}),[],!1,null,"011515cc",null);s.default=n.exports},"vPY/":function(e,s,t){"use strict";var i=t("xgZS");t.n(i).a},xgZS:function(e,s,t){}}]);