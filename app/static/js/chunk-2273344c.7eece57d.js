(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2273344c"],{"0406":function(t,e,a){"use strict";a("7600")},1787:function(t,e,a){"use strict";a("6ae0")},"37fc":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"firmdetail"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-top"},[a("i",{staticClass:"iconfont mall-fanhui theme_font_black backmall",on:{click:t.backEvent}}),a("span",{staticClass:"title"},[t._v("加油支付凭证详情")])]),1==t.fromPage?a("div",{staticClass:"headerTime"},[a("div",{staticClass:"time"},[a("span",[t._v(t._s(t.month))]),a("span",[t._v("月")]),a("span",[t._v(t._s(t.day))]),a("span",[t._v("日")]),a("span",[t._v(t._s(t.hour))]),a("span",[t._v("时")]),a("span",[t._v(t._s(t.min))]),a("span",[t._v("分")]),a("span",[t._v(t._s(t.second))]),a("span",[t._v("秒")]),a("span",{staticClass:"millisecond"},[t._v(t._s(t.millisecond))])])]):t._e()]),t.orderDetail?[a("div",{staticClass:"detailstation"},[t._v(t._s(t.orderDetail.storeName))]),a("div",{staticClass:"detailm"},[a("div",{staticClass:"money detailmon"},[t._m(0),a("p",[t._v("¥"),a("span",[t._v(t._s(t.orderDetail.totalAmount.toFixed(2)))])])]),a("div",{staticClass:"ttc detailmon"},[a("div",{staticClass:"ttc-content"},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("TTC：")]),a("span",{staticClass:"con"},[t._v(t._s(t.orderDetail.refuelPosTtc))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("枪号：")]),a("span",{staticClass:"con"},[a("span",{staticClass:"num"},[t._v(t._s(t.orderDetail.refuelGunNo))]),t._v(" "),a("span",{staticClass:"suffix"},[t._v("号枪")])])])])]),a("div",{staticClass:"ttc detailmon"},[t._m(1),a("p",[a("span",[t._v(t._s(t.refuelCardNo))])])])]),a("div",{staticClass:"detailli"},[a("ul",[a("li",[a("span",[t._v("加油时间")]),a("span",[t._v(t._s(t.orderDetail.submitTime))])]),a("li",[a("span",[t._v("油品")]),a("span",[t._v(t._s(t.orderDetail.refuelOilName))])]),1!=t.$store.state.globalConfig.appOilPayDetailHideFefuelLiter?a("li",[a("span",[t._v("加油升数")]),a("span",[t._v(t._s(t.orderDetail.refuelLiter)+"L")])]):t._e(),a("li",[a("span",[t._v("实付金额")]),a("span",[t._v("¥"+t._s(t.orderDetail.payAmount.toFixed(2)))])]),a("li",[a("span",[t._v("优惠抵扣金额")]),a("span",[t._v("¥"+t._s(t.discountAmountCom))])])])]),1!=t.$store.state.globalConfig.oil_appraise_type&&2!=t.$store.state.globalConfig.oil_appraise_type?a("div",{staticClass:"evaluation"},[a("span",{staticClass:"text",on:{click:t.goEvaluation}},[t._v("去评价")])]):t._e(),1==t.$store.state.globalConfig.oil_appraise_type?a("div",[a("p",{staticClass:"evaluate"},[t._v("加油评价")]),t.detailView?t._e():a("div",{staticClass:"question"},[a("subject",{attrs:{firmdetailSubject:t.firmdetailSubject,orderIds:t.orderId,ouCode:t.ouCode},on:{firmData:t.firmData}})],1),t.detailView?a("div",{staticClass:"question"},[a("subjectDetail",{attrs:{firmdetailSubject:t.firmdetailSubject,orderIds:t.orderId}})],1):t._e()]):t._e(),a("van-popup",{staticClass:"eva-con",attrs:{closeable:""},model:{value:t.hasPrizeFlag,callback:function(e){t.hasPrizeFlag=e},expression:"hasPrizeFlag"}},[a("p",{staticClass:"title"},[t._v("通知")]),a("div",{staticClass:"icon-bg"},[a("div",{staticClass:"conten"},[t._v("您在"+t._s(t.orderDetail.storeName))]),a("div",{staticClass:"conten"},[t._v("加油¥"+t._s(t.orderDetail.payAmount.toFixed(2))+"元")]),a("div",{staticClass:"conten"},[t._v("请对本次服务进行评价！")])]),a("van-button",{staticClass:"btn",attrs:{round:"",type:"info",color:"#F02C2D",size:"small"},on:{click:t.enterEvaluate}},[t._v("去评价")]),t.hasPrize?a("div",[t.prize.length>0&&"20030"!=t.prize[0].prizeType?a("p",[t._v("* 完成评价后有机会获赠"+t._s(t.prize[0].prizeNum)+"张"+t._s(t.prize[0].prizeName)+t._s(t.prize.length>1?"等":""))]):t._e(),t.prize.length>0&&"20030"==t.prize[0].prizeType?a("p",[t._v("* 完成评价后有机会获赠"+t._s(t.prize[0].prizeName)+t._s(t.prize[0].prizeNum)+"次"+t._s(t.prize.length>1?"等":""))]):t._e()]):t._e()],1)]:t._e(),a("PopupEvaluation")],2)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",[t._v("加油金额")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",[t._v("员工卡号后六位")])])}],n=(a("a9e3"),a("fb6a"),a("0d03"),a("4795"),a("d3b7"),a("3ca3"),a("ddb0"),a("99ef")),r=a("76ded"),o=a("e89c"),l={data:function(){return{prize:{},hasPrize:null,hasPrizeFlag:!1,month:"",day:"",hour:"",min:"",second:"",millisecond:"",orderDetail:null,fromPage:"",configId:"",detailView:!1,firmdetailSubject:"加油凭证",orderId:"",ouCode:""}},computed:{discountAmountCom:function(){var t=Number(this.orderDetail.couponAmount)||0,e=Number(this.orderDetail.pointsAmount)||0,a=Number(this.orderDetail.discountAmount)||0,s=Number(this.orderDetail.rewardsAmount)||0,i=Number(this.orderDetail.empRewardsAmount)||0,n=Number(this.orderDetail.enterpriseAmount)||0,r=Number(this.orderDetail.randomDeductionAmount)||0;return t+e+a+s+i+n+r},refuelCardNo:function(){var t=this.orderDetail?this.orderDetail.refuelCardNo:"";return this.orderDetail.refuelCardNo&&t.slice(-6)||""}},created:function(){this.orderType=this.$route.query.orderType,this.orderId=this.$route.query.orderId,this.fromPage=this.$route.query.fromPage,1==this.fromPage&&this.counttime(),this._getOrderDetail(),2==this.$store.state.globalConfig.oil_appraise_type&&this.getEvaluateOrder()},methods:{getEvaluateOrder:function(t){var e=this;if(""!=this.$store.state.login.token){var a={token:this.$store.state.login.token},s="/app/json/questionaire/getLatestAppraise";this.$http.post(s,a).then((function(t){var a=t.data;0==a.status?(e.hasPrize=a.data.hasPrize,e.hasPrizeFlag=!0,a.data.questionPrize&&(e.prize=JSON.parse(a.data.questionPrize))):e.$Toast("网络加载较慢，请稍后重试!")}),(function(t){}))}},enterEvaluate:function(){this.$router.push({path:"/evaluateList"})},firmData:function(t){this.detailView=t.pageView},goEvaluation:function(){var t=this;this.$Loading.open();var e="/app/json/questionaire/getQuestionaireByOrderid",a={token:this.$store.state.login.token,orderId:this.orderDetail.refuelOrderId};this.$http.post(e,a).then((function(e){t.$Loading.close();var a=e.data;0==a.status?t.detailView=!0:t.detailView=!1}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},backEvent:function(){this.$router.go(-1)},counttime:function(){var t=new Date;this.month=t.getMonth()+1,this.day=t.getDate(),this.hour=t.getHours(),this.min=this.padZero(t.getMinutes()),this.second=this.padZero(t.getSeconds()+1),this.millisecond=this.padZero(t.getMilliseconds(),3);var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.counttime()}),1)},_getOrderDetail:function(){var t=this;this.$Loading.open();var e="/app/json/refuel_center/detail",a={token:this.$store.state.login.token,orderType:this.orderType,orderId:this.orderId};this.$http.post(e,a).then((function(e){t.$Loading.close();var a=e.data;0==a.status?(t.orderDetail=a.data,t.ouCode=a.data.storeOuCode,t.goEvaluation()):t.$Toast(a.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},padZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=t+"";return("0000".substr(0,e)+a).substr(a.length)}},components:{subject:n["default"],subjectDetail:r["default"],evaluate:o["a"],PopupEvaluation:function(){return a.e("chunk-70eac843").then(a.bind(null,"d05e"))}}},d=l,c=(a("0406"),a("0c7c")),u=Object(c["a"])(d,s,i,!1,null,"5ec31286",null);e["default"]=u.exports},"4c53":function(t,e,a){"use strict";var s=a("23e7"),i=a("857a"),n=a("af03");s({target:"String",proto:!0,forced:n("sub")},{sub:function(){return i(this,"sub","","")}})},"6ae0":function(t,e,a){},7600:function(t,e,a){},"76ded":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"body"}},[t.firmdetailSubject?t._e():a("nav-top",{attrs:{title:"加油评价"},on:{backEvent:function(e){return t.$router.go(-1)}}},[t.shareView?a("div",{staticClass:"shareBox",on:{click:t.sharegoods}},[a("div",[a("i",{staticClass:"icon iconfont mall-fenxiang"})])]):t._e()]),a("nav-content",[a("div",{staticClass:"content"},t._l(t.answerList,(function(e,s){return a("div",{key:s,staticClass:"top"},[1===e.kindId?a("div",{staticClass:"singleList"},[a("div",{staticClass:"divObj"},[a("div",{staticClass:"titleHead"},[a("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),a("van-radio-group",{model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}},t._l(e.options,(function(e,s){return a("van-radio",{key:s,attrs:{disabled:"",name:t.optionsObj[s]}},[t._v(t._s(t.optionsObj[s])+" 、"+t._s(e.lable))])})),1)],1)]):t._e(),2===e.kindId?a("div",{staticClass:"singleList multipleList"},[a("div",{staticClass:"divObj"},[a("div",{staticClass:"titleHead"},[a("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),a("van-checkbox-group",{model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}},t._l(e.options,(function(e,s){return a("van-checkbox",{key:s,attrs:{disabled:"","checked-color":"#F80F16",name:t.optionsObj[s]}},[t._v(t._s(t.optionsObj[s])+" 、"+t._s(e.lable))])})),1)],1)]):t._e(),5===e.kindId?a("div",{staticClass:"singleList"},[a("div",{staticClass:"divObj"},[a("div",{staticClass:"titleHead"},[a("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{disabled:"",maxlength:e.limitMax},domProps:{value:e.result},on:{input:function(a){a.target.composing||t.$set(e,"result",a.target.value)}}})])]):t._e(),6===e.kindId?a("div",{staticClass:"singleList score"},[a("div",{staticClass:"divObj"},[a("div",{staticClass:"titleHead"},[a("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),a("div",{staticClass:"evaluteBox"},[1===e.styleType?a("van-rate",{attrs:{"void-color":"#c7c7c7","disabled-color":"#F80F16",disabled:""},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}):t._e(),2===e.styleType?a("van-rate",{attrs:{"void-color":"#c7c7c7",icon:"like","disabled-color":"#F80F16","void-icon":"like-o",disabled:""},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}):t._e(),3===e.styleType?a("van-rate",{attrs:{"void-color":"#c7c7c7",icon:"static/image/microShop/xiaoicon.png","disabled-color":"#F80F16","void-icon":"smile-o",disabled:""},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}):t._e(),a("p",[t._v(t._s(e.evaluate))])],1)])]):t._e(),4===e.kindId?a("div",{staticClass:"singleList"},[a("div",{staticClass:"divObj"},[a("div",{staticClass:"titleHead"},[a("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),a("div",{staticClass:"xiala"},[a("span",[t._v(t._s(e.result||"请选择"))]),a("span",{staticClass:"icon iconfont mall-xiala"})]),a("van-action-sheet",{attrs:{actions:e.options},on:{select:function(a){return t.onSelect(a,e)}},model:{value:e.show,callback:function(a){t.$set(e,"show",a)},expression:"item.show"}})],1)]):t._e(),3===e.kindId?a("div",{staticClass:"singleList"},[a("div",{staticClass:"divObj"},[a("div",{staticClass:"titleHead"},[a("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),t._l(e.options,(function(s,i){return a("div",{key:i,staticClass:"pics"},[a("div",[a("span",[t._v(t._s(t.optionsObj[i])+"、")]),a("img",{attrs:{src:s.imgUrl,alt:""}})]),a("div",[a("van-radio-group",{model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}},[a("van-radio",{attrs:{"checked-color":"#F80F16",name:t.optionsObj[i],disabled:""}},[t._v(t._s(s.lable))])],1)],1)])}))],2)]):t._e()])})),0)])],1)},i=[],n=(a("a9e3"),a("4160"),a("159b"),a("b0c0"),a("ac1f"),a("1276"),a("99af"),a("c975"),a("fb6a"),a("66bc")),r=a("da71"),o=(a("4ff7"),{name:"",mixins:[n["a"]],props:{firmdetailSubject:{type:String,default:!0},orderIds:{type:[String,Number],default:!0}},data:function(){return{answerList:[],listItem:"",i:0,optionsObj:{},paramsData:{},radio:"B",list:["a","b","c","d"],result:["a","b"],value:3,show:!1,actions:[],mktAwardList:[],id:"",url:"",evaluate:"",shareView:!0,shareTitle:"",shareContent:"",shareImgUrl:"",firmId:""}},created:function(){var t=this;t.getLetter(),t.paramsData=t.$route.query},mounted:function(){var t=this;if("加油凭证"==this.firmdetailSubject){var e={isDefault:1,token:this.$store.state.login.token,type:3};this.questionUrlData(e).then((function(e){"success"===e.data.result&&(t.firmId=e.data.data.id,t.loadData())}))}else this.loadData()},methods:{loadData:function(){var t=this,e={token:this.$store.state.login.token};"加油凭证"==this.firmdetailSubject?(e.orderId=t.orderIds,e.id=t.firmId):(e.orderId=t.paramsData.orderId,e.id=t.paramsData.id),t.historydetailData(e).then((function(e){if("success"===e.data.result){var a=JSON.parse(e.data.data.resultJson);a.forEach((function(t){t.evaluate=""})),t.userId=e.data.data.userId;var s=e.data.data.questionShare?JSON.parse(e.data.data.questionShare):"";0==s.length?t.shareView=!1:t.shareView=!0,a.forEach((function(t,e){if(1===t.kindId||2===t.kindId||3===t.kindId||4===t.kindId){var a=JSON.parse(t.options)||[];a.forEach((function(t){t.name=t.lable})),t.options=a}2===t.kindId?t.result=t.result.split(","):6===t.kindId?(t.result=Number(t.result)||0,1==t.result?t.evaluate="非常差":2==t.result?t.evaluate="差":3==t.result?t.evaluate="一般":4==t.result?t.evaluate="好":5==t.result&&(t.evaluate="非常好")):4===t.kindId&&(t.show=!1)})),t.answerList=a,t.listItem=t.answerList[t.i],t.shareTitle=e.data.data.shareTitle,t.shareContent=e.data.data.shareContent,t.shareImgUrl=e.data.data.shareImgUrl}}))},select1:function(t){t.show=!0},generateBig_1:function(){for(var t=[],e=65;e<91;e++)t.push(String.fromCharCode(e));return t},getLetter:function(){this.optionsObj=this.generateBig_1()},onSelect:function(t,e){e.result=t.name,e.show=!1},sharegoods:function(){var t=this,e={title:t.shareTitle,sharetext:t.shareContent,imageurl:t.shareImgUrl,detailurl:"".concat(this.$store.state.globalConfig.wxBaseUrl).concat(r["a"].shareUrl,"/service/questionDetail?shareUserid=").concat(this.$store.state.userInfo.userId)};this.$bridgefunc.wechatShare(e)},Intercept:function(){var t=this.url||window.location.href,e=t.substr(t.indexOf("?")),a=e.slice(1).split("=");this.id=a[1]}},computed:{},components:{},watch:{}}),l=o,d=(a("bb52"),a("0c7c")),c=Object(d["a"])(l,s,i,!1,null,"8e938fc0",null);e["default"]=c.exports},"797f":function(t,e,a){"use strict";var s="/app/json/questionaire/startAnswer",i="/app/json/questionaire/appUserConfig",n="/app/json/questionaire/submit",r="/app/json/questionaire/completeAct",o="/app/json/questionaire/findQuestionaireByuserId",l="/app/json/questionaire/historyQuestionaireList",d="/app/json/questionaire/questionaireDetail";e["a"]={methods:{participateData:function(t){return this.$http.post(s,t)},questionData:function(t){return this.$http.post(i,t)},commitData:function(t){return this.$http.post(n,t)},prizeData:function(t){return this.$http.post(r,t)},listData:function(t){return this.$http.post(o,t)},historyData:function(t){return this.$http.post(l,t)},historydetailData:function(t){return this.$http.post(d,t)}}}},bb52:function(t,e,a){"use strict";a("d39d")},d39d:function(t,e,a){},e89c:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title"},[t._v("请您提出意见，我们将持续改进与提升")]),t._l(t.answerList,(function(e,s){return a("div",{key:s,staticClass:"top"},[6===e.kindId?a("div",{staticClass:"singleList score"},[a("div",{staticClass:" score-con"},[a("label",{staticClass:"title-con"},[t._v(t._s(e.title))]),a("div",{staticClass:"evaluteBox"},[1===e.styleType?a("van-rate",{attrs:{color:"#ffd21e","void-icon":"star"},on:{change:function(e){return t.evaluateData(s,e)}},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}):t._e(),2===e.styleType?a("van-rate",{attrs:{color:"#25aff8",icon:"like","void-color":"#25aff8","void-icon":"like-o"},on:{change:function(e){return t.evaluateData(s,e)}},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}):t._e(),3===e.styleType?a("van-rate",{attrs:{color:"#25aff8",icon:"static/image/microShop/xiaoicon.png","void-color":"#25aff8","void-icon":"smile-o"},on:{change:function(e){return t.evaluateData(s,e)}},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}):t._e(),a("p",[t._v(t._s(e.evaluate))])],1)])]):t._e(),1===e.kindId?a("div",{staticClass:"singleList"},[a("div",{staticClass:"divObj"},[a("span",{staticClass:"wall-title"},[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),a("van-radio-group",{on:{change:t.changeResult},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}},t._l(e.options,(function(e,s){return a("van-radio",{key:s,attrs:{"checked-color":"#25aff8",name:t.optionsObj[s]}},[t._v(t._s(t.optionsObj[s])+" 、"+t._s(e.lable)+" ")])})),1)],1)]):t._e(),2===e.kindId?a("div",{staticClass:"singleList che-con multipleList"},[a("div",{staticClass:" "},[a("span",{staticClass:"wall-title"},[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),a("div",{staticClass:"checkItem-con"},t._l(e.options,(function(s,i){return a("van-button",{key:i,staticClass:"btn-con",class:s.flag?"select":"",attrs:{round:"",type:"default",size:"small"},on:{click:function(a){return t.selectO(e.options,e,i)}}},[t._v(t._s(s.lable))])})),1)])]):t._e(),5===e.kindId?a("div",{staticClass:"singleList"},[a("div",{staticClass:"divObj divObj1"},[e.limitMin&&!e.limitMax?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:t.placeHolder?t.placeHolder:"对其他方面不满意，可描述问题帮加油站改善哦～"},domProps:{value:e.result},on:{input:function(a){a.target.composing||t.$set(e,"result",a.target.value)}}}):t._e(),e.limitMax&&!e.limitMin?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:t.placeHolder?t.placeHolder:"对其他方面不满意，可描述问题帮加油站改善哦～"},domProps:{value:e.result},on:{input:function(a){a.target.composing||t.$set(e,"result",a.target.value)}}}):t._e(),e.limitMin&&e.limitMax?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:t.placeHolder?t.placeHolder:"对其他方面不满意，可描述问题帮加油站改善哦～"},domProps:{value:e.result},on:{input:function(a){a.target.composing||t.$set(e,"result",a.target.value)}}}):t._e(),e.limitMin||e.limitMax?t._e():a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:t.placeHolder?t.placeHolder:"对其他方面不满意，可描述问题帮加油站改善哦～"},domProps:{value:e.result},on:{input:function(a){a.target.composing||t.$set(e,"result",a.target.value)}}})])]):t._e(),7===e.kindId?a("div",{staticClass:"singleList text-con"},[a("div",{staticClass:"lin-con"}),a("div",{},[a("span",{staticClass:"wall-title"},[t._v(t._s(e.title))]),a("van-field",{staticStyle:{width:"100%",background:"white",border:"1px solid #ccc","border-radius":"8px"},attrs:{rows:"2",autosize:"",maxlength:e.limitMax||100,type:"textarea",placeholder:"亲，您对加油站的评价，是我们更好服务的动力哦！","show-word-limit":""},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}})],1)]):t._e(),4===e.kindId?a("div",{staticClass:"singleList"},[a("div",{staticClass:"divObj"},[a("span",{staticClass:"wall-title"},[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),a("div",{staticClass:"xiala",on:{click:function(a){return t.select1(e)}}},[a("span",[t._v(t._s(e.result||"请选择"))]),a("span",{staticClass:"icon iconfont mall-xiala"})]),a("van-action-sheet",{attrs:{id:"xialaView",actions:e.options},on:{select:function(a){return t.onSelect(a,e)}},model:{value:e.show,callback:function(a){t.$set(e,"show",a)},expression:"item.show"}})],1)]):t._e(),3===e.kindId?a("div",{staticClass:"singleList"},[a("div",{staticClass:"divObj"},[a("span",{staticClass:"wall-title"},[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._l(e.options,(function(s,i){return a("div",{key:i,staticClass:"pics"},[a("div",[a("span",[t._v(t._s(t.optionsObj[i])+"、")]),a("img",{attrs:{src:s.imgUrl,alt:""}})]),a("div",[a("van-radio-group",{model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}},[a("van-radio",{attrs:{"checked-color":"#25aff8",name:t.optionsObj[i]}},[t._v(t._s(s.lable)+" ")])],1)],1)])}))],2)]):t._e()])})),t.answerList.length>0?a("div",{staticClass:"handler"},[a("van-button",{staticClass:"btn",attrs:{round:"",type:"info",color:"#F02C2D"},on:{click:t.commit}},[t._v("提交")]),t.hasPrize?a("div",[t.prize.length>0&&"20030"!=t.prize[0].prizeType?a("p",[t._v("* 完成评价后可获赠"+t._s(t.prize[0].prizeName))]):t._e(),t.prize.length>0&&"20030"==t.prize[0].prizeType?a("p",[t._v("* 完成评价后可获赠"+t._s(t.prize[0].prizeName)+"参与次数"+t._s(t.prize[0].prizeNum))]):t._e()]):t._e()],1):t._e(),a("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.commitModel,callback:function(e){t.commitModel=e},expression:"commitModel"}},[a("div",{staticClass:"modal"},[a("p",{staticClass:"title-p"},[a("span",[t._v("成功提交问券")]),t.showFlag1?a("span",[t._v("恭喜您获得以下奖品")]):t._e()]),t.showFlag1?a("ul",t._l(t.mktAwardList,(function(e,s){return a("li",{key:s},[a("img",{attrs:{src:e.prizeImgUrl?e.prizeImgUrl:"static/image/microShop/icon52x.png",alt:""}}),a("span",[t._v(t._s(e.prizeName)+"("+t._s(e.prizeNum)+")")]),a("span",{on:{click:function(a){return t.seeView(e.prizeType,e.prizeCode)}}},[t._v("查看")])])})),0):t._e(),t.toEvaluatedNum?a("div",{staticClass:"order"},[a("div",{staticStyle:{"margin-top":"10px"}},[t._v("您在最近"+t._s(t.limitOrderDayNum)+"天内还有"+t._s(t.toEvaluatedNum)+"条待评价订单 ")])]):t._e()]),a("div",{staticClass:"btns"},[a("span",{staticClass:"theme_bg_red",on:{click:t.closeBtn}},[t._v(t._s(t.toEvaluatedNum?"继续评价":"确定"))])])])],2)},i=[],n=(a("e7e5"),a("d399")),r=(a("4160"),a("159b"),a("c975"),a("4c53"),a("0d03"),a("d3b7"),a("25f0"),a("b0c0"),a("797f")),o={props:["detail"],name:"",mixins:[r["a"]],components:{},data:function(){return{answerList:[],randomId:null,commitModel:!1,showFlag1:!1,mktAwardList:[],prize:{},hasPrize:null,toEvaluatedNum:null,limitOrderDayNum:null}},computed:{placeHolder:function(){var t=this,e=null;return this.answerList.length>0&&this.answerList.forEach((function(a,s){5==a.kindId&&(e=JSON.parse(t.answerList[s].options)[0].placeHolder)})),e}},methods:{seeView:function(t,e){var a="";if("20030"==t)this.$market.enterGamesFunc({gameTypeCode:e},!0);else if("20010"==t)a="/usercenter/rebatebonus";else if("20020"==t)a="/mall2/integralinfo";else if("20001"==t&&(a=this.$store.state.globalConfig.questionaire_prize_coupon_list||"/coupon_list",-1!=a.indexOf("uhuitong.com")))return void this.$market.enterNav({link:{type:"3",url:a,useOldProtocal:!0}});this.$router.push({path:a,query:{}})},evaluateData:function(t,e){var a=this.answerList[t];1==a.result?a.evaluate="非常差":2==a.result?a.evaluate="差":3==a.result?a.evaluate="一般":4==a.result?a.evaluate="满意":5==a.result&&(a.evaluate="非常满意")},closeBtn:function(){this.toEvaluatedNum>0?(this.commitModel=!0,this.$router.push({path:"/evaluatelist"})):this.commitModel=!1},commit:function(){this.sub()},sub:function(){var t=this,e=this,a=[];e.answerList.forEach((function(t){a.push({kindId:t.kindId,configId:t.configId,subjectId:t.id,kindName:t.kindName,options:t.options,title:t.title,styleType:t.styleType,orderNo:e.detail.marketOrderNo,result:t.result?t.result.toString():""})}));var s=!0;if(e.answerList.forEach((function(t){1==t.mustAnswer&&""==t.result&&(s=!1)})),s){var i=!0;if(e.answerList.forEach((function(t,a){5==t.kindId&&(t.limitMin&&!t.limitMax&&t.result.length<t.limitMin&&(e.tip="第"+(a+1)+"题简答题最少输入"+t.limitMin+"个字",i=!1),t.limitMax&&!t.limitMin&&t.result.length>t.limitMax&&(e.tip="第"+(a+1)+"题简答题最多输入"+t.limitMax+"个字",i=!1),t.limitMin&&t.limitMax&&(t.result.length>=t.limitMin&&t.result.length<=t.limitMax?i=!0:(e.tip="第"+(a+1)+"题简答题字数限制在"+t.limitMin+"至"+t.limitMax+"之间",i=!1)))})),i){e.$Loading.open();var r=Object.assign({resultJson:JSON.stringify(a),id:e.details.id,orderId:e.detail.marketOrderNo});e.commitData(r).then((function(a){if(e.$Loading.close(),"success"===a.data.result){Object(n["a"])("提交成功");var s={id:e.details.id,orderId:e.detail.marketOrderNo};e.$Loading.open(),e.prizeData(s).then((function(a){e.$Loading.close(),"success"===a.data.result?(e.mktAwardList=a.data.data.mktAwardList||[],e.mktAwardList.length>0?t.showFlag1=!0:t.showFlag1=!1,t.getEvaluateOrder()):(e.commitModel=!1,e.$router.go(-1))}))}else Object(n["a"])(a.data.info)}))}else Object(n["a"])(e.tip)}else Object(n["a"])("您还有必答题尚未答完，请先答完必答题！")},getEvaluateOrder:function(t){var e=this;if(""!=this.$store.state.login.token){var a={token:this.$store.state.login.token},s="/app/json/questionaire/getLatestAppraise";this.$http.post(s,a).then((function(a){var s=a.data;0==s.status?(e.limitOrderDayNum=s.data.limitOrderDayNum,e.toEvaluatedNum=s.data.toEvaluatedNum,t||(e.toEvaluatedNum>0||1==e.showFlag1?e.commitModel=!0:e.commitModel=!1),e.hasPrize=s.data.hasPrize):e.$Toast("网络加载较慢，请稍后重试!")}),(function(t){}))}},loadData:function(){var t=this;this.randomId=Math.random().toString(36).substr(2);var e=this,a={orderId:this.detail.marketOrderNo};e.$http.post("/app/json/questionaire/getDefaultConfig",a).then((function(a){if("success"===a.data.result){t.details=a.data.data,t.getQuest(),t.prize=JSON.parse(a.data.data.questionPrize);var s=JSON.parse(a.data.data.subjectJson);e.userId=a.data.data.userId;a.data.data.questionShare&&JSON.parse(a.data.data.questionShare);s.forEach((function(t){if(t.show=!1,1===t.kindId||2===t.kindId||3===t.kindId||4===t.kindId){var e=JSON.parse(t.options);e.forEach((function(t){t.name=t.lable})),t.options=e}2===t.kindId?t.result=[]:6===t.kindId?t.result=0:(t.result="",4===t.kindId&&(t.show=!1))})),s.forEach((function(t){t.evaluate="",t.tips=""})),e.answerList=JSON.parse(JSON.stringify(s)),e.answerList.forEach((function(t,a,s){2==t.kindId&&t.options.forEach((function(t,s,i){e.$set(e.answerList[a].options[s],"flag",!1)}))})),e.shareTitle=a.data.data.shareTitle,e.shareContent=a.data.data.shareContent,e.shareImgUrl=a.data.data.shareImgUrl}}))},getQuest:function(){var t=this,e={id:this.details.id,orderId:this.detail.marketOrderNo,ouCode:this.detail.storeOuCode};this.$http.post("/app/json/questionaire/startAnswer",e).then((function(e){t.$Loading.close(),e.data.result}))}},created:function(){this.loadData(),this.getEvaluateOrder(!0)}},l=o,d=(a("1787"),a("0c7c")),c=Object(d["a"])(l,s,i,!1,null,"9100ab4a",null);e["a"]=c.exports}}]);