(window.webpackJsonp=window.webpackJsonp||[]).push([[734],{MY50:function(t,i,s){"use strict";s.r(i);var e,n=s("dqDD"),a=s("PxLX");function o(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}var l={name:"",components:(e={},o(e,n.DatetimePicker.name,n.DatetimePicker),o(e,n.Toast.name,n.Toast),e),data:function(){return{integralList:"",integralListInfo:[],page:0,rows:10,hasMore:!0,loading:!1,ind:0,allStyle:!0,showJfList:["全部","赚","花","失效"],payTypeCodes:"",index:"",expireUnit:"0"}},mounted:function(){this.getAccountBaseInfo(),this.loadMore(),this.getAboutExpireUnit()},methods:{backEvent:function(){"subject"==this.$route.query.type?this.$router.push({path:"/questionlist"}):"serviceSubject"==this.$route.query.type?this.$router.push({path:"/service/questionlist"}):this.$router.go(-1)},goUse:function(){"1"==this.$store.state.globalConfig.qrcodePayVerify?a.a.open({type:"qrcodePay_verify",sureFunc:this.imgSureFunc,vertifyCancelEvent:function(){a.a.close()},paras:{phone:this.$store.state.login.phone,token:this.$store.state.login.token}}):this.imgSureFunc(null,null)},imgSureFunc:function(t,i){this.$router.push({path:"/mall2/integralinfo-pay",query:{verifyCode:t,uuid:i,integralinfo:this.integralList.balanceUnit}})},getAboutExpireUnit:function(){var t=this,i={token:this.$store.state.login.token,acctType:3,queryDays:this.$store.state.globalConfig.Count_overdue_days};this.$http.post("/app/json/acct/getAboutExpireUnit",i).then((function(i){var s=i.data;0==s.status?t.expireUnit=s.data.aboutExpireBalanceUnit:t.$Toast("获取当前过期积分失败")}))},openInfo:function(){this.$router.push({path:"/mall2/expire-integralinfo",query:{expireUnit:this.expireUnit,acctType:3}})},changeList:function(t){this.ind=t,console.log(t),0==t?this.index=0:1==t?this.index=1:2==t?this.index=2:3==t&&(this.index=3),this.page=0,this.loading=!1,this.hasMore=!0,this.integralListInfo=[],this.loadMore()},getAccountBaseInfo:function(){var t=this,i={token:this.$store.state.login.token,acctType:3};this.$http.post("/app/json/acct/getAccountBaseInfo",i).then((function(i){var s=i.data;0==s.status?t.integralList=s.data:t.$Toast("获取当前积分失败")}))},loadMore:function(){var t=this;this.$Loading.open(),this.page++,this.loading=!0,0==this.index?this.payTypeCodes="100, 200, 300, 400":1==this.index?this.payTypeCodes="100, 300":2==this.index?this.payTypeCodes="200":3==this.index&&(this.payTypeCodes="400");var i={page:this.page,rows:this.rows,payTypeCodes:this.payTypeCodes,distOuCode:1000612,token:this.$store.state.login.token,acctType:3};this.$http.post("/app/json/acct/getAccountPaymentList",i).then((function(i){var s=i.data;0==s.status&&(t.integralListInfo=t.integralListInfo.concat(s.data||[]),t.integralListInfo.length<s.totalRecords?t.loading=!1:t.hasMore=!1),t.$Loading.close()}))}}},r=(s("PWX3"),s("KHd+")),c=Object(r.a)(l,(function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"integral-info"},[s("nav-top",{attrs:{title:"积分"},on:{backEvent:t.backEvent}}),t._v(" "),s("nav-content",{staticClass:"integral-info"},[s("div",{staticClass:"integral-title"},[s("div",{staticClass:"now-integral"},[s("div",{staticClass:"num"},[t._v(t._s(t.integralList.balanceUnit?t.integralList.balanceUnit:0))]),t._v(" "),s("div",{staticClass:"text"},[s("div",{staticClass:"left"},[t._v("当前积分")]),t._v(" "),1==t.$store.state.globalConfig.useIntegral?s("div",{staticClass:"btn",on:{click:t.goUse}},[t._v("去使用")]):t._e()])]),t._v(" "),s("div",{staticClass:"content"},[0!=t.expireUnit?s("div",{staticClass:"tips"},[t._v("积分过期提醒：您有"),s("span",{staticClass:"num",on:{click:t.openInfo}},[t._v(" "+t._s(t.expireUnit||"0")+" ")]),t._v("积分即将过期，请尽快使用！\n        ")]):t._e(),t._v(" "),s("div",{staticClass:"info-list"},[s("ul",{staticClass:"jf-list"},t._l(t.showJfList,(function(i,e){return s("li",{key:e,staticClass:"jf-item",on:{click:function(i){return t.changeList(e)}}},[s("div",{staticClass:"jf-item-con"},[s("div",{staticClass:"allinfo",class:{active:t.ind===e,first:0==e,earn:1==e,pay:2==e,invalid:3==e}},[s("p",{staticClass:"num"},[0==e?s("span",{staticClass:"num-info"},[t._v(t._s(t.integralList.balanceUnit?t.integralList.balanceUnit:0))]):t._e(),t._v(" "),1==e?s("span",{staticClass:"num-info"},[t._v("+"+t._s(t.integralList.totalAddUnit?t.integralList.totalAddUnit:0))]):t._e(),t._v(" "),2==e?s("span",{staticClass:"num-info"},[t._v("-"+t._s(t.integralList.totalConsumeUnit?t.integralList.totalConsumeUnit:0))]):t._e(),t._v(" "),3==e?s("span",{staticClass:"num-info"},[t._v(t._s(t.integralList.expireBalanceUnit?t.integralList.expireBalanceUnit:0))]):t._e()]),t._v(" "),s("span",{staticClass:"tips"},[t._v(t._s(i))])])])])})),0)])])]),t._v(" "),s("div",{staticClass:"show-list"},[s("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"integral-list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-immediate-check":!0,"infinite-scroll-distance":"80"}},t._l(t.integralListInfo,(function(i,e){return s("li",{key:e,staticClass:"list"},[s("div",{staticClass:"info"},[s("p",{staticClass:"title"},[t._v(t._s(i.orderTypeName))]),t._v(" "),s("p",{staticClass:"time-info"},[t._v(t._s(i.paidTime))])]),t._v(" "),s("div",{staticClass:"num"},[100==i.payType||300==i.payType?s("span",{staticClass:"num-info"},[t._v("+"+t._s(i.amountUnit))]):t._e(),t._v(" "),200==i.payType||400==i.payType?s("span",{staticClass:"num-info"},[t._v(t._s(i.amountUnit))]):t._e()])])})),0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasMore,expression:"!hasMore"}],staticClass:"no-data theme_font_tint"},[t._v("没有更多数据了~")])])])],1)}),[],!1,null,"0d9789fe",null);i.default=c.exports},PWX3:function(t,i,s){"use strict";var e=s("QJ15");s.n(e).a},QJ15:function(t,i,s){}}]);