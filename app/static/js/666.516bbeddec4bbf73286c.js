(window.webpackJsonp=window.webpackJsonp||[]).push([[666],{MUWi:function(t,n,a){t.exports=a.p+"static/img/data_null.4ab872d.png"},SSzT:function(t,n,a){"use strict";var e=a("dJVH");a.n(e).a},dJVH:function(t,n,a){},gN4b:function(t,n,a){"use strict";a.r(n);var e=(a("SSzT"),a("KHd+")),o=Object(e.a)({components:{},data:function(){return{loveItems:[],refreshing:!1,loading:!1,finished:!1,donateTotalCnt:0,attendProCnt:0,donateUnit:0,bannerContent:"",currentPage:1}},methods:{loadMore:function(){this.refreshing&&(this.refreshing=!1),this.donationList(!1)},onRefresh:function(){this.loading&&(this.loading=!1),this.donationList(!0)},donationSumInfo:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/app_love_donation/queryLoveDonationSumInfo",{}).then((function(n){t.$Loading.close();var a=n.data,e=a.status,o=a.info,i=a.data;0==e?(t.donateTotalCnt=i.donateTotalCnt,t.attendProCnt=i.attendProCnt,t.donateUnit=i.donateUnit):t.$Toast(o)})).catch((function(n){t.$Loading.close(),t.$Toast("出错了～")}))},donationList:function(t){var n,a=this;n=t?1:this.currentPage+1,this.$Loading.open();var e={page:n,rows:10};this.$http.post("/app/json/app_love_donation/queryLoveDonationList",e).then((function(e){a.$Loading.close();var o=e.data,i=o.status,s=o.info,r=o.data;0==i?(a.currentPage=n,r.length<10?a.finished=!0:a.finished=!1,a.loading=!1,a.refreshing=!1,t?a.loveItems=r:r.forEach((function(t){a.loveItems.push(t)}))):a.$Toast(s)})).catch((function(t){a.$Loading.close()}))},toDonate:function(t){this.$router.push({path:"/donate-detail",query:{donateItem:t}})},donateHistory:function(){this.$router.push({path:"/donate-history",query:{}})},donateBanner:function(){var t=this;this.$http.get("/app/json/news/getNewsList",{params:{values:53}}).then((function(n){var a=n.data,e=a.status,o=a.info,i=a.data;0==e?t.bannerContent=t.$util.replaceH5Img(i[0].content):t.$Toast(o)})).catch((function(n){t.$Toast(n)}))}},created:function(){this.donateBanner(),this.donationSumInfo(),this.onRefresh()}},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("nav-top",{attrs:{title:"爱心捐赠"},on:{backEvent:function(n){return t.$router.go(-1)}}}),t._v(" "),e("nav-content",{staticClass:"navclass"},[e("div",{staticClass:"bannner-back"},[e("div",{staticClass:"div-h5",domProps:{innerHTML:t._s(t.bannerContent)}}),t._v(" "),e("div",{staticClass:"donate-his",on:{click:t.donateHistory}},[t._v("捐赠记录")])]),t._v(" "),e("div",{staticClass:"donate-record"},[e("div",{staticClass:"currenttimes"},[t._v("目前已凝聚"),e("span",[t._v(t._s(""==t.donateTotalCnt||0==t.donateTotalCnt?"0":t.donateTotalCnt))]),t._v("次爱心捐赠")]),t._v(" "),e("div",{staticClass:"line-row"}),t._v(" "),e("div",{staticClass:"attemt-count"},[e("div",{staticClass:"joined-count"},[t._v("\n              已参与捐助项目数\n              "),e("span",[t._v(t._s(""==t.attendProCnt||0==t.attendProCnt?"0":t.attendProCnt))])]),t._v(" "),e("div",{staticClass:"donate-count"},[t._v("\n              已捐助爱心积分\n              "),e("span",[t._v(t._s(""==t.donateUnit||0==t.donateUnit?"0":t.donateUnit))])])])]),t._v(" "),e("div",{staticClass:"list-root"},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(n){t.refreshing=n},expression:"refreshing"}},[t.loveItems&&t.loveItems.length>0?e("van-list",{attrs:{"immediate-check":!1,finished:t.finished,offset:10,"finished-text":"没有更多了"},on:{load:t.loadMore},model:{value:t.loading,callback:function(n){t.loading=n},expression:"loading"}},t._l(t.loveItems,(function(n){return e("van-cell",{key:n.index},[e("div",{staticClass:"item-cell"},[e("img",{staticClass:"item-img",attrs:{src:n.projectPic}}),t._v(" "),e("div",{staticClass:"item-bottom"},[e("div",[e("div",{staticClass:"name-title"},[t._v(t._s(n.projectName))]),t._v(" "),e("div",{staticClass:"item-left"},[t._v(t._s(""==n.attendPersonCnt?0:n.attendPersonCnt)+"人已捐")])]),t._v(" "),e("div",{staticClass:"item-right",on:{click:function(a){return t.toDonate(n)}}},[t._v("我要捐助")])])])])})),1):e("div",{staticClass:"donate-null"},[e("img",{attrs:{src:a("MUWi")}}),t._v(" "),e("div",[t._v("当前暂无需要捐赠的爱心项目~")])])],1)],1)])],1)}),[],!1,null,"2a8f9a3a",null);n.default=o.exports}}]);