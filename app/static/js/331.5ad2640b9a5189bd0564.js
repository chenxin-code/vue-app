(window.webpackJsonp=window.webpackJsonp||[]).push([[331],{"8slX":function(t,e,s){"use strict";var o={name:"goodscell",components:{},props:["goodsInfo","goodsCount","type"],data:function(){return{msg:"msg"}},methods:{testFunc:function(){console.log("testFunc")}},created:function(){}},i=(s("CEim"),s("KHd+")),n=Object(i.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"bottom"},[s("div",{staticClass:"goods-info"},[s("img",{attrs:{src:t.goodsInfo.phPictureUrl}}),t._v(" "),s("div",{staticClass:"right-good"},[s("div",{staticClass:"goods-title theme_font_common"},[s("p",[t._v(t._s(t.goodsInfo.skuName))])]),t._v(" "),s("div",{staticClass:"goods-price theme_font_gray"},[t._v("\n            单价：￥"+t._s(t.goodsInfo.salePrice?t.goodsInfo.salePrice:t.goodsInfo.price)+"  数量："+t._s(1==t.type?t.goodsInfo.payNumber:t.goodsInfo.number)+"  "),1==t.type?s("span",[t._v("申请数量："+t._s(t.goodsInfo.number))]):t._e(),2==t.type?s("span",[t._v("申请数量："+t._s(t.goodsCount))]):t._e()])])])]),t._v(" "),s("div",{staticClass:"package-list"},t._l(t.goodsInfo.packageList,(function(e){return s("div",{staticClass:"bottom"},[s("div",{staticClass:"goods-info"},[s("img",{attrs:{src:e.phPictureUrl}}),t._v(" "),s("div",{staticClass:"right-good"},[s("div",{staticClass:"goods-title theme_font_common"},[s("p",[t._v(t._s(e.skuName))])]),t._v(" "),s("div",{staticClass:"goods-price theme_font_gray"},[e.salePrice?s("span",[t._v("单价：￥"+t._s(e.salePrice))]):t._e(),t._v(" "),e.number?s("span",[t._v("  数量："+t._s(e.number))]):t._e()])])])])})),0)])}),[],!1,null,"78f64e60",null);e.a=n.exports},CEim:function(t,e,s){"use strict";var o=s("Vq2f");s.n(o).a},Gpg4:function(t,e,s){"use strict";var o=s("uuHJ");s.n(o).a},TQuY:function(t,e,s){"use strict";s.r(e),s("4X9F");var o=s("IkEG"),i=s("8slX"),n=s("dqDD"),a={name:"choosesertype",components:{GoodsCell:i.a,Indicator:n.Indicator,Toast:n.Toast},data:function(){return{isShow:!1,changeModal:!1,contentData:{},goodsCount:1,seservices:[{icon:"static/image/mall2/tuihuo.png",typeTitle:"退货",subtitle:"已收货，需要退回商品",type:0,isShow:!1},{icon:"static/image/mall2/huanhuo.png",typeTitle:"换货",subtitle:"已收到货，需要更换已收到的商品",type:1,isShow:!1},{icon:"static/image/mall2/weixiu.png",typeTitle:"维修",subtitle:"已收到货，需要维修已收到的商品",type:2,isShow:!1},{icon:"static/image/mall2/bufa.png",typeTitle:"补发商品",subtitle:"已发货，卖家少发商品",type:3,isShow:!1},{icon:"static/image/mall2/money.png",typeTitle:"退款(无需退货)",subtitle:"没收到货，或商家同意不用退货只退款",type:4,isShow:!1}],order:{},reApply:"0"}},methods:{chooseservice:function(t){if(console.log("售后类型",t),0!=this.goodsCount)if(console.log(this.$store.state.globalConfig.after_sale_whole_order_return),1==t&&1==this.order.interfaceType)this.getNewsList(),this.changeModal=!0;else if(0==t&&0==this.order.supportSingleProReturn&&1==this.$store.state.globalConfig.after_sale_whole_order_return){var e=this;o.a.confirm({title:"提示",message:"该店铺不支持单品退货，如需退货，您购买的该商户所有商品必须全部退货",confirmButtonText:"确认",cancelButtonText:"取消",getContainer:".choosesertype"}).then((function(){console.log("confirm"),e.$router.push({path:"/mall2/services",query:{type:t,order:encodeURIComponent(JSON.stringify(e.order)),count:e.goodsCount,flag:!0}})})).catch((function(){}))}else this.$router.push({path:"/mall2/services",query:{type:t,order:encodeURIComponent(JSON.stringify(this.order)),count:this.goodsCount}});else Object(n.Toast)({message:"申请数量要大于等于1",position:"bottom",duration:2e3})},showType:function(){for(var t=0;t<this.seservices.length;t++)0==t?this.seservices[t].isShow=this.order.returnFlag:1==t?this.seservices[t].isShow=this.order.changeFlag:2==t?this.seservices[t].isShow=this.order.repairFlag:3==t?this.seservices[t].isShow=this.order.fillFlag:4==t&&(this.seservices[t].isShow=this.order.onlyRefundFlag)},_getAfterSalesType:function(t){var e=this;this.$Loading.open();var s={token:this.$store.state.login.token,id:t,afterType:this.reApply};console.log(s),this.$http.post("/app/json/app_order_after_sale/AfterSalesType",s).then((function(t){e.$Loading.close();var s=t.data;0==s.status?(e.order=s.data,e.showType(),e.isShow=!0):(e.isShow=!1,e.$Toast(s.info))}),(function(t){e.isShow=!1,e.$Loading.close(),console.log("获取服务类型",t),e.$Toast("获取数据失败")}))},turnback:function(){this.$router.go(-1)},getNewsList:function(){var t=this;this.$request.post("/app/json/news/getNewsList",{values:48}).then((function(e){0==e.status?t.contentData=e.data[0]?e.data[0]:{}:t.$Toast(e.info?e.info:"获取获取内容中心失败")}))}},created:function(){var t=this.$route.query.id?JSON.parse(decodeURIComponent(this.$route.query.id)):"";this.reApply=this.$route.query.reApply?this.$route.query.reApply:"0",this._getAfterSalesType(t)},activated:function(){},beforeRouteLeave:function(t,e,s){this.$keepaliveHelper.deleteCache(this),s()}},r=(s("Gpg4"),s("KHd+")),c=Object(r.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"choosesertype"},[s("nav-top",{on:{backEvent:t.turnback}}),t._v(" "),t.isShow?s("nav-content",[s("div",{staticClass:"goods-cell shadow-cell"},[s("goods-cell",{attrs:{"goods-info":t.order}}),t._v(" "),s("div",{staticClass:"count-info"},[s("p",{staticClass:"left-title"},[t._v("申请数量")]),t._v(" "),s("div",[s("van-stepper",{attrs:{min:1,max:t.order.number,step:1,integer:""},model:{value:t.goodsCount,callback:function(e){t.goodsCount=e},expression:"goodsCount"}})],1)])],1),t._v(" "),s("div",{staticClass:"seservices-cell shadow-cell"},t._l(t.seservices,(function(e,o){return 1==e.isShow?s("div",{staticClass:"type-cell"},[s("div",{staticClass:"left-info"},[s("img",{attrs:{src:e.icon}}),t._v(" "),s("p",[t._v(t._s(e.typeTitle))])]),t._v(" "),s("div",{staticClass:"right-info",on:{click:function(s){return t.chooseservice(e.type)}}},[s("p",{staticClass:"theme_font_gray"},[t._v(t._s(e.subtitle))]),t._v(" "),s("i",{staticClass:"iconfont mall-gengduojiantou theme_font_gray"})])]):t._e()})),0),t._v(" "),s("van-dialog",{staticClass:"change-modal",attrs:{title:t.contentData.title||"提示"},model:{value:t.changeModal,callback:function(e){t.changeModal=e},expression:"changeModal"}},[t.contentData.content?s("div",{domProps:{innerHTML:t._s(t.contentData.content)}}):t._e()])],1):t._e()],1)}),[],!1,null,"070e5094",null);e.default=c.exports},Vq2f:function(t,e,s){},uuHJ:function(t,e,s){}}]);