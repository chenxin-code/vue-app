(window.webpackJsonp=window.webpackJsonp||[]).push([[546],{"EmR+":function(t,a,e){"use strict";a.a={methods:{dealWithPrice:function(t){if(!(t=Number(t)))return[0,0,"0.00"];var a=(t=String(t.toFixed(2))).split(".")[1],e=t.split(".")[0];return[e,a,e+"."+a]}}}},MjKU:function(t,a,e){},N3Xq:function(t,a,e){"use strict";e.r(a),e("4X9F");var i=e("IkEG"),r={mixins:[e("EmR+").a],data:function(){return{isPersonalCard:!0,isShareOpen:!1,purchaseNumber:1,cardDetail:{}}},mounted:function(){this.$route.query.isShareOpen&&(this.isShareOpen=!0),this.getDetail()},methods:{buyNow:function(){var t=this;this.$Loading.open();var a={deliveryType:2,carts:[{skuId:this.cardDetail.skuId,storeOuCode:this.cardDetail.storeOuCode,number:this.purchaseNumber,selfActivityId:"",checked:1}]};this.$http.post("/app/json/app_cart/SettleCart",a).then((function(e){var i=e.data;0==i.status?t.$router.push({name:"confirm_order",params:{occurData:i.data.occur[0]||{},settleCartData:a,skuName:t.cardDetail.skuName,salePrice:t.cardDetail.salesPrice,phMainUrl:t.cardDetail.backgroundPic,entryType:3}}):t.$Toast(i.info),t.$Loading.close()})).catch((function(a){t.$Toast("SettleCart err "+a),t.$Loading.close()}))},receiveHandler:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/equity_card/giveEquityCard",{giveUserId:this.$route.query.userId,parentId:this.$route.query.cardId,equityCardId:this.$route.query.equityCardId}).then((function(a){t.$Loading.close();var e=a.data;0==e.status?i.a.confirm({title:"标题",message:"领取成功！",confirmButtonText:"去【我的卡包】"}).then((function(){t.$router.replace({path:"/my_card_case"})})).catch((function(){})):t.$Toast(e.info)})).catch((function(a){t.$Loading.close(),t.$Toast("giveEquityCard err "+a)}))},getDetail:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/equity_card/equityCardBuyList",{cardType:this.$route.query.cardType,id:this.$route.query.equityCardId}).then((function(a){t.$Loading.close();var e=a.data;0==e.status?(t.cardDetail=e.data[0],2==t.cardDetail.cardType&&(t.isPersonalCard=!1)):t.$Toast(e.info)})).catch((function(a){t.$Loading.close(),t.$Toast("equityCardDetail err "+a)}))}}},s=(e("NGiF"),e("KHd+")),n=Object(s.a)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav-top",{on:{backEvent:function(a){return t.$router.go(-1)}}}),t._v(" "),e("nav-content",{staticClass:"container"},[e("div",{staticClass:"card-info"},[e("img",{staticClass:"card-img",attrs:{src:t.cardDetail.backgroundPic,alt:""}}),t._v(" "),e("p",{staticClass:"card-name"},[t._v(t._s(t.cardDetail.equityCardName))]),t._v(" "),e("p",{staticClass:"card-adv"},[t._v(t._s(t.cardDetail.advertisingLanguage))]),t._v(" "),e("p",{staticClass:"price"},[t._v("￥"),e("span",[t._v(t._s(t.dealWithPrice(t.cardDetail.salesPrice)[0]))]),t._v("."+t._s(t.dealWithPrice(t.cardDetail.salesPrice)[1])+"\n      ")]),t._v(" "),t.isPersonalCard&&!t.isShareOpen?e("div",{staticClass:"stepper-container"},[e("span",{staticClass:"title"},[t._v("选择数量")]),t._v(" "),e("van-stepper",{attrs:{integer:!0},model:{value:t.purchaseNumber,callback:function(a){t.purchaseNumber=a},expression:"purchaseNumber"}})],1):t._e()]),t._v(" "),e("div",{staticClass:"product-info"},[e("p",{staticClass:"title"},[t._v("产品介绍")]),t._v(" "),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.cardDetail.instructions)}})]),t._v(" "),t.isShareOpen?e("div",{staticClass:"chum-public-btn btm-btn"},[e("van-button",{attrs:{round:"",block:"",type:"info",color:"linear-gradient(270deg,rgba(49,49,49,1) 0%,rgba(84,84,84,1) 51%,rgba(49,49,49,1) 100%)"},on:{click:t.receiveHandler}},[t._v("一键领取\n      ")])],1):t.isPersonalCard?e("div",{staticClass:"chum-public-btn btm-btn"},[e("van-button",{attrs:{round:"",block:"",type:"info",color:"linear-gradient(270deg,rgba(49,49,49,1) 0%,rgba(84,84,84,1) 51%,rgba(49,49,49,1) 100%)"},on:{click:t.buyNow}},[t._v("立即购买\n      ")])],1):t._e()])],1)}),[],!1,null,"617b6766",null);a.default=n.exports},NGiF:function(t,a,e){"use strict";var i=e("MjKU");e.n(i).a}}]);