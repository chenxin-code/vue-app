(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6216914"],{"116d9":function(e,t,s){},"87ab":function(e,t,s){"use strict";s("a00f")},93168:function(e,t,s){"use strict";s("116d9")},"94df":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"returnservice"},[s("nav-top",{attrs:{title:e.service},on:{backEvent:e.turnback}}),e.isShow?s("nav-content",[s("div",{ref:"servicescrl",staticClass:"scroll-info"},[s("div",{staticClass:"padding-con shadow-cell"},[s("goods-cell",{attrs:{"goods-info":e.serviceItem,"goods-count":e.$route.query.count,type:2}})],1),e.$route.query.flag?s("div",{staticClass:"return-con"},[e.serviceItem.returnSkuList.length>0?s("div",{staticClass:"padding-con shadow-cell"},e._l(e.serviceItem.returnSkuList,(function(e){return s("div",[s("goods-cell",{attrs:{"goods-info":e,"goods-count":e.number}})],1)})),0):e._e()]):e._e(),0!=e.serviceType&&4!=e.serviceType||!e.serviceItem.returnSkuList.length||e.$route.query.flag?e._e():s("div",{staticClass:"goods-list padding-con shadow-cell"},[s("P",{staticClass:"title-font"},[e._v("以下商品可选择一起批量退货")]),s("div",{staticClass:"allselected",on:{click:function(t){return e.allSelected()}}},[e.selectAllBtn?e._e():s("i",{staticClass:"iconfont mall-weixuanzhong theme_font_gray"}),e.selectAllBtn?s("i",{staticClass:"iconfont mall-dui theme_font_red"}):e._e(),s("span",{staticClass:"content-font"},[e._v(" 全选 ("+e._s(e.selectedCount)+")")])]),e._l(e.serviceItem.returnSkuList,(function(t){return s("div",{staticClass:"goods-cell",on:{click:function(s){return e.returnGoodsClick(t)}}},[s("div",{staticClass:"left-select"},[t.isChecked?e._e():s("i",{staticClass:"iconfont mall-weixuanzhong theme_font_gray"}),t.isChecked?s("i",{staticClass:"iconfont mall-dui theme_font_red"}):e._e()]),s("div",{staticClass:"right-info"},[s("img",{attrs:{src:t.phPictureUrl}}),s("div",{staticClass:"right-good"},[s("div",{staticClass:"goods-title theme_font_common content-font"},[s("p",[e._v(e._s(t.skuName))])]),s("div",{staticClass:"goods-price theme_font_gray"},[s("p",{staticClass:"small-font"},[e._v("购买数量："+e._s(t.number))]),s("van-stepper",{attrs:{min:1,max:t.number,integer:""},on:{change:function(s){return e.numchange(t.count,t.number)},overlimit:e.overlimit},model:{value:t.count,callback:function(s){e.$set(t,"count",s)},expression:"goods.count"}})],1)])])])}))],2),s("div",{staticClass:"padding-con shadow-cell",on:{click:e.isShowChooseReason}},[s("div",{staticClass:"reason content-font"},[s("p",[e._v("申请原因")]),s("div",{staticClass:"theme_font_gray full single-line"},[e._v(" "+e._s(e.reason)+" ")]),s("i",{staticClass:"iconfont mall-gengduo theme_font_gray content-font"})])]),1==e.serviceType?s("div",{staticClass:"padding-con shadow-cell",on:{click:e.changeGoods}},[s("div",{staticClass:"reason content-font"},[s("p",[e._v("换新商品")]),s("div",{staticClass:"theme_font_gray full single-line"},[e._v(" "+e._s(""!=e.goodSkuName?e.goodSkuName:"请选择换新商品")+" ")]),s("i",{staticClass:"iconfont mall-gengduo theme_font_gray content-font"})])]):e._e(),s("div",{staticClass:"padding-con shadow-cell"},[s("p",{staticClass:"content-font"},[e._v("问题描述")]),s("MixInput",{staticClass:"mixinput",attrs:{text:e.commentText,imageUrls:e.commentImages,placeholder:"请描述申请售后服务的具体原因，同时上传图片"},on:{"update:text":function(t){e.commentText=t},"update:imageUrls":function(t){e.commentImages=t},"update:image-urls":function(t){e.commentImages=t}}})],1),2==e.serviceType?s("div",{staticClass:"padding-con shadow-cell"},[s("p",{staticClass:"content-font"},[e._v("维修方式")]),"2"==e.serviceItem.interfaceType?s("div",[s("div",{staticClass:"policy-title content-font"},[s("p",{staticClass:"theme_bg_white border-con theme_font_red theme_bg_ml_red theme_border_red"},[e._v("上门取件")])])]):s("div",e._l(e.serviceItem.repairList,(function(t){return s("div",{staticClass:"policy-title content-font",on:{click:function(s){return e.chooseRepairMethod(t.code)}}},[s("p",{staticClass:"theme_bg_white",class:{"border-con theme_font_red theme_bg_ml_red theme_border_red":e.methodsType==t.code}},[e._v(" "+e._s(t.value))])])})),0)]):e._e(),0==e.serviceType||1==e.serviceType||1==e.methodsType&&2==e.serviceType?s("div",{staticClass:"padding-con shadow-cell"},[s("p",{staticClass:"content-font"},[e._v("退货方式")]),"2"==e.serviceItem.interfaceType?s("div",[s("div",{staticClass:"policy-title content-font"},[s("p",{staticClass:"theme_bg_white border-con theme_font_red theme_bg_ml_red theme_border_red"},[e._v("上门取件")])])]):s("div",{staticClass:"policy-title theme_font_red content-font"},[s("p",{staticClass:"theme_bg_ml_red theme_border_red  border-con"},[e._v("快递至第三方卖家")])])]):e._e(),0!=e.serviceType&&4!=e.serviceType||"2"==e.serviceItem.interfaceType?s("div",{staticClass:"padding-con shadow-cell"},[s("p",{staticClass:"content-font"},[e._v(e._s(0==e.methodsType&&2==e.serviceType?"上门地址":"收货地址")),s("span",{staticClass:"small-font theme_font_gray"},[e._v("（"+e._s(0==e.methodsType&&2==e.serviceType?"该地址是上门维修地址":"该地址是寄回给您的地址")+"）")])]),s("div",{staticClass:"small-font theme_font_common address-con",on:{click:e.chooseAddress}},[s("div",{staticClass:"address-left"},[s("i",{staticClass:"iconfont mall-dingwei theme_font_red content-font"}),e._v(" "+e._s(e.address)+" ")]),s("i",{staticClass:"iconfont mall-gengduojiantou theme_font_gray content-font"})])]):e._e(),s("div",{staticClass:"padding-con shadow-cell"},[s("div",{staticClass:"input-cell"},[s("p",{staticClass:"left-info content-font theme_font_common"},[e._v("联系人")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.contactname,expression:"contactname"}],staticClass:"input-info theme_bg_white_ef",attrs:{type:"text"},domProps:{value:e.contactname},on:{input:function(t){t.target.composing||(e.contactname=t.target.value)}}})]),s("div",{staticClass:"input-cell"},[s("p",{staticClass:"left-info content-font theme_font_common"},[e._v("联系电话")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.contactphone,expression:"contactphone"}],staticClass:"input-info theme_bg_white_ef",attrs:{type:"number"},domProps:{value:e.contactphone},on:{input:function(t){t.target.composing||(e.contactphone=t.target.value)}}})])])]),s("div",{staticClass:"submit-btn theme_bg_red theme_font_white",on:{click:e._submitClick}},[s("p",[e._v("提交")])])]):e._e(),e.showReasons?s("pop-view",{on:{closeEvent:e.closeReason}},[s("div",{staticClass:"reasons padding-con"},[s("P",{staticClass:"reasons-title theme_font_common"},[e._v("申请原因")]),e._l(e.reasonsList,(function(t,i){return s("div",{staticClass:"reasons-cell",on:{click:function(s){return e.chooseReason(t,i)}}},[t.isChecked?e._e():s("i",{staticClass:"iconfont mall-weixuanzhong theme_font_gray"}),t.isChecked?s("i",{staticClass:"iconfont mall-dui theme_font_red"}):e._e(),s("p",{staticClass:"reason-con theme_font_gray"},[e._v(e._s(t.value))])])})),s("div",{staticClass:"submit-btn theme_bg_red theme_font_white",on:{click:e.closeReason}},[s("p",[e._v("确定")])])],2)]):e._e(),e.showChangeInfo?s("pop-view",{on:{closeEvent:e.closeGoods}},[s("div",{staticClass:"change-info padding-con"},[s("div",{staticClass:"top-image"},[s("img",{attrs:{src:e.serviceItem.phPictureUrl}}),s("P",{staticClass:"theme_font_common"},[e._v("商品编码："+e._s(e.serviceItem.skuId))])],1),s("div",{staticClass:"brand-con"},[s("div",{staticClass:"title content-font theme_font_common"},[e._v("品牌、规格")]),e._l(e.serviceItem.changeSkuList,(function(t,i){return s("div",{staticClass:"brand-cell",on:{click:function(s){return e.chooseGoods(t,i)}}},[t.isChecked?e._e():s("i",{staticClass:"iconfont mall-weixuanzhong theme_font_gray"}),t.isChecked?s("i",{staticClass:"iconfont mall-dui theme_font_red"}):e._e(),s("p",{staticClass:"specs-con theme_font_gray"},[e._v(e._s(t.skuName))])])}))],2),s("div",{staticClass:"submit-btn theme_bg_red theme_font_white",on:{click:e.closeGoods}},[s("p",[e._v("确定")])])])]):e._e()],1)},o=[],n=s("f2c9"),a=s("decd"),c=s("76a0"),r={name:"returnservice",components:{GoodsCell:n["a"],MixInput:a["a"],Indicator:c["Indicator"],Toast:c["Toast"]},data:function(){return{isShow:!1,serviceType:0,service:"",selectedCount:0,contactname:"",contactphone:"",methodsType:0,commentText:"",commentImages:[],showReasons:!1,goodsInfo:{},address:"",goodsCount:0,reasonsList:[],showChangeInfo:!1,selectAddress:{},serviceItem:{},reason:"选择申请原因",selectAllBtn:!1,scrollValue:0,isSelectAddress:!1,goodSkuName:""}},methods:{numchange:function(e){event.stopPropagation()},overlimit:function(){event.stopPropagation()},getNavTitle:function(){0==this.serviceType?this.service="退货":1==this.serviceType?this.service="换货":2==this.serviceType?this.service="维修":3==this.serviceType?this.service="补发商品":4==this.serviceType&&(this.service="退款(无需退货)")},_submitClick:function(){var e=this;if(""!==this.contactphone&&this.$util.checkMobile(this.contactphone))if(""!==this.contactname){var t="/app/json/app_order_after_sale/afterSubmit",s={token:this.$store.state.login.token,province:this.isSelectAddress?this.$store.state.mall2.selectAddress.province:this.serviceItem.province,city:this.isSelectAddress?this.$store.state.mall2.selectAddress.city:this.serviceItem.city,country:this.isSelectAddress?this.$store.state.mall2.selectAddress.country:this.serviceItem.country,town:this.isSelectAddress?this.$store.state.mall2.selectAddress.town:this.serviceItem.town,address:this.address,skuDetailList:[],issueDesc:this.commentText,picList:this.commentImages,consignee:"",realName:"",phone:"",remark:"",type:4==this.serviceType?5:this.serviceType,receiver:this.contactname,mobile:this.contactphone,applyReason:"",number:this.$route.query.flag?this.serviceItem.number:this.$route.query.count,mainOrderId:this.serviceItem.mainOrderId,id:this.serviceItem.id,skuId:this.serviceItem.skuId,phPictureUrl:this.serviceItem.phPictureUrl,repairType:2==this.serviceType?this.methodsType:""};for(var i in this.reasonsList)this.reasonsList[i].isChecked&&(s.applyReason=this.reasonsList[i].code);if(0==this.serviceType){var o=[];for(var n in this.serviceItem.returnSkuList)if(1==this.$route.query.flag)o=this.serviceItem.returnSkuList;else if(this.serviceItem.returnSkuList[n].isChecked){var a=this.serviceItem.returnSkuList[n];o.push({phPictureUrl:a.phPictureUrl,salePrice:a.salePrice,skuId:a.skuId,skuName:a.skuName,number:a.count})}s.skuDetailList=o}else if(1==this.serviceType){var r=[];for(var l in this.serviceItem.changeSkuList)if(this.serviceItem.changeSkuList[l].isChecked){var d=this.serviceItem.changeSkuList[l];r.push({phPictureUrl:d.phPictureUrl,salePrice:d.salePrice,skuId:d.skuId,skuName:d.skuName,number:d.number})}s.skuDetailList=r}if(""!==s.applyReason){if("2"==this.serviceItem.interfaceType){if(null==this.$store.state.mall2.selectAddress.provinceId||""==this.$store.state.mall2.selectAddress.provinceId||void 0==this.$store.state.mall2.selectAddress.provinceId)return void Object(c["Toast"])({message:"请选择取件地址",position:"bottom",duration:2e3});s.pickwareType=4,s.pickwareProvince=this.$store.state.mall2.selectAddress.provinceId,s.pickwareCity=this.$store.state.mall2.selectAddress.cityId,s.pickwareCounty=this.$store.state.mall2.selectAddress.countryId,s.pickwareAddress=this.$store.state.mall2.selectAddress.address,s.returnwareProvince=this.$store.state.mall2.selectAddress.provinceId,s.returnwareCity=this.$store.state.mall2.selectAddress.cityId,s.returnwareCounty=this.$store.state.mall2.selectAddress.countryId}this.$Loading.open(),this.$http.post(t,s).then((function(t){e.$Loading.close();var s=t.data;if(0==s.status){s.data;e.$store.state.mall2.servicecontact.contactname=e.contactname,e.$store.state.mall2.servicecontact.contactphone=e.contactphone,e.$router.push({path:"/mall2/submitsuccess"})}else e.$Toast(s.info)}),(function(t){e.$Loading.close(),e.$Toast("提交数据失败")}))}else Object(c["Toast"])({message:"请输选择申请原因",position:"bottom",duration:2e3})}else Object(c["Toast"])({message:"请输入联系人",position:"bottom",duration:2e3});else Object(c["Toast"])({message:"请输入正确的手机号码",position:"bottom",duration:2e3})},allSelected:function(){for(var e in this.selectAllBtn=!this.selectAllBtn,this.serviceItem.returnSkuList)this.selectAllBtn?this.serviceItem.returnSkuList[e].isChecked=!0:this.serviceItem.returnSkuList[e].isChecked=!1;this.selectedCount=this.selectAllBtn?this.serviceItem.returnSkuList.length:0},returnGoodsClick:function(e){e.isChecked=!e.isChecked;var t=0;for(var s in this.serviceItem.returnSkuList)this.serviceItem.returnSkuList[s].isChecked&&(t+=1);this.selectedCount=t,t==this.serviceItem.returnSkuList.length?this.selectAllBtn=!0:this.selectAllBtn=!1},isShowChooseReason:function(){this.showReasons||(this.showReasons=!this.showReasons)},chooseReason:function(e,t){for(var s in this.reasonsList)s!=t&&(this.reasonsList[s].isChecked=!1);e.isChecked=!0},closeReason:function(){for(var e in this.reasonsList)this.reasonsList[e].isChecked&&(this.reason=this.reasonsList[e].value);this.showReasons=!1},chooseGoods:function(e,t){for(var s in this.serviceItem.changeSkuList)s!=t&&(this.serviceItem.changeSkuList[s].isChecked=!1);e.isChecked=!0,this.goodSkuName=e.skuName},closeGoods:function(e){this.showChangeInfo=!1},changeGoods:function(){this.showChangeInfo=!this.showChangeInfo},chooseAddress:function(){this.$router.push({path:"addresslist"})},chooseRepairMethod:function(e){"0"==e?this.methodsType=0:"1"==e&&(this.methodsType=1)},dealData:function(){var e=[];0==this.serviceType||4==this.serviceType?e=this.serviceItem.returnList:1==this.serviceType?e=this.serviceItem.changeList:2==this.serviceType?e=this.serviceItem.repairReasonList:3==this.serviceType&&(e=this.serviceItem.fillList);for(var t=0;t<e.length;t++){var s=e[t];this.reasonsList.push({isChecked:!1,value:s.value,code:s.code})}if(0==this.serviceType)for(var i in this.serviceItem.returnSkuList)this.$set(this.serviceItem.returnSkuList[i],"count",1),this.$set(this.serviceItem.returnSkuList[i],"isChecked",!1);else if(1==this.serviceType)for(var o in this.serviceItem.changeSkuList)this.$set(this.serviceItem.changeSkuList[o],"count",0),this.$set(this.serviceItem.changeSkuList[o],"isChecked",!1);this.address=this.serviceItem.provinceName+this.serviceItem.cityName+this.serviceItem.countryName+this.serviceItem.townName+this.serviceItem.address,this.contactname=this.serviceItem.receiver,this.contactphone=this.serviceItem.mobile},_getApplyPage:function(){var e=this,t="/app/json/app_order_after_sale/applyPage";this.$Loading.open();var s={token:this.$store.state.login.token,mainOrderId:this.goodsInfo.mainOrderId,id:this.goodsInfo.id,skuId:this.goodsInfo.skuId,type:4==this.serviceType?5:this.serviceType};this.$http.post(t,s).then((function(t){e.$Loading.close();var s=t.data;0==s.status?(e.serviceItem=s.data,e.dealData(),e.isShow=!0):(e.$Toast(s.info),e.isShow=!1)}),(function(t){e.isShow=!1,e.$Loading.close(),e.$Toast("获取数据失败")}))},turnback:function(){this.$router.go(-1)}},created:function(){this.serviceType=this.$route.query.type,this.goodsInfo=this.$route.query.order?JSON.parse(decodeURIComponent(this.$route.query.order)):"",this.goodsCount=this.$route.query.count?JSON.parse(decodeURIComponent(this.$route.query.count)):0,this.getNavTitle(),this._getApplyPage(),this.contactname=this.$store.state.mall2.servicecontact.contactname,this.contactphone=this.$store.state.mall2.servicecontact.contactphone},activated:function(){0!=this.scrollValue&&(this.$refs.servicescrl.scrollTop=this.scrollValue)},beforeRouteLeave:function(e,t,s){"/mall2/addresslist"!=e.path?this.$keepaliveHelper.deleteCache(this):this.scrollValue=this.$refs.servicescrl.scrollTop,s()},watch:{"$store.state.mall2.selectAddress":function(){this.isSelectAddress=!0,this.address=this.$store.state.mall2.selectAddress.addressFull}}},l=r,d=(s("93168"),s("0c7c")),h=Object(d["a"])(l,i,o,!1,null,"3f42e0b0",null);t["default"]=h.exports},"9e4d":function(e,t,s){"use strict";s("bf78")},a00f:function(e,t,s){},bf78:function(e,t,s){},decd:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"index"},[s("div",{staticClass:"text-input theme_bg_white_f5"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputText,expression:"inputText"}],staticClass:"input-textarea",attrs:{placeholder:void 0!=e.placeholder?e.placeholder:"请输入"},domProps:{value:e.inputText},on:{input:[function(t){t.target.composing||(e.inputText=t.target.value)},e.textInputChange]}})]),e.images?s("div",{staticClass:"img-input"},[e._l(e.images,(function(t,i){return s("div",{staticClass:"s-imgs"},[s("img",{attrs:{src:t},on:{click:function(t){return e.uploadpic(i)}}})])})),9!=e.images.length?s("div",{staticClass:"s-imgs",on:{click:function(t){return e.uploadpic(e.images.length)}}},[e._m(0)]):e._e()],2):e._e()])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-img"},[s("i",{staticClass:"iconfont mall-jiahao"})])}],n=(s("fb6a"),s("f0ba")),a={name:"index",components:{},props:{placeholder:String,text:String,imageUrls:Array,maxNumber:String},data:function(){return{inputText:"",showChoosePhoto:!1,selectedIndex:0,images:[]}},methods:{textInputChange:function(e){var t=e.target.value;t.length>500&&(t=t.slice(0,500),this.$Toast("最大输入500个字")),this.inputText=t},linkFunc:function(e,t){this.images.push(e)},uploadpic:function(e){this.selectedIndex=e,n["a"].open({linkFunc:this.linkFunc,token:this.$store.state.login.token})},bottomOp:function(e){0==e?this.getImg("2"):1==e?this.getImg("1"):2==e&&(this.showChoosePhoto=!1)},getImg:function(e){var t=this;this.$bridgefunc.getPhoto(e,(function(e){t.showChoosePhoto=!1,t.updateImg(e,t.selectedIndex),t.imageUrls[t.selectedIndex]="data:image/jpeg;base64,"+e}))},updateImg:function(e,t){this.$Loading.open("保存中");var s="/uploadFile",i=this.$store.state.login.token,o={base64File:e,fileType:"jpg",fileName:"评论1.jpg",bucketName:"app_img",token:i},n=this;this.$http.post(s,o).then((function(e){n.$Loading.close();var s=e.data;0==s.status?n.imageUrls[t]=s.data:Toast({message:s.info,position:"bottom",duration:2e3})}),(function(e){n.$Loading.close(),Toast({message:"上传图片失败",position:"bottom",duration:2e3})}))}},watch:{inputText:function(e,t){void 0!=this.maxNumber&&null!=this.maxNumber&&this.maxNumber>0&&e.length>this.maxNumber&&(this.inputText=e.substr(0,this.maxNumber),this.$Toast("最多不能超过"+this.maxNumber+"字")),this.$emit("update:text",e)},images:function(e,t){this.$emit("update:imageUrls",e)}},created:function(){this.inputText=this.text,this.images=this.imageUrls}},c=a,r=(s("87ab"),s("0c7c")),l=Object(r["a"])(c,i,o,!1,null,"6121d282",null);t["a"]=l.exports},f2c9:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"bottom"},[s("div",{staticClass:"goods-info"},[s("img",{attrs:{src:e.goodsInfo.phPictureUrl}}),s("div",{staticClass:"right-good"},[s("div",{staticClass:"goods-title theme_font_common"},[s("p",[e._v(e._s(e.goodsInfo.skuName))])]),s("div",{staticClass:"goods-price theme_font_gray"},[e._v(" 单价：￥"+e._s(e.goodsInfo.salePrice?e.goodsInfo.salePrice:e.goodsInfo.price)+"  数量："+e._s(1==e.type?e.goodsInfo.payNumber:e.goodsInfo.number)+"  "),1==e.type?s("span",[e._v("申请数量："+e._s(e.goodsInfo.number))]):e._e(),2==e.type?s("span",[e._v("申请数量："+e._s(e.goodsCount))]):e._e()])])])]),s("div",{staticClass:"package-list"},e._l(e.goodsInfo.packageList,(function(t){return s("div",{staticClass:"bottom"},[s("div",{staticClass:"goods-info"},[s("img",{attrs:{src:t.phPictureUrl}}),s("div",{staticClass:"right-good"},[s("div",{staticClass:"goods-title theme_font_common"},[s("p",[e._v(e._s(t.skuName))])]),s("div",{staticClass:"goods-price theme_font_gray"},[t.salePrice?s("span",[e._v("单价：￥"+e._s(t.salePrice))]):e._e(),t.number?s("span",[e._v("  数量："+e._s(t.number))]):e._e()])])])])})),0)])},o=[],n={name:"goodscell",components:{},props:["goodsInfo","goodsCount","type"],data:function(){return{msg:"msg"}},methods:{testFunc:function(){}},created:function(){}},a=n,c=(s("9e4d"),s("0c7c")),r=Object(c["a"])(a,i,o,!1,null,"7682a674",null);t["a"]=r.exports}}]);