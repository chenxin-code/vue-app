(window.webpackJsonp=window.webpackJsonp||[]).push([[366],{EVBQ:function(t,e,i){"use strict";i.r(e);var a=i("FYJB"),s=i("L2JU"),n={data:function(){return{cardList:[],isShowChangeCard:!1,startTime:"",endTime:"",complete:!1,hasMore:!0}},mounted:function(){this.getRecord()},methods:{screenChild:function(t){this.startTime=t[0],this.endTime=t[1],this.getRecord()},getRecord:function(){var t=this,e={token:this.$store.state.login.token,startTime:this.startTime,endTime:this.endTime,vipUnitUserCode:this.vipUnitUser.vipUnitUserId};this.$request.post("/app/json/app_oil_appoint/appAllOilSaledRecord",e).then((function(e){if(t.complete=!0,t.hasMore=!1,0===e.status){var i=e.data;t.cardList=i}else t.$Toast(e.info?e.info:"获取购油记录失败")})).catch((function(t){console.log(t)}))},dealTime:function(t){return this.insertStr(this.insertStr(t,4,"-"),7,"-")},insertStr:function(t,e,i){return t.slice(0,e)+i+t.slice(e)}},computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t})({},Object(s.c)(["vipUnitUser"])),components:{ScreenPopup:a.a}},o=(i("eQLx"),i("KHd+")),c=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"have-mention"},[i("nav-top",{staticClass:"nav-top",attrs:{title:"购油记录"},on:{backEvent:function(e){return t.$router.go(-1)}}},[i("div",{staticClass:"screen-popup"},[i("ScreenPopup",{attrs:{isShowChangeCard:t.isShowChangeCard},on:{childToDadValue:t.screenChild}})],1)]),t._v(" "),i("nav-content",{staticClass:"have-mention-container"},[t._l(t.cardList,(function(e,a){return t.complete?i("div",{key:a,staticClass:"my-title-info"},[i("div",{staticClass:"top"},[i("div",{staticClass:"card-num"},[t._v("油品名称："+t._s(e.oilcode)+t._s(e.oilname))])]),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"item"},[i("div",{staticClass:"left"},[t._v("订单编号")]),t._v(" "),i("div",{staticClass:"right"},[t._v(t._s(e.orderNo))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"left"},[t._v("购油数量")]),t._v(" "),i("div",{staticClass:"right"},[t._v(t._s(e.tons))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"left"},[t._v("购油油库")]),t._v(" "),i("div",{staticClass:"right"},[t._v(t._s(e.oilHouse))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"left"},[t._v("下单时间")]),t._v(" "),i("div",{staticClass:"right"},[t._v(t._s(t.dealTime(e.orderTime)))])])])]):t._e()})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasMore,expression:"!hasMore"}],staticClass:"no-data theme_font_tint"},[t._v("没有更多数据了~")])],2)],1)}),[],!1,null,"1e13d200",null);e.default=c.exports},FYJB:function(t,e,i){"use strict";i("0c+n");var a,s=i("7oM2"),n=(i("ilju"),i("5B+z")),o=i("ygAv"),c=i("L2JU"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t};function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d={data:function(){return{sideFiltrateModalShow:!1,screen:"筛选",showStartTime:!1,showEndTime:!1,currentDateStart:new Date,currentDateEnd:new Date,beginTime:"",endTime:"",cardList:[],oilNameList:[],num:"0",oil:"0",changeNum:"",changeOilName:""}},props:{isShowChangeCard:{type:Boolean,default:!0},isShowChangeOilName:{type:Boolean,default:!1}},mounted:function(){this.getOilCardList(),this.appQueryTakeOilNameList()},methods:{confirmActivitesTime:function(t){this.showStartTime=!1,this.beginTime=o.a.getMyDate(t)},confirmEndTime:function(t){this.showEndTime=!1,this.endTime=o.a.getMyDate(t)},setColumnValue:function(t,e){new Date},confirm:function(){var t=this.changeNum,e=this.changeOilName;this.sideFiltrateModalShow=!this.sideFiltrateModalShow,this.$emit("childToDadValue",[this.beginTime,this.endTime,t,e])},clearData:function(){this.beginTime="",this.endTime="",this.changeNum="0"},changeCard:function(t,e){this.num=t,this.changeNum=e},changeOil:function(t,e){this.oil=t,this.changeOilName=e},getOilCardList:function(){var t=this,e={token:this.$store.state.login.token,vipUnitUserCode:this.vipUnitUser.vipUnitUserId};this.$request.post("/app/json/app_oil_appoint/appQueryTakeOilCardList",e).then((function(e){if(0===e.status){var i=e.data;t.cardList=i}})).catch((function(t){}))},appQueryTakeOilNameList:function(){var t=this;this.$request.post("/app/json/app_oil_appoint/appQueryTakeOilNameList",{vipUnitUserCode:this.vipUnitUser.vipUnitUserId}).then((function(e){0===e.status?t.oilNameList=e.data:t.$Toast(e.info?e.info:"获取油品名称失败")})).catch((function(t){console.log(t)}))}},computed:r({},Object(c.c)(["vipUnitUser"])),components:(a={},l(a,n.a.name,n.a),l(a,s.a.name,s.a),a)},v=(i("q19P"),i("KHd+")),u=Object(v.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.sideFiltrateModalShow,expression:"!sideFiltrateModalShow"}],staticClass:"screening",on:{click:function(e){t.sideFiltrateModalShow=!0}}},[t._v("筛选")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.sideFiltrateModalShow,expression:"sideFiltrateModalShow"}],staticClass:"screening",on:{click:function(e){t.sideFiltrateModalShow=!1}}},[t._v("关闭")]),t._v(" "),i("transition",{attrs:{name:"filtrate"}},[t.sideFiltrateModalShow?i("div",{ref:"sideFiltrateModal",staticClass:"filtrate-modal-wrapper",style:{top:t.$store.state.barHeight+t.$market.getNavHeight()+"px"}},[i("div",{staticClass:"filtrate-container"},[i("div",{staticClass:"filtrate-content"},[i("div",{staticClass:"change-time"},[i("div",{staticClass:"table-view time-text"},[i("div",{staticClass:"table-view-cell info",on:{click:function(e){t.showStartTime=!0}}},[i("div",{staticClass:"table-view-cell-text"},[t._v("开始时间")]),t._v(" "),i("div",{staticClass:"table-view-cell-arrow"},[t._v(t._s(t.beginTime))])]),t._v(" "),i("div",{staticClass:"table-view-cell info",on:{click:function(e){t.showEndTime=!0}}},[i("div",{staticClass:"table-view-cell-text"},[t._v("结束时间")]),t._v(" "),i("div",{staticClass:"table-view-cell-arrow"},[t._v(t._s(t.endTime))])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowChangeCard,expression:"isShowChangeCard"}],staticClass:"card-num"},[i("div",{staticClass:"title"},[t._v("提油卡号")]),t._v(" "),i("ul",{staticClass:"list"},t._l(t.cardList,(function(e,a){return i("li",{key:a,staticClass:"item"},[i("div",{staticClass:"item",class:{active:t.num==a},on:{click:function(i){return t.changeCard(a,e.userCard)}}},[t._v("\n                  "+t._s(e.userCard)+"\n                ")])])})),0)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowChangeOilName,expression:"isShowChangeOilName"}],staticClass:"card-num"},[i("div",{staticClass:"title"},[t._v("油品选择")]),t._v(" "),i("ul",{staticClass:"list"},t._l(t.oilNameList,(function(e,a){return i("li",{key:a,staticClass:"item"},[i("div",{staticClass:"item",class:{active:t.oil==a},on:{click:function(i){return t.changeOil(a,e.oilname)}}},[t._v("\n                  "+t._s(e.oilname)+"\n                ")])])})),0)])]),t._v(" "),i("div",{staticClass:"filtrate-btn"},[i("button",{staticClass:"l-btn u-confirm",on:{click:t.clearData}},[t._v("清除")]),t._v(" "),i("button",{staticClass:"l-btn u-confirm theme_bg_blue_i",on:{click:t.confirm}},[t._v("确定")])])])]):t._e()]),t._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:t.showStartTime,callback:function(e){t.showStartTime=e},expression:"showStartTime"}},[i("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.confirmActivitesTime,cancel:function(e){t.showStartTime=!1},change:t.setColumnValue},model:{value:t.currentDateStart,callback:function(e){t.currentDateStart=e},expression:"currentDateStart"}})],1),t._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:t.showEndTime,callback:function(e){t.showEndTime=e},expression:"showEndTime"}},[i("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.confirmEndTime,cancel:function(e){t.showEndTime=!1},change:t.setColumnValue},model:{value:t.currentDateEnd,callback:function(e){t.currentDateEnd=e},expression:"currentDateEnd"}})],1)],1)}),[],!1,null,"14637aae",null);e.a=u.exports},SlTX:function(t,e,i){},eQLx:function(t,e,i){"use strict";var a=i("qS9c");i.n(a).a},q19P:function(t,e,i){"use strict";var a=i("SlTX");i.n(a).a},qS9c:function(t,e,i){}}]);