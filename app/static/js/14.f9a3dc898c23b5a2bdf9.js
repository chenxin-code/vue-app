(window.webpackJsonp=window.webpackJsonp||[]).push([[14,725],{"3xGi":function(t,e,i){},"4hKH":function(t,e,i){"use strict";var a=i("3xGi");i.n(a).a},"T/eX":function(t,e,i){"use strict";i.r(e);var a=(i("dsmH"),i("KHd+")),s=Object(a.a)({name:"rule"},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("nav-top",{attrs:{title:"规则说明"},on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),i("nav-content",[i("div",{staticClass:"content"},[i("div",[i("p",{staticClass:"p1 theme_font_red"},[t._v("如何获取答题机会？")]),t._v(" "),i("p",{staticClass:"p2"},[t._v("1、每人都可免费获得一次游戏")])]),t._v(" "),i("div",[i("p",{staticClass:"p1 theme_font_red"},[t._v("答题都有啥奖励呢？")]),t._v(" "),i("p",{staticClass:"p2"},[t._v("1、积分、游戏机会")])]),t._v(" "),i("div",[i("p",{staticClass:"p1 theme_font_red"},[t._v("规则说明")]),t._v(" "),i("p",{staticClass:"p2"},[t._v("1、必须全部答完才可以获得奖励")])])])])],1)}),[],!1,null,"3fd2fb9a",null);e.default=s.exports},ZrzC:function(t,e,i){"use strict";e.a={methods:{participateData:function(t){return this.$http.post("/app/json/questionaire/startAnswer",t)},questionData:function(t){return this.$http.post("/app/json/questionaire/appUserConfig",t)},questionUrlData:function(t){return this.$http.post("/app/json/questionaire/getDefaultConfig",t)},commitData:function(t){return this.$http.post("/app/json/questionaire/submit",t)},prizeData:function(t){return this.$http.post("/app/json/questionaire/completeAct",t)},listData:function(t){return this.$http.post("/app/json/questionaire/findQuestionaireByuserId",t)},historyData:function(t){return this.$http.post("/app/json/questionaire/historyQuestionaireList",t)},historydetailData:function(t){return this.$http.post("/app/json/questionaire/questionaireDetail",t)}}}},dsmH:function(t,e,i){"use strict";var a=i("xq1S");i.n(a).a},me9Y:function(t,e,i){"use strict";i.r(e),i("4X9F");var a=i("IkEG"),s=(i("5+UC"),i("05lO")),o=i("ZrzC"),r=(i("L2JU"),i("T/eX"),i("2nGb")),n={name:"",mixins:[o.a],props:{firmdetailSubject:{type:String,default:!0},orderIds:{type:String},ouCode:{type:String}},data:function(){return{answerList:[],optionsObj:[],radioList:[],paramsData:{},commitView:!1,radio:"B",list:["a","b","c","d"],result:["a","b"],value:3,show:!1,commitModel1:!1,commitModel:!1,actions:[],mktAwardList:[],id:"",orderId:"",url:"",shareTitle:"",shareContent:"",shareImgUrl:"",shareurl:"",shareUserid:"",shareView:!0,tip:"",questionPrize:[],prizeTypeNum:0,resultJson:[],firmId:""}},created:function(){console.log(this.$route.query,this.firmdetailSubject),"questionlist"==this.$route.query.type?(console.log("来源：问卷列表"),this.shareUserid=this.$route.query.shareUserid,this.paramsData=this.$route.query,this.paramsData.subId=this.paramsData.id,this.loadData()):"加油凭证"==this.firmdetailSubject?(console.log("来源：加油凭证"),this.shareUserid=this.$route.query.shareUserid,this.paramsData=this.$route.query,this.paramsData.subId=this.paramsData.id,this.loadData()):(console.log("来源：消息"),this.shareUserid="",this.paramsData=this.$route.query,this.paramsData.subId=this.$route.query.id,this.paramsData.orderId=this.$route.query.orderId,this.qualifications())},mounted:function(){this.getLetter()},methods:{seeView:function(t){console.log(t);var e="";"20030"==t&&(e="/mall2/win_record"),this.$router.push({path:e,query:{type:"serviceSubject"}})},selectData:function(t){console.log(t),this.radioList=t,console.log(this.radioList.join())},generateBig_1:function(){for(var t=[],e=65;e<91;e++)t.push(String.fromCharCode(e));return t},getLetter:function(){this.optionsObj=this.generateBig_1(),console.log(this.optionsObj)},getPrize:function(){var t=this,e={id:t.paramsData.subId,token:this.$store.state.login.token,shareUserid:t.shareUserid,orderId:t.paramsData.orderId,selectTypeNum:t.radioList.join()};t.prizeData(e).then((function(e){console.log(e),"success"===e.data.result?(Object(s.a)("领取成功"),t.commitModel1=!1,t.$router.go(-1)):(Object(s.a)(e.data.info),t.commitModel1=!1,t.$router.go(-1))}))},evaluateData:function(t,e){var i=this.answerList[t];1==i.result?i.evaluate="非常差":2==i.result?i.evaluate="差":3==i.result?i.evaluate="一般":4==i.result?i.evaluate="好":5==i.result&&(i.evaluate="非常好")},qualifications:function(){var t=this,e={id:t.paramsData.subId,token:this.$store.state.login.token,orderId:t.paramsData.orderId};t.participateData(e).then((function(e){console.log(e),"success"===e.data.result?t.loadData():Object(s.a)(e.data.info)}))},loadData:function(){var t=this,e=this;if("加油凭证"==this.firmdetailSubject){var i={isDefault:1,token:this.$store.state.login.token};e.questionUrlData(i).then((function(i){if("success"===i.data.result)if(i.data.data.subjectList&&i.data.data.subjectList.length>0){e.questionPrize=JSON.parse(i.data.data.questionPrize)||[],i.data.data.prizeTypeNum.toString().length>0?e.prizeTypeNum=i.data.data.prizeTypeNum:e.prizeTypeNum=0;var a=i.data.data.subjectList;e.userId=i.data.data.userId,e.firmId=i.data.data.id,0==(i.data.data.questionShare?JSON.parse(i.data.data.questionShare):"").length?e.shareView=!1:e.shareView=!0,a.forEach((function(t){if(1===t.kindId||2===t.kindId||3===t.kindId||4===t.kindId){var e=JSON.parse(t.options);e.forEach((function(t){t.name=t.lable})),t.options=e}2===t.kindId?t.result=[]:6===t.kindId?t.result=0:(t.result="",4===t.kindId&&(t.show=!1))})),a.forEach((function(t){t.evaluate="",t.tips=""})),e.answerList=a,e.shareTitle=i.data.data.shareTitle,e.shareContent=i.data.data.shareContent,e.shareImgUrl=i.data.data.shareImgUrl}else t.answerList=[],e.commitView=!0;else console.log(i.data.info)}))}else{var a={id:e.paramsData.subId,token:this.$store.state.login.token};e.questionData(a).then((function(t){if("success"===t.data.result)if(t.data.data.subjectList.length>0){e.questionPrize=JSON.parse(t.data.data.questionPrize)||[],t.data.data.prizeTypeNum.toString().length>0?e.prizeTypeNum=t.data.data.prizeTypeNum:e.prizeTypeNum=0;var i=t.data.data.subjectList;e.userId=t.data.data.userId,0==(t.data.data.questionShare?JSON.parse(t.data.data.questionShare):"").length?e.shareView=!1:e.shareView=!0,i.forEach((function(t){if(1===t.kindId||2===t.kindId||3===t.kindId||4===t.kindId){var e=JSON.parse(t.options);e.forEach((function(t){t.name=t.lable})),t.options=e}2===t.kindId?t.result=[]:6===t.kindId?t.result=0:(t.result="",4===t.kindId&&(t.show=!1))})),i.forEach((function(t){t.evaluate="",t.tips=""})),e.answerList=i,e.shareTitle=t.data.data.shareTitle,e.shareContent=t.data.data.shareContent,e.shareImgUrl=t.data.data.shareImgUrl}else Object(s.a)("题目加载失败"),e.commitView=!0;else console.log(t.data.info)}))}},select1:function(t){t.show=!0},commit:function(){var t=this,e=[];t.answerList.forEach((function(t){e.push({kindId:t.kindId,configId:t.configId,subjectId:t.id,kindName:t.kindName,options:t.options,title:t.title,styleType:t.styleType,orderNo:t.orderNo,result:t.result.toString()})}));var i=!0;if(t.answerList.forEach((function(t){1==t.mustAnswer&&""==t.result&&(i=!1)})),i){var a=!0;if(t.answerList.forEach((function(e,i){5==e.kindId&&(e.limitMin&&!e.limitMax&&e.result.length<e.limitMin&&(t.tip="第"+(i+1)+"题简答题最少输入"+e.limitMin+"个字",a=!1),e.limitMax&&!e.limitMin&&e.result.length>e.limitMax&&(t.tip="第"+(i+1)+"题简答题最多输入"+e.limitMax+"个字",a=!1),e.limitMin&&e.limitMax&&(e.result.length>=e.limitMin&&e.result.length<=e.limitMax?a=!0:(t.tip="第"+(i+1)+"题简答题字数限制在"+e.limitMin+"至"+e.limitMax+"之间",a=!1)))})),a)if(this.resultJson=e,"加油凭证"==this.firmdetailSubject){var o={id:t.firmId,token:this.$store.state.login.token,ouCode:this.ouCode,orderId:this.orderIds};t.participateData(o).then((function(e){console.log(e),"success"===e.data.result?t.subjectCommit():Object(s.a)(e.data.info)}))}else t.subjectCommit();else Object(s.a)(t.tip)}else Object(s.a)("您还有必答题尚未答完，请先答完必答题！")},subjectCommit:function(){var t=this,e=this,i={resultJson:JSON.stringify(this.resultJson),token:this.$store.state.login.token};"加油凭证"==this.firmdetailSubject?(i.ouCode=this.ouCode,i.orderId=this.orderIds,i.id=this.firmId):(i.id=e.paramsData.subId,i.orderId=e.paramsData.orderId),e.commitData(i).then((function(i){if("success"===i.data.result)if(Object(s.a)("提交成功"),e.prizeTypeNum.toString().length>0)e.commitModel1=!0;else{var a={id:e.paramsData.subId,token:t.$store.state.login.token,shareUserid:e.shareUserid,orderId:e.paramsData.orderId,selectTypeNum:e.radioList.join()};e.prizeData(a).then((function(i){if("success"===i.data.result){if(e.mktAwardList=i.data.data.mktAwardList||[],e.mktAwardList.length>0?e.commitModel=!0:(e.commitModel=!1,"加油凭证"==t.firmdetailSubject||e.$router.go(-1)),"加油凭证"==t.firmdetailSubject){var a={firmId:t.firmId,pageView:!0};t.$emit(firmData,a)}}else e.commitModel=!1,"加油凭证"==t.firmdetailSubject||e.$router.go(-1)}))}else Object(s.a)(i.data.info)}))},sharegoods:function(){var t={title:this.shareTitle,sharetext:this.shareContent,imageurl:this.shareImgUrl,detailurl:""+this.$store.state.globalConfig.wxBaseUrl+r.a.shareUrl+"/service/subject?shareUserid="+this.$store.state.userInfo.userId};console.log(t.detailurl),this.$bridgefunc.wechatShare(t)},closeBtn:function(){this.commitModel=!1,this.$router.go(-1)},backEvent:function(){var t=this;a.a.confirm({message:"问卷尚未答完，确定要离开吗？",cancelButtonText:"现在离开",confirmButtonText:"继续答题"}).then((function(){})).catch((function(){t.$router.go(-1)}))},onSelect:function(t,e){e.result=t.name,e.show=!1},getUrlParam:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null}},computed:{},components:{},watch:{}},l=(i("4hKH"),i("KHd+")),c=Object(l.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"body"}},[t.firmdetailSubject?t._e():i("nav-top",{attrs:{title:"加油评价"},on:{backEvent:t.backEvent}},[t.shareView?i("div",{staticClass:"shareBox",on:{click:t.sharegoods}},[i("div",[i("i",{staticClass:"icon iconfont mall-fenxiang"})])]):t._e()]),t._v(" "),i("nav-content",[i("div",{staticClass:"content"},[t._l(t.answerList,(function(e,a){return i("div",{key:a,staticClass:"top"},[1===e.kindId?i("div",{staticClass:"singleList"},[i("div",{staticClass:"divObj"},[i("span",[t._v(t._s(e.title))]),t._v(" "),i("van-radio-group",{model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}},t._l(e.options,(function(e,a){return i("van-radio",{key:a,attrs:{"checked-color":"#F80F16",name:t.optionsObj[a]}},[t._v(t._s(t.optionsObj[a])+" 、"+t._s(e.lable)+"\n                ")])})),1)],1)]):t._e(),t._v(" "),2===e.kindId?i("div",{staticClass:"singleList multipleList"},[i("div",{staticClass:"divObj"},[i("span",[t._v(t._s(e.title))]),t._v(" "),i("van-checkbox-group",{model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}},t._l(e.options,(function(e,a){return i("van-checkbox",{key:a,attrs:{"checked-color":"#F80F16",name:t.optionsObj[a]}},[t._v(t._s(t.optionsObj[a])+" 、"+t._s(e.lable)+"\n                ")])})),1)],1)]):t._e(),t._v(" "),5===e.kindId?i("div",{staticClass:"singleList"},[i("div",{staticClass:"divObj"},[i("span",[t._v(t._s(e.title))]),t._v(" "),e.limitMin&&!e.limitMax?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:"请输入最少"+e.limitMin+"个字"},domProps:{value:e.result},on:{input:function(i){i.target.composing||t.$set(e,"result",i.target.value)}}}):t._e(),t._v(" "),e.limitMax&&!e.limitMin?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:"请输入最多"+e.limitMax+"个字"},domProps:{value:e.result},on:{input:function(i){i.target.composing||t.$set(e,"result",i.target.value)}}}):t._e(),t._v(" "),e.limitMin&&e.limitMax?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:"请输入"+e.limitMin+"到"+e.limitMax+"个字"},domProps:{value:e.result},on:{input:function(i){i.target.composing||t.$set(e,"result",i.target.value)}}}):t._e(),t._v(" "),e.limitMin||e.limitMax?t._e():i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},domProps:{value:e.result},on:{input:function(i){i.target.composing||t.$set(e,"result",i.target.value)}}})])]):t._e(),t._v(" "),6===e.kindId?i("div",{staticClass:"singleList score"},[i("div",{staticClass:"divObj divobjs"},[i("span",[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"evaluteBox"},[1===e.styleType?i("van-rate",{attrs:{color:"#F80F16","void-color":"#F80F16"},on:{change:function(e){return t.evaluateData(a,e)}},model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}}):t._e(),t._v(" "),2===e.styleType?i("van-rate",{attrs:{color:"#F80F16",icon:"like","void-color":"#F80F16","void-icon":"like-o"},on:{change:function(e){return t.evaluateData(a,e)}},model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}}):t._e(),t._v(" "),3===e.styleType?i("van-rate",{attrs:{color:"#F80F16",icon:"static/image/microShop/xiaoicon.png","void-color":"#F80F16","void-icon":"smile-o"},on:{change:function(e){return t.evaluateData(a,e)}},model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}}):t._e(),t._v(" "),i("p",[t._v(t._s(e.evaluate))])],1)])]):t._e(),t._v(" "),4===e.kindId?i("div",{staticClass:"singleList"},[i("div",{staticClass:"divObj"},[i("span",[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"xiala",on:{click:function(i){return t.select1(e)}}},[i("span",[t._v(t._s(e.result||"请选择"))]),t._v(" "),i("span",{staticClass:"icon iconfont mall-xiala"})]),t._v(" "),i("van-action-sheet",{attrs:{id:"xialaView",actions:e.options},on:{select:function(i){return t.onSelect(i,e)}},model:{value:e.show,callback:function(i){t.$set(e,"show",i)},expression:"item.show"}})],1)]):t._e(),t._v(" "),3===e.kindId?i("div",{staticClass:"singleList"},[i("div",{staticClass:"divObj"},[i("span",[t._v(t._s(e.title))]),t._v(" "),t._l(e.options,(function(a,s){return i("div",{key:s,staticClass:"pics"},[i("div",[i("span",[t._v(t._s(t.optionsObj[s])+"、")]),t._v(" "),i("img",{attrs:{src:a.imgUrl,alt:""}})]),t._v(" "),i("div",[i("van-radio-group",{model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}},[i("van-radio",{attrs:{"checked-color":"#F80F16",name:t.optionsObj[s]}},[t._v(t._s(a.lable)+"\n                    ")])],1)],1)])}))],2)]):t._e()])})),t._v(" "),t.answerList.length?i("div",{staticClass:"bottom theme_bg_red",on:{click:t.commit}},[t._v("提交加油评价")]):t._e(),t._v(" "),t.commitView&&t.answerList.length?i("div",{staticClass:"bottom gray"},[t._v("提交加油评价")]):t._e()],2)]),t._v(" "),t.questionPrize.length?i("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.commitModel1,callback:function(e){t.commitModel1=e},expression:"commitModel1"}},[i("div",{staticClass:"modal"},[i("p",{staticClass:"title-p"},[t._v("您已完成评价，请从以下奖品列表中选取"+t._s(t.prizeTypeNum)+"份奖品领取吧")]),t._v(" "),i("ul",t._l(t.questionPrize,(function(e,a){return i("li",{key:a},[i("img",{attrs:{src:e.prizeImgUrl?e.prizeImgUrl:"static/image/microShop/icon52x.png",alt:""}}),t._v(" "),i("span",[t._v(t._s(e.prizeName)+t._s(e.prizeNum))]),t._v(" "),i("van-checkbox-group",{attrs:{max:t.prizeTypeNum},on:{change:t.selectData},model:{value:t.radioList,callback:function(e){t.radioList=e},expression:"radioList"}},[i("van-checkbox",{attrs:{name:a+1,"checked-color":"#F80F16"}})],1)],1)})),0)]),t._v(" "),i("div",{staticClass:"btns"},[i("span",{staticClass:"theme_bg_red get",on:{click:t.getPrize}},[t._v("领取")])])]):t._e(),t._v(" "),i("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.commitModel,callback:function(e){t.commitModel=e},expression:"commitModel"}},[i("div",{staticClass:"modal"},[i("p",{staticClass:"title-p"},[t._v("恭喜您成功提交评价，您获得以下奖品")]),t._v(" "),i("ul",t._l(t.mktAwardList,(function(e,a){return i("li",{key:a},[i("img",{attrs:{src:e.prizeImgUrl?e.prizeImgUrl:"static/image/microShop/icon52x.png",alt:""}}),t._v(" "),i("span",[t._v(t._s(e.prizeName)+t._s(e.prizeNum))]),t._v(" "),i("span",{on:{click:function(i){return t.seeView(e.prizeType)}}},[t._v("查看")])])})),0)]),t._v(" "),i("div",{staticClass:"btns"},[i("span",{on:{click:t.closeBtn}},[t._v("确定")])])])],1)}),[],!1,null,"011a7059",null);e.default=c.exports},xq1S:function(t,e,i){}}]);