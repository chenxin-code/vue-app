(window.webpackJsonp=window.webpackJsonp||[]).push([[816],{HbgP:function(t,e,s){"use strict";s.r(e);var n=s("uQt8"),o=(s("L2JU"),{name:"index",components:{CountButton:n.a},data:function(){return{phone:"",msgCode:"",isRegister:"1",referrer:"",scanCode:""}},watch:{msgCode:function(t){this.msgCode=this.$util.checkVerifyCodeLenght(this.msgCode)}},methods:{phoneBlur:function(){var t=this;if(this.$util.checkMobile(this.phone)&&"0"!=this.$store.state.globalConfig.user_register_referrer_input){var e={phone:this.phone};this.$http.post("/app/json/login/getPreRegReferrerByPhone",e).then((function(e){var s=e.data;0==s.status?(t.referrer=s.data.referrer,t.isRegister=s.data.isRegister):t.$Toast(s.info)}),(function(t){}))}},scanCodeFunc:function(){var t=this;this.$bridgefunc.scanCode((function(e){var s=e.code;e.code&&e.code.indexOf("http")>-1&&(s=t.$util.getUrlParam(e.code,"qrCode")),t.scanCode=s,t.referrer=s}))},inputChange:function(t){var e=t.target.value;this.phone=this.$util.onlyNumber(e)},backEvent:function(){this.$router.go(-1)},getMsgCode:function(t,e){var s=this;if(""!=this.phone)if(this.$util.checkMobile(this.phone)){this.$refs.countBtn.startTime(),this.$Loading.open();var n={smsType:"1020",phone:this.phone,imgVerifyCode:t,uuid:e};this.$http.post("/app/json/login/sendSms",n).then((function(t){s.$Loading.close(),console.log(t.data);var e=t.data;0==e.status?(console.log(e),s.$Toast("获取验证码成功")):(s.$refs.countBtn.resetClock(),s.$Toast(e.info?e.info:"获取短信验证码失败"))}),(function(t){s.$Loading.close(),s.$refs.countBtn.resetClock(),s.$Toast("系统运行过程中遇到问题，请稍候再试")}))}else this.$Toast("请输入正确的手机号码！");else this.$Toast("手机号不能为空!")},loginFun:function(){var t=this;this.$Loading.open();var e={phone:this.phone,smsVerifyCode:this.msgCode};this.referrer&&this.referrer.length&&(e.rfrCode=this.referrer),this.referrer==this.scanCode?e.rfrCodeType=2:e.rfrCodeType=1,this.$store.state.login.phone=this.phone,this.$http.post("/app/json/login/smsLogin",e).then((function(s){t.$Loading.close(),console.log(s.data);var n=s.data;0==n.status?(t.$actionStatistics.loginAction("110020",JSON.stringify(e),t.$store.state.indexData.city),t.$Toast(n.info?n.info:"登录成功"),window.localStorage.setItem("hobby",1),t.$userCenter.retsetToIndex(n.data,2)):(t.$refs.countBtn.resetClock(),t.$Toast(n.info?n.info:"登录失败"))}),(function(e){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},getCheckOutFun:function(){""!=this.phone?/^1\d{10}$/.test(this.phone)?""!=this.msgCode?this.loginFun():this.$Toast("验证码不能为空!"):this.$Toast("手机号格式不对!"):this.$Toast("手机号不能为空!")}},created:function(){var t=this.$store.state.login.phone;this.$util.checkMobile(t)&&(this.phone=t)}}),i=(s("nsG3"),s("KHd+")),a=Object(i.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"code-verify login2"},[s("nav-top",{on:{backEvent:t.backEvent}}),t._v(" "),s("nav-content",[s("div",{staticClass:"tip"},[s("span",{staticClass:"tip-icon"},[t._v("系统检测到您的登录设备发生变更，请验证身份")])]),t._v(" "),s("div",{staticClass:"login-div"},[s("div",{staticClass:"text-input"},[s("div",{staticClass:"left"},[t._v("手机号")]),t._v(" "),s("div",{staticClass:"cell-phone"},[s("van-field",{attrs:{type:"tel",placeholder:"请输入手机号码",maxlength:"11",autosize:"",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode)))",pattern:"[0-9]*"},on:{input:function(e){t.phone=/^\d+/.exec(t.phone)?/^\d+/.exec(t.phone)[0]:""},blur:t.phoneBlur},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)]),t._v(" "),s("div",{staticClass:"passwords-input"},[s("div",{staticClass:"passwords"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.msgCode,expression:"msgCode"}],attrs:{placeholder:"请输入短信验证码"},domProps:{value:t.msgCode},on:{input:function(e){e.target.composing||(t.msgCode=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"forget-btn"},[s("count-button",{ref:"countBtn",staticClass:"theme_standard_font",attrs:{phone:t.phone},on:{getSmsEvent:t.getMsgCode}})],1)]),t._v(" "),"0"!=t.$store.state.globalConfig.user_register_referrer_input&&"1"!=t.isRegister?s("div",{staticClass:"passwords-input-new"},[s("div",{staticClass:"left-img"},[s("img",{attrs:{src:"static/image/login2/registe5.png",alt:""}})]),t._v(" "),s("div",{staticClass:"passwords"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.referrer,expression:"referrer"}],attrs:{placeholder:"请输入推荐码"},domProps:{value:t.referrer},on:{input:function(e){e.target.composing||(t.referrer=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"show-passwords",on:{click:t.scanCodeFunc}},[s("img",{staticClass:"scancode",attrs:{src:"static/image/setting/icon-scan.png"}})])]):t._e(),t._v(" "),s("div",{staticClass:"common-btn theme_standard_bg theme_font_white mt100",on:{click:function(e){return t.getCheckOutFun()}}},[t._v("提交")])])])],1)}),[],!1,null,"34e5feb8",null);e.default=a.exports},ijUO:function(t,e,s){},nsG3:function(t,e,s){"use strict";var n=s("ijUO");s.n(n).a}}]);