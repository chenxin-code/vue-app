(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b301ec7","chunk-2d0d6337","chunk-2d0e24d1","chunk-2d0e24d1"],{"169f":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("nav-top",{on:{backEvent:t.backEvent}}),s("nav-content",[s("div",{staticClass:"all-content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"local-div single-line",on:{click:function(e){return t.selectAddressClick()}}},[s("i",{staticClass:"iconfont mall-dingwei icon-size theme_font_gray"}),s("span",{staticClass:"theme_font_gray single-line"},[t._v(t._s(t.location.area))])]),s("div",{staticClass:"search-div theme_bg_white_f5",staticStyle:{left:"50px",right:"50px",height:"30px",top:"7px",padding:"0 15px","border-radius":"15px"},on:{click:t.toSearchEvent}},[s("i",{staticClass:"iconfont mall-sousuo theme_font_tint",staticStyle:{"font-size":"16px"}}),s("span",{staticClass:"theme_font_tint single-line",staticStyle:{"font-size":"14px","margin-left":"10px"}},[t._v(t._s(t.searchKey?t.searchKey:"搜商品"))])])]),s("div",{staticClass:"row row-filter top-showdow"},[""==t.categoryIdList?s("div",{staticClass:"filter-btn theme_font_black",on:{click:t.categoryEvent}},[s("i",{staticClass:"iconfont mall-datubiao filter-size-1 theme_font_black"}),s("span",[t._v(t._s(t.cateText))])]):t._e(),s("div",{staticClass:"filter-btn theme_font_black",on:{click:function(e){return t.filterEvent(0)}}},[s("span",{class:{theme_standard_font_i:0==t.filterType}},[t._v("综合排序")])]),s("div",{staticClass:"filter-btn theme_font_black",on:{click:function(e){return t.filterEvent(1)}}},[s("span",{class:{theme_standard_font_i:1==t.filterType||2==t.filterType}},[t._v("销量")])]),s("div",{staticClass:"filter-btn theme_font_black",on:{click:function(e){return t.filterEvent(2)}}},[s("span",{class:{theme_standard_font_i:3==t.filterType||4==t.filterType}},[t._v("价格")]),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.filterType||4==t.filterType,expression:"filterType == 3 || filterType == 4"}]},[s("i",{staticClass:"iconfont mall-sanjiaoxiabiao arrow-icon theme_font_tint",class:{theme_standard_font_i:3==t.filterType}}),s("i",{staticClass:"iconfont mall-xiala arrow-icon theme_font_tint",class:{theme_standard_font_i:4==t.filterType}})])]),s("div",{staticClass:"filter-btn theme_font_black",on:{click:t.superFilter}},[s("span",[t._v("筛选")]),s("i",{staticClass:"iconfont mall-shaixuan filter-size theme_font_tint"})])]),s("div",{staticClass:"list-content"},[s("div",{staticClass:"list-pull-to"},[s("pull-to",{ref:"listContent",attrs:{bottomConfig:{pullText:"",triggerText:"释放更新",loadingText:"加载中...",doneText:t.isCanLoadMore?"加载完成":"没有更多数据了",failText:"加载失败",loadedStayTime:400,stayDistance:40,triggerDistance:50},"bottom-load-method":t._loadProList,isBottomAutoS:!0,isBottomBounce:t.isCanLoadMore}},[s("div",[""!=t.pageType&&""!=t.endTime?s("div",{staticClass:"list-tip theme_bg_yl theme_font_red"},[s("p",[t._v("限时促销： "+t._s(t.tipText))]),s("p",[t._v("距离结束： "),s("countdown",{attrs:{endTime:t.endTime}})],1)]):t._e(),t.listData.length>0?s("CardList",{attrs:{listData:t.listData,cartProducts:t.cartProducts},on:{productEvent:t.productEvent,addToCart:t.addToCart}}):t._e(),s("div",{staticClass:"bottom-space"})],1)])],1),t.isNoList&&""==t.pageType?s("div",{staticClass:"no-list"},[s("div",{staticClass:"img-div"},[s("img",{attrs:{src:"static/image/mall2/no-data-img.png"}})]),s("div",{staticClass:"tip theme_font_gray"},[t._v("抱歉没有找到相应商品~")])]):t._e()]),t.cateList.length>0?s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCategory,expression:"showCategory"}],staticClass:"category-div"},[s("Category",{attrs:{cateList:t.cateList},on:{closeEvent:function(e){t.showCategory=!1},cateEvent:t.cateEvent}})],1):t._e(),s("div",{staticClass:"settle-div"},[s("div",{staticClass:"cart-icon",on:{click:function(e){e.stopPropagation(),t.showCartProducts=!0}}},[s("i",{staticClass:"iconfont mall-gouwuche btn-icon theme_font_red"}),s("div",{staticClass:"num theme_bg_red"},[t._v(t._s(t.num))])]),s("div",{staticClass:"info"},[s("div",{staticClass:"price"},[s("span",[t._v("¥")]),s("span",{staticClass:"big"},[t._v(t._s(t.occurData.amount||0))])]),s("div",{staticClass:"yf"},[t._v(" 另需配送费"+t._s(t.occurData.freightAmount||0)+"元 ")])]),s("div",{staticClass:"btn theme_standard_bg",on:{click:function(e){return e.stopPropagation(),t.toPlaceOrder.apply(null,arguments)}}},[t._v("去结算")])])])]),s("transition",{attrs:{name:"bounce"},on:{afterEnter:t.productImgAfterEnter}},[t.showProductImg&&t.addToCartItem?s("img",{staticClass:"productImg",attrs:{src:this.addToCartItem.phMainUrl,alt:""}}):t._e()]),s("transition",{on:{"after-enter":t.afterEnter,"before-enter":t.beforeEnter}},[t.showAddCartAn&&t.addToCartItem?s("div",{staticClass:"anProductImg"},[s("img",{attrs:{src:this.addToCartItem.phMainUrl,alt:""}})]):t._e()]),s("AllCategory",{directives:[{name:"show",rawName:"v-show",value:t.showAllCategory,expression:"showAllCategory"}],attrs:{barHeight:t.$store.state.barHeight},on:{closeEvent:function(e){t.showAllCategory=!1},cateEvent:t.cateEvent}}),t.showCreated?s("Filtrate",{directives:[{name:"show",rawName:"v-show",value:t.showFiltrate,expression:"showFiltrate"}],attrs:{category:t.category},on:{filtrateEvent:t.filtrateEvent,closeEvent:t.filtrateCloseEvent}}):t._e(),t.showCartProducts?s("pop-view",{staticClass:"mall2",on:{closeEvent:function(e){t.showCartProducts=!1}}},[s("div",{staticClass:"pop-body"},[s("div",{staticClass:"pop-title theme_font_common"},[t._v("已选商品")]),s("div",{staticClass:"pop-scroll-div"},t._l(t.cartProducts,(function(e,a){return s("div",{staticClass:"pro-row"},[s("div",{staticClass:"img-div"},[s("img",{attrs:{src:e.phPictureUrl}})]),s("div",{staticClass:"info-div"},[s("div",{staticClass:"title theme_font_black"},[t._v(t._s(e.productName))]),s("div",{staticClass:"title theme_font_black"},[s("span",[t._v(t._s(e.specs))])]),s("div",{staticClass:"price pop-mdps"},[s("PriceOrder",{attrs:{productData:e}}),s("van-stepper",{staticClass:"wish-prod-stepper",attrs:{max:e.saleNumMax,min:0,step:e.saleNumStep,integer:""},on:{change:function(s){return t.onChange(e.skuId,e.number)}},model:{value:e.number,callback:function(s){t.$set(e,"number",s)},expression:"prodata.number"}})],1)])])})),0)])]):t._e()],1)},i=[],o=(s("a434"),s("acd8"),s("b0c0"),s("99af"),s("e25e"),s("e42a")),r=s("0d16"),n=s("4fe5"),c=s("2f9a"),l=s("c597"),d=s("8592"),h=s("f648"),u=s("b659"),p=s("6311"),f=s("69f4"),g=s("947f"),y=s("72c7"),v=s("99b4"),m=s("590c"),C={name:"list",components:{PriceOrder:m["a"],Countdown:f["default"],CardList:o["a"],DetailList:r["a"],Filtrate:n["a"],GiftList:d["a"],PullTo:h["a"],Category:u["a"],Recommend:g["a"],AllCategory:p["a"],AdPage:v["a"]},props:["componentName","orderCategory","vipUnitUserCode"],data:function(){return{deductionSkuId:"",listStyle:1,pickuYD:!1,selectedType:2,listZitiId:"",filterType:0,category:"",listData:[],showCreated:!1,showFiltrate:!1,filterBrands:[],filterFeatureies:[],pageType:"",activityId:"",couponId:"",subtotal:"0.00",searchKey:"",scrollTopValue1:0,backRefresh:!1,activityInfo:{},cartJS:l["a"],cateLevel:"",nowPage:1,isCanLoadMore:!1,clsType:"1",isFirstEnter:!0,maxPrice:"",minPrice:"",lastPath:"",cateText:"全部分类",showCategory:!1,cateList:[],couFaceValue:"0",couThresholdAmount:"0",cartCanUseCouponAmount:"0",endTime:"",tipText:"",isNoList:!1,storeOuCode:"",showGuide:!1,showAllCategory:!1,addToCartItem:void 0,showProductImg:!1,showAddCartAn:!1,addCartBtnAn:!1,easyCardId:"",cardType:"",productType:"",categoryIdList:"",location:{},carts:[],num:0,occurData:{},paramsData_toPlaceOrder:{},resData_toPlaceOrder:{},cartProducts:[],showCartProducts:!1,loaded:!1,businessType:"0",selectedStore:{storeCode:"",storeName:""}}},methods:{onChange:function(t,e){for(var s=-1,a=0;a<this.carts.length;a++){if(0==e){s=a;break}this.carts[a].skuId==t&&(this.carts[a].number=e)}s>-1&&this.carts.splice(s,1),this.carts.length?this._settleCart(this.carts[0].storeOuCode):(this.num=0,this.cartProducts=[],this.occurData={},sessionStorage.setItem("MDPS_Carts",JSON.stringify(this.carts)))},getCouponTip:function(){var t=""!=this.cartCanUseCouponAmount?this.cartCanUseCouponAmount:"0";if(parseFloat(t)>parseFloat(this.couThresholdAmount))return"您已可以使用优惠券，优惠"+this.couFaceValue+"元";var e=this.$util.toDecimal2(parseFloat(this.couThresholdAmount)-parseFloat(t));return"还差"+e+"元可以优惠"+this.couFaceValue+"元"},cateEvent:function(t){this.showCreated=!1,this.filterBrands=[],this.filterFeatureies=[],this.showAllCategory=!1,this.showCategory=!1,this.cateText=t.name,this.category=t.id,this.cateLevel=t.cateLevel,this.clsType=t.clsType,this.nowPage=0,this._loadProList()},categoryEvent:function(){""!=this.pageType?this.showCategory=!this.showCategory:this.showAllCategory=!this.showAllCategory},getGiftText:function(){return 3==this.activityInfo.linkType?"选择赠品":4==this.activityInfo.linkType?"选择换购":5==this.activityInfo.linkType?"查看赠品":6==this.activityInfo.linkType?"查看换购":void 0},goCart:function(){1==this.$route.query.fromCart?this.$router.go(-1):this.$router.push({path:"/mall2/cart",query:{orderCategory:this.orderCategory,vipUnitUserCode:this.vipUnitUserCode}})},goGift:function(){var t=l["a"].getGiftIsOnlyScan(this.activityInfo),e=l["a"].getGiftType(this.activityInfo);d["a"].open({listData:this.activityInfo.gift,activityId:this.activityInfo.mktActivityId,sureFunc:this.sureFunc,isScan:t,giftType:e})},backEvent:function(){this.$router.go(-1)},toSearchEvent:function(){var t=this;c["a"].open({initData:{barHeight:this.$store.state.barHeight,searchHistory:this.$store.state.mall2.searchHistory},clearSearchHistory:function(){t.$store.state.mall2.searchHistory=[]},searchEvent:function(e){c["a"].close(),t.$mallCommon.pushSearchHistory(e),t.searchKey=e,t.nowPage=0,t._loadProList()}})},listStyleEvent:function(){1==this.listStyle?this.listStyle=2:this.listStyle=1},filtrateCloseEvent:function(){this.showFiltrate=!1},selectedTypeEvent:function(t){this.$store.state.mall2.staticDeliverType=t,this.$bridgefunc.vuexStorage(),this.selectedType=t,1==t&&""==this.$store.state.mall2.zitiAddress.id?(this.backRefresh=!0,this.$router.push({path:"/mall2/mypickupaddress"})):(this.nowPage=0,this._loadProList(),this._getCartCount())},filterEvent:function(t){this.showCategory=!1,0==t?this.filterType=0:1==t?2==this.filterType?this.filterType=0:this.filterType=2:2==t&&(3==this.filterType?this.filterType=4:this.filterType=3),this.nowPage=0,this._loadProList()},filtrateEvent:function(t){this.showFiltrate=!1,this.filterBrands=[],this.filterFeatureies=[];for(var e=0;e<t.brands.length;e++)this.filterBrands.push(t.brands[e].id);for(var s=0;s<t.featureies.length;s++)this.filterFeatureies.push({id:t.featureies[s].id,featureType:t.featureies[s].featureType});this.maxPrice=t.maxPrice,this.minPrice=t.minPrice,this.nowPage=0,this._loadProList()},superFilter:function(){this.showCategory=!1,this.showFiltrate=!0,this.showCreated=!0},_loadProList:function(t){var e=this;"1"==this.selectedType&&y["a"].checkIsInitialLoad((function(t){t&&e._loadProList()})),this.isCanLoadMore=!1,this.isNoList=!1;var s=this.nowPage+1;0==this.nowPage&&(this.listData=[]),this.$Loading.open();var a="/app/json/product/getAppProListByDelivery",i={token:this.$store.state.login.token,page:s,rows:20,orderByKey:"",ascOrDesc:"",deliverType:this.selectedType,categoryId:this.category,cateLevel:this.cateLevel,brandIds:this.filterBrands,featureIds:this.filterFeatureies,couTypeCode:this.couponId,activityId:this.activityId,proName:this.searchKey,clsType:this.clsType,maxPrice:this.maxPrice,minPrice:this.minPrice,easyCardId:this.$route.query.easyCardId,orderCategory:this.orderCategory,vipUnitUserCode:this.vipUnitUserCode};if(1==this.filterType?(i.orderByKey="1",i.ascOrDesc="0"):2==this.filterType?(i.orderByKey="1",i.ascOrDesc="1"):3==this.filterType?(i.orderByKey="0",i.ascOrDesc="0"):4==this.filterType&&(i.orderByKey="0",i.ascOrDesc="1"),1==this.selectedType){var o=this.$store.state.mall2.zitiAddress;i.pickUpId=o.id}else{var r=this.$store.state.mall2.selectAddress;i.area={provinceId:r.provinceId,cityId:r.cityId,countryId:r.countryId,countyId:r.countryId,townId:r.townId}}this.productType&&""!=this.productType&&(i.productType=this.productType),""!=this.categoryIdList&&(i.categoryIdList=this.categoryIdList),i.lng=this.location.posx,i.lat=this.location.posy,"1"==this.businessType&&this.location.selectedStore&&(i.storeOuCode=this.location.selectedStore.storeCode),this.$http.post(a,i).then((function(s){e.$Loading.close();var a=s.data;if(0==a.status){if(e.activityId?e.$actionStatistics.listAction("130020",JSON.stringify(i),e.activityId):e.$actionStatistics.listAction("130010",JSON.stringify(i),e.activityId),0!=e.nowPage)e.listData=e.listData.concat(a.data.list);else if(e.listData=a.data.list,0==e.listData.length?(e.isNoList=!0,e.carts=[],e.num=0,e.occurData={}):(""==e.selectedStore.storeCode&&(e.selectedStore={storeCode:e.listData[0].storeOuCode,storeName:e.listData[0].storeName}),e.sessionCartsEvent(e.selectedStore.storeCode)),""!=e.pageType&&e.cateList.length<=1){var o=a.data.cateList;e.cateList=[{name:"全部分类",id:"",childList:[{name:"全部分类",id:""}]}];for(var r=0;r<o.length;r++){var n=o[r].childList;e.cateList=e.cateList.concat(n)}}e.nowPage++,a.data.page.count<=e.listData.length?e.isCanLoadMore=!1:e.isCanLoadMore=!0}else e.$Toast(a.info);t&&t("done")}),(function(s){t&&t("done"),e.$Loading.close(),e.$Toast("请求数据失败！")}))},productEvent:function(t){var e="/mall2/store-delivery/detail";this.$router.push({path:e,query:{id:t.id,skuId:t.skuId}})},_getCartCount:function(){var t=this;if(""!=this.$store.state.login.token){var e="/app/json/app_cart/getCartCount",s={token:this.$store.state.login.token,deliveryType:this.selectedType,orderCategory:this.orderCategory,vipUnitUserCode:this.vipUnitUserCode};this.$http.post(e,s).then((function(e){var s=e.data;0==s.status?t.$store.state.mall2.cartNum=s.data:t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))}},addToCart:function(t){for(var e=!1,s=0;s<this.carts.length;s++)if(this.carts[s].skuId==t.skuId){if(e=!0,t.stockNum<parseInt(this.carts[s].number)+1)return void this.$Toast("当前商品库存不足！");this.carts[s].number=parseInt(this.carts[s].number)+1}if(0==e){if(t.stockNum<1)return void this.$Toast("当前商品库存不足！");this.carts.push({skuId:t.skuId,storeOuCode:t.storeOuCode,activityId:this.activityId,selfActivityId:t.activityId,deliveryType:"3",number:1})}this._settleCart(this.selectedStore.storeCode)},_settleCart:function(t){var e=this;this.num=0;for(var s=0;s<this.carts.length;s++)this.num+=parseInt(this.carts[s].number);this.$Loading.open();var a="/app/json/app_cart/SettleCart",i={token:this.$store.state.login.token,carts:this.carts,deliveryType:"3",userAddress:this.location,storeOuCode:t,userAddressId:"",couNo:["-1"]};this.$http.post(a,i).then((function(t){e.$Loading.close();var s=t.data;0==s.status?(e.loaded=!0,e.paramsData_toPlaceOrder=i,e.resData_toPlaceOrder=s.data,sessionStorage.setItem("MDPS_Carts",JSON.stringify(e.carts)),e.occurData=s.data.occur[0]||{},e.getCartsProducts()):e.$Toast(s.info)}),(function(t){e.$Loading.close(),e.$Toast("请求数据失败！")}))},getCartsProducts:function(){var t=[];this.num=0;for(var e=this.occurData.store[0],s=0;s<e.activity.length;s++)for(var a=e.activity[s].cart,i=0;i<a.length;i++)t.push(a[i]),this.num+=a[i].number;for(var o=e.noActivityCart,r=0;r<o.length;r++)t.push(o[r]),this.num+=o[r].number;this.cartProducts=t},selectAddressClick:function(){this.backRefresh=!0;var t="/mall2/store-delivery/address-list",e={path:t};1==this.businessType&&(e.query=this.selectedStore,e.query.businessType=this.businessType),0!=this.$userCenter.checkLogined(e,0)&&this.$router.push(e)},productImgAfterEnter:function(t){this.showProductImg=!1,this.showAddCartAn=!0},beforeEnter:function(t){t.style.transform="translate3d(0,0,0)",t.children[0].style.opacity=0},afterEnter:function(t){var e=this,s=t.getBoundingClientRect().bottom,a=t.children[0].getBoundingClientRect().left,i=this.$refs.gouwuche.getBoundingClientRect().left,o=this.$refs.gouwuche.getBoundingClientRect().top;t.style.transform="translate3d(0,".concat(o-s,"px,0)"),t.style.transition="transform .55s cubic-bezier(0.3, -0.25, 0.7, -0.15)",t.children[0].style.transform="translate3d(".concat(i-a,"px,0,0)"),t.children[0].style.transition="transform .55s linear",t.children[0].style.opacity=1,this.showAddCartAn=!1,t.addEventListener("transitionend",(function(){e.addCartBtnAn=!0,e.$refs.gouwuche.addEventListener("webkitAnimationEnd",(function(){e.addCartBtnAn=!1}))}))},toPlaceOrder:function(){if(0!=this.num){var t={res:this.resData_toPlaceOrder,paramsData:this.paramsData_toPlaceOrder,deliveryType:"3"};this.$router.push({name:"storedeliveryplaceorder",params:t})}},sessionCartsEvent:function(){var t=sessionStorage.getItem("MDPS_Carts");t&&(this.carts=JSON.parse(t)||[]),this.carts.length?this._settleCart(this.selectedStore.storeCode):(this.num=0,this.occurData={})}},created:function(){var t=this;this.easyCardId=this.$route.query.easyCardId,this.businessType=this.$route.query.businessType||"0",this.cardType=this.$route.query.cardType,this.lastPath=this.$route.query.lastPath?this.$route.query.lastPath:"",this.searchKey=this.$route.query.searchKey?this.$route.query.searchKey:"",this.clsType=this.$route.query.clsType?this.$route.query.clsType:"1",this.cateText=this.$route.query.categoryName?this.$route.query.categoryName:"全部分类",this.nowPage=0,this.isCanLoadMore=!1,this.isNoList=!1;var e=localStorage.getItem("Address_List_Seleted");e?(e=JSON.parse(e),this.location=e,this.location.selectedStore&&(this.selectedStore=this.location.selectedStore),this.nowPage=0,this._loadProList()):this.$bridgefunc.getLocation((function(e){t.$mallCommon.nearAddress((function(e){t.location=e,localStorage.setItem("Address_List_Seleted",JSON.stringify(t.location)),t._loadProList()}),e)}))},activated:function(){if(this.backRefresh){this.backRefresh=!1;var t=localStorage.getItem("Address_List_Seleted");t&&(t=JSON.parse(t),this.location=t,this.location.selectedStore&&(this.selectedStore=this.location.selectedStore),this.nowPage=0,this._loadProList())}else this.$refs.listContent.setScrollTopValue(this.scrollTopValue1);this.loaded&&this.sessionCartsEvent()},beforeRouteLeave:function(t,e,s){t.path!=this.lastPath?this.scrollTopValue1=this.$refs.listContent.getScrollTopValue():this.$keepaliveHelper.deleteCache(this),s()}},_=C,w=(s("e8af"),s("0c7c")),T=Object(w["a"])(_,a,i,!1,null,"0f5a2809",null);e["default"]=T.exports},"46a3":function(t,e,s){},7217:function(t,e,s){"use strict";var a=s("53ca"),i=s("d4ec"),o=s("bee2"),r=(s("c975"),s("4795"),s("4160"),s("159b"),s("da71")),n=document.getElementsByTagName("head")[0],c=function(){function t(e,s){var a=this;Object(i["a"])(this,t),this.url=e||"",this.funcName=s;var o=document.createElement("script");e+=(~e.indexOf("?")?"&":"?")+"callback="+s,o.src=e,o.type="text/javascript",this.myTimer=setTimeout((function(){a.callCallback({status:1,info:"网络加载较慢！"}),a.clearup()}),1e4),window[s]=function(t){a.callCallback({status:0,data:t,info:""}),a.clearup()},o.onerror=function(){a.callCallback({status:1,info:"网络加载较慢！"}),a.clearup()},this.scriptNode=o,n.appendChild(this.scriptNode)}return Object(o["a"])(t,[{key:"then",value:function(t){this.callbackFunc=t}},{key:"callCallback",value:function(t){var e=this;setTimeout((function(){e.callbackFunc(t)}),0)}},{key:"clearup",value:function(){this.myTimer&&clearTimeout(this.myTimer),this.myTimer=null,this.scriptNode.src="",n.removeChild(this.scriptNode)}}]),t}(),l={request:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!t)throw new Error("url 不能为空");0!=t.indexOf("http")&&(t=r["a"].baseURL+t),s.forEach((function(e){if("object"===Object(a["a"])(e))for(var s in e)t+=~t.indexOf("?")?"&":"?",t+=s+"="+e[s]}));var i=new c(t,e);return i},cancelAll:function(){}};e["a"]=l},"72c7":function(t,e,s){"use strict";var a=s("378f"),i=s("653a"),o=s("751a"),r=s("550c"),n=s("99fa"),c=(s("ca00"),{checkIsInitialLoad:function(t){"cnooc"!=i["a"].state.globalConfig.app_home_special_flag?0==i["a"].state.mall2.pickupAddressChecked?(i["a"].state.mall2.pickupAddressChecked=!0,a["a"].vuexStorage(),c.getLocation(t)):t(null):t()},getLocation:function(t){a["a"].getLocation((function(e){e.city&&""!=e.city?(i["a"].state.currentLocation.posx=e.longitude,i["a"].state.currentLocation.posy=e.latitude,c.loadNeerPickupAddress(t)):t(null)}))},loadNeerPickupAddress:function(t){var e="/app/json/user_address/searchSelfliftAddressList",s={posx:i["a"].state.currentLocation.posx,posy:i["a"].state.currentLocation.posy,page:{index:1,pageSize:1}};o["a"].post(e,s).then((function(e){var s=e.data;if(0==s.status)if(s.data&&s.data.length>0){var a=s.data[0];c.checkEqualAndDistance(a,t)}else t(null);else t(null)}),(function(e){t(null)}))},checkEqualAndDistance:function(t,e){t.id!=i["a"].state.mall2.zitiAddress.id&&t.distance<500?r["a"].confirm("距离您最近的自提点是："+t.storeName+",是否切换到最近自提点","提示").then((function(s){c.reSelectPickupAddress(t,e)}))["catch"]((function(t){e(null)})):e(null)},reSelectPickupAddress:function(t,e){i["a"].state.mall2.zitiAddress=t,a["a"].vuexStorage((function(){e(t)})),i["a"].state.login.token&&""!=i["a"].state.login.token&&(n["a"]._addToMyPickupAddress(t.id),n["a"]._setDefaultPickupAddress(t.id))}});e["a"]=c},"7db0":function(t,e,s){"use strict";var a=s("23e7"),i=s("b727").find,o=s("44d2"),r="find",n=!0;r in[]&&Array(1)[r]((function(){n=!1})),a({target:"Array",proto:!0,forced:n},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(r)},9130:function(t,e,s){"use strict";s("46a3")},"99b4":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showAdpage?s("div",{staticClass:"adpage",on:{click:function(e){return e.stopPropagation(),t.adPageHide.apply(null,arguments)}}},[s("div",[s("ImageAd",{attrs:{usePorpData:!0,propData:t.pageData},on:{closeEvent:t.adPageHide}})],1)]):t._e()},i=[],o=(s("d3b7"),s("3ca3"),s("ddb0"),s("7db0"),s("0d03"),s("7217")),r={name:"adpage",components:{ImageAd:function(){return s.e("chunk-1d60e26c").then(s.bind(null,"0401"))}},props:["pageAdKeywords","pgCode"],data:function(){return{pageData:null,show:!1}},computed:{showAdpage:function(){var t=this.show&&null!=this.pageData&&this.pageData.adData&&""!=this.pageData.adData;if(t){var e=this.pageData.adData,s=e.rows.find((function(t){return 0!=t.canSee}));void 0==s&&(t=!1)}return t}},methods:{adPageIsShow:function(t){var e=window.localStorage.getItem(this.pageAdKeywords+t);if(e){var s=(new Date).getTime();s>e&&(this.show=!0)}else this.show=!0},adPageHide:function(){this.show=!1},getMyPageData:function(){var t=this,e="/appcontent/js/app_vue_page/vuePageData.js",s="vuePageData_",a=[];if(a.push({appType:1}),a.push({accessType:2}),this.pgCode&&""!=this.pgCode)s+=this.pgCode,a.push({pgCode:this.pgCode});else{a.push({pageAdKeywords:this.pageAdKeywords});var i=this.$util.md5String(this.pageAdKeywords);s+=i}o["a"].request(e,s,a).then((function(e){if(0==e.status){var s=e.data.pageData;if(!s.pageDataJson)return;t.pageData=JSON.parse(s.pageDataJson);var a=e.data.id||"",i=t.pageData.adData;if(t.adPageIsShow(a),i&&t.show)if("1"==i.showFrequency){var o=new Date;o=o.setDate(o.getDate()+1),o=new Date(o).setHours(2,0,0,0);var r=new Date(o).getTime();window.localStorage.setItem(t.pageAdKeywords+a,r)}else if("2"==i.showFrequency){var n=new Date;n=n.setDate(n.getDate()+999);var c=new Date(n).getTime();window.localStorage.setItem(t.pageAdKeywords+a,c)}else if("3"==i.showFrequency){var l=(new Date).getTime()+36e3;window.localStorage.setItem(t.pageAdKeywords+a,l)}else if("4"==i.showFrequency){var d=(new Date).getTime()+0;window.localStorage.setItem(t.pageAdKeywords+a,d)}else{var h=(new Date).getTime()+36e5;window.localStorage.setItem(t.pageAdKeywords+a,h)}}}))}},created:function(){this.getMyPageData()}},n=r,c=(s("9130"),s("0c7c")),l=Object(c["a"])(n,a,i,!1,null,"1e81e30a",null);e["a"]=l.exports},e8af:function(t,e,s){"use strict";s("fcc5")},fcc5:function(t,e,s){}}]);