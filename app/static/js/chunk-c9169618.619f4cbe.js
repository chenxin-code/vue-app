(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9169618"],{"086f":function(t,e,o){"use strict";var n=o("d055"),r=o.n(n),i=function(t){return function(){var e=Array.prototype.slice.call(arguments);return new Promise((function(o,n){e.push((function(t,e){t?n(t):o(e)})),t.apply(null,e)}))}};function a(t){return"function"===typeof t}function s(t){return"string"===typeof t}var c=i(r.a.toCanvas),u=function(t){var e=t.canvas,o=t.content,n=t.width,r=void 0===n?0:n,i=t.nodeQrCodeOptions,a=void 0===i?{}:i;return a.errorCorrectionLevel=a.errorCorrectionLevel||l(o),d(o,a).then((function(t){return a.scale=0===r?void 0:r/t*4,c(e,o,a)}))},d=function(t,e){var o=document.createElement("canvas");return c(o,t,e).then((function(){return o.width}))},l=function(t){return t.length>36?"M":t.length>16?"Q":"H"},f=function(t){var e=t.canvas,o=(t.content,t.logo);if(o){var n=e.width,r=o.logoSize,i=void 0===r?.15:r,a=o.borderColor,s=o.bgColor,c=void 0===s?a||"#ffffff":s,u=o.borderSize,d=void 0===u?.05:u,l=o.crossOrigin,f=o.borderRadius,g=void 0===f?8:f,m=o.logoRadius,h=void 0===m?0:m,y="string"===typeof o?o:o.src,C=n*i,p=n*(1-i)/2,q=n*(i+d),w=n*(1-i-d)/2,b=e.getContext("2d");v(b)(w,w,q,q,g),b.fillStyle=c,b.fill();var I=new Image;(l||h)&&I.setAttribute("crossOrigin",l||"anonymous"),I.src=y;var T=function(t){b.drawImage(t,p,p,C,C)},$=function(t){var e=document.createElement("canvas");e.width=p+C,e.height=p+C,e.getContext("2d").drawImage(t,p,p,C,C),v(b)(p,p,C,C,h),b.fillStyle=b.createPattern(e,"no-repeat"),b.fill()};return new Promise((function(t,e){I.onload=function(){h?$(I):T(I),t()}}))}},v=function(t){return function(e,o,n,r,i){var a=Math.min(n,r);return i>a/2&&(i=a/2),t.beginPath(),t.moveTo(e+i,o),t.arcTo(e+n,o,e+n,o+r,i),t.arcTo(e+n,o+r,e,o+r,i),t.arcTo(e,o+r,e,o,i),t.arcTo(e,o,e+n,o,i),t.closePath(),t}},g=function(t){return u(t).then((function(){return t})).then(f)},m=function(t){var e=document.createElement("canvas");return t.canvas=e,t.logo&&(s(t.logo)&&(t.logo={src:t.logo}),t.logo.crossOrigin="Anonymous"),g(t).then((function(){var o=t.image,n=void 0===o?new Image:o,r=t.downloadName,i=void 0===r?"qr-code":r,s=t.download;if(n.src=e.toDataURL(),!0===s||a(s)){s=!0===s?function(t){return t()}:s;var c=function(){h(n,i)};s(c)}}))},h=function(t,e){var o=t.src,n=document.createElement("a");n.download=e,n.href=o,document.body.appendChild(n),n.click(),document.body.removeChild(n)},y={toCanvas:g,toImage:m};e["a"]=y},"0adc":function(t,e,o){"use strict";var n=o("653a");function r(t){var e=void 0;if("海南省"==n["a"].state.globalConfig.province&&(e="hainan"),e){var o="static/enterpriseImg/"+e+"/"+t;return o}return null}e["a"]=r},4947:function(t,e,o){"use strict";o("979d")},"532f":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"handle-oil-qrcode"},[o("nav-top",{attrs:{title:"提油卡办理"},on:{backEvent:function(e){return t.$router.go(-1)}}}),o("nav-content",{staticClass:"handle-oil-qrcode-container"},[o("div",{staticClass:"qr-div"},[o("div",{staticClass:"barcode"},[o("canvas",{attrs:{id:"barcode"}})]),o("div",{staticClass:"qrcode-text"},[t._v(t._s(t.myInfo.qrCode))]),o("div",{staticClass:"codeimg-content"},[o("div",{ref:"qrcode",staticClass:"qrcode"},[o("canvas",{attrs:{id:"qrcode"}})]),o("div",{staticClass:"icon",on:{click:t.refreshBtn}},[o("i",{staticClass:"iconfont mall-shuaxin"})]),o("div",{staticClass:"tips"},[t._v("备注：当前二维码有效期为5分钟，到期自动失效。")])])])])],1)},r=[],i=(o("4795"),o("99af"),o("086f")),a=o("62c5"),s=o.n(a),c=o("0adc"),u=o("da71"),d={data:function(){return{myTimeout:null,myInfo:{}}},mounted:function(){this.getMycode()},methods:{refreshBtn:function(){this.getMycode()},getMycode:function(){var t=this;this.$Loading.open();var e="/app/json/user/queryQrCodeInfo",o={token:this.$store.state.login.token};this.$http.post(e,o).then((function(e){t.$Loading.close();var o=e.data;0==o.status?(t.myInfo=o.data,t.$nextTick((function(){t.$route.query.isToRegiste||t.$route.query.isPreRegiste?t.toCanvas():t.myInfo.qrCodeWithAppDownload?t.createQRCode(t.myInfo.qrCodeWithAppDownload):t.toCanvas(),t.myTimeout&&(clearTimeout(t.myTimeout),t.myTimeout=null),t.myTimeout=setTimeout((function(){t.getMycode()}),18e4)}))):t.$Toast(o.info)}),(function(e){t.$Loading.close()}))},toCanvas:function(){if("2"!=this.$store.state.globalConfig.user_qrCode_type){var t=document.getElementById("barcode");s()(t,this.myInfo.qrCode,{displayValue:!1})}if("1"!=this.$store.state.globalConfig.user_qrCode_type){var e=document.getElementById("qrcode"),o=e.getContext("2d");o.clearRect(0,0,e.width,e.height);var n="".concat(this.$store.state.globalConfig.wxBaseUrl).concat(u["a"].shareUrl,"/usercenter/downloadshare"),r=this.myInfo.qrCode;this.$route.query.isToRegiste&&(n="".concat(this.$store.state.globalConfig.wxBaseUrl).concat(u["a"].shareUrl,"/usercenter/loginbindqrcode"),r=this.myInfo.qrCode),this.$route.query.isPreRegiste&&(n="".concat(this.$store.state.globalConfig.wxBaseUrl).concat(u["a"].shareUrl,"/usercenter/preregistration"),r=this.myInfo.userNo),this.getShort(n,r)}},createQRCode:function(t){if("2"!=this.$store.state.globalConfig.user_qrCode_type){var e=document.getElementById("barcode");s()(e,this.myInfo.qrCode,{displayValue:!1})}if("1"!=this.$store.state.globalConfig.user_qrCode_type){var o={canvas:document.getElementById("qrcode"),content:t,width:140,nodeQrCodeOptions:{margin:0}},n=Object(c["a"])("qr-logo.png");n&&(o.logo={src:n}),i["a"].toCanvas(o)}}},destroyed:function(){this.myTimeout&&(clearTimeout(this.myTimeout),this.myTimeout=null)},components:{}},l=d,f=(o("4947"),o("0c7c")),v=Object(f["a"])(l,n,r,!1,null,"6f238793",null);e["default"]=v.exports},"979d":function(t,e,o){}}]);