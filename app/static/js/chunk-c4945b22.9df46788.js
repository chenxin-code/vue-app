(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4945b22"],{"1d50":function(t,e,s){},"468c":function(t,e,s){"use strict";s("1d50")},c56e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"referral-code login2"},[s("nav-top",{on:{backEvent:t.backEvent}}),s("nav-content",[2==t.isHasCommend?s("div",[s("div",{staticClass:"tip"},[s("span",{staticClass:"tip-icon"},[t._v("推荐码输入后将不能修改，请谨慎输入！")])]),s("div",{staticClass:"register"},[s("div",{staticClass:"passwords-input"},[s("div",{staticClass:"passwords"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.referrer,expression:"referrer"}],attrs:{placeholder:"请输入推荐码"},domProps:{value:t.referrer},on:{input:function(e){e.target.composing||(t.referrer=e.target.value)}}})]),s("div",{staticClass:"show-passwords",on:{click:t.scanCodeFunc}},[s("img",{staticClass:"see-icon",attrs:{src:"static/image/setting/icon-scan.png"}})])]),s("div",{staticClass:"passwords-input imgCode"},[s("div",{staticClass:"passwords"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.imgCode,expression:"imgCode"}],attrs:{placeholder:"请输入右侧校验码"},domProps:{value:t.imgCode},on:{input:function(e){e.target.composing||(t.imgCode=e.target.value)}}})]),s("div",{staticClass:"show-passwords"},[s("img",{staticClass:"jiaoyanma",attrs:{src:t.codeImg}})]),s("div",{staticClass:"show-passwords"},[s("img",{staticClass:"shuaxian",attrs:{src:"static/image/login2/shuaxin.png"},on:{click:function(e){return t.getImgCode()}}})])]),s("div",{staticClass:"common-btn theme_bg_red theme_font_white mt100",on:{click:function(e){return t.checkOutFun()}}},[t._v("保存")])])]):t._e(),1==t.isHasCommend?s("div",{staticClass:"commend mine-box-shodow"},[s("div",{staticClass:"public-bar flexs"},[s("p",{staticClass:"commend-left"},[t._v("推荐人电话")]),s("p",{staticClass:"commend-num"},[t._v(t._s(t.referrerData.phone))])]),s("div",{staticClass:"public-bar flexs"},[s("p",{staticClass:"commend-left"},[t._v("推荐人编号")]),s("p",{staticClass:"commend-num"},[t._v(t._s(t.referrerData.userId))])]),s("div",{staticClass:"public-bar flexs"},[s("p",{staticClass:"commend-left"},[t._v("注册日期")]),s("p",{staticClass:"commend-num"},[t._v(t._s(t.referrerData.regDate))])])]):t._e()])],1)},i=[],o=(s("c975"),s("4795"),{name:"",components:{},data:function(){return{referrer:"",referrerData:"",scanCode:"",imgCode:"",codeImg:"",isHasCommend:1,UUID:""}},created:function(){this.getMyReferer(),this.referrer=this.$store.state.rfrCode},methods:{scanCodeFunc:function(){var t=this;this.$bridgefunc.scanCode((function(e){var s=e.code;s.indexOf("http")>-1&&(s=t.$util.getUrlParam(s,"qrCode")),t.scanCode=s,t.referrer=s}))},backEvent:function(){this.$router.go(-1)},getMyReferer:function(){var t=this;this.$Loading.open();var e="/app/json/user/getMyReferer",s={token:this.$store.state.login.token};this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?s.data&&""!=s.data?(t.isHasCommend=1,t.referrerData=s.data):t.resetUI():2043==s.errorCode?t.resetUI():t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},resetUI:function(){this.isHasCommend=2,this.getImgCode()},_verifyImg:function(){var t=this;this.$Loading.open();var e="/app/json/login/verifyImg";this.$http.post(e,{uuid:this.UUID,imgVerifyCode:this.imgCode}).then((function(e){t.$Loading.close();var s=e.data;0==s.status&&!0===s.data?t.submit():(t.$Toast("图片验证码错误，请重新输入"),t.getImgCode())}),(function(e){t.$Loading.close(),t.$Toast("网络错误")}))},submit:function(){var t=this;this.$Loading.open();var e="/app/json/user/setRefererInfo",s={token:this.$store.state.login.token};this.referrer&&this.referrer.length&&(s["rfrCode"]=this.referrer),this.referrer==this.scanCode?s["rfrCodeType"]=2:s["rfrCodeType"]=1,this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?(t.$Toast("绑定成功"),1==t.$route.query.isFromWechat?setTimeout((function(){t.backIndex()}),500):t.getMyReferer()):t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},checkOutFun:function(){""!=this.referrer?""!=this.imgCode?this._verifyImg():this.$Toast("校验码不能为空"):this.$Toast("推荐码不能为空")},getImgCode:function(){var t=this;this.UUID=this.$util.randomString(),this.$Loading.open();var e="/app/json/login/getVerifyImg",s={uuid:this.UUID};this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?t.codeImg=s.data:t.$Toast(s.info?s.info:"获取图像校验码失败")}),(function(e){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},backIndex:function(){this.$util.removeStoreCode(),3!=this.$store.state.webtype||wx.miniProgram.reLaunch({url:"/pages/common/home/index"})}}}),r=o,n=(s("468c"),s("0c7c")),c=Object(n["a"])(r,a,i,!1,null,"34a9556e",null);e["default"]=c.exports}}]);