(window.webpackJsonp=window.webpackJsonp||[]).push([[829],{"2/Ys":function(e,t,n){"use strict";n.r(t);var a=n("7//l"),s=n("Gedb");function i(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(s,i){try{var o=t[s](i),r=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(r).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(r)}("next")}))}}var o={data:function(){return{digitalPWD:"",fingerprintPayPwdState:"",defaultPayPwdMode:"",checked:!1,state:0}},mounted:function(){this.defaultPayPwdMode=this.$route.query.defaultPayPwdMode,this.fingerprintPayPwdState=this.$route.query.fingerprintPayPwdState,this.checked=14==this.defaultPayPwdMode,this.state=14==this.defaultPayPwdMode?1:0},destroyed:function(){a.a.close()},methods:{backEvent:function(){this.$router.go(-1)},change:function(){var e=this;1==this.state?this.closeUserSpecialPayPwd():0==this.fingerprintPayPwdState?this.$bridgefunc.fingerPrintRe((function(t){"1"==t?e.setUserSpecialPayPwd(14):(e.checked=!1,e.$Toast("指纹识别失败"))})):a.a.open({initData:{payPwdState:2,title:"开启指纹密码",tips:"请先输入6位数字支付密码已验证身份"},toSettingPwd:function(){e.$router.push({path:"/usercenter/nosetpwd",query:{isSet:2}}),a.a.close()},inputFinished:function(t){e.digitalPWD=t,a.a.close(),e.$bridgefunc.fingerPrintRe((function(t){"1"==t?e.openUserSpecialPayPwd(14,e.digitalPWD):(e.checked=!1,e.$Toast("指纹识别失败"))}))}})},closeUserSpecialPayPwd:function(){var e=this;this.$request.post("/app/json/user/closeUserSpecialPayPwd",{payPwdMode:14}).then((function(t){0===t.status?(e.$Toast("指纹支付关闭成功"),e.checked=!1):(e.checked=!0,e.$Toast(t.info?t.info:"指纹支付关闭失败"))}))},setUserSpecialPayPwd:function(e){var t=this;return i(regeneratorRuntime.mark((function n(){var a,s,i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$bridgefunc.getArgsWithPromise();case 2:a=n.sent,t.$Loading.open("请求中"),"/app/json/user/setUserSpecialPayPwd",s=t.$store.state.login.token,i=(new Date).valueOf(),o={token:s,payPwdMode:e,userPayPwd:i,deviceId:a.deviceId},t.$http.post("/app/json/user/setUserSpecialPayPwd",o).then((function(e){t.$Loading.close();var n=e.data;0==n.status?(t.$store.state.pwdStates.touchPwd=n.data,t.$bridgefunc.vuexStorage(),t.checked=!0,t.$Toast({message:n.info?n.info:"打开成功！",position:"bottom",duration:2e3}),t.checked=!0):(t.checked=!1,t.$Toast({message:n.info?n.info:"打开失败！",position:"bottom",duration:2e3}))}),(function(e){t.$Loading.close(),t.checked=!1,t.$Toast({message:"打开失败！",position:"bottom",duration:2e3})}));case 9:case"end":return n.stop()}}),n,t)})))()},openUserSpecialPayPwd:function(e,t){var n=this;return i(regeneratorRuntime.mark((function a(){var i,o,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.$bridgefunc.getArgsWithPromise();case 2:i=a.sent,n.$Loading.open("请求中"),"/app/json/user/openUserSpecialPayPwd",o=n.$store.state.login.token,r={token:o,payPwdMode:e,userPayPwd:n.$store.state.pwdStates.touchPwd,deviceId:i.deviceId,originalPwd:Object(s.a)(t)},n.$http.post("/app/json/user/openUserSpecialPayPwd",r).then((function(e){n.$Loading.close();var t=e.data;0==t.status?(n.$store.state.pwdStates.touchPwd=t.data,n.$bridgefunc.vuexStorage(),n.checked=!0,n.$Toast({message:t.info?t.info:"打开成功！",position:"bottom",duration:2e3}),n.checked=!0):(n.checked=!1,n.$Toast({message:t.info?t.info:"打开失败！",position:"bottom",duration:2e3}))}),(function(e){n.checked=!1,n.$Loading.close(),n.$Toast({message:"打开失败！",position:"bottom",duration:2e3})}));case 8:case"end":return a.stop()}}),a,n)})))()}},components:{}},r=(n("TYUq"),n("KHd+")),c=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gestures-pwd-set"},[n("nav-top",{attrs:{title:"指纹密码"},on:{backEvent:e.backEvent}}),e._v(" "),n("nav-content",{staticClass:"gestures-pwd-set-container"},[n("div",{staticClass:"table-view list"},[n("div",{staticClass:"table-view-cell item"},[n("div",{staticClass:"table-view-cell-text"},[n("div",{staticClass:"left"},[e._v("指纹密码")]),e._v(" "),n("div",{staticClass:"right"},[n("van-switch",{attrs:{size:"20px","active-color":"#F80F16"},on:{change:e.change},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)])])])])],1)}),[],!1,null,"8cc089c4",null);t.default=c.exports},TYUq:function(e,t,n){"use strict";var a=n("dr6I");n.n(a).a},dr6I:function(e,t,n){}}]);