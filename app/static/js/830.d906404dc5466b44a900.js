(window.webpackJsonp=window.webpackJsonp||[]).push([[830],{"/tMP":function(t,e,s){"use strict";var a=s("O21k");s.n(a).a},O21k:function(t,e,s){},dpKi:function(t,e,s){"use strict";s.r(e);var a=s("7//l"),i=s("Gedb"),n={data:function(){return{checked:!1,digitalPWD:"",defaultPayPwdMode:""}},mounted:function(){this.defaultPayPwdMode=this.$route.query.defaultPayPwdMode,this.checked=12==this.defaultPayPwdMode},destroyed:function(){a.a.close()},methods:{backEvent:function(){this.$router.go(-1)},openSetgesture:function(){var t=this;this.digitalPWD="",a.a.open({initData:{payPwdState:2,title:"修改手势密码",tips:"请先输入6位数字支付密码已验证身份"},toSettingPwd:function(){t.$router.push({path:"/usercenter/nosetpwd",query:{isSet:2}}),a.a.close()},inputFinished:function(e){t.digitalPWD=e,a.a.close(),t.validPayPwd(t.digitalPWD)}})},validPayPwd:function(t){var e=this;this.$Loading.open();var s={token:this.$store.state.login.token,originalPwd:Object(i.a)(t),payPwdMode:11};this.$http.post("/app/json/user/validPayPwd",s).then((function(t){e.$Loading.close();var s=t.data;0==s.status?(e.$toast("密码验证成功"),e.$router.push({path:"/usercenter/setgesture-set",query:{type:"2",digitalPWD:e.digitalPWD}})):3007==s.errorCode?Dialog.alert({title:"提示",message:"密码已被锁定!"}).then((function(){a.a.close()})):(e.$toast(s.info),a.a.close())}),(function(t){e.$Loading.close(),e.$Toast("请求数据失败！")}))},change:function(){var t=this;console.log(this.$store.state.login),0==this.checked?this.closeUserSpecialPayPwd():(this.digitalPWD="",a.a.open({initData:{payPwdState:2,title:"开启手势密码",tips:"请先输入6位数字支付密码已验证身份"},toSettingPwd:function(){t.$router.push({path:"/usercenter/nosetpwd",query:{isSet:2,source:""}}),a.a.close()},inputFinished:function(e){t.digitalPWD=e,t.openUserSpecialPayPwd(12,t.digitalPWD),a.a.close()}}))},closeUserSpecialPayPwd:function(){var t=this;this.$request.post("/app/json/user/closeUserSpecialPayPwd",{payPwdMode:12}).then((function(e){0===e.status?t.$Toast("手势支付关闭成功"):t.$Toast(e.info?e.info:"手势支付关闭失败")}))},openUserSpecialPayPwd:function(t,e){var s,a=this;return(s=regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.$bridgefunc.getArgsWithPromise();case 2:n=s.sent,a.$request.post("/app/json/user/openUserSpecialPayPwd",{payPwdMode:t,userPayPwd:a.$store.state.pwdStates.gesturePwd,deviceId:n.deviceId,originalPwd:Object(i.a)(e)}).then((function(t){0===t.status?a.$Toast("手势支付开启成功"):(a.checked=!1,a.$Toast(t.info?t.info:"手势支付开启失败"))}));case 4:case"end":return s.stop()}}),s,a)})),function(){var t=s.apply(this,arguments);return new Promise((function(e,s){return function a(i,n){try{var o=t[i](n),c=o.value}catch(t){return void s(t)}if(!o.done)return Promise.resolve(c).then((function(t){a("next",t)}),(function(t){a("throw",t)}));e(c)}("next")}))})()}},components:{}},o=(s("/tMP"),s("KHd+")),c=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gestures-pwd-set"},[s("nav-top",{attrs:{title:"手势密码"},on:{backEvent:t.backEvent}}),t._v(" "),s("nav-content",{staticClass:"gestures-pwd-set-container"},[s("div",{staticClass:"table-view list"},[t.$store.state.pwdStates.gesturePwd?s("div",{staticClass:"table-view-cell item"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[t._v("开启手势密码")]),t._v(" "),s("div",{staticClass:"right"},[s("van-switch",{attrs:{size:"20px","active-color":"#F80F16"},on:{change:t.change},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1)])]):t._e(),t._v(" "),s("div",{staticClass:"table-view-cell item special",on:{click:t.openSetgesture}},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[t._v("修改手势密码")])]),t._v(" "),s("div",{staticClass:"table-view-cell-arrow"})])])])],1)}),[],!1,null,"930bf42c",null);e.default=c.exports}}]);