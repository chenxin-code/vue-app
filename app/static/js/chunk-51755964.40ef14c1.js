(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51755964"],{"2b9f":function(t,e,s){"use strict";s("2be3")},"2be3":function(t,e,s){},a57c:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-top",{attrs:{title:"演出票务详情"},on:{backEvent:function(e){return t.$router.go(-1)}}}),s("nav-content",{staticClass:"ticket-details"},[s("div",{ref:"content",staticClass:"ticket-content"},[s("div",{class:t.tabAnimation?"tab tab-start-animation":"tab tab-end-animation"},t._l(t.tabList,(function(e,i){return s("div",{key:i,class:t.tabIndex==i?"tab-active":"",on:{click:function(e){return t.HandleClick(i)}}},[s("span",[t._v(t._s(e))])])})),0),s("div",{staticClass:"ticket-infomation mt10"},[s("div",{staticClass:"item-img"},[s("img",{attrs:{src:t.ticketDetails.poster,alt:"",width:"100",height:"100"}})]),s("div",{staticClass:"infomation-right-content"},[s("div",{staticClass:"infomation-right-title"},[s("p",[t._v(t._s(t.ticketDetails.goodsName))])]),s("div",{staticClass:"infomation-right-price"},[s("p",{staticClass:"price"},[t._v(t._s(t.ticketDetails.price)+"元")])])])]),s("div",{staticClass:"ticket-address mt10"},[s("div",{staticClass:"time"},[s("van-icon",{attrs:{name:"clock"}}),s("span",[t._v(t._s(t.ticketDetails.endTime))])],1),s("div",{staticClass:"address"},[s("van-icon",{attrs:{name:"location"}}),s("div",{staticClass:"address-info"},[s("p",[t._v(t._s(t.ticketDetails.address))])])],1)]),s("div",{ref:"ticketDetails",staticClass:"ticket-show-details mt10",domProps:{innerHTML:t._s(t.ticketDetails.details)}}),s("div",{ref:"buyNotice",staticClass:"ticket-buy-notice mt10"},[t._v("购票须知--")])]),s("button",{staticClass:"reserve-btn",on:{click:t.handleReserveBtn}},[t._v("立即预定")])]),s("van-popup",{attrs:{position:"bottom"},model:{value:t.ShowReserve,callback:function(e){t.ShowReserve=e},expression:"ShowReserve"}},[s("van-picker",{attrs:{"show-toolbar":"",title:"选择场次",columns:t.reserveList,"value-key":"planName"},on:{cancel:function(e){t.ShowReserve=!1},confirm:t.onConfirm}})],1)],1)},o=[],a={data:function(){return{tabAnimation:!1,scrollTop:0,tabList:["演出介绍","购票须知"],tabIndex:0,ShowReserve:!1,ticketDetails:{},reserveList:[],goodsId:""}},mounted:function(){this.$refs.content.addEventListener("scroll",this.handleScroll),this.goodsId=this.$route.query.goodsId,this.getDetails(),this.getReserveList()},methods:{getDetails:function(){var t=this;this.$request.post("/app/json/fee_life_order/queryTicketGoodsDetail",{storeOuCode:this.$store.state.globalConfig.trafficStoreOuCode,goodsId:this.goodsId}).then((function(e){0===e.status?t.ticketDetails=JSON.parse(e.data):t.$Toast(e.info)}))},getReserveList:function(){var t=this;this.$request.post("/app/json/fee_life_order/queryTicketGoodsPlan",{storeOuCode:this.$store.state.globalConfig.trafficStoreOuCode,goodsId:this.goodsId}).then((function(e){0===e.status?t.reserveList=JSON.parse(e.data):t.$Toast(e.info)}))},handleScroll:function(t){this.scrollTop=this.$refs.content.scrollTop,this.scrollTop>=this.$refs.ticketDetails.offsetTop?this.tabAnimation=!0:this.scrollTop<=this.$refs.ticketDetails.offsetTop-60&&(this.tabAnimation=!1),this.scrollTop<this.$refs.buyNotice.offsetTop-this.$refs.buyNotice.offsetTop/3&&(this.tabIndex=0),this.scrollTop>this.$refs.buyNotice.offsetTop-this.$refs.buyNotice.offsetTop/3&&(this.tabIndex=1)},HandleClick:function(t){this.tabIndex=t,this.$refs.content.scrollTop=0==t?this.$refs.ticketDetails.offsetTop-50:this.$refs.buyNotice.offsetTop-50},handleReserveBtn:function(){this.ShowReserve=!0},onConfirm:function(t,e){t.planName?(this.ShowReserve=!1,this.$router.push({path:"/ticketFile-selection",query:{PlanDataObject:JSON.stringify(t),ticketDetails:JSON.stringify(this.ticketDetails),cateId:this.$route.query.cateId}})):this.$Toast("请选择场次")}}},n=a,c=(s("2b9f"),s("0c7c")),r=Object(c["a"])(n,i,o,!1,null,"14964e37",null);e["default"]=r.exports}}]);