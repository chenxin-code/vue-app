(window.webpackJsonp=window.webpackJsonp||[]).push([[807],{"50PT":function(t,e,s){"use strict";s.r(e);var a=s("F8w7"),i={data:function(){return{typeList:["快递配送","上门自取","现场自取"],typeIndex:0,areaList:{},regionText:"",userPhone:"",userName:"",orderData:{},ticketDetails:{}}},mounted:function(){this.areaList=a.a,this.userPhone=this.$store.state.login.phone,this.orderData=JSON.parse(this.$route.query.priceData),console.log(this.orderData),this.ticketDetails=JSON.parse(this.$route.query.ticketDetails),this.typeIndex=1*this.orderData.deliverType},methods:{toSelectAddress:function(){this.$router.push({path:"/mall2/addresslist"})},submitPay:function(){var t=this;if(this.userPhone&&this.userName){var e={carts:[{skuId:this.$store.state.globalConfig.ticketSkuId,storeOuCode:this.$store.state.globalConfig.trafficStoreOuCode,number:1,checked:"1"}],externalDeliveryType:this.orderData.deliverType,deliveryType:2,userAddress:this.$store.state.mall2.selectAddress,userAddressId:this.$store.state.mall2.selectAddress.id,pickupMobile:this.userPhone,pickupReceiver:this.userName,ticketCateId:this.$route.query.cateId,ticketGoodsId:this.orderData.goodsId,ticketPlanId:this.orderData.planId,ticketLevelId:this.orderData.levelId,ticketPriceId:this.orderData.priceId,ticketCount:this.orderData.count};this.$request.post("/app/json/fee_life_order/submit",e).then((function(e){0===e.status?t.$router.replace({path:"/mall2/checkstand",query:{payInfo:JSON.stringify(e.data),occurOuCode:e.data.occurOuCode}}):t.$Toast(e.info)}))}else this.$Toast("请填写联系方式或者取票人姓名")},pay:function(){var t=this;null!=this.selectedPayWay?payHelper.trafficPayEvent(this.selectedPayWay,this.submitInfo.orderType,this.submitInfo.orderId).then((function(){t.$router.replace({path:"/recharge-bill-details",query:{orderType:t.submitInfo.orderType,orderId:t.submitInfo.orderId}})})).catch((function(){})):this.$Toast("请选择支付方式！")}}},r=(s("CiVJ"),s("KHd+")),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ticketorder"},[s("nav-top",{attrs:{title:"演出票务列表"},on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),s("nav-content",{staticClass:"ticketOrder-details"},[s("div",{staticClass:"content"},[s("div",{staticClass:"ticket-infomation mt10 p10"},[s("div",{staticClass:"item-img"},[s("img",{attrs:{src:t.ticketDetails.poster,alt:"",width:"100",height:"100"}})]),t._v(" "),s("div",{staticClass:"infomation-right-content"},[s("div",{staticClass:"infomation-right-title"},[s("p",[t._v(t._s(t.ticketDetails.goodsName))])]),t._v(" "),s("div",{staticClass:"infomation-right-price"},[s("p",{staticClass:"price"},[t._v("¥"+t._s(t.orderData.price)+"("+t._s(t.orderData.count)+"张)")])])])]),t._v(" "),s("div",{staticClass:"ticket-address mt10 p10"},[s("div",{staticClass:"time"},[s("van-icon",{attrs:{name:"clock"}}),t._v(" "),s("span",[t._v(t._s(t.ticketDetails.startTime))])],1),t._v(" "),s("div",{staticClass:"address"},[s("van-icon",{attrs:{name:"location"}}),t._v(" "),s("div",{staticClass:"address-info"},[s("p",[t._v(t._s(t.ticketDetails.address))])])],1)]),t._v(" "),s("div",{staticClass:"order-info mt10 p10"},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v("取票方式")]),t._v(" "),s("div",{staticClass:"mode"},t._l(t.typeList,(function(e,a){return s("span",{key:a,class:t.typeIndex==a+1?"active":""},[t._v(t._s(e))])})),0)]),t._v(" "),s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v("取票人")]),t._v(" "),s("div",{staticClass:"inp"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],attrs:{type:"text",placeholder:"请输入取票人"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v("联系方式")]),t._v(" "),s("div",{staticClass:"inp"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userPhone,expression:"userPhone"}],attrs:{type:"text",placeholder:"请输入联系方式"},domProps:{value:t.userPhone},on:{input:function(e){e.target.composing||(t.userPhone=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v("配送地址")]),t._v(" "),s("div",{staticClass:"inp",on:{click:t.toSelectAddress}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.mall2.selectAddress.addressFull,expression:"$store.state.mall2.selectAddress.addressFull"}],attrs:{type:"text",placeholder:"请选择配送地址"},domProps:{value:t.$store.state.mall2.selectAddress.addressFull},on:{input:function(e){e.target.composing||t.$set(t.$store.state.mall2.selectAddress,"addressFull",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"table-view-cell-arrow"})])]),t._v(" "),s("div",{staticClass:"order-price mt10 p10"},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v("商品价格")]),t._v(" "),s("div",{staticClass:"red"},[t._v("¥"+t._s(t.orderData.price))])]),t._v(" "),s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v("快递运费")]),t._v(" "),s("div",{staticClass:"red"},[t._v("¥"+t._s(t.orderData.express))])]),t._v(" "),s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v("共需支付")]),t._v(" "),s("div",{staticClass:"red"},[t._v("¥"+t._s(t.orderData.price+t.orderData.express))])])])]),t._v(" "),s("button",{staticClass:"order-pay",on:{click:t.submitPay}},[t._v("立即支付")])])],1)}),[],!1,null,"1c485fab",null);e.default=o.exports},CiVJ:function(t,e,s){"use strict";var a=s("aQfg");s.n(a).a},aQfg:function(t,e,s){}}]);