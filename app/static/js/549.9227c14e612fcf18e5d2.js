(window.webpackJsonp=window.webpackJsonp||[]).push([[549],{"/jMi":function(e,a,t){"use strict";var o=t("LQLm");t.n(o).a},FZrn:function(e,a,t){"use strict";t("5+UC");var o=t("05lO"),n=t("ZToj"),r=t("dRp0"),i="https://epay.cnooc.com.cn";window.location.href.indexOf("imtest")>-1&&(i="https://epaytest.cnooc.com.cn");var c=i,s=t("oYx3"),d=t("Gedb"),p=window.location.origin+"/site/"+(2==n.a.state.webtype?"wx":"app");a.a={newsEvent:function(e){window.location.href=p+"/news/newsdetail?id="+e+"&token="+n.a.state.login.token},moreNews:function(){window.location.href=p+"/news/newslist?stationCode="+n.a.state.refuelStation.stationCode+"&token="+n.a.state.login.token},goSurvey:function(e){window.location.href=p+"/member/personal/survey?ouName="+n.a.state.refuelStation.stationName+"&ouCode="+n.a.state.refuelStation.stationCode+"&questId="+e+"&token="+n.a.state.login.token},stationDetail:function(e){window.location.href=p+"/member/oilstationdetail?stationCode="+e.stationCode+"&distance="+e.distance+"&token="+n.a.state.login.token},goRefuel:function(){window.location.href=p+"/card/onepay?token="+n.a.state.login.token},goRegister:function(e,a,t){window.location.replace(""+p+e+"?stationName="+a+"&stationCode="+t+"&fromMap=1&token="+n.a.state.login.token)},signParamOfCard:function(e,a){var t=[];for(var o in e)null!==e[o]&&void 0!==e[o]&&""!==e[o]&&"token"!==o&&t.push(o+"="+e[o]);var n=t.join("&");t.push("key="+a);var r=t.join("&"),i=Object(d.a)(r);return n+"&token="+e.token+'&wxOpenId=""&sign='+i.toUpperCase()},jumpCardSysPage:function(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/cnooc-card",n="",i="",d="";r.a.post("/app/json/card/loadToken",{}).then((function(p){var u=p.data;if(0!=u.status)return Object(o.a)({type:"fail",duration:2500,mask:!1,message:"获取当前用户信息错误，请您联系管理员"}),!1;switch(n=u.data.userId,i=u.data.cardToken,d=u.data.key,e){case 1:var l=a.signParamOfCard({appType:"APP",token:i,userCode:n,wxOpenId:""},d);s.a.push({path:"/cnooc-iframe",query:{pageTitle:"我的卡片",comeFromPage:t,pageUrl:c+"/HykSite/v/user/myaccount/index?"+l}});break;case 2:var f=a.signParamOfCard({appType:"APP",token:i,userCode:n,wxOpenId:""},d);s.a.push({path:"/cnooc-iframe",query:{pageTitle:"查询服务",comeFromPage:t,pageUrl:c+"/HykSite/v/user/balance/index?"+f}});break;case 3:var g=a.signParamOfCard({appType:"APP",token:i,userCode:n,wxOpenId:""},d);s.a.push({path:"/cnooc-iframe",query:{pageTitle:"充值服务",comeFromPage:t,pageUrl:c+"/HykSite/v/card/recharge/index?"+g}});break;case 4:r.a.post("/app/json/card/loadAllCardNum",{}).then((function(e){var o=e.data;if(0==o.status)if(o.data>0){var r=a.signParamOfCard({appType:"APP",token:i,userCode:n,wxOpenId:""},d);s.a.push({path:"/cnooc-iframe",query:{pageTitle:"快捷支付",comeFromPage:t,pageUrl:c+"/HykSite/v/user/onekeyrefuel/index?"+r}})}else s.a.replace("/cnooc-card");else s.a.replace("/cnooc-card")})).catch((function(e){s.a.replace("/cnooc-card")}));break;case 5:r.a.post("/app/json/card/loadAllCardNum",{}).then((function(e){var o=e.data;if(0==o.status)if(o.data>0){var r=a.signParamOfCard({appType:"APP",token:i,userCode:n,wxOpenId:""},d);s.a.replace({path:"/cnooc-iframe",query:{pageTitle:"一键加油",comeFromPage:t,pageUrl:c+"/HykSite/v/user/onekeyrefuel/index?"+r}})}else s.a.replace("/cnooc-card");else s.a.replace("/cnooc-card")})).catch((function(e){s.a.replace("/cnooc-card")}))}})).catch((function(e){return Object(o.a)({type:"fail",duration:2500,mask:!1,message:"获取当前用户信息错误，请您联系管理员"}),!1}))},showHtml:function(e){return e.replace(e?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&amp;/g,"&").replace(/p&gt;/g,"p").replace(/&nbsp;/g," ")}}},LQLm:function(e,a,t){},nMqe:function(e,a,t){"use strict";t.r(a);var o=t("FZrn"),n={data:function(){return{}},mounted:function(){o.a.jumpCardSysPage(5,"/common")},methods:{getCardToken:function(){var e=this;this.$Loading.open(),this.$http.post("/app/json/card/loadToken",{}).then((function(a){e.$Loading.close();var t=a.data;0==t.status?(e.cardSysInfo=t.data||{},e.getAllCardNum()):e.$Toast(t.info)})).catch((function(a){e.$Loading.close(),e.$Toast("loadToken err "+a)}))},getAllCardNum:function(){var e=this;this.$Loading.open(),this.$http.post("/app/json/card/loadAllCardNum",{}).then((function(a){e.$Loading.close();var t=a.data;if(0==t.status)if(t.data>0){var o=cnoocConfig.cardBaseURL+"/HykSite/v/user/onekeyrefuel/index?"+e.dealwithPareStr({appType:"APP",token:e.cardSysInfo.cardToken,userCode:e.cardSysInfo.userId,wxOpenId:e.cardSysInfo.wxOpenId},e.cardSysInfo.key);console.log("跳转地址： --- "+o+" ---"),e.$bridgefunc.customPush({path:o,isnativetop:"0"})}else e.$bridgefunc.customPush({path:window.location.origin+"/site/app/#/open-card?skip=1",isnativetop:"0"});else e.$Toast(t.info)})).catch((function(a){e.$Loading.close(),e.$Toast("loadAllCardNum err "+a)}))},dealwithPareStr:function(e,a){var t=[];for(var o in e)null!==e[o]&&void 0!==e[o]&&""!==e[o]&&t.push(o+"="+e[o]);var n=t.join("&");t.push("key="+a);var r=t.join("&");return n+"&sign="+MD5(r).toUpperCase()}}},r=(t("/jMi"),t("KHd+")),i=Object(r.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"container"},[this._v("\n  加载中···\n")])}),[],!1,null,"4dde3690",null);a.default=i.exports}}]);