(window.webpackJsonp=window.webpackJsonp||[]).push([[255],{"0xSJ":function(t,e,a){"use strict";var i=a("0oIA"),s=a("EyXw"),o=a("FCEd"),n=a("mISK"),r=a("d0T1"),l=a("rQYt"),c=a("5B+z"),d=Object(i.a)("dropdown-item"),u=d[0],p=d[1];e.a=u({mixins:[Object(o.a)({ref:"wrapper"}),Object(n.a)("vanDropdownMenu")],props:{value:null,title:String,disabled:Boolean,titleClass:String,options:{type:Array,default:function(){return[]}},lazyRender:{type:Boolean,default:!0}},data:function(){return{transition:!0,showPopup:!1,showWrapper:!1}},computed:{displayTitle:function(){var t=this;if(this.title)return this.title;var e=this.options.filter((function(e){return e.value===t.value}));return e.length?e[0].text:""}},watch:{showPopup:function(t){this.bindScroll(t)}},beforeCreate:function(){var t=this,e=function(e){return function(){return t.$emit(e)}};this.onOpen=e("open"),this.onClose=e("close"),this.onOpened=e("opened")},methods:{toggle:function(t,e){void 0===t&&(t=!this.showPopup),void 0===e&&(e={}),t!==this.showPopup&&(this.transition=!e.immediate,this.showPopup=t,t&&(this.parent.updateOffset(),this.showWrapper=!0))},bindScroll:function(t){var e=this.parent.scroller;(t?s.b:s.a)(e,"scroll",this.onScroll,!0)},onScroll:function(){this.parent.updateOffset()},onClickWrapper:function(t){this.getContainer&&t.stopPropagation()}},render:function(){var t=this,e=arguments[0],a=this.parent,i=a.zIndex,s=a.offset,o=a.overlay,n=a.duration,d=a.direction,u=a.activeColor,h=a.closeOnClickOverlay,v=this.options.map((function(a){var i=a.value===t.value;return e(r.a,{attrs:{clickable:!0,icon:a.icon,title:a.text},key:a.value,class:p("option",{active:i}),style:{color:i?u:""},on:{click:function(){t.showPopup=!1,a.value!==t.value&&(t.$emit("input",a.value),t.$emit("change",a.value))}}},[i&&e(l.a,{class:p("icon"),attrs:{color:u,name:"success"}})])})),f={zIndex:i};return"down"===d?f.top=s+"px":f.bottom=s+"px",e("div",[e("div",{directives:[{name:"show",value:this.showWrapper}],ref:"wrapper",style:f,class:p([d]),on:{click:this.onClickWrapper}},[e(c.a,{attrs:{overlay:o,position:"down"===d?"top":"bottom",duration:this.transition?n:0,lazyRender:this.lazyRender,overlayStyle:{position:"absolute"},closeOnClickOverlay:h},class:p("content"),on:{open:this.onOpen,close:this.onClose,opened:this.onOpened,closed:function(){t.showWrapper=!1,t.$emit("closed")}},model:{value:t.showPopup,callback:function(e){t.showPopup=e}}},[v,this.slots("default")])])])}})},"5jGo":function(t,e,a){},CdMl:function(t,e,a){"use strict";a("aO+S"),a("rshv")},LW2U:function(t,e,a){"use strict";var i=a("0oIA"),s=a("oUJm"),o=a("qMEG"),n=a("mISK"),r=a("siKa"),l=Object(i.a)("dropdown-menu"),c=l[0],d=l[1];e.a=c({mixins:[Object(n.b)("vanDropdownMenu"),Object(r.a)({event:"click",method:"onClickOutside"})],props:{zIndex:[Number,String],activeColor:String,overlay:{type:Boolean,default:!0},duration:{type:[Number,String],default:.2},direction:{type:String,default:"down"},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return{offset:0}},computed:{scroller:function(){return Object(o.d)(this.$el)},opened:function(){return this.children.some((function(t){return t.showWrapper}))},barStyle:function(){if(this.opened&&Object(s.c)(this.zIndex))return{zIndex:1+this.zIndex}}},methods:{updateOffset:function(){if(this.$refs.bar){var t=this.$refs.bar.getBoundingClientRect();"down"===this.direction?this.offset=t.bottom:this.offset=window.innerHeight-t.top}},toggleItem:function(t){this.children.forEach((function(e,a){a===t?e.toggle():e.showPopup&&e.toggle(!1,{immediate:!0})}))},onClickOutside:function(){this.children.forEach((function(t){t.toggle(!1)}))}},render:function(){var t=this,e=arguments[0],a=this.children.map((function(a,i){return e("div",{attrs:{role:"button",tabindex:a.disabled?-1:0},class:d("item",{disabled:a.disabled}),on:{click:function(){a.disabled||t.toggleItem(i)}}},[e("span",{class:[d("title",{active:a.showPopup,down:a.showPopup===("down"===t.direction)}),a.titleClass],style:{color:a.showPopup?t.activeColor:""}},[e("div",{class:"van-ellipsis"},[a.slots("title")||a.displayTitle])])])}));return e("div",{class:d()},[e("div",{ref:"bar",style:this.barStyle,class:d("bar",{opened:this.opened})},[a]),this.slots("default")])}})},Rqi7:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=void 0,s="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",o=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i||(i=document.createElement("textarea"),document.body.appendChild(i));var n=function(t){var e=window.getComputedStyle(t),a=e.getPropertyValue("box-sizing"),i=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),s=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:o.map((function(t){return t+":"+e.getPropertyValue(t)})).join(";"),paddingSize:i,borderSize:s,boxSizing:a}}(t),r=n.paddingSize,l=n.borderSize,c=n.boxSizing,d=n.contextStyle;i.setAttribute("style",d+";"+s),i.value=t.value||t.placeholder||"";var u=i.scrollHeight,p={};"border-box"===c?u+=l:"content-box"===c&&(u-=r),i.value="";var h=i.scrollHeight-r;if(null!==e){var v=h*e;"border-box"===c&&(v=v+r+l),u=Math.max(v,u),p.minHeight=v+"px"}if(null!==a){var f=h*a;"border-box"===c&&(f=f+r+l),u=Math.min(f,u)}return p.height=u+"px",i.parentNode&&i.parentNode.removeChild(i),i=null,p}},Ya7C:function(t,e,a){"use strict";a("aO+S"),a("pxog"),a("nXDD"),a("N0PS"),a("GgQP"),a("TXUN"),a("sswI")},ZrJo:function(t,e,a){"use strict";a.r(e),a("Ya7C");var i,s=a("0xSJ"),o=(a("CdMl"),a("LW2U")),n=(a("8GqL"),a("IPst")),r=a("Rqi7"),l=a("oCYn"),c=a("kB5k"),d=a("ygAv");function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}l.default.use(n.a);var p={name:"confirmOrder",components:(i={},u(i,o.a.name,o.a),u(i,s.a.name,s.a),i),props:{},data:function(){return{placelist:[],resouce:{},buyNumber:1,textareaHeight:"20px",textareaValue:"",consigneeName:"",consigneePhoneNumber:"",total:0,takeWays:[{text:"自提",value:1},{text:"送货上门",value:2}],takeWay:1,pageAvtive:!1}},activated:function(){this.pageAvtive?(console.log("sss"),this.placelist=[this.$store.state.CharseInfo.masterPlace]):(console.log("xxx"),this.getPlaceList(),this.resouce=this.$store.state.CharseInfo,this.total=Object(c.BigNumber)(this.buyNumber).multipliedBy(this.$store.state.CharseInfo.groupbuyBuyerPrice).toFixed(2))},beforeRouteLeave:function(t,e,a){"/mall2/checkstand"==t.path?(console.log("aaa"),this.pageAvtive=!0):this.pageAvtive=!1,a()},methods:{getHeight:function(){this.textareaHeight=Object(r.a)(this.$refs.textarea,1,null).height,this.$refs.confirmOrder.scrollTop=this.$refs.nullBox.offsetTop},confirmOrder:function(){var t=this;""!==this.consigneeName?d.a.checkMobile(this.consigneePhoneNumber)?this.$http.post("/app/json/group_buying_order/createGroupBuyingOrder",{activityNo:this.$store.state.CharseInfo.activityId,teamLeaderNo:this.$store.state.CharseInfo.masterPlace.teamLeaderNo,deliveryMode:0,consigneeName:this.consigneeName,consigneePhoneNumber:this.consigneePhoneNumber,preProductSkuInfoList:[{skuId:this.$store.state.CharseInfo.skuid,buyNumber:this.buyNumber}],remark:this.textareaValue}).then((function(e){"success"==e.data.result?t.$router.push({path:"/mall2/checkstand",query:{isBulk:JSON.stringify(!0),bulkData:JSON.stringify({tradeNo:e.data.data.tradeNo,orderType:e.data.data.orderType,occurOuCode:e.data.data.occurOuCode,orderId:e.data.data.orderId,shoppingOrderId:e.data.data.shoppingOrderId,payAmount:e.data.data.payAmount})}}):t.$toast(e.data.info)})):this.$toast("请输入正确的手机号码"):this.$toast("请输入提货人姓名")},getPlaceList:function(){var t=this,e="/app/json/group_buying_head_info/findHeadInfoByList?validState=true&sortBy:headWeight_DESC&activityId="+this.$store.state.CharseInfo.activityId;this.$http.get(e).then((function(e){0==e.data.status&&(t.$store.state.CharseInfo.masterPlace?t.placelist=[t.$store.state.CharseInfo.masterPlace]:(t.placelist=e.data.data.records,t.$store.commit("setCharseInfo",{masterPlace:t.placelist[0]}),console.log(t.placelist)))})).catch((function(t){console.log(t)}))},buyChange:function(t,e){this.total=Object(c.BigNumber)(e).multipliedBy(t).toFixed(2)}},watch:{textareaValue:function(){this.textareaValue.length<=150?this.getHeight():this.textareaValue=String(this.textareaValue).slice(0,150)}}},h=(a("lFXz"),a("KHd+")),v=Object(h.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"confirmOrder",staticClass:"body"},[a("nav-top",{attrs:{bstyle:"transparent",title:"确认订单"},on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),a("div",{staticClass:"user_info"},[a("div",{staticClass:"info"},[a("span",[t._v("提货人姓名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.consigneeName,expression:"consigneeName"}],attrs:{placeholder:"请输入姓名"},domProps:{value:t.consigneeName},on:{input:function(e){e.target.composing||(t.consigneeName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"info",staticStyle:{"margin-top":"12px"}},[a("span",[t._v("联系人电话：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.consigneePhoneNumber,expression:"consigneePhoneNumber"}],attrs:{placeholder:"请输入联系人电话"},domProps:{value:t.consigneePhoneNumber},on:{input:function(e){e.target.composing||(t.consigneePhoneNumber=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"pick_up_address"},[a("div",{staticClass:"addres_title"},[a("div",{staticClass:"addres_title_text"},[t._v("团购提货地点")]),t._v(" "),a("div",{staticClass:"change",on:{click:function(e){return t.$router.push("/selectAddress")}}},[t._v("\n        切换提货地址\n      ")])]),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),t.placelist.length?a("div",{staticClass:"addres_info"},[a("div",{staticClass:"addres_info_detail"},[a("div",{staticClass:"addres"},[a("div",{staticClass:"adders-key"},[t._v("提货联系人：")]),t._v(" "),a("div",{staticClass:"adders-val"},[t._v(t._s(t.placelist[0].teamLeaderName)+" "+t._s(t.placelist[0].teamLeaderPhoneNumber))])]),t._v(" "),a("div",{staticClass:"addres",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"adders-key"},[t._v("提货地址：")]),t._v(" "),a("div",{staticClass:"adders-val"},[t._v(t._s(t.placelist[0].cucName)+t._s(t.placelist[0].cudName)+t._s(t.placelist[0].cuName))])])])]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pick_up_address"},[t._m(0),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),t._m(1)]),t._v(" "),a("div",{staticClass:"goods_info"},[t._m(2),t._v(" "),a("div",{staticClass:"goods_item"},[a("div",{staticClass:"goods_info_item"},[a("img",{attrs:{src:t.resouce.groupbuySkuPicurl[0],alt:""}}),t._v(" "),a("div",{staticClass:"goods_info_detail"},[a("div",{staticClass:"goods_name"},[t._v(t._s(t.resouce.groupbuySkuName))]),t._v(" "),a("div",{staticClass:"sell_price"},[t._v("\n            销售价格：¥"+t._s(t.resouce.groupbuyLinePrice)+"\n          ")]),t._v(" "),a("div",{staticClass:"count_price"},[a("div",{staticClass:"bulk_price"},[t._v("\n              团购价格：¥"+t._s(t.resouce.groupbuyBuyerPrice)+"\n            ")])])])]),t._v(" "),a("div",{staticClass:"stepper"},[a("van-stepper",{on:{change:function(e){return t.buyChange(e,t.resouce.groupbuyBuyerPrice)}},model:{value:t.buyNumber,callback:function(e){t.buyNumber=t._n(e)},expression:"buyNumber"}})],1),t._v(" "),a("div",{staticClass:"line"})])]),t._v(" "),a("div",{staticClass:"remark"},[a("span",[t._v("订单备注：")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textareaValue,expression:"textareaValue"}],ref:"textarea",style:{height:t.textareaHeight},attrs:{placeholder:"请输入备注"},domProps:{value:t.textareaValue},on:{input:function(e){e.target.composing||(t.textareaValue=e.target.value)}}})]),t._v(" "),a("div",{ref:"nullBox"}),t._v(" "),a("div",{staticClass:"pay_now"},[a("div",{staticClass:"pay_price"},[t._v("¥"+t._s(t.total))]),t._v(" "),a("div",{staticClass:"pay",on:{click:t.confirmOrder}},[t._v("立即支付")])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addres_title"},[e("div",{staticClass:"addres_title_text"},[this._v("团购提货地点")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addres_info"},[e("textarea",{attrs:{placeholder:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"goods_title"},[e("div",{staticClass:"goods_title_text"},[this._v("商品信息")]),this._v(" "),e("div",{staticClass:"line"})])}],!1,null,"317529ce",null);e.default=v.exports},lFXz:function(t,e,a){"use strict";var i=a("5jGo");a.n(i).a}}]);