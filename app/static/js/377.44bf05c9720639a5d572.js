(window.webpackJsonp=window.webpackJsonp||[]).push([[377],{"CG+W":function(t,o,n){"use strict";var e,a=n("0FX9"),i=(e=n.n(a).a.toCanvas,function(){var t=Array.prototype.slice.call(arguments);return new Promise((function(o,n){t.push((function(t,e){t?n(t):o(e)})),e.apply(null,t)}))}),s=function(t,o){var n=document.createElement("canvas");return i(n,t,o).then((function(){return n.width}))},r=function(t){return t.length>36?"M":t.length>16?"Q":"H"},c=function(t){var o=t.canvas,n=(t.content,t.logo);if(n){var e=o.width,a=n.logoSize,i=void 0===a?.15:a,s=n.borderColor,r=n.bgColor,c=void 0===r?s||"#ffffff":r,d=n.borderSize,u=void 0===d?.05:d,h=n.crossOrigin,g=n.borderRadius,f=void 0===g?8:g,v=n.logoRadius,m=void 0===v?0:v,w="string"==typeof n?n:n.src,p=e*i,C=e*(1-i)/2,b=e*(i+u),$=e*(1-i-u)/2,y=o.getContext("2d");l(y)($,$,b,b,f),y.fillStyle=c,y.fill();var _=new Image;return(h||m)&&_.setAttribute("crossOrigin",h||"anonymous"),_.src=w,new Promise((function(t,o){_.onload=function(){m?function(t){var o=document.createElement("canvas");o.width=C+p,o.height=C+p,o.getContext("2d").drawImage(t,C,C,p,p),l(y)(C,C,p,p,m),y.fillStyle=y.createPattern(o,"no-repeat"),y.fill()}(_):function(t){y.drawImage(t,C,C,p,p)}(_),t()}}))}},l=function(t){return function(o,n,e,a,i){var s=Math.min(e,a);return i>s/2&&(i=s/2),t.beginPath(),t.moveTo(o+i,n),t.arcTo(o+e,n,o+e,n+a,i),t.arcTo(o+e,n+a,o,n+a,i),t.arcTo(o,n+a,o,n,i),t.arcTo(o,n,o+e,n,i),t.closePath(),t}},d=function(t){return function(t){var o=t.canvas,n=t.content,e=t.width,a=void 0===e?0:e,c=t.nodeQrCodeOptions,l=void 0===c?{}:c;return l.errorCorrectionLevel=l.errorCorrectionLevel||r(n),s(n,l).then((function(t){return l.scale=0===a?void 0:a/t*4,i(o,n,l)}))}(t).then((function(){return t})).then(c)},u={toCanvas:d,toImage:function(t){var o=document.createElement("canvas");return t.canvas=o,t.logo&&("string"==typeof t.logo&&(t.logo={src:t.logo}),t.logo.crossOrigin="Anonymous"),d(t).then((function(){var n=t.image,e=void 0===n?new Image:n,a=t.downloadName,i=void 0===a?"qr-code":a,s=t.download;e.src=o.toDataURL(),(!0===s||"function"==typeof s)&&(s=!0===s?function(t){return t()}:s)((function(){!function(t,o){var n=t.src,e=document.createElement("a");e.download=o,e.href=n,document.body.appendChild(e),e.click(),document.body.removeChild(e)}(e,i)}))}))}};o.a=u},Ctyn:function(t,o,n){"use strict";var e=n("ZToj");o.a=function(t){var o=void 0;return"海南省"==e.a.state.globalConfig.province&&(o="hainan"),o?"static/enterpriseImg/"+o+"/"+t:null}},U9yD:function(t,o,n){"use strict";var e=n("pPqr");n.n(e).a},pPqr:function(t,o,n){},qnsf:function(t,o,n){t.exports=n.p+"static/img/download-now.5e2f456.png"},z0hL:function(t,o,n){"use strict";n.r(o),n("4X9F");var e=n("IkEG"),a=n("dqDD"),i=n("CG+W"),s=n("Ctyn"),r=(n("2nGb"),{name:"index",components:{Toast:a.Toast},data:function(){return{hideTop:!1,downloadUrl:""}},computed:{isWx:function(){return 2==this.$store.state.webtype},bgImg:function(){return this.$store.state.globalConfig.downloadBgImgUrl},showDownloadBtn:function(){return 1!=this.$store.state.webtype},showDownloadTip:function(){return 2==this.$store.state.webtype||this.$util.isQQ()}},methods:{backEvent:function(){this.$router.go(-1)},getData:function(){var t=this;this.$Loading.open();var o={};o.appSysType=this.$util.isIos()?1:2,this.$http.post("/app/json/home/getVersion",o).then((function(o){t.$Loading.close(),console.log(o.data);var n=o.data;0===n.status?t.downloadUrl=n.data.downloadUrl||"":t.$Toast(n.info)}),(function(o){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},shareClick:function(){var t={};t.title=this.$store.state.globalConfig.shareTitle||"",t.sharetext=this.$store.state.globalConfig.shareDesc||"",t.imageurl=this.$store.state.globalConfig.downloadImgUrl||"",t.detailurl=window.location.href,console.log(t),this.$bridgefunc.share(t)},downloadHandler:function(){this.downloadUrl?window.location.href=this.downloadUrl:this.$Toast("下载地址错误！")}},mounted:function(){this.isWx&&e.a.confirm({title:"下载提示",message:"请在默认浏览器中打开",showCancelButton:!1,confirmButtonText:"知道了"}),this.getData();var t={canvas:document.getElementById("downloadUrl"),content:location.href,nodeQrCodeOptions:{margin:0}},o=Object(s.a)("qr-logo.png");o&&(t.logo={src:o}),i.a.toCanvas(t)},created:function(){"1"==this.$route.query.fromCoupon&&(this.hideTop=!0)}}),c=(n("U9yD"),n("KHd+")),l=Object(c.a)(r,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"downloadshare login2",style:{backgroundImage:"url("+t.bgImg+")"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isWx&&!t.hideTop,expression:"!isWx && !hideTop"}],staticClass:"qrcode-top ",style:{height:this.$store.state.barHeight+this.$market.getNavHeight()+"px"},on:{backEvent:t.backEvent}},[e("div",{staticClass:"navcontent",style:{top:this.$store.state.barHeight+"px",height:this.$market.getNavHeight()+"px","line-height":this.$market.getNavHeight()+"px"}},[e("div",{staticClass:"title-div theme_font_white"},[t._v(t._s(t.$t("downloadshareTitle")))]),t._v(" "),e("div",{staticClass:"nav-back-btn",on:{click:t.backEvent}},[e("i",{staticClass:"iconfont mall-fanhui theme_font_white",staticStyle:{"margin-left":"10px","font-size":"20px"}})]),t._v(" "),e("span",{staticClass:"share-btn",on:{click:t.shareClick}},[e("i",{staticClass:"iconfont mall-fenxiang"})])])]),t._v(" "),e("nav-content",[e("div",{staticClass:"scroll-div"},[t.showDownloadTip?e("div",{staticClass:"tip"},[t._v("可点击右上角，选择在浏览器打开")]):t._e(),t._v(" "),e("div",{staticClass:"show-content",class:{"wx-height":t.isWx}},[e("div",{staticClass:"show-img"},[e("img",{attrs:{src:t.$store.state.globalConfig.downloadImgUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"qr-code"},[e("div",{staticClass:"img-content"},[e("canvas",{staticClass:"img qr-code-content",attrs:{id:"downloadUrl"}})]),t._v(" "),e("p",{staticClass:"theme_font_white desc"},[t._v(t._s(t.$t("downloadshareLang.downloadTip")))]),t._v(" "),e("p",{staticClass:"theme_font_white desc"},[t._v('\n            "'+t._s(t.$store.state.globalConfig.downloadName)+'"APP\n          ')]),t._v(" "),t.showDownloadBtn?e("div",{staticClass:"download-btn",on:{click:function(o){return o.stopPropagation(),t.downloadHandler(o)}}},[e("img",{staticClass:"img",attrs:{src:n("qnsf"),alt:""}})]):t._e()])])])])],1)}),[],!1,null,"f14a752e",null);o.default=l.exports}}]);