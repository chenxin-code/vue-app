(window.webpackJsonp=window.webpackJsonp||[]).push([[113,348],{"+6ky":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwNDQ1REE3RENFMjExRThCMEE1QjE1MjEzODU2Rjc0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwNDQ1REE4RENFMjExRThCMEE1QjE1MjEzODU2Rjc0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTA0NDVEQTVEQ0UyMTFFOEIwQTVCMTUyMTM4NTZGNzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTA0NDVEQTZEQ0UyMTFFOEIwQTVCMTUyMTM4NTZGNzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5KZ6ijAAABVElEQVR42rTXsUvDQBTH8fQhCC6dOtlB6CbOgoNSOxSEUvpXRHAUhP4JTu7J3N0iDtJBS7GLs3QrdHBzculY/D3oEEIuuffu5eCb0jTwIdfr0TSSJLmLougBfaJbtI0EI45jr+vSNG3h5RldoMcDHJ7QITpBx2ggxT3Rd3S2PzUmHFaZa67RKzqqEeWxYHiI1nXgDvQLjRj+QV1rvATtY1380f6EKV6F8hvKfGCC+6B5OBj3RYtgNS5BXbAYl6I8Gti5ymavjeaokzn3kdtkxGjZHVfd+RtqalEf2IVfopkW9YVd+LkWlcAuXIVKYdMhgYtWeHbaZ/hZNa3hIpSn91uLkxJd8HeKelqcFChvIDeIF9KvFqfAXYv/c6lwCkFDcApFtThZoBqcrFApTpaoBCdr1Bdn+MUa9cCnDJ/WgVbgVwzfow2a1PHclMOXaMcPbf8CDAAKSNzDF/bAzAAAAABJRU5ErkJggg=="},"02kl":function(t,e,i){"use strict";var a=i("C3sG");i.n(a).a},AepU:function(t,e,i){},C3sG:function(t,e,i){},Fybm:function(t,e,i){"use strict";var a={name:"agreement-content",components:{},props:["value","noloading"],data:function(){return{agreementContent:""}},methods:{getAgreement:function(){var t=this;"true"!=this.noloading&&this.$Loading.open();var e=void 0,i=void 0;18==this.value?(e="/app/json/news/getNewsList",i={values:52}):(e="/app/json/news/getList",i={token:this.$store.state.login.token,value:this.value}),this.$http.post(e,i).then((function(e){"true"!=t.noloading&&t.$Loading.close();var i=e.data.data;if(i&&""!=i){var a=i[0];t.agreementContent=a.content}else console.log("ÂçèËÆÆÂÜÖÂÆπ‰∏∫Á©∫")}),(function(e){"true"!=t.noloading&&t.$Loading.close(),t.$Toast("ËØ∑Ê±ÇÊï∞ÊçÆÂ§±Ë¥•ÔºÅ")}))}},mounted:function(){this.getAgreement()},created:function(){}},s=(i("02kl"),i("KHd+")),o=Object(s.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"agreement-content"},[e("div",{staticClass:"content",domProps:{innerHTML:this._s(this.agreementContent)}})])}),[],!1,null,"5e72c5d8",null);e.a=o.exports},GGi1:function(t,e,i){"use strict";i.r(e);var a={name:"agreement",components:{AgreementContent:i("Fybm").a},props:["propsValue"],data:function(){return{value:"",topTitle:"ÂçèËÆÆ"}},methods:{backEvent:function(){this.propsValue?this.$emit("backEvent"):this.$router.go(-1)}},created:function(){this.value=this.$route.query.value?this.$route.query.value:3,this.topTitle="ÂçèËÆÆ",this.propsValue&&(this.value=this.propsValue),3!=this.$store.state.webtype&&(9==this.value?(this.topTitle="ÂèëÁ•®È°ªÁü•",document.title="ÂèëÁ•®È°ªÁü•"):10==this.value?(this.topTitle="ÁßØÂàÜËßÑÂàô",document.title="ÁßØÂàÜËßÑÂàô"):11==this.value?(this.topTitle="ÁßØÂàÜ‰ΩøÁî®ËßÑÂàô",document.title="ÁßØÂàÜ‰ΩøÁî®ËßÑÂàô"):17==this.value?(this.topTitle="Áî®Êà∑ÂçèËÆÆ",document.title="Áî®Êà∑ÂçèËÆÆ"):18==this.value?(this.topTitle="ÊçêËµ†ÂçèËÆÆ",document.title="ÊçêËµ†ÂçèËÆÆ"):63==this.value?(this.topTitle="ÈöêÁßÅÂçèËÆÆ",document.title="ÈöêÁßÅÂçèËÆÆ"):65==this.value?(this.topTitle="‰ΩøÁî®ËßÑÂàô",document.title="‰ΩøÁî®ËßÑÂàô"):80==this.value&&(this.topTitle="‰ΩøÁî®ËßÑÂàô",document.title="‰ΩøÁî®ËßÑÂàô"))}},s=(i("XXIG"),i("KHd+")),o=Object(s.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"agreement theme_bg_white"},[e("nav-top",{attrs:{title:this.topTitle},on:{backEvent:this.backEvent}}),this._v(" "),e("nav-content",[e("div",{staticClass:"content"},[e("AgreementContent",{attrs:{value:this.value}})],1)])],1)}),[],!1,null,"281a2789",null);e.default=o.exports},Npfa:function(t,e,i){"use strict";i.r(e),i("4X9F");var a=i("IkEG"),s=(i("5+UC"),i("05lO")),o=i("Ziuy"),r=i("Xt+m"),n=i("Qcq2"),c=i("tpV1"),l=i("7//l"),u=i("WQzh"),d=i("GGi1"),p=i("Gedb"),h=i("L2JU"),v=i("oCYn"),m=i("ygAv"),_={name:"datetime-picker",components:{},data:function(){return{visible:!1,options:{beginDate:null,dates:15,beginTime:null,spaceHours:1,endTime:24},dateList:[],timeList:[],dateTransform:120,timeTransform:120,dateSelected:0,timeSelected:0,preLocal:"",hasTouchMove:!1,selectedDateTime:null}},methods:{sureEvent:function(){if(this.visible=!1,this.selectedDateTime){var t=this.dateList[this.dateSelected],e=this.timeList[this.timeSelected];this.selectedDateTime(t,e)}},cancelEvent:function(){this.visible=!1},clickStop:function(){},getDateAndDays:function(t){var e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),s=t.getDay();switch(s){case 1:s="ÊòüÊúü‰∏Ä";break;case 2:s="ÊòüÊúü‰∫å";break;case 3:s="ÊòüÊúü‰∏â";break;case 4:s="ÊòüÊúüÂõõ";break;case 5:s="ÊòüÊúü‰∫î";break;case 6:s="ÊòüÊúüÂÖ≠";break;case 0:s="ÊòüÊúüÊó•"}var o=e+"-"+m.a.getzf(i)+"-"+m.a.getzf(a);return{label:o+" "+s,dateStr:o}},getTimeStr:function(t){var e=Math.floor(t),i=t-e,a=Math.floor(60*i);return m.a.getzf(e)+":"+m.a.getzf(a)},timeForPointNum:function(t){var e=t.split(":");if(2==e.length){var i=e[0],a=e[1];return parseInt(i)+a/60}},initData:function(){var t=this.options.beginDate||new Date,e=this.options.dates||15;for(this.dateList=[],this.timeList=[];e>0;){e--;var i=new Date(t),a=this.getDateAndDays(i);this.dateList.push({date:i,label:a.label,dateStr:a.dateStr}),t=i.setDate(i.getDate()+1)}for(var s=this.timeForPointNum(this.options.beginTime||"0:00"),o=this.options.spaceHours||1,r=this.timeForPointNum(this.options.endTime||"24:00");s<r;)this.timeList.push({time:s,label:this.getTimeStr(s)}),s+=o},listTouchMove:function(t,e){if(1==t.touches.length){var i=t.touches[0].clientY;if(""!=this.preLocal){var a=this.preLocal-i;this.moveEvent(a,e)}this.preLocal=i}},listTouchEnd:function(t){this.preLocal="",this.moveEndEvent(t)},moveEvent:function(t,e){this.hasTouchMove=!0,"date"==e?(this.dateTransform-=t,this.dateSelected=this.scrollSelected(this.dateTransform)):(this.timeTransform-=t,this.timeSelected=this.scrollSelected(this.timeTransform))},moveEndEvent:function(t){0!=this.hasTouchMove&&(this.hasTouchMove=!1,"date"==t?(this.dateSelected=this.getEndSelected(this.dateTransform,this.dateList.length),this.scrollTo(120-40*this.dateSelected,this.dateTransform,t)):(this.timeSelected=this.getEndSelected(this.timeTransform,this.timeList.length),this.scrollTo(120-40*this.timeSelected,this.timeTransform,t)))},scrollTo:function(t,e,i){var a=this,s=(t-e)/10;Math.abs(s)<5&&(s=s/Math.abs(s)*5);var o=setInterval((function(){Math.abs(t-e)<Math.abs(s)?(e=t,clearInterval(o),o=null):e+=s,"date"==i?a.dateTransform=e:a.timeTransform=e}),10)},scrollSelected:function(t){t-=120;var e=-Math.round(t/40);return 40*e+t>-10&&40*e+t<10?e:-1},getEndSelected:function(t,e){t-=120;var i=-Math.round(t/40);return i<0?i=0:i>e-1&&(i=e-1),i},selectEvent:function(t,e){1!=this.hasTouchMove&&("date"==e?(this.dateSelected=t,this.scrollTo(120-40*this.dateSelected,this.dateTransform,e)):(this.timeSelected=t,this.scrollTo(120-40*this.timeSelected,this.timeTransform,e)))}},mounted:function(){this.initData()}},f=(i("eDvH"),i("KHd+")),g=Object(f.a)(_,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"datetime-picker",on:{click:function(e){t.visible=!1}}},[i("div",{staticClass:"picker-body",on:{click:function(e){return e.stopPropagation(),t.clickStop(e)}}},[i("div",{staticClass:"tools line_bottom"},[i("div",{staticClass:"btn-cancel theme_font_gray",on:{click:t.cancelEvent}},[t._v("ÂèñÊ∂à")]),t._v(" "),i("div",{staticClass:"title"},[t._v(t._s(t.options.title||"ËØ∑ÈÄâÊã©Êó∂Èó¥"))]),t._v(" "),i("div",{staticClass:"btn-sure theme_font_red",on:{click:t.sureEvent}},[t._v("Á°ÆÂÆö")])]),t._v(" "),i("div",{staticClass:"picker-content"},[i("div",{staticClass:"date-list"},[i("div",{staticClass:"list",style:{height:"280px",transform:"translate(0px, "+t.dateTransform+"px) translateZ(0px)"},on:{touchmove:function(e){return t.listTouchMove(e,"date")},touchend:function(e){return t.listTouchEnd("date")}}},t._l(t.dateList,(function(e,a){return i("div",{key:a,staticClass:"item",class:{active:a==t.dateSelected},staticStyle:{"line-height":"40px"},on:{click:function(e){return t.selectEvent(a,"date")}}},[t._v(t._s(e.label))])})),0)]),t._v(" "),i("div",{staticClass:"time-list"},[i("div",{staticClass:"list",style:{height:"280px",transform:"translate(0px, "+t.timeTransform+"px) translateZ(0px)"},on:{touchmove:function(e){return t.listTouchMove(e,"time")},touchend:function(e){return t.listTouchEnd("time")}}},t._l(t.timeList,(function(e,a){return i("div",{key:e.label,staticClass:"item",class:{active:a==t.timeSelected},staticStyle:{"line-height":"40px"},on:{click:function(e){return t.selectEvent(a,"time")}}},[t._v(t._s(e.label))])})),0)]),t._v(" "),i("div",{staticClass:"mid-div line_top line_bottom",staticStyle:{height:"40px","margin-top":"-20px"}})])])])}),[],!1,null,"12795889",null).exports,y=v.default.extend(g),C=void 0,D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},T={name:"placeorder",components:{PriceOrder:u.a,Agreement:d.default},data:function(){return{contactFlag:!1,contratWayList:[],paramsData:{},payWays:[{text:"Âú®Á∫øÊîØ‰ªò",tag:"1"}],payWays1:[{text:"Âú®Á∫øÊîØ‰ªò",tag:"1"}],contratWayText:"ÈÄâÊã©ËÅîÁ≥ªÊñπÂºè",payWaySelected:1,payWayText:"Âú®Á∫øÊîØ‰ªò",payWayPopShow:!1,contratWayPopShow:!1,usePoints:!1,payDigitals:[],useInvoice:!1,lastRes:{},pointsGain:0,occurData:{},usedCoupons:[],invoiceData:null,invoiceInfo:"",currentInvoice:{},proImgArr:[],showProsDetail:!1,pickupPhone:this.$store.state.userInfo.phone,pickupTime:"",currentStore:{},isFirst:!0,referrer:"",scanCode:"",showAgreement:!1,showPointsRule:!1,digitalPWD:"",dictByAlias:[],easyCardId:"",cardBalance:"",showYjPayInfo:!1,cardType:"",showYJChange:!1,radio:-1,radio1:0,cardList:[],cardDetails:"",userCanUseDigital:"",cardAmount:"",limitType:"",deliveryType:"",complete:!1,backReloadCoupon:!1,pickUpEndTime:"",hasShengxian:!1,selectItem:{},pageType:null,payWayPopShow1:!1,overFlag:!1,wishData:{payNiceName:"",payMsg:""},buyType:"",lbId:"",lsProductName:"",noNavTop:!1,productType:"",serveStartTime:"",serveEndTime:"",selectedServiceTime:"",microStoreCode:"",proSkuDistributionId:"",pickupStartTime:new Date,count:0,isX:!1}},computed:{serviceDateTime:function(){return""==this.selectedServiceTime?"ËØ∑ÈÄâÊã©ÊúçÂä°Êó∂Èó¥":this.selectedServiceTime.date.label+" "+this.selectedServiceTime.time.label},recommendDisabled:function(){return!this.$store.state.globalConfig.recommendDisabled||!Number(this.$store.state.globalConfig.recommendDisabled)},recommend:function(){var t="";return this.$store.state.globalConfig.rfrCodeType&&this.$store.state.rfrCodeMap&&(t=this.$store.state.rfrCodeMap[this.$store.state.globalConfig.rfrCodeType]),(this.$route.params.recommendPhone||this.$route.query.recommendPhone)&&(t=this.$route.params.recommendPhone||this.$route.query.recommendPhone),sessionStorage.getItem("USER_NO")&&(t=sessionStorage.getItem("USER_NO")),this.referrer=t,t},canEditReferrer:function(){return 1==this.$store.state.globalConfig.appCanEditReferrer||!this.recommend}},created:function(){var t=this;console.log(this.$route.params.cutPrice),console.log("false"!=this.$store.state.globalConfig.order_pickup_cancel_tip_show);var e=this.$store.state.globalConfig.order_timeout_pickup_cancel||360;0==parseInt(e)&&(e=360);var i=(new Date).getTime();i+=3600*parseInt(e)*1e3,this.pickUpEndTime=this.$util.getPreTime(i);var a="";if((this.$store.state.globalConfig.acctList||[]).forEach((function(t){"LimitWallet"==t.acctType&&(a=t.startUsing)})),this.limitType=a,this.$route.query.SCREEN)this.getShortAddress(this.$route.query.SCREEN);else{if(this.complete=!0,this.lastRes=this.$route.params.res?this.$route.params.res:{},this.easyCardId=this.$route.params.easyCardId,this.cardType=this.$route.params.cardType,this.buyType=this.$route.params.buyType||"",this.lbId=this.$route.params.lbId||"",this.microStoreCode=this.$route.params.microStoreCode||"",this.proSkuDistributionId=this.$route.params.proSkuDistributionId||"",this.productType=this.$route.params.productType||"",this.serveStartTime=this.$route.params.serveStartTime||"0:00",this.serveEndTime=this.$route.params.serveEndTime||"24:00",this.lsProductName=this.$route.params.lsProductName||"",this.paramsData=this.$route.params.paramsData?this.$route.params.paramsData:{},this.deliveryType=this.$route.params.deliveryType?this.$route.params.deliveryType:"2",this.$route.query.carts)if(this.deliveryType=this.$route.query.deliveryType?this.$route.query.deliveryType:"1",this.noNavTop="1"==this.$route.query.noNavTop,this.paramsData={carts:JSON.parse(this.$route.query.carts),userAddress:this.$store.state.mall2.selectAddress,pickupId:this.$route.query.pickupId,userAddressId:this.$store.state.mall2.selectAddress.id,deliveryType:this.deliveryType},this.$route.query.pickupId)this.$mallCommon.getSysStoreById(this.$route.query.pickupId,(function(e){t.$store.state.mall2.zitiAddress=e,sessionStorage.setItem("RHY_Pickup_Address",t.$route.query.pickupId),t._reSettleCart(t.paramsData.carts),t.$userCenter._setDefaultPickupAddress(e.id)}));else if(this.$route.query.pickupAddress){var s=JSON.parse(this.$route.query.pickupAddress);this.$store.state.mall2.zitiAddress=s,sessionStorage.setItem("RHY_Pickup_Address",this.$route.query.pickupAddress),this._reSettleCart(this.paramsData.carts),this.$userCenter._setDefaultPickupAddress(s.id)}else this._reSettleCart(this.paramsData.carts);else this.$route.params.paramsData?(sessionStorage.setItem("Place_Order_Params",JSON.stringify(this.paramsData)),sessionStorage.setItem("Place_Order_Delivery_Type",this.deliveryType),this.initData()):sessionStorage.getItem("Place_Order_Params")?(this.paramsData=JSON.parse(sessionStorage.getItem("Place_Order_Params")),this.deliveryType=sessionStorage.getItem("Place_Order_Delivery_Type"),this._reSettleCart(null)):this.$MessageBox.alert("ÂΩìÂâçÁä∂ÊÄÅ‰∏çÊîØÊåÅÂà∑Êñ∞ÔºÅ","ÊèêÁ§∫").then((function(e){t.$router.go(-1)}));this.rfrCodeMapAction(),"true"==this.limitType&&this.getCardList()}null!=this.$store.state.mall2.pickUpUser&&""!=this.$store.state.mall2.pickUpUser||(this.$store.state.mall2.pickUpUser=this.$store.state.login.nickName);var o=this.$store.state.globalConfig.order_timeout_pickup_cancel||0,r=new Date;r.setHours(r.getHours()+parseInt(o)),this.pickupTime=r,"wish"==this.$route.query.entryType&&this.getWishMsg(1),/iphone/gi.test(navigator.userAgent)&&812==screen.height&&375==screen.width?(console.log("ÊòØiphonex"),this.isX=!0):(console.log("‰∏çÊòØiphonex"),this.isX=!1)},mounted:function(){this.pageType=this.$route.query.pageType,2==this.pageType&&(this.payWaySelected=2,this.payWayText="ÊèêË¥ß‰ªòÊ¨æ"),514!=this.$route.params.productType&&this.noMath()},methods:D({openServiceTimePicker:function(){var t=this,e=new Date;!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};C||(C=new y),C.options=t,C.selectedDateTime=t.selectedDateTime||function(){console.log("Ê≤°Êúâ‰º†ÂÖ•ÂõûË∞ÉÂáΩÊï∞")},C.visible||(C.$mount(),document.body.appendChild(C.$el),v.default.nextTick((function(){C.visible=!0})))}({beginDate:new Date(e.getTime()+864e5),beginTime:this.serveStartTime,endTime:this.serveEndTime,selectedDateTime:function(e,i){console.log(e,i),t.selectedServiceTime={date:e,time:i}}})},auther:function(t){this.$router.push({path:"/authentication/index",query:{}})},changePer:function(t,e){this.contratWayPopShow=!1,this.selectItem=t,this.radio1=e,1==t.type?this.contratWayText="‰ºÅ‰∏ö":this.contratWayText="‰∏™‰∫∫"},getAuthInfo:function(){var t=this;this.$http.post("/app/json/app_purchase_order/getAuthInfo",{}).then((function(e){var i=e.data;console.log(e),0==i.status?(t.contratWayList=e.data.data,t.contratWayPopShow=!0):t.$Toast(i.info)})).catch((function(e){t.$Toast(e)}))},toServiceEvent:function(t){var e=this,i={id:t.thirdServeId};this.$http.post("/app/json/product/getThirdServeDetail",i).then((function(t){var i=t.data;if(0==i.status){var a=i.data.pageUrl;if(""==a)return void e.$Toast("ÊöÇÊó†ËØ¶ÊÉÖÔºÅ");-1!=a.indexOf("?")?a+="&":a+="?",a+="token="+token+"&lng="+store.state.currentLocation.posx+"&lat="+store.state.currentLocation.posy+"&pickupId="+store.state.mall2.zitiAddress.id+"&webtype="+store.state.webtype,window.location.href=a}}))},getSelectReceiveTime:function(){var t=this.$store.state.globalConfig.order_fresh_pickup_timeout_startday||0,e=this.$util.nextDate(t),i=this.$store.state.globalConfig.order_fresh_pickup_timeout_starttime||"09:00:00";return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+i},getReceiveEndTime:function(){var t=this.$store.state.globalConfig.order_fresh_pickup_timeout_endday||1,e=this.$util.nextDate(t),i=this.$store.state.globalConfig.order_fresh_pickup_timeout_endtime||"15:00:00";return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+i},getShortAddress:function(t){var e=this;this.$request.post("/app/json/short_address/getShortAddress",{code:t}).then((function(t){if(0==t.status){var i=JSON.parse(t.data.addressData);e.deliveryType=i.deliveryType,i.token=e.$store.state.login.token,e.paramsData=i,console.log(i),e._reSettleCart(i.carts)}else e.$toast(t.info)}))},getTotalPriceDuan:function(t){return this.$util.toDecimal2(this.occurData.payAmount).split(".")[t]},queryBtn:function(){this.showYJChange=!1,"a"==this.radio?this._reSettleCart(null,""):this._reSettleCart(null,this.cardDetails.cardNo)},getCardList:function(){var t=this;if(this.occurData.store){var e=[];this.occurData.store.forEach((function(t){t.noActivityCart.forEach((function(t){e.push({skuId:t.skuId,storeOuCode:t.storeOuCode})}))})),this.$request.post("/app/json/app_user_easy_card/getCardList",{proSkus:e}).then((function(e){if(0==e.status){if(t.cardList=e.data||[],t.cardList.length)for(var i in t.radio=-1,t.cardList)t.cardList[i].cardNo==t.$route.params.cardNo&&(t.radio=parseInt(i))}else t.$Toast(e.info)}))}},changeYjCard:function(t){"a"!=this.radio?(this.cardAmount=t.balance,this.cardDetails=t):(this.cardAmount=0,this.cardDetails="")},getCanNotUseStr:function(t){return 1==t||3==t?"‰ΩôÈ¢ù‰∏çË∂≥":1==t?"ËÆ¢ÂçïÈáëÈ¢ù‰∏çÂ§ü":"Êú™Áü•ÂéüÂõ†"},getDictByAlias:function(){var t=this,e={token:this.$store.state.login.token,alias:"rewards_group"};this.$http.post("/app/json/app_dict/getDictByAlias",e).then((function(e){var i=e.data;0==i.status&&0!=i.data.length&&(t.dictByAlias=i.data)}))},getDigitalDisplayName:function(t){return this.$mallCommon.accTypeToName(t,"200001")},pointsRuleEvent:function(){this.showPointsRule=!0},getEndDate:function(){var t=this.$store.state.globalConfig.order_timeout_pickup_cancel||0,e=new Date(this.pickupStartTime.getTime());return t?e.setHours(e.getHours()+parseInt(t)):e.setDate(e.getDate()+14),e},scanCodeFunc:function(){var t=this;this.$bridgefunc.scanCode((function(e){t.scanCode=e.code,t.referrer=e.code}))},getTotalPrice:function(){return this.$util.toDecimal2(this.occurData.payAmount)},getImgArrs:function(t){for(var e=[],i=0;i<t.activity.length;i++)for(var a=t.activity[i].cart,s=0;s<a.length;s++)e.push(a[s].phPictureUrl);for(var o=t.noActivityCart,r=0;r<o.length;r++)e.push(o[r].phPictureUrl);return e},getNoStockImgArrs:function(t){for(var e=[],i=[],a=0;a<t.activity.length;a++)for(var s=t.activity[a].cart,o=0;o<s.length;o++){var r=s[o];if(r.number>r.stockNumber)""!=r.currentSelfActivity&&r.currentSelfActivity.mktActivityId&&""!=r.currentSelfActivity.mktActivityId&&(r.selfActivityId=r.currentSelfActivity.mktActivityId),e.push(r);else{var n={id:"",skuId:r.skuId,storeOuCode:r.storeOuCode,number:r.number,activityId:r.activityId,proSkuDistributionId:r.proSkuDistributionId||"",checked:r.checked,isGift:r.isGift,spCode:r.spCode};""!=r.currentSelfActivity&&r.currentSelfActivity.mktActivityId&&""!=r.currentSelfActivity.mktActivityId&&(n.selfActivityId=r.currentSelfActivity.mktActivityId),i.push(n)}}for(var c=t.noActivityCart,l=0;l<c.length;l++){var u=c[l];if(u.number>u.stockNumber)""!=u.currentSelfActivity&&u.currentSelfActivity.mktActivityId&&""!=u.currentSelfActivity.mktActivityId&&(u.selfActivityId=u.currentSelfActivity.mktActivityId),e.push(u);else{var d={id:"",skuId:u.skuId,storeOuCode:u.storeOuCode,number:u.number,activityId:u.activityId,proSkuDistributionId:u.proSkuDistributionId||"",checked:u.checked,isGift:u.isGift,spCode:u.spCode};""!=u.currentSelfActivity&&u.currentSelfActivity.mktActivityId&&""!=u.currentSelfActivity.mktActivityId&&(d.selfActivityId=u.currentSelfActivity.mktActivityId),i.push(d)}}return{noStockArr:e,canBuyArr:i}},showFreightDetail:function(){for(var t=[],e=0;e<this.occurData.store.length;e++){var i=this.occurData.store[e],a={};a.storeName=i.storeName,a.freightAmount=i.freightAmount,a.freightDiscountAmount=i.freightDiscountAmount,a.proImgs=this.getImgArrs(i),t.push(a)}n.a.open({initData:{listData:t},sureEvent:function(){n.a.close()}})},pickerConfirm:function(t){var e="ÊòüÊúü"+"Â§©‰∏Ä‰∫å‰∏âÂõõ‰∫îÂÖ≠ ".charAt(new Date(t).getDay()),i=this.$util.getMyDate(t);return console.log(t),i+" „Äê"+e+"„Äë"},openPicker:function(){this.$refs.dateDom.open()},showProsDetailEvent:function(t){this.currentStore=t,this.showProsDetail=!0},getPeisongString:function(t){return"0"==t?"Âø´ÈÄíÈÖçÈÄÅ":"1"==t?"‰∫¨‰∏úÈÖçÈÄÅ":"Á¨¨‰∏âÊñπÈÖçÈÄÅ"},toSelectZitiAddress:function(){if("cnooc"!=this.$store.state.globalConfig.app_home_special_flag){console.log(this.paramsData);for(var t=this.paramsData.carts,e=[],i=0;i<t.length;i++)e.push(t[i].skuId);this.$router.push({path:"/mall2/mypickupaddress",query:{skuIds:JSON.stringify(e)}})}},toSelectAddress:function(){this.$router.push({path:"/mall2/addresslist"})},useInvoiceEvent:function(){var t=this;if(this.useInvoice=!this.useInvoice,this.useInvoice&&null==this.invoiceData){this.$Loading.open();var e={token:this.$store.state.login.token};this.$http.post("/app/json/order_invoice/loadTwoTypeDefaultUserInvoiceHead",e).then((function(e){t.$Loading.close();var i=e.data;0==i.status?(t.invoiceData=i.data,"personal"==t.invoiceData.current?(t.currentInvoice=t.invoiceData.personal,t.currentInvoice.name=t.invoiceData.personal.title,t.invoiceInfo=t.invoiceData.personal.title,t.currentInvoice.type=0):(t.currentInvoice.type=1,t.currentInvoice=t.invoiceData.company,t.currentInvoice.invoiceTitle=t.invoiceData.company.title,t.invoiceInfo=t.invoiceData.company.title),t.invoiceData.phone=t.$store.state.login.phone,t.invoiceData.email=t.$store.state.userInfo.email,t.invoiceData.name=t.$store.state.userInfo.nickName):t.$Toast(i.info)}),(function(e){t.$Loading.close(),t.$Toast("ËØ∑Ê±ÇÊï∞ÊçÆÂ§±Ë¥•ÔºÅ")}))}},changeInvoice:function(){var t=this;r.a.open({initData:D({},this.invoiceData,{token:this.$store.state.login.token}),selectedInvoice:function(e){console.log(e),t.currentInvoice=e,0==e.type?(t.invoiceInfo="‰∏™‰∫∫",t.invoiceData.personal.title=e.name,t.invoiceData.personal.userPhone=e.phone,t.invoiceData.personal.userEmail=e.email):(t.invoiceInfo=e.company,t.invoiceData.company.userPhone=e.phone,t.invoiceData.company.userEmail=e.email,t.invoiceData.company.orgTaxNo=e.identifyNumber,t.invoiceData.company.title=e.company),r.a.close()},invoiceInformation:function(){t.showAgreement=!0}})},reloadSelectedCoupon:function(){if(0!=this.backReloadCoupon){this.backReloadCoupon=!1;var t=this.occurData.couNo;if(this.usedCoupons=[],t.length>0)for(var e=0;e<t.length;e++)this.usedCoupons.push({couNo:t[e]});for(var i=[],a=0;a<this.occurData.userCanUseCoupon.length;a++){var s=this.occurData.userCanUseCoupon[a].couNo;this.occurData.userCanUseCoupon[a].selected=!1;for(var r=0;r<this.usedCoupons.length;r++)if(this.usedCoupons[r].couNo==s){this.occurData.userCanUseCoupon[a].selected=!0;break}i.push(this.occurData.userCanUseCoupon[a])}o.a.reloadSelectedCoupon(i,[],this.occurData.userCanUseWhenNotSelectCoupon)}},couponEvent:function(){for(var t=this,e=[],i=0;i<this.occurData.userCanUseCoupon.length;i++){var a=this.occurData.userCanUseCoupon[i].couNo;this.occurData.userCanUseCoupon[i].selected=!1;for(var s=0;s<this.usedCoupons.length;s++)if(this.usedCoupons[s].couNo==a){this.occurData.userCanUseCoupon[i].selected=!0;break}e.push(this.occurData.userCanUseCoupon[i])}o.a.open({initData:{listData:[],userCanNotUseCoupon:this.occurData.userCanNotUseCoupon,userCanUseCoupon:e,userCanUseWhenNotSelectCoupon:this.occurData.userCanUseWhenNotSelectCoupon,type:"use",skuId:"",categoryId:"",storeOuCode:"",token:this.$store.state.login.token,payAmount:this.$util.toDecimal2(parseFloat(this.occurData.payAmount)+parseFloat(this.occurData.couponAmount))},selectedCoupon:function(e){t.usedCoupons=e,t.backReloadCoupon=!0,t._reSettleCart(null)}})},useDigitalEvent:function(t){if(t.userCanUseDigital<=0){var e=this.getCanNotUseStr(t.deductionState);this.$Toast(e+"Ôºå‰∏çÊîØÊåÅ"+this.getDigitalDisplayName(t.acctType)+"ÊîØ‰ªòÔºÅ")}else{var i=t.acctType;if(t.payDigital<=t.fixedDigital){for(var a=[],s=0;s<this.payDigitals.length;s++)this.payDigitals[s].acctType!=i&&a.push(this.payDigitals[s]);this.payDigitals=a,this.payDigitals.push({acctType:i,payDigital:t.userCanUseDigital+t.fixedDigital})}else{for(var o=[],r=0;r<this.payDigitals.length;r++)this.payDigitals[r].acctType!=i?o.push(this.payDigitals[r]):o.push({acctType:i,payDigital:t.fixedDigital});this.payDigitals=o}this._reSettleCart(null)}},usePointsEvent:function(){0!=this.occurData.userCanUsePoints?(this.usePoints=!this.usePoints,this._reSettleCart(null)):this.$Toast("ÊÇ®Ê≤°ÊúâÂΩìÂâçËÆ¢ÂçïÂèØÁî®ÁßØÂàÜÔºÅ")},payWayShow:function(){2==this.pageType?this.payWayPopShow1=!0:this.payWayPopShow=!0},contratWayShow:function(){this.getAuthInfo()},payWayEvent:function(t){0!=t.tag?(this.payWaySelected=t.tag,this.payWayText=t.text):this.$Toast("ÊöÇ‰∏çÊîØÊåÅÔºÅ")},payWayEvent1:function(t,e){0!=t.tag?(this.payWaySelected=e,this.payWayText=t.text):this.$Toast("ÊöÇ‰∏çÊîØÊåÅÔºÅ")},popSureEvent:function(){this.payWayPopShow=!1},popSureEvent1:function(){this.contratWayPopShow=!1},popSureEvent2:function(){this.payWayPopShow1=!1},popClose:function(){this.payWayPopShow=!1},popClose2:function(){this.payWayPopShow1=!1},popClose1:function(){this.contratWayPopShow=!1},_reSettleCart:function(t,e){var i=this;console.log(333),this.$Loading.open();var a=this.paramsData;if(a.couNo=[],t)a.carts=t;else if(this.usedCoupons.length>0)for(var s=0;s<this.usedCoupons.length;s++)a.couNo.push(this.usedCoupons[s].couNo);else a.couNo.push("-1");a.limitWalletCardNo=e,2==this.deliveryType&&""!=this.$store.state.mall2.selectAddress.id&&(a.userAddressId=this.$store.state.mall2.selectAddress.id),a.pickupId=this.$store.state.mall2.zitiAddress.id;for(var o=[],r=0;r<this.payDigitals.length;r++){var n=this.payDigitals[r];"LimitWallet"!=n.acctType&&o.push(n)}a.payDigital=o,this.$http.post("/app/json/app_cart/SettleCart",a).then((function(t){i.$Loading.close();var e=t.data;i.complete=!0,0==e.status?(i.hasShengxian=!1,i.lastRes=e.data,i.paramsData=a,i.initData(),"true"==i.limitType&&i.getCardList(),i.$mallCommon.isExistCanNotAttendActivity(e.data.occur,!0)):(i.$Toast(e.info),i.reloadSelectedCoupon())}),(function(t){i.$Loading.close(),i.$Toast("ËØ∑Ê±ÇÊï∞ÊçÆÂ§±Ë¥•ÔºÅ"),i.reloadSelectedCoupon()}))},checkProductStock:function(){var t=this;if(2!=this.pageType||this.selectItem.realName)if(8!=this.productType||""!=this.selectedServiceTime)if(console.log("save"),this.occurData.store&&0!=this.occurData.store.length){if(1==this.deliveryType){if(null==this.$store.state.mall2.pickUpUser||""==this.$store.state.mall2.pickUpUser){if(514!=this.$route.params.productType)return void this.$Toast("ËØ∑ÂÆåÂñÑËá™Êèê‰∫∫‰ø°ÊÅØ")}else if(""==this.pickupPhone&&514!=this.$route.params.productType)return void this.$Toast("ËØ∑ÂÆåÂñÑËá™Êèê‰∫∫‰ø°ÊÅØ");this.$bridgefunc.vuexStorage()}if(this.$store.state.mall2.selectAddress.id>0||2!=this.deliveryType||"1"==this.occurData.needVirtualUserPhone||514==this.$route.params.productType)if("1"!=this.occurData.needPickupId||this.$store.state.mall2.zitiAddress.id>0){if(this.occurData&&this.occurData.needReferrer&&(!this.referrer||0==this.referrer.length))return this.$Toast("ËØ∑Â°´ÂÜôÊé®Ëçê‰∫∫"),!1;for(var e=0;e<this.payDigitals.length;e++){var i=this.payDigitals[e];if(i.payDigital>0&&i.payDigital>i.userBalanceDigital){var a="ÂèØÁî®";return a+=this.getDigitalDisplayName(i.acctType),a+="‰ΩôÈ¢ù‰∏çË∂≥ÔºÅ",void this.$Toast(a)}}for(var s=[],o=[],r=!1,n=0;n<this.occurData.store.length;n++){var l=this.occurData.store[n],u={};u.storeName=l.storeName;var d=this.getNoStockImgArrs(l);o=o.concat(d.canBuyArr),u.noStockArr=d.noStockArr,d.noStockArr.length>0&&(r=!0),s.push(u)}0!=o.length?this.cardBalance.balance-this.number<=0?this.$Toast("ÂΩìÂâçÂå∫ÂüüÂïÜÂìÅÂ∫ìÂ≠ò‰∏çË∂≥ÔºÅ"):r?c.a.open({initData:{listData:s},cancelEvent:function(){c.a.close()},submitEvent:function(){c.a.close(),t._reSettleCart(o)}}):2==this.pageType?"ÊèêË¥ß‰ªòÊ¨æ"==this.payWayText?(this.overFlag=!0,this._submitOrder(o)):this.checkHighest_recharge(o):this.checkCouponPrice(o):this.$Toast("ÂΩìÂâçÂå∫ÂüüÂïÜÂìÅÂ∫ìÂ≠ò‰∏çË∂≥ÔºÅ")}else this.$Toast("ËØ∑ÈÄâÊã©ÂïÜÂìÅÂÖëÊç¢ÁÇπÔºÅ");else this.$Toast("ËØ∑Áª¥Êä§Âπ∂ÈÄâÊã©Êî∂Ë¥ßÂú∞ÂùÄÔºÅ")}else 1==this.deliveryType?this.$Toast("ÂΩìÂâçËá™ÊèêÁÇπÊó†Â∫ìÂ≠òÔºÅ"):this.$Toast("ÂΩìÂâçÂú∞ÂùÄÊó†Â∫ìÂ≠òÔºÅ");else this.$Toast("ËØ∑ÈÄâÊã©ÊúçÂä°Êó∂Èó¥");else this.$Toast("ËØ∑ÈÄâÊã©È¢ÑÁ∫¶ÂçïËÅîÁ≥ªÊñπÂºèÔºÅ")},checkHighest_recharge:function(t){var e=this;this.occurData.amount>1e4?Object(s.a)("ËÆ¢ÂçïÈáëÈ¢ùÂ∑≤Ë∂ÖËøá10000ÂÖÉÔºåËØ∑ÈÄâÊã©ÊèêË¥ßÊîØ‰ªòÊîØ‰ªòÊñπÂºè"):this.occurData.amount>this.$store.state.globalConfig.bulkpurchase_modifyprice?(this.overFlag=!0,a.a.confirm({title:"Ê†áÈ¢ò",confirmButtonText:"Áî≥ËØ∑Êîπ‰ª∑",className:"price-con",getContainer:".placeorder",cancelButtonText:"ÁÆó‰∫ÜÂêß~",message:"ÊÇ®ÁöÑËÆ¢ÂçïÈáëÈ¢ùÂ∑≤Âà∞ËææÊîπ‰ª∑ÈáëÈ¢ù"+this.$store.state.globalConfig.bulkpurchase_modifyprice+"ÂÖÉÔºåÂèØÈÄâÊã©ËÅîÁ≥ªÁÆ°ÁêÜÂëòËøõË°åÊîπ‰ª∑ÂêéËøõË°åÊîØ‰ªò"}).then((function(){e.checkCouponPrice(t)})).catch((function(){}))):e.checkCouponPrice(t)},checkCouponPrice:function(t){var e=this;this.occurData.cashCouponFaceValue>this.occurData.cashCouponAmount?this.$MessageBox.confirm("ÊÇ®ÁöÑ‰ºòÊÉ†Âà∏ÈáëÈ¢ùÊØîËÆ¢ÂçïÈáëÈ¢ùÂ§ßÔºåÁ°ÆÂÆö‰ΩøÁî®ÂêóÔºü","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö"}).then((function(i){e.checkNeedPwd(t)})).catch((function(t){})):this.checkNeedPwd(t)},checkNeedPwd:function(t){var e=this;if(this.digitalPWD="",this.occurData.needPayPwd){if("1"==this.occurData.payPwdState)return void this.$Toast("ÊîØ‰ªòÂØÜÁ†ÅÂ∑≤ÈîÅÂÆöÔºåËØ∑Á®çÂêéÂÜçËØïÔºÅ");l.a.open({initData:{payPwdState:this.occurData.payPwdState},toSettingPwd:function(){e.$router.push({path:"/usercenter/nosetpwd",query:{isSet:0}}),l.a.close()},inputFinished:function(i){e.digitalPWD=i,e._submitOrder(t),l.a.close()}})}else this._submitOrder(t)},pustLiveStreamMsg:function(){var t=this;if(""!=this.lbId){var e={lbId:this.lbId,content:"„Äê‰∏ãÂçï„ÄëÊàêÂäü‰∏ãÂçï "+this.lsProductName+" üéâüéâüéâ"};this.$http.post("/app/json/live_broadcast/comment",e).then((function(e){var i=e.data;0==i.status||t.$Toast(i.info)}),(function(t){console.log(t)}))}},updateBargainPayInfo:function(t){var e={id:t.id,orderId:t.orderId};this.$http.post("/app/json/user_bargain/updateBargainPayInfo",e).then((function(t){}))},_submitOrder:function(t){var e=this,i=this.$util.deepClone(this.paramsData);if(1==this.deliveryType&&(i.pickupReceiver=this.$store.state.mall2.pickUpUser,i.pickupMobile=this.pickupPhone,"false"!=this.$store.state.globalConfig.order_pickup_time_selecter_show)){var a=this.$util.getMyDate(this.pickupTime);i.selectReceiveTime=a}if(i.pickupId=this.$store.state.mall2.zitiAddress.id,8==this.productType&&""!=this.selectedServiceTime&&(i.selectReceiveTime=this.selectedServiceTime.date.dateStr+" "+this.selectedServiceTime.time.label+":00"),i.orderScene=this.$util.orderScene(),i.carts=t,i.couNo=[],this.usedCoupons.length>0)for(var s=0;s<this.usedCoupons.length;s++)i.couNo.push(this.usedCoupons[s].couNo);i.remark=[];for(var o=0;o<this.occurData.store.length;o++){var r=this.occurData.store[o],n={storeOuCode:r.storeOuCode,remark:r.remark};i.remark.push(n)}if("1"==this.occurData.needVirtualUserPhone&&(i.virtualUserPhone=this.$store.state.login.phone),i.userAddress=this.$store.state.mall2.selectAddress,i.userAddressId=this.$store.state.mall2.selectAddress.id,i.token=this.$store.state.login.token,i.payDigital=this.payDigitals,""!=this.digitalPWD&&(i.payPwd=Object(p.a)(this.digitalPWD)),this.referrer&&this.referrer.length&&(i.rfrCode=this.referrer,this.referrer==this.scanCode?i.rfrCodeType=2:i.rfrCodeType=1),i.userInvoice={},null!=this.currentInvoice&&1==this.useInvoice&&(i.userInvoice.invoiceUse="1",i.userInvoice.invoiceType="1",0==this.currentInvoice.type?(i.userInvoice.invoiceTitleType="4",i.userInvoice.invoiceTitle="‰∏™‰∫∫"):(i.userInvoice.invoiceTitleType="5",i.userInvoice.invoiceTitle=this.currentInvoice.company),i.userInvoice.invoiceUserName=this.currentInvoice.name,i.userInvoice.invoiceUserEmail=this.currentInvoice.email,i.userInvoice.invoiceUserMobile=this.currentInvoice.phone,i.userInvoice.invoiceUserOrgTaxNo=this.currentInvoice.identifyNumber,i.userInvoice.invoiceDetailType=this.currentInvoice.selectedGoodsType),"wish"==this.$route.query.entryType){if(!this.wishData.payMsg||!this.wishData.payNiceName)return!1;i.payUserNickName=this.wishData.payNiceName,i.payUserMsg=this.wishData.payMsg,i.userAddressId=this.paramsData.userAddressId,i.provinceId=this.paramsData.provinceId,i.cityId=this.paramsData.cityId,i.countryId=this.paramsData.countryId,delete i.payDigital,delete i.userAddress}"songli"==this.buyType&&(i.orderPayType="4");var c=sessionStorage.getItem("MICRO_StoreCode");c&&(i.microStoreCode=c),this.microStoreCode&&(i.microStoreCode=this.microStoreCode),this.$Loading.open(),this.$http.post("/app/json/app_shopping_order/submit",i).then((function(a){e.$Loading.close();var s=a.data;0==s.status?(i.bargainOrderId&&e.updateBargainPayInfo({id:i.bargainOrderId,orderId:s.data.orderId}),sessionStorage.removeItem("RHY_Pickup_Address"),sessionStorage.removeItem("Place_Order_Params"),sessionStorage.removeItem("Place_Order_Delivery_Type"),0==e.getTotalPrice()?(e.pustLiveStreamMsg(),"songli"==e.buyType?e.$router.replace({path:"/config-giftBox",query:{payInfo:JSON.stringify(s.data),carts:JSON.stringify(t),deliveryType:e.deliveryType}}):e.$router.replace({path:"/mall2/paysuccess",query:{selectedIndex:1,orderCategory:e.paramsData.orderCategory,vipUnitUserCode:e.paramsData.vipUnitUserCode,name:e.$route.params.name}})):e.overFlag?e.$router.replace({path:"/mall2/submitFinished",query:{payInfo:JSON.stringify(s.data),occurOuCode:e.occurData.ouCode,orderCategory:e.paramsData.orderCategory,vipUnitUserCode:e.paramsData.vipUnitUserCode,buyType:e.buyType,giftCards:JSON.stringify(t),deliveryType:e.deliveryType,lbId:e.lbId}}):e.$router.replace({path:"/mall2/checkstand",query:{payInfo:JSON.stringify(s.data),occurOuCode:e.occurData.ouCode,orderCategory:e.paramsData.orderCategory,vipUnitUserCode:e.paramsData.vipUnitUserCode,buyType:e.buyType,giftCards:JSON.stringify(t),deliveryType:e.deliveryType,name:e.$route.params.name,lbId:e.lbId,cutPrice:!0}})):e.$Toast(s.info)}),(function(t){e.$Loading.close(),e.$Toast("ËØ∑Ê±ÇÊï∞ÊçÆÂ§±Ë¥•ÔºÅ")}))},returnStoreProducts:function(t){for(var e=0,i=0,a=[],s=[],o=0;o<t.noActivityCart.length;o++){var r=t.noActivityCart[o];i+=r.number,512==r.productType?s.push(r):(e++,r.showLinePrice=!0,a.push(r),6==r.productType&&(this.hasShengxian=!0))}for(var n=0;n<t.activity.length;n++)for(var c=0;c<t.activity[n].cart.length;c++){var l=t.activity[n].cart[c];i+=l.number,512==l.productType?s.push(l):(e++,l.showLinePrice=!0,a.push(l),6==l.productType&&(this.hasShengxian=!0))}var u={num:e,proNum:i,proArr:a,serviceArr:s};t.storeProData=u,this.count=t.storeProData.proNum},initData:function(){this.pointsGain=this.lastRes.pointsGain,this.occurData=this.lastRes.occur[0];var t=this.occurData.beginPickupTime;if(t&&(this.pickupStartTime=new Date(t.replace(/-/g,"/"))),!this.occurData)return this.occurData={},void(1==this.deliveryType?this.$Toast("ÂΩìÂâçËá™ÊèêÁÇπÊó†Â∫ìÂ≠òÔºÅ"):this.$Toast("ÂΩìÂâçÂú∞ÂùÄÊó†Â∫ìÂ≠òÔºÅ"));for(var e=0;e<this.occurData.store.length;e++){var i=this.occurData.store[e];this.returnStoreProducts(i)}var a=this.occurData.couNo;if(this.usedCoupons=[],a&&a.length>0)for(var s=0;s<a.length;s++)this.usedCoupons.push({couNo:a[s]});this.payDigitals=[];for(var o=0;o<this.occurData.digitalList.length;o++){var r=this.occurData.digitalList[o];"LimitWallet"==r.acctType&&(this.cardAmount=r.userBalanceDigital,this.userCanUseDigital=r.userCanUseDigital),r.payDigital>r.fixedDigital?this.payDigitals.push({acctType:r.acctType,userBalanceDigital:r.userBalanceDigital,payDigital:r.userCanUseDigital+r.fixedDigital}):this.payDigitals.push({acctType:r.acctType,userBalanceDigital:r.userBalanceDigital,payDigital:r.fixedDigital})}this.reloadSelectedCoupon()},noMath:function(){var t=this;this.$route.params.noMatch&&this.$route.params.noMatch&&this.$MessageBox.confirm("Ê≤°ÊúâÁõ∏ÂÖ≥Âå∫ÂüüÁöÑÊî∂Ë¥ßÂú∞ÂùÄÔºåÊòØÂê¶Ë¶ÅÊ∑ªÂä†Ôºü","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö"}).then((function(e){t.$router.push({path:"addaddress",query:{type:1,isSave:!0,direct:"direct"}})})).catch((function(t){}))},getWishMsg:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$http.post("/app/json/wish_order/getRandomWishOrderConfig",{type:2,isDefault:e}).then((function(e){var i=e.data;0==i.status?t.wishData=i.data:t.$Toast(i.info)})).catch((function(e){t.$Toast(e)}))},getContentTop:function(){return this.noNavTop?"top: 0px;":""}},Object(h.b)(["rfrCodeMapAction"])),activated:function(){this.isFirst?this.isFirst=!1:this._reSettleCart(null)},beforeRouteLeave:function(t,e,i){"/mall2/addresslist"==t.path||"/mall2/mypickupaddress"==t.path||"/mall2/addaddress"==t.path||"/usercenter/agreement"==t.path||"/usercenter/nosetpwd"==t.path||this.$keepaliveHelper.deleteCache(this),i()}},b=(i("iUUy"),Object(f.a)(T,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"placeorder mall2"},[t.noNavTop?t._e():a("nav-top",{on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),t.complete?a("nav-content",{style:t.getContentTop()},[a("div",{staticClass:"flex-div"},[a("div",{staticClass:"scroll-div"},["songli"!=t.buyType&&2==t.deliveryType&&1==t.occurData.needAddress&&514!=t.$route.params.productType||1==t.deliveryType&&"wish"!=t.$route.query.entryType&&514!=t.$route.params.productType?a("div",{staticClass:"block-div no-padding-bottom"},[t.$store.state.mall2.selectAddress.id>0&&2==t.deliveryType?a("div",{on:{click:t.toSelectAddress}},[a("div",{staticClass:"flex-row"},[a("div",{staticClass:"name theme_font_black"},[t._v("\n                "+t._s(t.$store.state.mall2.selectAddress.receiverName)+"\n              ")]),t._v(" "),a("div",{staticClass:"name theme_font_black"},[t._v("\n                "+t._s(t.$store.state.mall2.selectAddress.mobile)+"\n              ")]),t._v(" "),1==t.$store.state.mall2.selectAddress.isDefault?a("div",{staticClass:"act-item-full theme_standard_bg theme_font_white"},[t._v("\n                ÈªòËÆ§\n              ")]):t._e()]),t._v(" "),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"full theme_font_tint font-small"},[t._v("\n                "+t._s(t.$store.state.mall2.selectAddress.addressFull)+"\n              ")]),t._v(" "),a("div",[a("i",{staticClass:"iconfont mall-gengduojiantou theme_font_tint icon-font"})])])]):t._e(),t._v(" "),t.$store.state.mall2.selectAddress.id>0||2!=t.deliveryType||514==t.$route.params.productType?t._e():a("div",{on:{click:t.toSelectAddress}},[a("div",{staticClass:"flex-row"},[t._v("ËØ∑ÈÄâÊã©Âú∞ÂùÄ‰ø°ÊÅØ")])]),t._v(" "),t.$store.state.mall2.zitiAddress.id>0&&1==t.deliveryType&&514!=t.$route.params.productType?a("div",{on:{click:t.toSelectZitiAddress}},[a("div",{staticClass:"pickup-shop"},[a("div",{staticStyle:{flex:"1"}},[a("div",{staticClass:"flex-row"},[a("div",{staticClass:"name theme_font_black"},[t._v("\n                    Ëá™ÊèêÂ∫óÈì∫Ôºö"+t._s(t.$store.state.mall2.zitiAddress.storeName)+"\n                  ")])]),t._v(" "),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"full theme_font_tint font-small",staticStyle:{"line-height":"1.4"}},[t._v("\n                    "+t._s(t.$store.state.mall2.zitiAddress.addressFull)+"\n                    "+t._s(t.$store.state.mall2.zitiAddress.phone&&""!=t.$store.state.mall2.zitiAddress.phone?"("+t.$store.state.mall2.zitiAddress.phone+")":"")+"\n                  ")])])]),t._v(" "),a("div",[a("i",{staticClass:"iconfont mall-gengduojiantou theme_font_tint icon-font"})])])]):t._e(),t._v(" "),a("div",{staticClass:"colorfulline"},[a("img",{attrs:{src:"static/image/mall2/colorfulline.png"}})])]):t._e(),t._v(" "),1==t.deliveryType&&514!=t.$route.params.productType?a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row"},[a("div",{staticClass:"title theme_font_black"},[t._v("ÊèêË¥ß‰∫∫‰ø°ÊÅØ")])]),t._v(" "),a("div",{staticClass:"flex-row flex-row-smallbottom"},[a("div",{staticClass:"label-middle theme_font_common",staticStyle:{width:"2.6rem"}},[t._v("\n              ÂßìÂêç\n            ")]),t._v(" "),a("div",{staticClass:"full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.mall2.pickUpUser,expression:"$store.state.mall2.pickUpUser"}],staticClass:"row-input",attrs:{placeholder:"ËØ∑ËæìÂÖ•ÊèêË¥ß‰∫∫ÂßìÂêç"},domProps:{value:t.$store.state.mall2.pickUpUser},on:{input:function(e){e.target.composing||t.$set(t.$store.state.mall2,"pickUpUser",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label-middle theme_font_common",staticStyle:{width:"2.6rem"}},[t._v("\n              ËÅîÁ≥ªÊñπÂºè\n            ")]),t._v(" "),a("div",{staticClass:"full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pickupPhone,expression:"pickupPhone"}],staticClass:"row-input",attrs:{placeholder:"ËØ∑ËæìÂÖ•ÊèêË¥ß‰∫∫ËÅîÁ≥ªÊñπÂºè"},domProps:{value:t.pickupPhone},on:{input:function(e){e.target.composing||(t.pickupPhone=e.target.value)}}})])]),t._v(" "),0==t.hasShengxian&&"false"!=t.$store.state.globalConfig.order_pickup_time_selecter_show?a("div",{staticClass:"flex-row",on:{click:t.openPicker}},[a("div",{staticClass:"label-middle theme_font_common",staticStyle:{width:"2.6rem"}},[t._v("\n              È¢ÑÁ∫¶Ëá™ÊèêÊó∂Èó¥\n            ")]),t._v(" "),t.pickupTime?a("div",{staticClass:"full theme_font_common",class:{theme_font_tint_i:""==t.pickupTime},staticStyle:{"text-align":"right"}},[t._v("\n              "+t._s(t.pickerConfirm(t.pickupTime))+"\n            ")]):t._e(),t._v(" "),a("div",[a("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])]):t._e(),t._v(" "),1==t.hasShengxian?a("div",{staticClass:"flex-row"},[a("div",{staticClass:"pick-up-tip"},[t._v("\n              ÊèêË¥ßÊó∂Èó¥Ôºö"+t._s(t.getSelectReceiveTime())+"Âà∞"+t._s(t.getReceiveEndTime())+"ÔºåË∂ÖËøáËá™ÊèêÊó∂Èó¥ÂêéÁ≥ªÁªüÂ∞ÜËá™Âä®ÂèñÊ∂àËÆ¢Âçï"),"0"!=t.$store.state.globalConfig.order_fresh_pickup_cancel_type?a("span",[t._v("Âπ∂ÈÄÄÊ¨æ")]):t._e(),t.$store.state.globalConfig.order_pickup_cancel_tip_extend?a("span",[t._v(t._s(t.$store.state.globalConfig.order_pickup_cancel_tip_extend))]):t._e()])]):"false"!=t.$store.state.globalConfig.order_pickup_cancel_tip_show&&2!=t.$store.state.globalConfig.presaleType?a("div",{staticClass:"flex-row"},[a("div",{staticClass:"pick-up-tip"},[t._v("\n              ËØ∑‰∫é"+t._s(t.pickUpEndTime)+"‰πãÂâçÊèêË¥ßÔºåË∂ÖËøáËá™ÊèêÊó∂Èó¥ÂêéÁ≥ªÁªüÂ∞ÜËá™Âä®ÂèñÊ∂àËÆ¢ÂçïÂπ∂ÈÄÄÊ¨æ"),t.$store.state.globalConfig.order_pickup_cancel_tip_extend?a("span",[t._v(t._s(t.$store.state.globalConfig.order_pickup_cancel_tip_extend))]):t._e()])]):t._e()]):t._e(),t._v(" "),"wish"==t.$route.query.entryType?a("div",{staticClass:"block-div wish-message-container"},[a("div",{staticClass:"top"},[a("p",{staticClass:"title"},[t._v("ÂØπTAËØ¥ÁöÑËØù")]),t._v(" "),a("span",{staticClass:"random-btn",on:{click:function(e){return t.getWishMsg()}}},[t._v("ÈöèÊú∫Êç¢‰∏ÄÂè•")])]),t._v(" "),a("div",{staticClass:"msg-input-c"},[a("van-field",{staticClass:"msg-input",attrs:{type:"textarea",placeholder:"ËØ∑ËæìÂÖ•ÊÉ≥ËØ¥ÁöÑËØù"},model:{value:t.wishData.payMsg,callback:function(e){t.$set(t.wishData,"payMsg",e)},expression:"wishData.payMsg"}})],1),t._v(" "),a("div",{staticClass:"nick-container"},[a("p",{staticClass:"nick-title"},[t._v("ÁïôË®ÄÊòµÁß∞")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.wishData.payNiceName,expression:"wishData.payNiceName"}],staticClass:"name",attrs:{type:"text",placeholder:"ËØ∑ËæìÂÖ•ÊòµÁß∞"},domProps:{value:t.wishData.payNiceName},on:{input:function(e){e.target.composing||t.$set(t.wishData,"payNiceName",e.target.value)}}})])]):t._e(),t._v(" "),"1"==t.occurData.needVirtualUserPhone?a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row"},[a("div",{staticClass:"right-margin theme_font_common"},[t._v("Êé•Êî∂Áü≠‰ø°ÁöÑÊâãÊú∫Âè∑")]),t._v(" "),a("div",{staticClass:"theme_font_common"},[t._v("\n              "+t._s(t.$store.state.login.phone)+"\n            ")])]),t._v(" "),a("div",{staticClass:"flex-row theme_font_tint"},[a("div",{staticClass:"font-small"},[t._v("\n              Ë¥≠‰π∞ÊàêÂäüÂêéÁõ∏ÂÖ≥Áü≠‰ø°‰ºöËá™Âä®ÂèëÈÄÅÂà∞ÊÇ®ÊâãÊú∫‰∏ä\n            ")])])]):t._e(),t._v(" "),a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row",on:{click:t.payWayShow}},[a("div",{staticClass:"label-middle theme_font_common"},[t._v("ÊîØ‰ªòÊñπÂºè")]),t._v(" "),a("div",{staticClass:"full"}),t._v(" "),a("div",{staticClass:"theme_font_common right-margin"},[t._v(t._s(t.payWayText))]),t._v(" "),a("div",[a("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])])]),t._v(" "),2==t.pageType?a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row",on:{click:t.contratWayShow}},[a("div",{staticClass:"label-middle theme_font_common",staticStyle:{width:"100px"}},[t._v("\n              È¢ÑÁ∫¶ÂçïËÅîÁ≥ªÊñπÂºè\n            ")]),t._v(" "),a("div",{staticClass:"full"}),t._v(" "),a("div",{staticClass:"theme_font_common right-margin"},[t._v("\n              "+t._s(t.contratWayText)+"\n            ")]),t._v(" "),a("div",[a("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])]),t._v(" "),"ÈÄâÊã©ËÅîÁ≥ªÊñπÂºè"!=t.contratWayText?a("div",{},[a("van-cell",{attrs:{title:"ÂßìÂêçÔºö",value:t.selectItem.realName}}),t._v(" "),a("van-cell",{attrs:{title:"ËÅîÁ≥ªÁîµËØùÔºö",value:t.selectItem.userName}})],1):t._e()]):t._e(),t._v(" "),t._l(t.occurData.store,(function(e){return a("div",{staticClass:"block-div"},[1==e.storeProData.num?a("div",[t._l(e.storeProData.proArr,(function(e){return a("div",{staticClass:"pro-row"},[a("div",{staticClass:"img-div"},[a("img",{attrs:{src:e.phPictureUrl}}),t._v(" "),1==t.paramsData.cartType?a("div",{staticClass:"presale"},[t._v("\n                  È¢ÑÂîÆ\n                ")]):t._e()]),t._v(" "),a("div",{staticClass:"info-div"},[a("div",{staticClass:"title theme_font_black"},[t._v("\n                  "+t._s(e.productName)+"\n                ")]),t._v(" "),a("div",{staticClass:"title theme_font_black"},[a("span",[t._v(t._s(e.specs))])]),t._v(" "),a("div",{staticClass:"price"},[a("PriceOrder",{attrs:{productData:e}}),t._v(" "),"wish"==t.$route.query.entryType?a("van-stepper",{staticClass:"wish-prod-stepper",attrs:{max:t.$route.params.wishProdInfo.saleNumMax,min:t.$route.params.wishProdInfo.saleNumBegin,step:t.$route.params.wishProdInfo.saleNumStep,integer:""},model:{value:e.number,callback:function(i){t.$set(e,"number",i)},expression:"prodata.number"}}):a("span",{staticStyle:{float:"right"}},[t._v("x "+t._s(e.number))])],1),t._v(" "),e.currentSelfActivity&&""!=e.currentSelfActivity.mktActivityType?a("div",{staticClass:"activity-type theme_bg_red"},[t._v("\n                  "+t._s(e.currentSelfActivity.mktActivityType)+"\n                ")]):t._e()])])})),t._v(" "),1==t.occurData.needPickupId?a("div",{on:{click:t.toSelectZitiAddress}},[a("div",{staticClass:"pickup-shop"},[a("div",{staticStyle:{flex:"1"}},[a("div",{staticClass:"flex-row"},[a("div",{staticClass:"name theme_font_black"},[t._v("\n                      ÂÖëÊç¢ÁÇπÔºö"+t._s(t.$store.state.mall2.zitiAddress.storeName)+"\n                    ")])])]),t._v(" "),a("div",[a("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])])]):t._e(),t._v(" "),e.storeProData.serviceArr.length?a("div",{staticClass:"service"},[a("div",{staticClass:"title"},[t._v("‰øùÈöúÊúçÂä°")]),t._v(" "),t._l(e.storeProData.serviceArr,(function(e){return a("div",{staticClass:"service-row line_top",on:{click:function(i){return t.toServiceEvent(e)}}},[a("div",{staticClass:"name single-line"},[t._v(t._s(e.productName))]),t._v(" "),a("div",{staticClass:"price"},[t._v("\n                  ¬•"+t._s(t.$util.toDecimal2(e.price))+" x\n                  "+t._s(e.number)+"\n                  "),a("i",{staticClass:"iconfont mall-gengduojiantou"})])])}))],2):t._e()],2):t._e(),t._v(" "),e.storeProData.num>1?a("div",{on:{click:function(i){return t.showProsDetailEvent(e)}}},[a("div",{staticClass:"pros-row"},[a("div",{staticClass:"pros-msg"},[a("span",[t._v("ÂÖ±"+t._s(e.storeProData.proNum)+"‰ª∂")]),t._v(" "),a("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})]),t._v(" "),t._l(e.storeProData.proArr,(function(e,i){return i<3?a("div",{staticClass:"img-div"},[a("img",{attrs:{src:e.phPictureUrl}}),t._v(" "),1==t.paramsData.cartType?a("div",{staticClass:"presale"},[t._v("\n                  È¢ÑÂîÆ\n                ")]):t._e()]):t._e()}))],2)]):t._e(),t._v(" "),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label-middle theme_font_common"},[t._v("Â§áÊ≥®")]),t._v(" "),a("div",{staticClass:"full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"store.remark"}],staticClass:"row-input theme_font_common",attrs:{placeholder:"ËØ∑Áïô‰∏ãÊÇ®ÊÉ≥ËØ¥ÁöÑËØù"},domProps:{value:e.remark},on:{input:function(i){i.target.composing||t.$set(e,"remark",i.target.value)}}})])])])})),t._v(" "),8==t.productType?a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row",on:{click:t.openServiceTimePicker}},[a("div",{staticClass:"label-middle theme_font_common"},[t._v("ÊúçÂä°Êó∂Èó¥")]),t._v(" "),a("div",{staticClass:"full theme_font_common",staticStyle:{"text-align":"right"}},[t._v("\n              "+t._s(t.serviceDateTime)+"\n            ")]),t._v(" "),a("div",[a("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])])]):t._e(),t._v(" "),(!t.cardType||t.cardType&&551==t.cardType)&&1!=t.paramsData.orderCategory&&"wish"!==t.$route.query.entryType?a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row",on:{click:t.couponEvent}},[a("div",{staticClass:"label-middle theme_font_common"},[t._v("‰ºòÊÉ†Âà∏")]),t._v(" "),a("div",{staticClass:"full"}),t._v(" "),t.lastRes.occur?a("div",{staticClass:"theme_font_black right-margin"},[t._v("\n              ‰ºòÊÉ†"+t._s(t.$util.toDecimal2(t.occurData.couponAmount))+"ÂÖÉ\n            ")]):t._e(),t._v(" "),a("div",[a("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])]),t._v(" "),t._l(t.occurData.digitalList,(function(e){return"LimitWallet"!=e.acctType?a("div",[0!=e.deductionState?a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label-middle theme_font_common"},[t._v("\n                "+t._s(t.getDigitalDisplayName(e.acctType))+"\n              ")]),t._v(" "),a("div",{staticClass:"full"}),t._v(" "),e.userCanUseDigital>0?a("div",{staticClass:"right-margin"},[t._v("\n                ÂÖ±"+t._s(e.userBalanceDigital)+"ÔºåÂèØÁî®"+t._s(e.userCanUseDigital)+"ÔºåÊäµÔø•"+t._s(t.$util.toDecimal2(e.userCanUseDigitalAmount))+"ÂÖÉ\n              ")]):t._e(),t._v(" "),e.userCanUseDigital<=0?a("div",{staticClass:"right-margin"},[t._v("\n                ÂÖ±"+t._s(e.userBalanceDigital)+"Ôºå"+t._s(t.getCanNotUseStr(e.deductionState))+"Ôºå‰∏çËÉΩ‰ΩøÁî®\n              ")]):t._e(),t._v(" "),a("div",{staticClass:"swith",on:{click:function(i){return t.useDigitalEvent(e)}}},[e.payDigital>e.fixedDigital?a("img",{attrs:{src:"static/image/mall2/switch-on.png"}}):t._e(),t._v(" "),e.payDigital<=e.fixedDigital?a("img",{attrs:{src:"static/image/mall2/switch-off.png"}}):t._e()])]):t._e()]):t._e()}))],2):t._e(),t._v(" "),0!=t.cardList.length&&1!=t.paramsData.orderCategory&&"true"==t.limitType?a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row",on:{click:function(e){t.showYJChange=!0}}},[a("div",{staticClass:"label-middle theme_font_common"},[t._v("ÊòìÊç∑Âç°")]),t._v(" "),"a"!=t.radio?a("div",{staticClass:"full theme_font_black right-margin",staticStyle:{"text-align":"right"}},[t.$route.params.cardName||t.cardDetails.cardName?a("p",[t._v("\n                "+t._s(t.cardDetails.cardName?t.cardDetails.cardName:t.$route.params.cardName)+"\n              ")]):a("p",[t._v("ÈÄâÊã©ÂèØÁî®ÊòìÊç∑Âç°")]),t._v(" "),t.$route.params.cardName||t.cardDetails.cardName?a("p",{staticClass:"theme_font_tint font-small",staticStyle:{"padding-top":"3px"}},[t._v("\n                ‰ΩôÈ¢ù"+t._s(t.$util.toDecimal2(t.cardAmount))+"ÂÖÉÔºåÊäµÊâ£"+t._s(t.$util.toDecimal2(t.userCanUseDigital))+"ÂÖÉ\n              ")]):t._e()]):a("div",{staticClass:"full theme_font_black right-margin",staticStyle:{"text-align":"right"}},[t._v("\n              ‰∏ç‰ΩøÁî®ÊòìÊç∑Âç°\n            ")]),t._v(" "),a("div",[a("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])])]):t._e(),t._v(" "),"552"==t.cardType&&1!=t.paramsData.orderCategory&&"true"==t.limitType?a("div",{staticClass:"block-div"},[a("div",{staticClass:"table-view yj-card"},[a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("ÊòìÊç∑Âç°")]),t._v(" "),a("div",{staticClass:"right"},[t._v(t._s(t.$route.params.cardName))])])])])]):t._e(),t._v(" "),a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label-middle full theme_font_common"},[t._v("ÂïÜÂìÅÈáëÈ¢ù")]),t._v(" "),a("div",{staticClass:"theme_font_black"},[t._v("\n              Ôø•"+t._s(t.$util.toDecimal2(t.occurData.amount))+"\n            ")])]),t._v(" "),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label-middle full theme_font_common"},[t._v("Á´ãÂáè")]),t._v(" "),a("div",{staticClass:"theme_font_red"},[t._v("\n              -Ôø•"+t._s(t.$util.toDecimal2(t.occurData.discountAmount))+"\n            ")])]),t._v(" "),a("div",{staticClass:"flex-row",on:{click:t.showFreightDetail}},[a("div",{staticClass:"label-middle full theme_font_common"},[t._v("\n              ËøêË¥π\n              "),a("i",{staticClass:"iconfont mall-info theme_font_gray",staticStyle:{"margin-left":"3px"}})]),t._v(" "),a("div",{staticClass:"theme_font_red"},[t._v("\n              +Ôø•"+t._s(t.$util.toDecimal2(parseFloat(t.occurData.freightAmount)-parseFloat(t.occurData.freightDiscountAmount)))+"\n            ")])]),t._v(" "),1!=t.paramsData.orderCategory&&"wish"!=t.$route.query.entryType?a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label-middle full theme_font_common"},[t._v("‰ºòÊÉ†Âà∏")]),t._v(" "),a("div",{staticClass:"theme_font_red"},[t._v("\n              -Ôø•"+t._s(t.$util.toDecimal2(t.occurData.couponAmount))+"\n            ")])]):t._e(),t._v(" "),"true"==t.limitType&&0!=t.cardList.length&&(t.cardDetails.cardName||t.$route.params.cardName)&&"a"!=t.radio?a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label-middle full theme_font_common"},[t._v("\n              "+t._s(t.cardDetails.cardName?t.cardDetails.cardName:t.$route.params.cardName)+"\n            ")]),t._v(" "),a("div",{staticClass:"theme_font_red"},[t._v("\n              -Ôø•"+t._s(t.$util.toDecimal2(t.userCanUseDigital))+"\n            ")])]):t._e(),t._v(" "),"true"==t.limitType&&"552"==t.cardType&&"a"!=t.radio?a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label-middle full theme_font_common"},[t._v("\n              "+t._s(t.$route.params.cardName)+"\n            ")]),t._v(" "),a("div",{staticClass:"theme_font_red"},[t._v("\n              -Ôø•"+t._s(t.$util.toDecimal2(t.occurData.couponAmount))+"\n            ")])]):t._e(),t._v(" "),t._l(t.occurData.digitalList,(function(e){return e.payDigital>e.fixedDigital&&"LimitWallet"!=e.acctType?a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label-middle full theme_font_common"},[t._v("\n              "+t._s(t.getDigitalDisplayName(e.acctType))+"\n            ")]),t._v(" "),a("div",{staticClass:"theme_font_red"},[t._v("\n              -Ôø•"+t._s(t.$util.toDecimal2(e.userCanUseDigitalAmount))+"\n            ")])]):t._e()}))],2)],2),t._v(" "),a("div",{staticClass:"bottom-btns"},[2==t.deliveryType&&1==t.occurData.needAddress?a("div",{staticClass:"tip theme_bg_yl theme_standard_font theme_light_bg"},[t._v("\n          "+t._s(t.$store.state.mall2.selectAddress.addressFull)+"\n        ")]):t._e(),t._v(" "),"songli"==t.buyType?a("div",{staticClass:"btn theme_standard_bg theme_font_white",on:{click:t.checkProductStock}},[t._v("\n          Êèê‰∫§Á§ºÂçï\n        ")]):a("div",{staticClass:"btn theme_standard_bg theme_font_white",on:{click:t.checkProductStock}},[t._v("\n          Êèê‰∫§ËÆ¢Âçï\n        ")]),t._v(" "),a("div",{staticClass:"price"},[Object.keys(t.occurData).length?a("div",{staticClass:"rmb-div"},[a("span",{staticClass:"count"},[t._v("ÂÖ±"+t._s(t.count)+"‰ª∂")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.$mallCommon.getOccurShowPrice(t.occurData),expression:"$mallCommon.getOccurShowPrice(occurData)"}],staticClass:"theme_font_red"},[t._v("Ôø•")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.$mallCommon.getOccurShowPrice(t.occurData),expression:"$mallCommon.getOccurShowPrice(occurData)"}],staticClass:"left-no-space price-big theme_font_red"},[t._v(t._s(t.getTotalPriceDuan(0)))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.$mallCommon.getOccurShowPrice(t.occurData),expression:"$mallCommon.getOccurShowPrice(occurData)"}],staticClass:"theme_font_red"},[t._v("."+t._s(t.getTotalPriceDuan(1)))]),t._v(" "),t._l(t.occurData.digitalList,(function(e,i){return t.$mallCommon.getTotalUsePoints(e)>0?a("div",{staticClass:"digital-div"},[i!=t.$mallCommon.getFirstVartualIndex(t.occurData)||t.$mallCommon.getOccurShowPrice(t.occurData)?a("span",{staticClass:"price-big theme_font_red"},[t._v("+")]):t._e(),t._v(" "),a("span",{staticClass:"price-big theme_font_red"},[t._v(t._s(t.$mallCommon.getTotalUsePoints(e)))]),t._v(" "),a("span",{staticClass:"theme_font_red"},[t._v(t._s(t.$mallCommon.getTotalUnitStr(e.acctType)))])]):t._e()}))],2):t._e()]),t._v(" "),t.isX?a("div",{staticClass:"adapter-iphoneX"}):t._e()]),t._v(" "),a("van-popup",{staticClass:"pay-modal",attrs:{position:"bottom"},model:{value:t.showYJChange,callback:function(e){t.showYJChange=e},expression:"showYJChange"}},[a("div",{staticClass:"top"},[a("div",{staticClass:"close-img"},[a("div",{staticClass:"text"},[t._v("ÊòìÊç∑Âç°")]),t._v(" "),a("div",{staticClass:"img"},[a("img",{staticClass:"close-btn",attrs:{src:i("+6ky"),alt:""},on:{click:function(e){t.showYJChange=!1}}})])])]),t._v(" "),a("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("van-radio",{staticClass:"title-change",attrs:{"checked-color":"#f80f16",name:"a"},on:{click:t.changeYjCard}},[t._v("‰∏ç‰ΩøÁî®ÊòìÊç∑Âç°")]),t._v(" "),t._l(t.cardList,(function(e,i){return a("van-radio",{key:i,attrs:{"checked-color":"#f80f16",name:i},on:{click:function(i){return t.changeYjCard(e)}}},[a("div",{staticClass:"item"},[a("img",{staticClass:"pro-img",attrs:{src:e.cardFrontPicUrl,alt:""}}),t._v(" "),a("div",{staticClass:"card-content"},[a("p",{staticClass:"top"},[a("span",{staticClass:"card-name"},[t._v(t._s(e.cardName))]),t._v(" "),a("span",{staticClass:"card-type"},[t._v(t._s(e.cardTypeStr))])]),t._v(" "),a("p",{staticClass:"mid-price"},[a("span",{staticClass:"icon"},[t._v("‰ΩôÈ¢ùÔºöÔø•")]),t._v(t._s(e.balance)+"\n                ")]),t._v(" "),a("div",{staticClass:"btm-content"},[a("span",{staticClass:"card-number"},[t._v("Âç°Âè∑Ôºö"+t._s(e.cardNo))])])])])])}))],2),t._v(" "),a("div",{staticClass:"pay-confirm",on:{click:t.queryBtn}},[t._v("Á°ÆÂÆö")])],1)],1)]):t._e(),t._v(" "),t.payWayPopShow?a("pop-view",{on:{closeEvent:t.popClose}},[a("div",{staticClass:"pop-body"},[a("div",{staticClass:"pop-title theme_font_common"},[t._v("ËØ∑ÈÄâÊã©ÊîØ‰ªòÊñπÂºè")]),t._v(" "),a("div",{staticClass:"items-div pop-scroll-div"},t._l(t.payWays,(function(e){return a("div",{staticClass:"item theme_font_common theme_bg_white_ef",class:{theme_light_bg:t.payWaySelected==e.tag,theme_standard_font_i:t.payWaySelected==e.tag,theme_standard_bdr_i:t.payWaySelected==e.tag},on:{click:function(i){return t.payWayEvent(e)}}},[t._v("\n          "+t._s(e.text)+"\n        ")])})),0),t._v(" "),a("div",{staticClass:"bottom-btn theme_font_white theme_standard_bg bottom-space",on:{click:t.popSureEvent}},[t._v("\n        Á°ÆÂÆö\n      ")])])]):t._e(),t._v(" "),t.payWayPopShow1?a("pop-view",{on:{closeEvent:t.popClose2}},[a("div",{staticClass:"pop-body"},[a("div",{staticClass:"pop-title theme_font_common"},[t._v("ËØ∑ÈÄâÊã©ÊîØ‰ªòÊñπÂºè")]),t._v(" "),a("div",{staticClass:"items-div pop-scroll-div"},t._l(t.payWays1,(function(e,i){return a("div",{staticClass:"item theme_font_common theme_bg_white_ef",class:{theme_light_bg:t.payWaySelected==i,theme_standard_font_i:t.payWaySelected==i,theme_standard_bdr_i:t.payWaySelected==i},on:{click:function(a){return t.payWayEvent1(e,i)}}},[t._v("\n          "+t._s(e.text)+"\n        ")])})),0),t._v(" "),a("div",{staticClass:"bottom-btn theme_font_white theme_standard_bg bottom-space",on:{click:t.popSureEvent2}},[t._v("\n        Á°ÆÂÆö\n      ")])])]):t._e(),t._v(" "),t.contratWayPopShow?a("pop-view",{on:{closeEvent:t.popClose1}},[a("div",{staticClass:"pop-body"},[a("div",{staticClass:"pop-title theme_font_common"},[t._v("ËØ∑ÈÄâÊã©ËÆ§ËØÅ‰ø°ÊÅØ")]),t._v(" "),a("div",{staticClass:"items-div pop-scroll-div"},[a("van-radio-group",{model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[a("van-cell-group",t._l(t.contratWayList,(function(e,i){return a("van-cell",{key:i,attrs:{title:"",clickable:""},on:{click:function(a){return t.changePer(e,i)}},scopedSlots:t._u([{key:"icon",fn:function(){return[a("div",{staticClass:"per-con"},[a("div",{staticClass:"title"},[t._v("\n                    "+t._s(1==e.type?"‰ºÅ‰∏ö":"‰∏™‰∫∫")+"\n                  ")]),t._v(" "),e.userName?a("div",{staticClass:"detail"},[a("div",{staticClass:"name"},[t._v("ÂßìÂêçÔºö"+t._s(e.realName))]),t._v(" "),a("div",{staticClass:"phone"},[t._v("ÊâãÊú∫Âè∑Ôºö"+t._s(e.userName))])]):a("div",{staticClass:"detail"},[a("div",{staticClass:"name"},[t._v("\n                      ÊöÇÊú™"+t._s(1==e.type?"‰ºÅ‰∏öÂõ¢Ë¥≠":"ÂÆûÂêç")+"ËÆ§ËØÅ,ÁÇπÂáª\n                      "),a("span",{staticStyle:{color:"#8080ff"},on:{click:function(i){return t.auther(e.type)}}},[t._v("ÂâçÂæÄËÆ§ËØÅ")])])])])]},proxy:!0},{key:"right-icon",fn:function(){return[a("van-radio",{attrs:{name:i}})]},proxy:!0}],null,!0)})})),1)],1)],1)])]):t._e(),t._v(" "),t.showProsDetail?a("pop-view",{on:{closeEvent:function(e){t.showProsDetail=!1}}},[a("div",{staticClass:"pop-body"},[a("div",{staticClass:"pop-title theme_font_common"},[t._v("ÂïÜÂìÅÊòéÁªÜ")]),t._v(" "),a("div",{staticClass:"pop-scroll-div"},[t._l(t.currentStore.storeProData.proArr,(function(e){return a("div",{staticClass:"pro-row"},[a("div",{staticClass:"img-div"},[a("img",{attrs:{src:e.phPictureUrl}}),t._v(" "),1==t.paramsData.cartType?a("div",{staticClass:"presale"},[t._v("È¢ÑÂîÆ")]):t._e()]),t._v(" "),a("div",{staticClass:"info-div"},[a("div",{staticClass:"title-min theme_font_black"},[t._v("\n              "+t._s(e.productName)+"\n            ")]),t._v(" "),a("div",{staticClass:"title-min theme_font_gray"},[a("span",{staticClass:"font-small"},[t._v(t._s(e.specs))])]),t._v(" "),a("div",{staticClass:"price"},[a("PriceOrder",{attrs:{productData:e}}),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v("x "+t._s(e.number))])],1)])])})),t._v(" "),a("div",{staticClass:"service"},[a("div",{staticClass:"title"},[t._v("‰øùÈöúÊúçÂä°")]),t._v(" "),t._l(t.currentStore.storeProData.serviceArr,(function(e){return a("div",{staticClass:"service-row line_top",on:{click:function(i){return t.toServiceEvent(e)}}},[a("div",{staticClass:"name single-line"},[t._v(t._s(e.productName))]),t._v(" "),a("div",{staticClass:"price"},[t._v("\n              ¬•"+t._s(t.$util.toDecimal2(e.price))+" x "+t._s(e.number)+"\n              "),a("i",{staticClass:"iconfont mall-gengduojiantou"})])])}))],2)],2)])]):t._e(),t._v(" "),a("mt-datetime-picker",{ref:"dateDom",attrs:{type:"date",startDate:t.pickupStartTime,endDate:t.getEndDate(),"year-format":"{value} Âπ¥","month-format":"{value} Êúà","date-format":"{value} Êó•"},model:{value:t.pickupTime,callback:function(e){t.pickupTime=e},expression:"pickupTime"}}),t._v(" "),t.showAgreement?a("Agreement",{attrs:{propsValue:9},on:{backEvent:function(e){t.showAgreement=!1}}}):t._e(),t._v(" "),t.showPointsRule?a("Agreement",{attrs:{propsValue:11},on:{backEvent:function(e){t.showPointsRule=!1}}}):t._e(),t._v(" "),a("input",{attrs:{type:"hidden"},domProps:{value:t.recommend}})],1)}),[],!1,null,"4da3f87d",null));e.default=b.exports},XXIG:function(t,e,i){"use strict";var a=i("XkAZ");i.n(a).a},XkAZ:function(t,e,i){},eDvH:function(t,e,i){"use strict";var a=i("AepU");i.n(a).a},eIKf:function(t,e,i){},iUUy:function(t,e,i){"use strict";var a=i("eIKf");i.n(a).a}}]);