(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-246265da","chunk-612ce34b"],{"15d2":function(t,e,i){"use strict";i.r(e);var a,s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bind-car"},[i("nav-top",{attrs:{title:"添加车辆"},on:{backEvent:function(e){return t.$router.go(-1)}}}),i("nav-content",{staticClass:"bind-car-container"},[i("div",{staticClass:"container"},[i("div",{staticClass:"bind-car-content"},[i("div",{staticClass:"table-view"},[i("div",{staticClass:"table-view-cell"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[t._v("车牌号")]),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.plateNum,expression:"plateNum"}],attrs:{type:"text",readonly:"",placeholder:"请输入车牌号"},domProps:{value:t.plateNum},on:{focus:t.focus,touchstart:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.plateNum=e.target.value)}}})])])])])]),i("div",{staticClass:"show-info"},[i("div",{staticClass:"table-view"},[i("div",{staticClass:"table-view-cell special"},[i("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[i("van-collapse-item",{attrs:{title:"更多车辆信息(选填)",name:"1"}},[i("div",{staticClass:"table-view content-show"},[i("div",{staticClass:"table-view-cell"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[t._v("品牌车系")]),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.brand,expression:"brand"}],attrs:{type:"text",placeholder:"请输入品牌车系"},domProps:{value:t.brand},on:{input:function(e){e.target.composing||(t.brand=e.target.value)}}})])])]),i("div",{staticClass:"table-view-cell"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[t._v("车型")]),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.brandModel,expression:"brandModel"}],attrs:{type:"text",placeholder:"请输入车型"},domProps:{value:t.brandModel},on:{input:function(e){e.target.composing||(t.brandModel=e.target.value)}}})])])]),i("div",{staticClass:"table-view-cell"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[t._v("车辆颜色")]),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.vehColor,expression:"vehColor"}],attrs:{type:"text",placeholder:"请输入颜色"},domProps:{value:t.vehColor},on:{input:function(e){e.target.composing||(t.vehColor=e.target.value)}}})])])])])])],1)],1)])]),i("div",{staticClass:"bind-car-content"},[i("div",{staticClass:"table-view"},[i("div",{staticClass:"table-view-cell vehicle",on:{click:t.openCarAuthentication}},[i("div",{staticClass:"table-view-cell-text info"},[i("div",{staticClass:"left"},[t._v("行驶证")]),t.vehicleItem&&1==t.vehicleItem.isValid&&t.identifyState.imageUrl&&1==t.vehicleItem.examineState?i("div",{staticClass:"right"},[t._v(" 已认证 ")]):t._e(),t.vehicleItem&&2==t.vehicleItem.examineState?i("div",{staticClass:"right"},[t._v("审核中")]):t._e()]),t.vehicleItem&&1!=t.vehicleItem.isValid&&(0==t.vehicleItem.examineState||3==t.vehicleItem.examineState)&&t.identifyState.imageUrl||!t.vehicleItem&&t.identifyState.imageUrl?i("div",{staticClass:"table-view-cell-arrow"},[t._v(" 已保存待提交 ")]):t.identifyState.ownerName?t._e():i("div",{staticClass:"table-view-cell-arrow"},[t._v("上传行驶证")])])])]),i("div",{staticClass:"audit-btn"},[i("div",{staticClass:"btn keep",on:{click:t.saveBtn}},[t._v("保存")]),1!=t.vehicleItem.isValid&&2!=t.vehicleItem.examineState&&1!=t.vehicleItem.examineState&&0==t.fromTicket?i("div",{staticClass:"btn",on:{click:t.bindVehicle}},[t._v("保存并提交 ")]):i("div",{staticClass:"btn",on:{click:t.deleteVehicle}},[t._v("删除")])])]),i("van-dialog",{attrs:{"show-cancel-button":"",confirmButtonText:"保存",cancelButtonText:"不保存"},on:{confirm:t.confirm,cancel:t.cancel},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[i("div",{staticClass:"tips-dialog"},[t._v("当前页面数据是否保存？")])])],1),i("virtual-keyboard",{attrs:{show:t.show},on:{input:t.inputKey,delete:t.deleteKey,blur:function(e){t.show=!1}}})],1)},n=[],o=i("ade3"),l=(i("e17f"),i("2241")),c=i("5530"),r=(i("ac1f"),i("841c"),i("b0c0"),i("2f62")),h=i("2999"),d=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z0-9]{1}[A-Z0-9]{2,10}[A-Z0-9挂学警港澳]{1}$/,u={data:function(){return{show:!1,plateNum:"",activeNames:[],vehicleItem:"",brand:"",brandModel:"",vehColor:"",showDialog:!1,fromTicket:!1}},mounted:function(){this.$route.query.vehicleItem&&(this.vehicleItem=JSON.parse(this.$route.query.vehicleItem)),this.$route.query.fromTicket&&(this.fromTicket=this.$route.query.fromTicket),this.plateNum=this.identifyState.plateNum,this.brand=this.identifyState.brand,this.brandModel=this.identifyState.brandModel,this.vehColor=this.identifyState.vehColor},methods:Object(c["a"])({focus:function(){this.show=!0,document.activeElement.blur()},saveBtn:function(){""==this.plateNum?this.$Toast("请输入车牌号！"):-1==this.plateNum.search(d)?this.$Toast("请输入合法车牌号！"):this.showDialog=!0},confirm:function(){this.vehicleItem?this.editVehicle():this.saveVehicle()},cancel:function(){1==this.$route.query.source?this.$router.go(-2):this.$router.go(-1)},bindVehicle:function(){var t=this;""!=this.plateNum?-1!=this.plateNum.search(d)?this.identifyState.imageUrl?this.$request.post("/app/json/user/bindVehicle",{plateNum:this.plateNum,brand:this.brand,brandModel:this.brandModel,vehColor:this.vehColor,imageUrl:this.identifyState.imageUrl,ownerName:this.identifyState.ownerName,vin:this.identifyState.vin,engineNum:this.identifyState.engineNum,vehType:this.identifyState.vehType}).then((function(e){0===e.status?1==t.$route.query.source?t.$router.go(-2):t.$router.go(-1):t.$Toast(e.info?e.info:"提交失败")})):this.$Toast("请上传行驶证！"):this.$Toast("请输入合法车牌号！"):this.$Toast("请输入车牌号！")},editVehicle:function(){var t=this;this.$request.post("/app/json/user/editVehicle",{id:this.vehicleItem.id,plateNum:this.plateNum,brand:this.brand,brandModel:this.brandModel,vehColor:this.vehColor,imageUrl:this.identifyState.imageUrl,ownerName:this.identifyState.ownerName,vin:this.identifyState.vin,engineNum:this.identifyState.engineNum,vehType:this.identifyState.vehType}).then((function(e){0===e.status?1==t.$route.query.source?t.$router.go(-2):t.$router.go(-1):t.$Toast(e.info?e.info:"提交失败")}))},deleteVehicle:function(){var t=this;l["a"].confirm({title:"提示",message:"是否删除该车辆?"}).then((function(){t.$request.post("/app/json/user/deleteVehicle",{id:t.vehicleItem.id,plateNum:t.plateNum}).then((function(e){0===e.status?1==t.$route.query.source?t.$router.go(-2):t.$router.go(-1):t.$Toast(e.info?e.info:"删除失败")}))}))["catch"]((function(){}))},saveVehicle:function(){var t=this;this.$request.post("/app/json/user/saveVehicle",{imageUrl:this.identifyState.imageUrl,ownerName:this.identifyState.ownerName,vin:this.identifyState.vin,engineNum:this.identifyState.engineNum,vehType:this.identifyState.vehType,plateNum:this.plateNum,brand:this.brand,brandModel:this.brandModel,vehColor:this.vehColor}).then((function(e){0===e.status?1==t.$route.query.source?t.$router.go(-2):t.$router.go(-1):t.$Toast(e.info?e.info:"保存失败")}))},openCarAuthentication:function(){1!=this.identifyState.idState&&1==this.identifyState.blackCheckVehicle?this.$Toast("请先完成实名认证！"):""==this.plateNum?this.$Toast("请输入车牌号！"):-1==this.plateNum.search(d)?this.$Toast("请输入合法车牌号！"):1!=this.vehicleItem.isValid&&2!=this.vehicleItem.examineState&&(this.setIdentifyState(this.$assign({},this.identifyState,{plateNum:this.plateNum,imageUrl:this.identifyState.imageUrl,ownerName:this.identifyState.ownerName,vin:this.identifyState.vin,engineNum:this.identifyState.engineNum,vehType:this.identifyState.vehType,brand:this.brand,brandModel:this.brandModel,vehColor:this.vehColor})),this.$bridgefunc.vuexStorage(),this.$router.push({path:"/vehicle-authentication",query:{plateNum:this.plateNum}}))},inputKey:function(t){this.plateNum.length<8&&(this.plateNum=this.plateNum+t)},deleteKey:function(){this.plateNum=this.plateNum.substr(0,this.plateNum.length-1)}},Object(r["d"])(["setIdentifyState"])),computed:Object(c["a"])({},Object(r["c"])(["identifyState"])),components:(a={},Object(o["a"])(a,l["a"].name,l["a"]),Object(o["a"])(a,"VirtualKeyboard",h["default"]),a)},v=u,m=(i("2eab"),i("0c7c")),f=Object(m["a"])(v,s,n,!1,null,"d2eb314e",null);e["default"]=f.exports},2999:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"virtual-keyboard",on:{touchstart:function(t){t.stopPropagation()}}},t._l(t.keyboard,(function(e,s){return a("div",{key:s,staticClass:"keyboard-row"},[3===s?a("span",{staticClass:"keyboard-item fn-key",on:{click:t.changeKey}},[t._v(t._s(1===t.keyType?"ABC":"中文"))]):t._e(),t._l(e,(function(e){return a("span",{staticClass:"keyboard-item",class:{"flex-shrink":2===s||3===s},style:{width:2===s||3===s?t.keyWidth:"auto"},on:{click:function(i){return t.inputKey(e)}}},[t._v(t._s(e))])})),3===s?a("span",{staticClass:"keyboard-item fn-key"},[a("img",{staticClass:"delete",attrs:{src:i("b2be"),alt:""},on:{click:t.deleteKey}})]):t._e()],2)})),0)])},s=[],n=(i("a9e3"),i("4795"),{name:"",props:{show:Boolean,type:{type:Number,default:1}},data:function(){return{vanShow:!0,keyboardZh:[["京","津","渝","沪","冀","晋","辽","吉","黑","苏"],["浙","皖","闽","赣","鲁","豫","鄂","湘","粤","琼"],["川","贵","云","陕","甘","青","蒙","桂","宁","新"],["藏","使","领","警","学","港","澳"]],keyboardEn:[[1,2,3,4,5,6,7,8,9,0],["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]],keyboard:[],keyWidth:0,keyType:1}},methods:{setWidth:function(){this.keyWidth=document.querySelectorAll(".keyboard-item")[0].clientWidth+"px"},changeKey:function(){this.keyType=1===this.keyType?0:1,this.keyboard=1===this.keyType?this.keyboardZh:this.keyboardEn},deleteKey:function(){this.$emit("delete")},inputKey:function(t){this.$emit("input",t)},onBlur:function(){this.$emit("blur"),this.$emit("update:show",!1)},selfHandler:function(){this.$emit("update:show",!0)},handler:function(t){document.body[(t?"add":"remove")+"EventListener"]("touchstart",this.onBlur)}},mounted:function(){this.keyType=this.type,this.keyboard=1==this.keyType?this.keyboardZh:this.keyboardEn,this.handler(!0)},destroyed:function(){this.handler(!1)},activated:function(){this.handler(!0)},deactivated:function(){this.handler(!1)},watch:{show:function(t){t&&(clearTimeout(this.timer),this.timer=setTimeout(this.setWidth,20))},type:function(t){t&&(this.keyType=t,this.keyboard=1==this.keyType?this.keyboardZh:this.keyboardEn,this.handler(!0))}},components:{}}),o=n,l=(i("8bdc"),i("0c7c")),c=Object(l["a"])(o,a,s,!1,null,"02c6819a",null);e["default"]=c.exports},"2eab":function(t,e,i){"use strict";i("6b60")},"6afa":function(t,e,i){},"6b60":function(t,e,i){},"8bdc":function(t,e,i){"use strict";i("6afa")},b2be:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABV0lEQVRYhe2Wy23DMAyGNUJG8FEAfwIawSNkBI+QEbKBR/Eldx8yQEYIMoFHcA+lAFa2JDp1ChQwAR7y/D4wfMS5I474D0FEFwDjzjkAaK3w+UM5WOETM5+9980eSURBvvdhhqevhRBOth/QuRDCiYg6/bgoIPApA+8AzET0tEgIbJDPdFUBAazCY0gTVSU0HMAY35sVANBGuC7ZOxI5eFZAGmPSpapFTqIEXxVI4BcLPCdRgy8ENJyZ+y3wVALAC8CtBF8IRNt34UrirhbM3dCc3wLM3FeXQiWSss8AXmYBsY8lHH8JH2MlSiO6EJAnHlslcg1nHNGfVd8qUev2kkR2EVklLKNWkiiuYjkcz9xkWOElieox8t43ud2gTmkVviLRmQQUaHU7Ami3nGPnnNOHzSSgJOJsX5n5vEfGk27aPYnE3/4lSySuzNzvmd77xiRwxBGfjC/Uf6m5/t20ZAAAAABJRU5ErkJggg=="}}]);