(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-799f6a87"],{"0929":function(t,a,e){"use strict";e("e0d9")},e0d9:function(t,a,e){},f8fb:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"body"},[e("nav-top",{attrs:{title:"我的微店"},on:{backEvent:function(a){return t.$router.go(-1)}}}),e("nav-content",[e("div",{staticClass:"content"},[e("div",{ref:"imageWrapper",staticClass:"myShop",attrs:{id:"myShop"}},[e("div",{staticClass:"myShopTu"},[e("div",{staticClass:"myShopTop"},[e("img",{attrs:{src:t.imgUrl,alt:""}}),e("div",{staticClass:"text"},[e("span",{staticClass:"name"},[t._v(t._s(t.detailData.storeName?t.detailData.storeName:"店铺名称"))]),e("p",{staticClass:"jianjie"},[t._v("简介："+t._s(t.detailData.storeProfile?t.detailData.storeProfile:"请设置简介"))])])]),e("div",{staticStyle:{width:"80%",height:"0","border-bottom":"rgb(243, 176, 176) 2px dashed",margin:"16px auto"}}),e("div",{staticClass:"qrcode"},[e("canvas",{attrs:{id:"qrcode"}}),e("p",[t._v("扫一扫，逛微店")])])])])]),e("div",{staticClass:"answer theme_bg_red",on:{click:t.downloadImg}},[t._v("保存图片")])])],1)},o=[],i=e("5530"),n=(e("99af"),e("e25e"),e("ac1f"),e("1276"),e("d055")),r=e.n(n),c=e("da71"),d=e("2f62"),l=e("c0e9"),h=e.n(l),u={name:"microshopQrcode",components:{QRCode:r.a},data:function(){return{imgUrl:"",detailData:{}}},computed:Object(i["a"])({},Object(d["c"])(["getPutaggregate"])),mounted:function(){var t=this;this.detailData=this.$route.query.profitObj&&JSON.parse(this.$route.query.profitObj),this.$nextTick((function(){var a="".concat(t.$store.state.globalConfig.wxBaseUrl).concat(c["a"].shareUrl,"/micro_sho/shop_around");"2"==t.$store.state.globalConfig.micro_shop_check_page_type&&(a="".concat(t.$store.state.globalConfig.wxBaseUrl).concat(c["a"].shareUrl,"/micro_sho/shop_around1"));var e="".concat(a,"?storeID=").concat(t.detailData.storeCode,"&id=").concat(t.detailData.id);r.a.toCanvas(document.getElementById("qrcode"),e,{margin:0,width:160})})),this.setOssImg(this.detailData.pictureUrl?this.detailData.pictureUrl:this.$store.state.globalConfig.microshop_headurl)},methods:{setOssImg:function(t){var a=this;this.imgUrl="",this.$request.post("/app/json/home/getFileBase64",{filePath:t}).then((function(t){0==t.status?t.data?a.imgUrl="data:image/png;base64,".concat(t.data||""):a.$Toast("getFileBase64 返回为空"):a.$Toast(t.info)}))},downloadImg:function(){var t=this,a=document.querySelector(".myShop"),e=parseInt(window.getComputedStyle(a).width),s=parseInt(window.getComputedStyle(a).height),o=document.createElement("canvas"),i=2;o.width=e*i,o.height=s*i,o.getContext("2d").scale(i,i);var n={useCORS:!0,scale:i,canvas:o,backgroundColor:"#000"};h()(this.$refs.imageWrapper,n).then((function(a){var e=a.toDataURL("image/png");t.codeShow=!1;var s=e.split("base64,");t.$bridgefunc.savePhoto(s[1],(function(a){"1"==a?(t.detailData.popupShow=!1,t.$emit("setshareData",t.detailData),t.$Toast("保存成功！")):t.$Toast("保存失败！")}))}))}}},p=u,m=(e("0929"),e("0c7c")),g=Object(m["a"])(p,s,o,!1,null,"45bf0ae6",null);a["default"]=g.exports}}]);