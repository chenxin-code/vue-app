(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ce7f8f0","chunk-2d2176a6"],{"0cbd":function(t,i,e){"use strict";var s={getServiceImgUrls:function(t){var i=[];return 1==t.cheerless&&i.push("static/image/station/service/cheerless.png"),1==t.recharge&&i.push("static/image/station/service/recharge.png"),1==t.cvs&&i.push("static/image/station/service/cvs.png"),1==t.cardService&&i.push("static/image/station/service/carservice.png"),1==t.water&&i.push("static/image/station/service/water.png"),1==t.cleaning&&i.push("static/image/station/service/cleaning.png"),1==t.carWash&&i.push("static/image/station/service/cleaning-careful.png"),2==t.carWash&&i.push("static/image/station/service/cleaning-normal.png"),1==t.manualCardSell&&i.push("static/image/station/service/normal-send.png"),1==t.selfHelpCardSell&&i.push("static/image/station/service/auto-normal.png"),1==t.toilet&&i.push("static/image/station/service/toilet.png"),1==t.maintain&&i.push("static/image/station/service/maintain.png"),1==t.food&&i.push("static/image/station/service/food.png"),1==t.hotWater&&i.push("static/image/station/service/hotwater.png"),1==t.selfService&&i.push("static/image/station/service/selfservice.png"),1==t.bacco&&i.push("static/image/station/service/bacco.png"),1==t.drinks&&i.push("static/image/station/service/drinks.png"),1==t.chargingPile&&i.push("static/image/station/service/chargingPile.png"),1==t.lpg&&i.push("static/image/station/service/LPG.png"),1==t.yehqgp&&i.push("static/image/station/service/yehqgp.png"),1==t.truck&&i.push("static/image/station/service/truck.png"),i}};i["a"]=s},1498:function(t,i,e){e("d3b7"),e("ac1f"),e("5319"),e("a434"),e("4de4"),e("c975"),e("4d63"),e("25f0"),e("4795"),e("18a5"),e("e25e");var s=window.BMapLib=s||{},n=1,o=3;(function(){var t,i=t=i||{version:"1.5.0"};i.guid="$BAIDU$",function(){window[i.guid]=window[i.guid]||{},i.lang=i.lang||{},i.lang.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},i.lang.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},i.lang.Event=function(t,i){this.type=t,this.returnValue=!0,this.target=i||null,this.currentTarget=null},i.object=i.object||{},i.extend=i.object.extend=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},i.event=i.event||{},i.event._listeners=i.event._listeners||[],i.dom=i.dom||{},i.dom._g=function(t){return i.lang.isString(t)?document.getElementById(t):t},i._g=i.dom._g,i.event.on=function(t,e,s){e=e.replace(/^on/i,""),t=i.dom._g(t);var n,o=function(i){s.call(t,i)},a=i.event._listeners,r=i.event._eventFilter,c=e;return e=e.toLowerCase(),r&&r[e]&&(n=r[e](t,e,o),c=n.type,o=n.listener),t.addEventListener?t.addEventListener(c,o,!1):t.attachEvent&&t.attachEvent("on"+c,o),a[a.length]=[t,e,s,o,c],t},i.on=i.event.on,i.event.un=function(t,e,s){t=i.dom._g(t),e=e.replace(/^on/i,"").toLowerCase();var n,o,a,r=i.event._listeners,c=r.length,l=!s;while(c--)n=r[c],n[1]!==e||n[0]!==t||!l&&n[2]!==s||(o=n[4],a=n[3],t.removeEventListener?t.removeEventListener(o,a,!1):t.detachEvent&&t.detachEvent("on"+o,a),r.splice(c,1));return t},i.un=i.event.un,i.dom.g=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):t&&t.nodeName&&(1==t.nodeType||9==t.nodeType)?t:null},i.g=i.G=i.dom.g,i.dom._styleFixer=i.dom._styleFixer||{},i.dom._styleFilter=i.dom._styleFilter||[],i.dom._styleFilter.filter=function(t,e,s){for(var n,o=0,a=i.dom._styleFilter;n=a[o];o++)(n=n[s])&&(e=n(t,e));return e},i.string=i.string||{},i.string.toCamelCase=function(t){return t.indexOf("-")<0&&t.indexOf("_")<0?t:t.replace(/[-_][^-_]/g,(function(t){return t.charAt(1).toUpperCase()}))},i.dom.setStyle=function(t,e,s){var n,o=i.dom;return t=o.g(t),e=i.string.toCamelCase(e),(n=o._styleFilter)&&(s=n.filter(e,s,"set")),n=o._styleFixer[e],n&&n.set?n.set(t,s):t.style[n||e]=s,t},i.setStyle=i.dom.setStyle,i.dom.setStyles=function(t,e){for(var s in t=i.dom.g(t),e)i.dom.setStyle(t,s,e[s]);return t},i.setStyles=i.dom.setStyles,i.browser=i.browser||{},i.browser.ie=i.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp["$1"]:void 0,i.dom._NAME_ATTRS=function(){var t={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};return i.browser.ie<8?(t["for"]="htmlFor",t["class"]="className"):(t.htmlFor="for",t.className="class"),t}(),i.dom.setAttr=function(t,e,s){return t=i.dom.g(t),"style"==e?t.style.cssText=s:(e=i.dom._NAME_ATTRS[e]||e,t.setAttribute(e,s)),t},i.setAttr=i.dom.setAttr,i.dom.setAttrs=function(t,e){for(var s in t=i.dom.g(t),e)i.dom.setAttr(t,s,e[s]);return t},i.setAttrs=i.dom.setAttrs,i.dom.create=function(t,e){var s=document.createElement(t),n=e||{};return i.dom.setAttrs(s,n)},t.undope=!0}();var e=s.InfoBox=function(t,i,e){this._content=i||"",this._isOpen=!1,this._map=t,this._opts=e=e||{},this._opts.offset=e.offset||new BMap.Size(0,0),this._opts.boxClass=e.boxClass||"infoBox",this._opts.boxStyle=e.boxStyle||{},this._opts.closeIconMargin=e.closeIconMargin||"2px",this._opts.closeIconUrl=e.closeIconUrl||"close.png",this._opts.enableAutoPan=!!e.enableAutoPan,this._opts.align=e.align||n};e.prototype=new BMap.Overlay,e.prototype.initialize=function(t){var e=this,s=this._div=i.dom.create("div",{class:this._opts.boxClass});i.dom.setStyles(s,this._opts.boxStyle),s.style.position="absolute",this._setContent(this._content);var n=t.getPanes().floatPane;return n.style.width="auto",n.appendChild(s),this._getInfoBoxSize(),i.event.on(s,"onmousedown",(function(t){e._stopBubble(t)})),i.event.on(s,"onmouseover",(function(t){e._stopBubble(t)})),i.event.on(s,"click",(function(t){e._stopBubble(t)})),i.event.on(s,"dblclick",(function(t){e._stopBubble(t)})),s},e.prototype.draw=function(){this._isOpen&&this._adjustPosition(this._point)},e.prototype.open=function(t){var i,e=this;this._isOpen||(this._map.addOverlay(this),this._isOpen=!0,setTimeout((function(){e._dispatchEvent(e,"open",{point:e._point})}),10)),t instanceof BMap.Point?(i=t,this._removeMarkerEvt()):t instanceof BMap.Marker&&(this._marker&&this._removeMarkerEvt(),i=t.getPosition(),this._marker=t,!this._markerDragend&&this._marker.addEventListener("dragend",this._markerDragend=function(t){e._point=t.point,e._adjustPosition(e._point),e._panBox(),e.show()}),!this._markerDragging&&this._marker.addEventListener("dragging",this._markerDragging=function(){e.hide(),e._point=e._marker.getPosition(),e._adjustPosition(e._point)})),this.show(),this._point=i,this._panBox(),this._adjustPosition(this._point)},e.prototype.close=function(){this._isOpen&&(this._map.removeOverlay(this),this._remove(),this._isOpen=!1,this._dispatchEvent(this,"close",{point:this._point}))},e.prototype.enableAutoPan=function(){this._opts.enableAutoPan=!0},e.prototype.disableAutoPan=function(){this._opts.enableAutoPan=!1},e.prototype.setContent=function(t){this._setContent(t),this._getInfoBoxSize(),this._adjustPosition(this._point)},e.prototype.setPosition=function(t){this._point=t,this._adjustPosition(t),this._removeMarkerEvt()},e.prototype.getPosition=function(){return this._point},e.prototype.getOffset=function(){return this._opts.offset},e.prototype._remove=function(){var t=this;this.domElement&&this.domElement.parentNode&&(i.event.un(this._div.firstChild,"click",t._closeHandler()),this.domElement.parentNode.removeChild(this.domElement)),this.domElement=null,this._isOpen=!1,this.dispatchEvent("onremove")},i.object.extend(e.prototype,{_getCloseIcon:function(){var t="<img src='"+this._opts.closeIconUrl+"' align='right' style='position:absolute;right:0px;cursor:pointer;margin:"+this._opts.closeIconMargin+"'/>";return t},_setContent:function(t){if(this._div){var i=this._getCloseIcon();"undefined"===typeof t.nodeType?this._div.innerHTML=i+t:(this._div.innerHTML=i,this._div.appendChild(t)),this._content=t,this._addEventToClose()}},_adjustPosition:function(t){var i=this._getPointPosition(t),e=this._marker&&this._marker.getIcon();switch(this._opts.align){case n:this._marker?this._div.style.bottom=-(i.y-this._opts.offset.height-e.anchor.height+e.infoWindowAnchor.height)-this._marker.getOffset().height+2+"px":this._div.style.bottom=-(i.y-this._opts.offset.height)+"px";break;case o:this._marker?this._div.style.top=i.y+this._opts.offset.height-e.anchor.height+e.infoWindowAnchor.height+this._marker.getOffset().height+"px":this._div.style.top=i.y+this._opts.offset.height+"px";break}this._marker?this._div.style.left=i.x-e.anchor.width+this._marker.getOffset().width+e.infoWindowAnchor.width-this._boxWidth/2+"px":this._div.style.left=i.x-this._boxWidth/2+"px"},_getPointPosition:function(t){return this._pointPosition=this._map.pointToOverlayPixel(t),this._pointPosition},_getInfoBoxSize:function(){this._boxWidth=parseInt(this._div.offsetWidth,10),this._boxHeight=parseInt(this._div.offsetHeight,10)},_addEventToClose:function(){var t=this;i.event.on(this._div.firstChild,"click",t._closeHandler()),this._hasBindEventClose=!0},_closeHandler:function(){var t=this;return function(i){t.close()}},_stopBubble:function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0},_panBox:function(){if(this._opts.enableAutoPan){var t=parseInt(this._map.getContainer().offsetHeight,10),i=parseInt(this._map.getContainer().offsetWidth,10),e=this._boxHeight,s=this._boxWidth;if(!(e>=t||s>=i)){this._map.getBounds().containsPoint(this._point)||this._map.setCenter(this._point);var a,r,c,l=this._map.pointToPixel(this._point),h=s/2-l.x,d=s/2+l.x-i;if(this._marker)var u=this._marker.getIcon();switch(this._opts.align){case n:var p=this._marker?u.anchor.height+this._marker.getOffset().height-u.infoWindowAnchor.height:0;a=e-l.y+this._opts.offset.height+p+2;break;case o:p=this._marker?-u.anchor.height+u.infoWindowAnchor.height+this._marker.getOffset().height+this._opts.offset.height:0;r=e+l.y-t+p+4;break}panX=h>0?h:d>0?-d:0,c=a>0?a:r>0?-r:0,this._map.panBy(panX,c)}}},_removeMarkerEvt:function(){this._markerDragend&&this._marker.removeEventListener("dragend",this._markerDragend),this._markerDragging&&this._marker.removeEventListener("dragging",this._markerDragging),this._markerDragend=this._markerDragging=null},_dispatchEvent:function(t,e,s){0!=e.indexOf("on")&&(e="on"+e);var n=new i.lang.Event(e);if(s)for(var o in s)n[o]=s[o];t.dispatchEvent(n)}})})()},"18a5":function(t,i,e){"use strict";var s=e("23e7"),n=e("857a"),o=e("af03");s({target:"String",proto:!0,forced:o("anchor")},{anchor:function(t){return n(this,"a","name",t)}})},"1d31":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"mapbot"},[s("nav-top",{attrs:{bgImg:e("db04"),title:t.pageTitle},on:{backEvent:t.backEvent}}),s("nav-content",[1===t.isOpenLocation?[s("div",{ref:"mapBxo",staticClass:"map-box"},[s("div",{staticClass:"allmap",attrs:{id:t.randomId}}),s("div",{staticClass:"mapmore"},[s("div",{staticClass:"searchdiv"},[s("div",{staticClass:"city-div"},[s("img",{attrs:{src:e("7628"),alt:""}}),s("div",[t._v(t._s(t.locationinfo.city))])]),s("div",{staticClass:"search-div"},[s("img",{staticClass:"search",attrs:{src:"static/image/station/search.png",alt:""},on:{click:t.searchMore}}),t.searchText?s("span",{staticClass:"black-text single-line",on:{click:t.searchMore}},[t._v(t._s(t.searchText))]):s("span",{attrs:{lass:"single-line"},on:{click:t.searchMore}},[t._v("输入地点或商区名称")]),s("img",{staticClass:"gps-img",attrs:{src:e("5785"),alt:""},on:{click:t.pageInit}})])])])]),s("StationDetail",{ref:"StationDetail",on:{changeTitle:t.changeTitle}})]:t._e()],2),t.isShowSearch?s("div",{staticClass:"search-container"},[s("div",{staticClass:"searchmorebot"},[s("div",{staticClass:"qrcode-top ",style:{height:this.$store.state.barHeight+this.$market.getNavHeight()+"px"},on:{backEvent:t.searchBackEvent}},[s("div",{staticClass:"navcontent",style:{top:this.$store.state.barHeight+"px",height:this.$market.getNavHeight()+"px"}},[s("div",{on:{click:t.searchBackEvent}},[s("i",{staticClass:"iconfont mall-fanhui theme_font_black"})]),s("div",{staticClass:"search-div"},[s("img",{staticClass:"searchimg",attrs:{src:"static/image/station/search.png",alt:""}}),s("div",{staticClass:"form-control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"input-none",attrs:{type:"search",placeholder:"输入地点或商区名称"},domProps:{value:t.searchText},on:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.searchEntery.apply(null,arguments)},input:function(i){i.target.composing||(t.searchText=i.target.value)}}})])]),s("div",{staticClass:"cancel",on:{click:t.cancelEvent}},[t._v("取消")])])]),s("nav-content",[!t.searchText&&t.searchHistoryArr[0]?s("div",{staticClass:"history-container"},[s("p",{staticClass:"his-title"},[t._v("搜索历史"),s("i",{staticClass:"clear-btn iconfont mall-shanchu theme_font_gray_i",on:{click:t.clearHistory}})]),s("ul",{staticClass:"his-item-container clearfix"},t._l(t.searchHistoryArr,(function(i,e){return s("li",{key:e,on:{click:function(e){return t.historyClick(i)}}},[t._v(t._s(i)+" ")])})),0)]):s("div",{staticClass:"listcontent"},t._l(t.dataList,(function(i){return s("div",{staticClass:"list-item",on:{click:function(e){return t.backMap(i)}}},[s("div",{staticClass:"list_name theme_font_black"},[t._v(t._s(i.name))]),s("div",{staticClass:"list_location theme_font_tint"},[t._v(t._s(i.province+i.city+i.district)+" ")])])})),0)])],1)]):t._e()],1)},n=[],o=e("53ca"),a=(e("0d03"),e("d3b7"),e("25f0"),e("4795"),e("b0c0"),e("498a"),e("4de4"),e("ac1f"),e("1276"),e("a15b"),e("a434"),e("c740"),e("4160"),e("159b"),e("09cb")),r=(e("e2ba"),e("0cbd"),e("da71")),c=e("f2e8"),l=e.n(c),h=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"StationDetail",staticClass:"station-detail",class:{"has-bk":t.isUp},style:{top:t.nowTop+"px"}},[e("div",{staticClass:"station-detail-info"},[t.station?e("div",{staticClass:"station-detail-info-content",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[e("div",{staticClass:"local-detail"},[t._m(0),e("div",{staticClass:"info-div"},[e("div",{staticClass:"row"},[e("div",{staticClass:"title single-line"},[t._v(t._s(t.station.name))]),t.station.distance<500?e("div",{staticClass:"yz-btn"},[e("img",{attrs:{src:"static/images/esh-nearstation/jzjy.png"}}),e("span",[t._v("进站加油")])]):e("div",{staticClass:"yz-btn"},[e("img",{staticClass:"dhdz",attrs:{src:"static/images/esh-nearstation/dhdz.png"}}),e("span",[t._v("导航到站")])])]),e("div",{staticClass:"row1"},[t._m(1),e("div",{staticClass:"address double-line"},[t._v(t._s(t.station.address))]),t.station.distance>1e3?e("div",{staticClass:"distance"},[t._v(" 距您"+t._s(t.$util.toDecimal2(t.station.distance/1e3))+"km ")]):e("div",{staticClass:"distance"},[t._v(" 距您"+t._s(t.station.distance)+"m ")])])])]),e("div",{staticClass:"block"},[t._m(2),e("div",{staticClass:"title"},[t._v("电子加油券")]),e("div",{staticClass:"right"},[e("div",{staticClass:"amount"},[t._v("¥"+t._s(t.$util.toDecimal2(t.couponDetail.totalAmount)))]),e("div",{staticClass:"btn line_circle",on:{click:function(i){return t.$router.push({path:"/icbc/oilcoupon",query:{noDetail:!0}})}}},[t._v("立即加油")])])])]):t._e(),e("div",{staticClass:"coupon-list-group"},[t.station&&t.jfhqCouponList.length>0?e("div",{staticClass:"jfhq-div",class:{"jfhq-div-1":t.isUp}},[e("div",{staticClass:"title"},[t._v("积分换券")]),t._l(t.jfhqCouponList,(function(i){return e("div",{staticClass:"coupon",on:{click:function(e){return t.buyCouponEvent2(i)}}},[e("div",{staticClass:"mianer"},[e("span",[t._v("¥")]),e("span",{staticClass:"big"},[t._v(t._s(t.$util.toDecimal2(i.couType.couThresholdAmount)))])]),e("div",{staticClass:"cou-info"},[e("div",{staticClass:"cou-title double-line"},[t._v(t._s(i.couType.couTypeTitle))]),e("div",{staticClass:"cou-time"},[t._v("有效期至："+t._s(i.couType.validEndDate))])]),e("div",{staticClass:"right"},[e("div",{staticClass:"text"},[t._v("消耗积分")]),e("div",{staticClass:"points"},[t._v(t._s(i.exchangeUnit))]),e("div",{staticClass:"btn"},[t._v("立即兑换")])])])}))],2):t._e(),t.jyCouponList.length>0&&t.station?e("div",{staticClass:"jyq-div",class:{"jyq-div-1":t.isUp}},[e("div",{staticClass:"title"},[t._v("抢券加油")]),t._l(t.jyCouponList,(function(i){return e("div",{staticClass:"coupon",on:{click:function(e){return t.buyCouponEvent(i)}}},[e("div",{staticClass:"mianer"},[e("p",{staticClass:"big"},[t._v("加油券")]),i.stockNum?e("p",{staticClass:"number"},[t._v("剩余"+t._s(i.stockNum>=100?"99+":i.stockNum)+"张")]):e("p",{staticClass:"number"},[t._v("剩余99+张")])]),e("div",{staticClass:"cou-info"},[e("div",{staticClass:"cou-title double-line"},[t._v(t._s(i.showTitle))]),e("div",{staticClass:"cou-time"},[t._v("有效期：180天")])]),e("div",{staticClass:"right"},[e("div",{staticClass:"price"},[t._v("¥"+t._s(i.activityPrice))]),e("div",{staticClass:"text"},[t._v("¥"+t._s(i.salePrice))]),e("div",{staticClass:"btn"},[t._v("立即购买")])])])}))],2):t._e()])])])},d=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"img-div"},[e("img",{attrs:{src:"static/images/esh-nearstation/logo.png"}})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"dw"},[e("img",{attrs:{src:"static/images/esh-nearstation/dw2.png",alt:""}})])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"icon"},[s("img",{attrs:{src:e("d2c9")}})])}],u={name:"station-detail",components:{},data:function(){return{jyCouponList:[],jfhqCouponList:[],station:null,couponDetail:{},nowTop:0,isUp:!1}},watch:{},methods:{buyCouponEvent:function(t){this.$router.push({path:"/icbc/coupondetail",query:{couponData:JSON.stringify(t)}})},buyCouponEvent2:function(t){this.$router.push({path:"/icbc/coupondetail",query:{type:2,couponData:JSON.stringify(t)}})},setStationDetail:function(t){this.station=t},scrollHandler:function(){var t=this.$refs.StationDetail;this.selfScrollTop=t.scrollTop,this.selfScrollTop>=this.fullScrollTop?(this.zIndex=15,this.silderMargin=0):this.selfScrollTop>260*this.ratio?(this.zIndex=15,this.silderMargin=10):(this.zIndex=9,this.silderMargin=10)},touchStart:function(t){var i=t.touches[0];this.startY=i.clientY},touchMove:function(t){var i=t.touches[0],e=this.startY,s=i.clientY,n=0;this.$store.state.barHeight,this.$market.getNavHeight();e>s?(n=0,this.isUp=!0):(n=.6*this.domHeight,this.isUp=!1),this.nowTop=n},touchEnd:function(){},getJFCouponList:function(){var t=this,i="/app/json/app_exchange/queryExchangeDetailList",e={longitude:this.$store.state.currentLocation.posx,latitude:this.$store.state.currentLocation.posy};this.$Loading.open(),this.$http.post(i,e).then((function(i){t.$Loading.close();var e=i.data;0===e.status?t.jfhqCouponList=e.data:t.$Toast(e.info)}),(function(i){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},getJYCouponList:function(){var t=this,i="/app/json/product/getAppProSearchList",e={productType:5,supportCountryDelivery:0,page:1,rows:5};e.area={provinceId:this.$store.state.indexData.provinceId,cityId:this.$store.state.indexData.cityId},this.$Loading.open(),this.$http.post(i,e).then((function(i){t.$Loading.close();var e=i.data;0===e.status?t.jyCouponList=e.data.list:t.$Toast(e.info)}),(function(i){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},getJYCouponInfo:function(){var t=this,i="/app/json/djljy/router?m=getAccount",e={userId:this.$store.state.userInfo.userId};this.$Loading.open(),this.$http.post(i,e).then((function(i){t.$Loading.close();var e=i.data;0===e.status?t.couponDetail=JSON.parse(e.data).walletObj:t.$Toast(e.info)}),(function(i){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))}},mounted:function(){var t=this;this.$nextTick((function(){t.domHeight=document.documentElement.clientHeight,t.nowTop=.7*t.domHeight})),this.getJFCouponList(),this.getJYCouponList(),this.getJYCouponInfo()}},p=u,g=(e("cb31"),e("0c7c")),f=Object(g["a"])(p,h,d,!1,null,"b9dddccc",null),v=f.exports,m={dictValue:"all",alias:"全部",_type:0},_={name:"home-stationto",components:{StationDetail:v},props:{hasBack:{type:Boolean,default:!0}},data:function(){return{locationinfo:{},pageTitle:"优惠加油",bdMap:null,stations:[],nowmk:null,openListener:null,pageOn:0,isBottomBounce:!0,isShowSearch:!1,searchText:null,isActive:!1,dataList:[],searchHistoryArr:[],isOpenLocation:-1,mode:[m],tags:[],loadedTimes:0,randomId:"",mapslogo:"static/image/station/mapslogo.png",mapslogo1:"static/image/station/mapslogo1.png",pageType:0,selectedIndex:0}},created:function(){this.randomId=this.randomString(),this.selectedIndex=this.$route.query.index||0,this.$store.state.globalConfig.mapslogo&&this.$store.state.globalConfig.mapslogo.length&&(this.mapslogo=this.$store.state.globalConfig.mapslogo),this.$store.state.globalConfig.mapslogo1&&this.$store.state.globalConfig.mapslogo1.length&&(this.mapslogo1=this.$store.state.globalConfig.mapslogo1)},mounted:function(){var t=this;this.initHistory(),this.$nextTick((function(){t.pageInit()})),this.queryMarks(),this.debounceQueryLocation=this.$util.debounce(this.queryLocation,500)},watch:{searchText:function(t,i){this.initHistory(),this.debounceQueryLocation(t)}},beforeRouteLeave:function(t,i,e){this.$keepaliveHelper.deleteCache(this),e()},methods:{changeTitle:function(t){this.pageType=t,this.pageTitle=1==t?"加油站详情":"优惠加油"},searchEntery:function(){this.searchText&&this.debounceQueryLocation(curVal)},randomString:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var i=(new Date).getTime()+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t();return i},pageInit:function(){var t=this;this.$bridgefunc.checkLocationAuth(t.pageInit).then((function(i){Object(a["a"])().then((function(s){t.loadBd(s),t.getLocation(s,i),e("1498"),t.loadedTimes++,1==t.loadedTimes&&setTimeout((function(){var i=window.document.getElementById(t.randomId);""==i.innerHTML&&t.pageInit()}),200)})),t.isOpenLocation=1}),(function(){t.isOpenLocation=0,t.$Toast("请您开启GPS定位附近中国石化加油站")}))},settingLocation:function(){this.$bridgefunc.requestPermissions()},cancelEvent:function(){this.searchText?this.searchText=null:this.isShowSearch=!1},searchBackEvent:function(){this.isShowSearch=!1},_moveFunc:function(t){this.searchText="",this.isActive=!0},focusFunc:function(){this.isActive=!1},backMap:function(t){this.stations=[],this.setHistoryItems(t.name),this.$store.state.selectp.lat=t.location.lat,this.$store.state.selectp.lng=t.location.lng;var i=this;this.$bridgefunc.vuexStorage((function(){i.searchBackEvent()})),this.newGet()},setHistoryItems:function(t){t=t.trim();var i=localStorage,e=i.searchHistory;if(e){var s=e.split("|").filter((function(i){return i!=t}));s.length>=6&&s.pop(),s.length>0&&(e=t+"|"+s.join("|")),localStorage.searchHistory=e}else localStorage.searchHistory=t},initHistory:function(){var t=window.localStorage.getItem("searchHistory");this.searchHistoryArr=t?t.split("|"):[]},historyClick:function(t){this.searchText=t},clearHistory:function(){this.searchHistoryArr=[],window.localStorage.searchHistory=""},backEvent:function(){1==this.pageType?this.$refs.StationDetail.silderToType(2):this.$router.go(-1)},newGet:function(){if(this.$store.state.selectp.lng&&""!=this.$store.state.selectp.lng){var t=new BMap.Point(this.$store.state.selectp.lng,this.$store.state.selectp.lat);this.getNearStations(t)}},loadBd:function(t){this.bdMap=new t.Map(this.randomId),this.bdMap.addControl(new t.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),this.bdMap.enableScrollWheelZoom(!0)},getLocation:function(t,i){var e=this;i.city&&""!=i.city||(i.province=this.$store.state.globalConfig.province,i.city=this.$store.state.globalConfig.city,i.district=this.$store.state.globalConfig.district,i.longitude=this.$store.state.globalConfig.longitude,i.latitude=this.$store.state.globalConfig.latitude),this.locationinfo=i;var s=new t.Point(i.longitude,i.latitude);e.getNearStations(s)},addNewLocations:function(){for(var t=this.bdMap.getOverlays(),i=0;i<t.length;i++){var e=t[i];e!=this.nowmk&&this.bdMap.removeOverlay(e)}if(this.stations){for(var s=0;s<this.stations.length;s++){var n=this.stations[s];n.startlong=this.nowmk.point.lng,n.startlat=this.nowmk.point.lat;var o=new BMap.Point(n.longitude,n.latitude),a=null;a=n.stationStatus&&"02"!=n.stationStatus?new BMap.Icon(this.mapslogo1,new BMap.Size(23,30)):new BMap.Icon(this.mapslogo,new BMap.Size(23,30));var r=new BMap.Marker(o,{icon:a});this.bdMap.addOverlay(r),s==this.selectedIndex&&(this.locationStation(n),this.openInfo(n)),l(n,r)}var c=this}function l(t,i){i.addEventListener("click",(function(){c.openInfo(t)}))}},openInfo:function(t){this.$refs.StationDetail.setStationDetail(t)},searchMore:function(){this.searchText=null,this.isShowSearch=!0},getNearStations:function(t){this.resetCondition(),this.nowmk&&this.bdMap.removeOverlay(this.nowmk),this.nowmk=new BMap.Marker(t),this.bdMap.addOverlay(this.nowmk),this.bdMap.centerAndZoom(t,14),this.requestStations()},requestStations:function(t){var i=this;this.$Loading.open(),this.pageOn++;var e="/app/json/djljy/router?m=getOilStation",s={longitude:this.nowmk.point.lng,latitude:this.nowmk.point.lat};this.$http.post(e,s).then((function(e){i.$Loading.close();var s=e.data;if(0==s.status){var n=JSON.parse(s.data);i.stations=n.oilStations,i.addNewLocations()}else i.$Toast(s.info);t&&t("done")}),(function(e){t&&t("done"),i.$Loading.close(),i.$Toast("请求错误")}))},gotoStation:function(t){this.$bridgefunc.baiduNav({startlong:this.locationinfo.longitude,startlat:this.locationinfo.latitude,endlong:t.posx,endlat:t.posy,txlong:t.txPosx,txlat:t.txPosy,type:"nav"})},locationStation:function(t){this.bdMap.centerAndZoom(new BMap.Point(t.longitude,t.latitude-.01),14)},pushToDetail:function(t){this.$router.push({path:"/oilstationdetail",query:{startlong:this.nowmk.point.lng,startlat:this.nowmk.point.lat}})},searchMode:function(t){var i=this._findIndex(this.mode,t);i>-1?"all"!==t.dictValue&&this.mode.length>1&&this.mode.splice(i,1):"all"===t.dictValue?this.mode=[m]:(this._findIndex(this.mode,m)>-1&&(this.mode=[]),this.mode.push(t)),this.resetCondition(),this.requestStations()},downFilter:function(){this.resetCondition(),this.requestStations()},_findIndex:function(t,i){return t.findIndex((function(t){return t.dictValue===i.dictValue}))},resetCondition:function(){this.pageOn=0,this.isBottomBounce=!0,this.stations=[]},queryLocation:function(t){if(t){var i=this.$store.state.indexData.province||131,e="https://api.map.baidu.com/place/v2/suggestion?query="+t+"&region="+i+"&output=json&ak="+r["a"].mapak,s=this;l()(e,null,(function(t,i){t||(s.dataList=i.result)}))}else this.dataList=[]},queryMarks:function(){var t=this;this.$request.post("/app/json/station/queryOilMarks").then((function(i){0===i.status&&(i.data&&i.data.forEach((function(i){"object"===Object(o["a"])(i)&&(i._type=1,t.tags.push(i))})),t.$request.post("/app/json/station/queryServMarks").then((function(i){0===i.status&&i.data&&i.data.forEach((function(i){"object"===Object(o["a"])(i)&&(i._type=2,t.tags.push(i))})),t.tags.length&&t.tags.unshift(m)})))}))}}},A=_,y=(e("5fad"),Object(g["a"])(A,s,n,!1,null,null,null));i["default"]=y.exports},5785:function(t,i){t.exports="data:image/png;base64,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"},"5fad":function(t,i,e){"use strict";e("7cb1")},7628:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAgCAYAAAGUbjOtAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAG6ADAAQAAAABAAAAIAAAAAADNv9UAAAEBklEQVRIDaWXS2hcVRjH5955hGmIOovYh0LFQoqkFDTQdpFCAlVEaLswDuIi7wdmpS6EuHEjbaGLJoU+8ppBiIuGbBoq0oVW6SJ1ISWLVttFREiC1tiJpaEpThJ/3+39Dmdu7mQu6YEz3/N/vu9853UnFqMNDw/vGBkZuSq8Mzo6emR9fX1GBGluIpH4UxjHcb4S6jUgG9JVljH+EMHxtV/Dt7mi6evraxfqyI9iSgQxaIvH4285JPN0Y2MjJUrgJc4lgqKEkt8dW/ZiaTzPQa0Mf5nhW5LJ5KHOzs45zzg5ORkvFApFdVIq8d2A4awaGf6bhApWpsfQvUn/yKuAOOD5i1CaGCTba874+PieYrG4IAq7eTG7uroWUS7ZhnQ6vVNkLWwtw6z6DntbW1sfCO9VyFfGmOtj5lqtcpBSg5epwd+iL1vaIMiWJVdZ9FsoD9uGVCqV6ejoWFadvRSqc8n/iQpKbZDo8FlTm9JtpZrJZKpMcWTDU5gTOmI5qqtqgOpob1LVCaWi9VT0ruo2AdVAQebhX6GniPKf6pVuAo6NjR1fW1sboCANOP1G+uMAzytAqAEx+sfIF22jzTPId729ve+JzgNFLQj+j4j6oix6I8JNGSFKI+KkbNwwQMF13U9x0DNixmOOWXPCjDYWWyCFV315kNRP4Thg2Z8dEVsB/6EtM/kvbFl4c1wtg8zRtImJiReM4DOyiYMb9DTX6Btip0jJlZWVf4Mgh8U8xGL+HDRsIf+j61Rgsi9t4WhMdXV1SW9OTDZjtFszZ5qbm4umEKzL61v7x+ZYCq/0BtTT0/M7RXm3DHAJwD61GZAoSPM6wJNqFIp8H0CtrSsBiQHgNI56tQ4j77cBwpujETTkcrlaruHPqWo/th1Be5hMsJv4f0lmN0LttpK3Jb28vJwDULIFbZ+oPIEXeSRbeB7MG21mxkG44M8i6niR/Aj6V1VVVUNbW9uCbsJZAh2MhN6mE0GbEsxoMGKg7/lSafVfTS8kODlm/dAherxCHt/KPfNBBScxf8ainwv6ka18DV1grXN8LsiBTwZ9VCaZapefTdtYHZRy+m4rH0az2aw8n/fCbLaOcdzLtiKM56tvKp/P7wqziY6luAQ5UM7u64u6Qa4ww2wFZzndq/j8RJ+l7wZzFPoavWID2+IFE08u2mnI8YqobTgQ6BNulCETTMagHO1km9/GeKEQ2UD0Y1yeP4hDSTBR8LVYw4sxQ9B6kZ+j3eBT6G02j3m2NgXTwXnHjrIxriOnVReFMpNFeqM8BUH/ssHUkdKeYJZTyGXPkPgSYJ7+DkF+VWyQVgymAGbaRNBpeo3qhBLgR47P+93d3Q9tfRgfOZiC/X8AVwiSZ4flVB+F/g+dJ49Ezx2+pgAAAABJRU5ErkJggg=="},"7cb1":function(t,i,e){},bd8f:function(t,i,e){},c740:function(t,i,e){"use strict";var s=e("23e7"),n=e("b727").findIndex,o=e("44d2"),a="findIndex",r=!0;a in[]&&Array(1)[a]((function(){r=!1})),s({target:"Array",proto:!0,forced:r},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},cb31:function(t,i,e){"use strict";e("bd8f")},d2c9:function(t,i,e){t.exports=e.p+"static/images/c9b858aa5bf2e56c96b234094c6bff59.png"},db04:function(t,i,e){t.exports=e.p+"static/images/99721781406ba21e46405216d8c0c0e9.png"},e2ba:function(t,i,e){e("fb6a"),function(){function t(i,e,s,n){this.c=i,this.d=e,this.h=s,this.g=n,this.b=t.b++,this.c.a=this.c.a||{},this.c.a[this.b]=this}window.EventWrapper=window.EventWrapper||{};var i=window.EventWrapper;i.addDomListener=function(i,e,s){return i.addEventListener?i.addEventListener(e,s,!1):i.attachEvent?i.attachEvent("on"+e,s):i["on"+e]=s,new t(i,e,s,t.e)},i.addDomListenerOnce=function(t,e,s){return i.j(t,e,(function(){return i.i(t,e,s),s.apply(this,arguments)}))},i.addListener=function(i,e,s){return i.addEventListener(e,s),new t(i,e,s,t.f)},i.addListenerOnce=function(t,e,s){var n=i.k(t,e,(function(){return i.i(n),s.apply(this,arguments)}));return n},i.clearInstanceListeners=function(t){var e,s=t.a||{};for(e in s)i.removeListener(s[e]);t.a={}},i.clearListeners=function(t,e){var s,n=t.a||{};for(s in n)n[s].d==e&&i.removeListener(n[s])},i.removeListener=function(i){var e,s=i.c,n=i.d,o=i.h,a=s.a||{};for(e in a)a[e].b==i.b&&(i.g==t.e?s.removeEventListener?s.removeEventListener(n,o,!1):s.detachEvent?s.detachEvent("on"+n,o):s["on"+n]=null:i.g==t.f&&s.removeEventListener(n,o),delete a[e])},i.trigger=function(t,i){var e,s=t.a||{};for(e in s)if(s[e].d==i){var n=Array.prototype.slice.call(arguments,2);s[e].h.apply(t,n)}},t.b=1,t.e=1,t.f=2}()}}]);