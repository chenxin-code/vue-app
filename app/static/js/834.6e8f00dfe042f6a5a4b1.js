(window.webpackJsonp=window.webpackJsonp||[]).push([[834],{TrQO:function(t,n,i){"use strict";var o;function a(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}i.r(n);var e={name:"bind-alipay",components:{},data:function(){return{aliInfo:{},bindType:-1}},methods:(o={backEvent:function(){this.$router.go(-1)},wechatOp:function(){2==this.bindType?this.getAliLoginCodeStr():1==this.bindType&&this.unBindWechat()},getAliLoginCodeStr:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/login/getAliLoginCodeStr",{}).then((function(n){t.$Loading.close();var i=n.data;0==i.status?t.$bridgefunc.aliAuth(i.data,(function(n){var i=JSON.parse(decodeURIComponent(n));""==i.user_id?t.$Toast("支付宝授权失败"):t.aliLogin(i.auth_code)})):t.$Toast(i.info?i.info:"支付宝授权登录失败")}),(function(n){t.$Loading.close(),t.$Toast("支付宝授权登录失败")}))},aliLogin:function(t){var n=this;this.$Loading.open();var i={code:t,token:this.$store.state.login.token};this.$http.post("/app/json/user/getAliOpenId",i).then((function(i){n.$Loading.close(),console.log(i.data);var o=i.data;if(0==o.status){var a={};a.user_id=o.data,a.auth_code=t,n.bind(a)}else n.$Toast(o.info)}),(function(t){n.$Loading.close(),n.$Toast("系统运行过程中遇到问题，请稍候再试")}))},unBindWechat:function(){var t=this;this.$Loading.open();var n={token:this.$store.state.login.token,regChannel:4};this.$http.post("/app/json/user/unBindThirdUser",n).then((function(n){t.$Loading.close();var i=n.data;0==i.status?(t.$Toast("解绑成功"),t.bindType=2):t.$Toast(i.info)}),(function(n){t.$Loading.close(),t.$Toast("获取数据失败")}))}},a(o,"aliLogin",(function(t){var n=this;this.$Loading.open();var i={code:t,token:this.$store.state.login.token};this.$http.post("/app/json/user/getAliOpenId",i).then((function(i){n.$Loading.close(),console.log(i.data);var o=i.data;if(0==o.status){var a={};a.user_id=o.data,a.auth_code=t,n.bind(a)}else n.$Toast(o.info)}),(function(t){n.$Loading.close(),n.$Toast("系统运行过程中遇到问题，请稍候再试")}))})),a(o,"bind",(function(t){this.$router.push({path:"/usercenter/bindphone",isnativetop:"1",query:{thirdUserId:t.user_id,code:t.auth_code,regChannel:"6",bindType:3}})})),a(o,"getAliInfo",(function(){var t=this;this.$Loading.open();var n={token:this.$store.state.login.token};this.$http.post("/app/json/user/getAliUserInfo",n).then((function(n){t.$Loading.close();var i=n.data;0==i.status?(t.aliInfo=i.data,t.bindType=1):1034==i.errorCode?t.bindType=2:(t.$Toast(i.info),t.bindType=-1)}),(function(n){t.$Loading.close(),t.$Toast("获取数据失败")}))})),o),created:function(){this.getAliInfo()}},s=(i("omgc"),i("KHd+")),d=Object(s.a)(e,(function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"bind-alipay login2"},[i("nav-top",{on:{backEvent:t.backEvent}}),t._v(" "),i("nav-content",[i("div",{staticClass:"wechat"},[i("div",{staticClass:"warm-prompt mine-box-shodow"},[i("h2",{staticClass:"warm-title"},[t._v("温馨提示")]),t._v(" "),i("p",{staticClass:"unorder"},[t._v("1.销售APP账号与支付宝号需互相唯一；")]),t._v(" "),i("p",{staticClass:"unorder"},[t._v("2.当前账号绑定新支付宝需先解绑当前账号；")]),t._v(" "),i("p",{staticClass:"unorder"},[t._v("3.如支付宝号已绑定另外账号，需回原账号解绑.。")])]),t._v(" "),i("div",{staticClass:"bind-warp"},[i("div",{staticClass:"bind-logo"},[i("img",{attrs:{src:"static/image/setting/bind-alipay.png"}})])]),t._v(" "),-1!=t.bindType?i("div",{staticClass:"common-btn theme_bg_red theme_font_white mt100",on:{click:t.wechatOp}},[t._v(t._s(2==t.bindType?"马上绑定支付宝":"解绑支付宝")+"\n      ")]):t._e()])])],1)}),[],!1,null,"1aab2961",null);n.default=d.exports},mBUl:function(t,n,i){},omgc:function(t,n,i){"use strict";var o=i("mBUl");i.n(o).a}}]);