(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29117c86","chunk-a8f2ea64"],{1148:function(t,e,i){"use strict";var o=i("a691"),a=i("1d80");t.exports=function(t){var e=String(a(this)),i="",r=o(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},"17a0":function(t,e,i){"use strict";i("347e")},"333a":function(t,e,i){},"347e":function(t,e,i){},"408a":function(t,e,i){var o=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=o(t))throw TypeError("Incorrect invocation");return+t}},"69f4":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"countdown",class:{quan:"theme_bg_quan"==t.type}},[0==t.d||t.hiddenDay?t._e():i("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.d))]),0==t.d||t.hiddenDay?t._e():i("span",[t._v("天")]),i("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.h))]),t._v(" : "),i("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.m))]),t._v(" : "),i("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.s))])])},a=[],r=(i("4795"),i("e25e"),i("9d5d")),n={name:"countdown",props:["endTime","type","hiddenDay","callback"],components:{},data:function(){return{d:"0",h:"00",m:"00",s:"00",trigger:!0}},methods:{parsingTime:function(){var t=this;if(this.endTime){var e=this.$store.state.severTime.currentTime,i=this.endTime,o=i-e;this.d=0,this.h="0",this.m="0",this.s="0",o<0?this.trigger&&(this.trigger=!1,setTimeout((function(){t.$emit("timeOut")}),1e3)):(this.trigger=!0,o>59?(this.s=o%60,o=parseInt(o/60),o>59?(this.m=o%60,o=parseInt(o/60),o>23?(this.h=parseInt(o%24),o=parseInt(o/24),this.d=o):this.h=o):this.m=o):o>=0&&(this.s=o),this.h<10&&(this.h="0"+this.h),this.m<10&&(this.m="0"+this.m),this.s<10&&(this.s="0"+this.s))}}},created:function(){this.parsingTime(),r["a"].heartbeat()},destroyed:function(){r["a"].removeHeartbeat()},watch:{"$store.state.severTime.currentTime":function(){this.parsingTime()}}},s=n,c=(i("d49f"),i("0c7c")),u=Object(c["a"])(s,o,a,!1,null,"65b2d2d6",null);e["default"]=u.exports},"9d5d":function(t,e,i){"use strict";i("4795"),i("e25e"),i("0d03");var o,a=i("653a"),r=0,n={heartbeat:function(){r++,o||(o=window.setInterval((function(){var t=parseInt((new Date).getTime()/1e3);a["a"].state.severTime.currentTime=t+a["a"].state.severTime.jetlag}),1e3))},removeHeartbeat:function(){r>0&&r--,0==r&&(window.clearInterval(o),o=null)}};e["a"]=n},b680:function(t,e,i){"use strict";var o=i("23e7"),a=i("a691"),r=i("408a"),n=i("1148"),s=i("d039"),c=1..toFixed,u=Math.floor,p=function(t,e,i){return 0===e?i:e%2===1?p(t,e-1,i*t):p(t*t,e/2,i)},d=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},l=function(t,e,i){var o=-1,a=i;while(++o<6)a+=e*t[o],t[o]=a%1e7,a=u(a/1e7)},g=function(t,e){var i=6,o=0;while(--i>=0)o+=t[i],t[i]=u(o/e),o=o%e*1e7},h=function(t){var e=6,i="";while(--e>=0)if(""!==i||0===e||0!==t[e]){var o=String(t[e]);i=""===i?o:i+n.call("0",7-o.length)+o}return i},v=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));o({target:"Number",proto:!0,forced:v},{toFixed:function(t){var e,i,o,s,c=r(this),u=a(t),v=[0,0,0,0,0,0],f="",C="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(f="-",c=-c),c>1e-21)if(e=d(c*p(2,69,1))-69,i=e<0?c*p(2,-e,1):c/p(2,e,1),i*=4503599627370496,e=52-e,e>0){l(v,0,i),o=u;while(o>=7)l(v,1e7,0),o-=7;l(v,p(10,o,1),0),o=e-1;while(o>=23)g(v,1<<23),o-=23;g(v,1<<o),l(v,1,1),g(v,2),C=h(v)}else l(v,0,i),l(v,1<<-e,0),C=h(v)+n.call("0",u);return u>0?(s=C.length,C=f+(s<=u?"0."+n.call("0",u-s)+C:C.slice(0,s-u)+"."+C.slice(s-u))):C=f+C,C}})},d49f:function(t,e,i){"use strict";i("333a")},ebec:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.groupCoupon?i("div",{staticClass:"coupon",class:{shadow:!t.groupCoupon.tagging},on:{click:function(e){return t.toDetails(t.groupCoupon,t.type)}}},[i("div",{staticClass:"coupon-type",style:{width:t.groupCoupon.tagging?"65px":"85px",height:t.groupCoupon.tagging?"65px":"85px"}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.groupCoupon.pcMainUrl,expression:"groupCoupon.pcMainUrl"}],staticClass:"img",attrs:{alt:""}})]),i("div",{staticClass:"coupon-content"},[i("div",{staticClass:"title"},[1==t.groupCoupon.actState?i("div",{staticClass:"dowm"},[i("countdown",{staticClass:"count-down-con",attrs:{hiddenDay:!1,endTime:t.groupCoupon.timEnew}})],1):t._e(),t._v(" "+t._s(t.groupCoupon.proName)+" ")]),t.mybargainList?i("div",{staticClass:"title sotck"},[i("div",{staticClass:"prograss"},[i("div",{staticClass:"p1",style:t.getTotalHeight(t.groupCoupon)},[t._v(t._s((t.groupCoupon.actStock/t.groupCoupon.setActStock*100).toFixed(0)+"%"))]),i("div",{staticClass:"p2"})]),i("div",[i("span",[t._v("正在疯抢")]),t._v(" "),i("span",[t._v("剩余库存"+t._s(t.groupCoupon.actStock))])])]):t._e(),"bargainDetails"==t.groupCoupon.tagging?i("div",{staticClass:"operation"},[i("div",{staticClass:"price bargainDetails"},[i("div",{staticClass:"price-top"},[t._v("可砍至 ¥"+t._s(t.$util.toDecimal2(t.groupCoupon.minPrice)))]),i("div",{staticClass:"price-buttom",class:{"price-lift":t.groupCoupon.tagging}},[t._v("原价 ¥"+t._s(t.$util.toDecimal2(t.groupCoupon.originalPrice||t.groupCoupon.origPrice)))])])]):i("div",{staticClass:"operation"},[t.mybargainList?[1==t.groupCoupon.state?i("div",{staticClass:"price"},[i("div",{staticClass:"count-down"},[i("countdown",{staticClass:"count-down-con",attrs:{hiddenDay:!0,endTime:t.groupCoupon.timEnew}}),t._v(" 后结束")],1),i("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("还差 "),i("span",{staticStyle:{color:"#f80f16"}},[t._v(t._s(t.$util.toDecimal2((100*Number(t.groupCoupon.actPrice)-100*Number(t.groupCoupon.minPrice))/100))+"元")]),t._v(" 元")])]):t._e(),2==t.groupCoupon.state?i("div",{staticClass:"price"},[i("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("砍价结束")]),i("div",{staticStyle:{height:"12px"}}),i("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("还差 "),i("span",{staticStyle:{color:"#f80f16"}},[t._v(t._s(t.$util.toDecimal2((100*Number(t.groupCoupon.actPrice)-100*Number(t.groupCoupon.minPrice))/100)))]),t._v(" 元，砍价成功")])]):t._e(),3==t.groupCoupon.state?i("div",{staticClass:"price"},[i("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("砍价结束")]),i("div",{staticStyle:{height:"12px"}}),i("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("还差 "),i("span",{staticStyle:{color:"#f80f16"}},[t._v(t._s(t.$util.toDecimal2((100*Number(t.groupCoupon.actPrice)-100*Number(t.groupCoupon.minPrice))/100))+"元")]),t._v(" 元，砍价失败")])]):t._e(),i("div",[1==t.groupCoupon.state?i("span",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.invitationBtn(t.groupCoupon)}}},[t._v("邀请好友")]):t._e(),2==t.groupCoupon.state&&2!=t.groupCoupon.orderState&&3!=t.groupCoupon.orderState?i("span",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.successBtn(t.groupCoupon)}}},[t._v("立即购买")]):t._e(),2==t.groupCoupon.state&&3==t.groupCoupon.orderState?i("span",{staticClass:"btn"},[t._v("已支付")]):t._e(),2==t.groupCoupon.state&&2==t.groupCoupon.orderState?i("span",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.payEvent(t.groupCoupon)}}},[t._v("去支付")]):t._e(),3==t.groupCoupon.state?i("span",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.toDetails(t.groupCoupon,t.type)}}},[t._v("查看详情")]):t._e()])]:[i("div",{staticClass:"price"},[i("div",{staticClass:"price-top price-top-new"},[t._v("可砍至 ¥"+t._s(t.$util.toDecimal2(t.groupCoupon.minPrice)))]),i("div",{staticClass:"price-buttom"},[i("span",{staticClass:"price"},[t._v("原价 ¥"+t._s(t.$util.toDecimal2(t.groupCoupon.originalPrice||t.groupCoupon.origPrice)))]),i("span",{staticClass:"price-lift"},[t._v("库存 "+t._s(t.groupCoupon.actStock||0))])])]),1==t.type.cutActivityType?i("div",[i("span",{staticClass:"dis-btn"},[t._v("未开始")])]):i("div",{staticClass:"btn-con"},[i("div",[0==t.groupCoupon.actState?i("span",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.launchBtn(t.groupCoupon)}}},[t._v("发起砍价")]):t._e(),1==t.groupCoupon.actState?i("span",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.invitationBtn(t.groupCoupon)}}},[t._v("邀请好友")]):t._e(),2==t.groupCoupon.actState?i("span",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.launchBtn(t.groupCoupon)}}},[t._v("再次发起")]):t._e(),4==t.groupCoupon.actState?i("span",{staticClass:"btn"},[t._v("暂无库存")]):t._e()]),i("van-progress",{attrs:{percentage:t.percentage,color:"#ee0a24"}})],1)]],2)])]):t._e()])},a=[],r=i("5530"),n=(i("99af"),i("b680"),i("2f62")),s=i("da71"),c=i("5b7e"),u=i("69f4"),p={name:"",components:{Countdown:u["default"]},props:{groupCoupon:{type:Object,default:function(){return null}},mybargainList:{type:Boolean,required:!1,default:!1},type:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{shareView:!1,isToUse:!1,countDownTimeout:!1,percentage:0}},mounted:function(){var t={},e=this.groupCoupon;if(t.title=e.proName,t.sharetext=e.actDesc,t.imageurl=e.pcMainUrl,t.detailurl=this.$store.state.globalConfig.wxBaseUrl+s["a"].shareUrl+"/bargain/bargain_details?id=".concat(e.id,"&skuId=").concat(e.skuId,"&origId=").concat(e.origId||e.id,"&productId=").concat(e.id,"&bargainActId=").concat(e.bargainActId,"&storeOuCode=").concat(e.storeOucode,"&oprice=").concat(e.originalPrice||e.origPrice,"&kprice=").concat(e.minPrice,"&userId=").concat(this.userInfo.userId,"&bargainOrderId=").concat(e.id),1==this.$store.state.webtype);else if(2==this.$store.state.webtype)c["a"].wxSetShareData(t);else if(3==this.$store.state.webtype){c["a"].wxmpPath(this.$route);var i={title:e.proName,path:s["a"].shareUrl+"/bargain/bargain_details?id=".concat(e.id,"&skuId=").concat(e.skuId,"&origId=").concat(e.origId||e.id,"&productId=").concat(e.id,"&bargainActId=").concat(e.bargainActId,"&storeOuCode=").concat(e.storeOucode,"&oprice=").concat(e.originalPrice||e.origPrice,"&kprice=").concat(e.minPrice,"&userId=").concat(this.userInfo.userId,"&bargainOrderId=").concat(e.id),imageUrl:e.pcMainUrl};wx.miniProgram.postMessage({data:JSON.stringify(i)})}this.percentage=(this.groupCoupon.actStock/this.groupCoupon.setActStock*100).toFixed(2)||0},computed:Object(r["a"])({},Object(n["c"])(["userInfo"])),methods:{getTotalHeight:function(t){return"width:"+(t.actStock/t.setActStock*100).toFixed(0)+"%"},getPer:function(t){return(t.actStock/t.setActStock*100).toFixed(0)||0},toDetails:function(t,e){if(0==e.cutActivityType&&4!=t.actState)if(0==t.actState||2==t.actState){var i="/bargain/prodetail";this.$router.push({path:i,query:{id:t.id,skuId:t.skuId,origId:t.origId,productId:t.id,bargainActId:t.bargainActId,storeOuCode:t.storeOucode,oprice:t.originalPrice||t.origPrice,kprice:t.minPrice,bargainOrderId:t.id}})}else this.$router.push({path:"/bargain/bargain_details",query:{id:t.id,skuId:t.skuId,origId:t.state?t.id:t.origId,productId:t.id,bargainActId:t.bargainActId,storeOuCode:t.storeOucode,oprice:t.originalPrice||t.origPrice,kprice:t.minPrice,bargainOrderId:t.id,EnterFlag:!0}})},payEvent:function(t){var e=this,i={orderType:"200015",orderId:t.orderId};this.$request.post("/app/json/app_shopping_order/detail",i).then((function(t){if(0==t.status){var i=t.data||{};e.$router.push({path:"/mall2/checkstand",query:{payInfo:JSON.stringify({orderId:i.id,orderType:i.orderType,payAmount:i.payAmount,tradeNo:i.tradeNo}),occurOuCode:i.ouCode,cutPrice:!0}})}else e.$Toast(t.info)}))},launchBtn:function(t){var e="/bargain/prodetail";this.$router.push({path:e,query:{id:t.id,skuId:t.skuId,origId:t.origId,productId:t.id,bargainActId:t.bargainActId,storeOuCode:t.storeOucode,oprice:t.originalPrice||t.origPrice,kprice:t.minPrice,bargainOrderId:t.id}})},invitationBtn:function(t){var e=this,i={};i.title=t.proName,i.sharetext=t.actDesc,i.imageurl=t.pcMainUrl,i.detailurl=this.$store.state.globalConfig.wxBaseUrl+s["a"].shareUrl+"/bargain/bargain_details?id=".concat(t.id,"&skuId=").concat(t.skuId,"&origId=").concat(t.origId||t.id,"&productId=").concat(t.id,"&bargainActId=").concat(t.bargainActId,"&storeOuCode=").concat(t.storeOucode,"&oprice=").concat(t.originalPrice||t.origPrice,"&kprice=").concat(t.minPrice,"&userId=").concat(this.userInfo.userId,"&bargainOrderId=").concat(t.id),1==this.$store.state.webtype?this.$bridgefunc.wechatShare(i):2==this.$store.state.webtype?c["a"].getWechatSignature((function(t){t&&(e.shareView=!0)})):3==this.$store.state.webtype&&this.$emit("inventFrend",!0)},successBtn:function(t){this.$emit("successBtn",t)}}},d=p,l=(i("17a0"),i("0c7c")),g=Object(l["a"])(d,o,a,!1,null,"4f82ec2e",null);e["a"]=g.exports}}]);