(window.webpackJsonp=window.webpackJsonp||[]).push([[332],{"8slX":function(t,e,o){"use strict";var s={name:"goodscell",components:{},props:["goodsInfo","goodsCount","type"],data:function(){return{msg:"msg"}},methods:{testFunc:function(){console.log("testFunc")}},created:function(){}},i=(o("CEim"),o("KHd+")),r=Object(i.a)(s,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"bottom"},[o("div",{staticClass:"goods-info"},[o("img",{attrs:{src:t.goodsInfo.phPictureUrl}}),t._v(" "),o("div",{staticClass:"right-good"},[o("div",{staticClass:"goods-title theme_font_common"},[o("p",[t._v(t._s(t.goodsInfo.skuName))])]),t._v(" "),o("div",{staticClass:"goods-price theme_font_gray"},[t._v("\n            单价：￥"+t._s(t.goodsInfo.salePrice?t.goodsInfo.salePrice:t.goodsInfo.price)+"  数量："+t._s(1==t.type?t.goodsInfo.payNumber:t.goodsInfo.number)+"  "),1==t.type?o("span",[t._v("申请数量："+t._s(t.goodsInfo.number))]):t._e(),2==t.type?o("span",[t._v("申请数量："+t._s(t.goodsCount))]):t._e()])])])]),t._v(" "),o("div",{staticClass:"package-list"},t._l(t.goodsInfo.packageList,(function(e){return o("div",{staticClass:"bottom"},[o("div",{staticClass:"goods-info"},[o("img",{attrs:{src:e.phPictureUrl}}),t._v(" "),o("div",{staticClass:"right-good"},[o("div",{staticClass:"goods-title theme_font_common"},[o("p",[t._v(t._s(e.skuName))])]),t._v(" "),o("div",{staticClass:"goods-price theme_font_gray"},[e.salePrice?o("span",[t._v("单价：￥"+t._s(e.salePrice))]):t._e(),t._v(" "),e.number?o("span",[t._v("  数量："+t._s(e.number))]):t._e()])])])])})),0)])}),[],!1,null,"78f64e60",null);e.a=r.exports},CEim:function(t,e,o){"use strict";var s=o("Vq2f");o.n(s).a},Vq2f:function(t,e,o){},WPfs:function(t,e,o){"use strict";var s=o("zcPa");o.n(s).a},zJyP:function(t,e,o){"use strict";o.r(e);var s=o("8slX"),i=o("0FX9"),r=o.n(i),n={name:"detailservice",components:{GoodsCell:s.a},data:function(){return{isShow:!1,liftsVoucher:"",goodsInfo:{skuName:"",salePrice:"",number:"",phPictureUrl:""},orderinfos:[{title:"服务单号",value:"",tag:0},{title:"服务类型",value:"退货",tag:1},{title:"退款金额",value:"￥46.00",tag:2},{title:"申请时间",value:"",tag:3},{title:"审核时间",value:"",tag:4},{title:"商家确认时间",value:"",tag:5},{title:"退款单号",value:"",tag:6}],steps:["提交申请","商家审核","客户发货","客户发货","发货"],completeStep:3,orderInfo:[],isShowSureBtn:!1,btnTitle:"",toRewrite:!1}},methods:{_cancelapplyOrder:function(t){var e=this;this.$Loading.open();var o={token:this.$store.state.login.token,id:t.id,state:"9"};console.log(o),this.$http.post("/app/json/app_order_after_sale/updateAfterStatus",o).then((function(t){e.$Loading.close();var o=t.data;console.log("订单取消:",o),0==o.status?e.$router.go(-1):e.$Toast(o.info)}),(function(t){e.$Loading.close(),e.$Toast("订单取消失败")}))},rewriteExpress:function(){this.$router.push({path:"/mall2/returninggoods",query:{id:this.$route.query.id}})},_sureClick:function(){var t=this;if(10!=this.orderInfo.state){console.log("sureClick"),this.$Loading.open();var e={token:this.$store.state.login.token,id:this.orderInfo.id,state:8};console.log(e),this.$http.post("/app/json/app_order_after_sale/updateAfterStatus",e).then((function(e){t.$Loading.close();var o=e.data;console.log("确认详情:",o),0==o.status?t.turnback():t.$Toast(o.info)}),(function(e){t.$Loading.close(),t.$Toast("确认失败")}))}else this.$router.replace({path:"/mall2/choosesertype",query:{id:this.orderInfo.id,reApply:"1"}})},getStyleWith:function(){var t=this.steps.length;return t<2?{width:"0px"}:{width:100-100/t+"%"}},_getDetail:function(t){var e=this;this.$Loading.open(),this.$http.post("/app/json/app_order_after_sale/queryAfterDetail",{id:t}).then((function(t){e.$Loading.close();var o=t.data;console.log("售后详情:",o),0==o.status?(e.orderInfo=o.data,e.liftsVoucher=e.orderInfo.liftsVoucher,e.isShow=!0,e.liftsVoucher&&e.$nextTick((function(){r.a.toCanvas(document.getElementById("qrcode"),e.liftsVoucher)})),e.dealData()):(e.isShow=!1,e.$Toast(o.info))}),(function(t){e.$Loading.close(),e.isShow=!1,console.log("售后查看详情",t),e.$Toast("查看详情失败")}))},getShowStateTitle:function(){var t="";return 0==this.orderInfo.state?t="申请成功，等待商家审核":1==this.orderInfo.state?t="等待客户发货":2==this.orderInfo.state?t="客户已发货，等待商家收货":3==this.orderInfo.state?t="等待商家处理":4==this.orderInfo.state?t="商家已发货，等待用户确认":5==this.orderInfo.state?t="1"==this.orderInfo.deliverType?"请到油站扫码退款。":"退款，等待客户确认":6==this.orderInfo.state?t="上门维修中":7==this.orderInfo.state?t="客户已确认":8==this.orderInfo.state?t="已完成":9==this.orderInfo.state?t="已取消":10==this.orderInfo.state?t="审核未通过":11==this.orderInfo.state&&(t="已关闭"),t},dealData:function(){for(var t in this.orderinfos){var e=this.orderinfos[t];if(0==e.tag)this.orderinfos[t].value=this.orderInfo.id;else if(1==e.tag){var o="";0==this.orderInfo.type?o="退货":1==this.orderInfo.type?o="换货":2==this.orderInfo.type?o="维修":3==this.orderInfo.type&&(o="补货"),this.orderinfos[t].value=o}else 2==e.tag?3==this.orderInfo.type?this.orderinfos[t].value="":this.orderinfos[t].value=this.orderInfo.price*this.orderInfo.number:3==e.tag?this.orderinfos[t].value=this.orderInfo.createTimeStr:4==e.tag?this.orderinfos[t].value=this.orderInfo.approveTimeStr:5==e.tag?this.orderinfos[t].value=this.orderInfo.receiveTimeStr:6==e.tag&&(this.orderinfos[t].value=this.orderInfo.tradeNo)}this.goodsInfo.skuName=this.orderInfo.skuName,this.goodsInfo.salePrice=this.orderInfo.salePrice,this.goodsInfo.number=this.orderInfo.payNumber,this.goodsInfo.phPictureUrl=this.orderInfo.phPictureUrl,this.goodsInfo.packageList=this.orderInfo.packageList,0!=this.orderInfo.type&&4!=this.orderInfo.type||5!=this.orderInfo.state?1==this.orderInfo.type&&4==this.orderInfo.state?(this.btnTitle="确认收货",this.isShowSureBtn=!0):2==this.orderInfo.type?1==this.orderInfo.repairType&&4==this.orderInfo.state?(this.btnTitle="确认收货",this.isShowSureBtn=!0):0==this.orderInfo.repairType&&6==this.orderInfo.state&&(this.btnTitle="确认维修",this.isShowSureBtn=!0):3==this.orderInfo.type&&4==this.orderInfo.state?(this.btnTitle="确认已收货",this.isShowSureBtn=!0):10==this.orderInfo.state&&(this.btnTitle="再次申请",this.isShowSureBtn=!0):(this.btnTitle="确认已收款","1"==this.orderInfo.deliverType?this.isShowSureBtn=!1:this.isShowSureBtn=!0)},turnback:function(){this.$router.go(-1)}},created:function(){var t=this.$route.query.id;this._getDetail(t)},beforeRouteLeave:function(t,e,o){this.$keepaliveHelper.deleteCache(this),o()}},a=(o("WPfs"),o("KHd+")),d=Object(a.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detailservice"},[o("nav-top",{on:{backEvent:t.turnback}}),t._v(" "),t.isShow?o("nav-content",[o("div",{staticClass:"detail-service-content"},[o("div",{staticClass:"scroll-info"},[o("div",{staticClass:"top-step theme_bg_red"},[o("div",{staticClass:"line-con theme_bg_white",style:t.getStyleWith()}),t._v(" "),o("div",{staticClass:"steps"},t._l(t.orderInfo.stateAll,(function(e,s){return o("div",{staticClass:"step-item theme_font_white"},[o("div",{staticClass:"step-icon"},[e.code<=(10==t.orderInfo.state?1:t.orderInfo.state)?o("i",{staticClass:"iconfont mall-dui theme_font_red theme_bg_white"}):t._e(),t._v(" "),e.code>(10==t.orderInfo.state?1:t.orderInfo.state)?o("div",{staticClass:"count-con theme_bg_white theme_font_red"},[t._v(t._s(s+1)+"\n                ")]):t._e()]),t._v(" "),o("p",[t._v(t._s(e.value))])])})),0)]),t._v(" "),1==t.orderInfo.hasItem?o("div",{staticClass:"config-con"},t._l(t.orderInfo.ordRepairItems,(function(e,s){return o("div",{staticClass:"padding-con shadow-cell"},[o("goods-cell",{attrs:{"goods-info":e,"goods-count":t.orderInfo.number,type:1}})],1)})),0):o("div",{staticClass:"padding-con shadow-cell"},[o("goods-cell",{attrs:{"goods-info":t.goodsInfo,"goods-count":t.orderInfo.number,type:1}})],1),t._v(" "),10!=this.orderInfo.state&&5!=this.orderInfo.productType?o("div",{staticClass:"padding-con shadow-cell"},[o("div",{staticClass:"flow-cell"},[o("i",{staticClass:"iconfont mall-xuanzhong theme_font_red"}),t._v(" "),o("span",{staticClass:"bigtitle"},[t._v(t._s(t.getShowStateTitle()))])]),t._v(" "),2!=t.orderInfo.type&&3!=t.orderInfo.type&&5!=t.orderInfo.type?o("div",{staticClass:"detail-info"},[o("p",{staticClass:"left-title  theme_font_common "},[t._v("物流公司")]),t._v(" "),o("p",{staticClass:"right-value theme_font_gray"},[t._v(t._s(t.orderInfo.returnExpress))])]):t._e(),t._v(" "),2!=t.orderInfo.type&&3!=t.orderInfo.type&&5!=t.orderInfo.type?o("div",{staticClass:"detail-info"},[o("p",{staticClass:"left-title  theme_font_common "},[t._v("物流单号")]),t._v(" "),o("p",{staticClass:"right-value theme_font_gray"},[t._v(t._s(t.orderInfo.returnOrderId))])]):t._e()]):t._e(),t._v(" "),10==this.orderInfo.state?o("div",{staticClass:"padding-con shadow-cell"},[o("div",{staticClass:"bigtitle"},[t._v("未通过原因")]),t._v(" "),o("div",{staticClass:"text-input theme_bg_white_ef"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:this.orderInfo.closeReason,expression:"this.orderInfo.closeReason"}],staticClass:"input-textarea",attrs:{placeholder:"未通过原因",disabled:"disabled"},domProps:{value:this.orderInfo.closeReason},on:{input:function(e){e.target.composing||t.$set(this.orderInfo,"closeReason",e.target.value)}}})])]):t._e(),t._v(" "),o("div",{staticClass:"padding-con shadow-cell"},t._l(t.orderinfos,(function(e){return e.value?o("div",{staticClass:"detail-info"},[o("p",{staticClass:"left-title  theme_font_common "},[t._v(t._s(e.title))]),t._v(" "),o("p",{staticClass:"right-value theme_font_gray"},[t._v(t._s(e.value))])]):t._e()})),0),t._v(" "),5==this.orderInfo.productType?o("div",{staticClass:"padding-con shadow-cell"},[o("div",{staticClass:"remarks"},[o("p",[t._v("注：")]),t._v(" "),o("p",[t._v("1、钱款会退至您当时支付的账户；")]),t._v(" "),o("p",[t._v("2、实际到账时间有可能延迟，请及时查收；")]),t._v(" "),o("p",[t._v("3、若一直未收到退款，请及时联系客服。")])])]):t._e(),t._v(" "),t.liftsVoucher?o("div",{staticClass:"qrcode-wrapper"},[o("canvas",{staticClass:"qrcode",attrs:{id:"qrcode"}})]):t._e()]),t._v(" "),t.isShowSureBtn&&"2"!=t.orderInfo.interfaceType?o("div",{staticClass:"submit-btn theme_bg_red theme_font_white",on:{click:t._sureClick}},[o("p",[t._v(t._s(t.btnTitle))])]):t._e(),t._v(" "),"2"==t.orderInfo.interfaceType&&t.orderInfo.state<8?o("div",{staticClass:"submit-btn theme_bg_red theme_font_white",on:{click:function(e){return t._cancelapplyOrder(t.orderInfo)}}},[o("p",[t._v("取消申请")])]):t._e()])]):t._e()],1)}),[],!1,null,"548797b9",null);e.default=d.exports},zcPa:function(t,e,o){}}]);