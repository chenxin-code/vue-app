(window.webpackJsonp=window.webpackJsonp||[]).push([[127,52],{"/wks":function(t,s,e){"use strict";var i=e("47I9");e.n(i).a},"47I9":function(t,s,e){},"74Qs":function(t,s,e){"use strict";e.r(s);var i={data:function(){return{groupList:[],currentIndex:0,goldMenu:[{text:"拼团中"},{text:"拼团成功"},{text:"拼团失败"}],type:"1"}},mounted:function(){this.queryMyAssemble()},methods:{queryMyAssemble:function(){var t=this;this.$request.post("/app/json/app_assemble_activity/queryMyAssemble",{assembleState:this.currentIndex+1}).then((function(s){0==s.status?t.groupList=s.data:t.$Toast(s.info?s.info:"获取我的拼团失败")}))},tabChange:function(t){this.currentIndex=t,this.groupList=[],this.queryMyAssemble()}},components:{Group:e("LdWA").a}},a=(e("/wks"),e("KHd+")),n=Object(a.a)(i,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"my-oil-group"},[i("nav-top",{on:{backEvent:function(s){return t.$router.go(-1)}}}),t._v(" "),i("nav-content",{staticClass:"my-oil-group-container"},[i("div",{staticClass:"nav-bar"},t._l(t.goldMenu,(function(s,e){return i("div",{staticClass:"nav-bar-item",class:{active:t.currentIndex===e},on:{click:function(s){return t.tabChange(e)}}},[i("span",{staticClass:"text"},[t._v(t._s(s.text))])])})),0),t._v(" "),i("div",{staticClass:"list"},[t._l(t.groupList,(function(s,e){return i("div",{key:e,staticClass:"group-list"},[i("Group",{attrs:{type:t.type,currentIndex:t.currentIndex,details:s}})],1)})),t._v(" "),t.groupList.length?t._e():i("div",{staticClass:"no-data"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:e("8ib8"),alt:""}})]),t._v(" "),i("div",{staticClass:"tips"},[t._v("暂无数据")])])],2)])],1)}),[],!1,null,"eb649982",null);s.default=n.exports},"8ib8":function(t,s,e){t.exports=e.p+"static/img/no-data.c41c44a.png"},AbvJ:function(t,s,e){},LRff:function(t,s,e){},LdWA:function(t,s,e){"use strict";e("EHV1");var i,a=e("9gBv"),n=e("2nGb"),r=e("afTz");function l(t,s,e){return s in t?Object.defineProperty(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}var o={data:function(){return{showPivot:!1,activeNames:[],state:""}},props:{type:"",currentIndex:"",details:{}},mounted:function(){this.details&&(this.state=this.dealState())},methods:{calculateProgress:function(){if(this.details.groupUpLimit){var t=this.details.joinNumber/this.details.groupUpLimit*100;return parseInt(t)>100?100:parseInt(t)||0}},dealState:function(){if(this.details){var t=new Date,s=new Date(this.details.rebateStartTime.replace(/-/g,"/")),e=new Date(this.details.rebateEndTime.replace(/-/g,"/"));return t<s?"未开始":t<=e?"进行中":t>e?"已结束":"--"}},addAssembleUser:function(){var t=this;this.$request.post("/app/json/app_assemble_activity/addAssembleUser",{assembleId:this.details.id}).then((function(s){0==s.status?(t.$toast("参团成功"),t.$emit("updateData")):t.$Toast(s.info?s.info:"参团失败")}))},shareBtn:function(){var t={title:this.details.assembleName,sharetext:this.details.activityDesc,imageurl:this.details.image,detailurl:""+this.$store.state.globalConfig.wxBaseUrl+n.a.shareUrl+"/oil-group-share?id="+this.details.groupActivityId};this.$bridgefunc.wechatShare(t)},oilGroupBtn:function(){console.log(this.type),this.details.joinNumber==this.details.groupUpLimit?this.$Toast("该活动已达到最大上限人数"):1==this.type?this.shareBtn():this.addAssembleUser()},openDetails:function(){this.$router.push({path:"/oil-group-details",query:{id:this.details.id}})}},components:(i={},l(i,a.a.name,a.a),l(i,"countdown",r.default),i)},c=(e("tPnE"),e("KHd+")),d=Object(c.a)(o,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"group"},[0!=t.currentIndex&&t.type?t._e():e("div",{staticClass:"time-show"},[e("div",{staticClass:"left"},[t._v("参团倒计时")]),t._v(" "),e("div",{staticClass:"right"},[t._v("\n        还剩："),e("countdown",{attrs:{endTime:t.$util.getDateFromString(t.details.endTime),type:"theme_bg_black"}})],1)]),t._v(" "),e("div",{staticClass:"group-details"},[e("div",{staticClass:"img-text"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:t.details.image,alt:""}})]),t._v(" "),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[t._v(t._s(t.details.assembleName))]),t._v(" "),e("div",{staticClass:"tips"},[1==t.type?e("div",{staticClass:"left"},[0==t.currentIndex?e("span",[t._v("拼团中("+t._s(1==t.details.assembleState?"未成团":"已成团")+")")]):t._e(),t._v(" "),1==t.currentIndex?e("span",[t._v("拼团成功("+t._s(t.state)+")")]):t._e(),t._v(" "),2==t.currentIndex?e("span",[t._v("拼团失败")]):t._e()]):e("div",{staticClass:"left"},[t._v("拼团中("+t._s(1==t.details.assembleState?"未成团":"已成团")+")")]),t._v(" "),1==t.currentIndex?e("div",{staticClass:"btn",on:{click:t.openDetails}},[t._v("查看详情")]):t._e()])])]),t._v(" "),e("div",{staticClass:"details"},[1!=t.currentIndex?e("div",{staticClass:"main"},[e("div",{staticClass:"info"},[e("div",{staticClass:"progress",class:{active:2==t.currentIndex}},[e("van-progress",{attrs:{percentage:t.calculateProgress(),color:t.details.joinNumber<t.details.groupNumber?"#F80F16":"#009800","show-pivot":t.showPivot}})],1),t._v(" "),t.details.joinNumber<t.details.groupNumber?e("div",{staticClass:"tips"},[t._v("当前参团人数为"),e("span",{staticClass:"num"},[t._v(t._s(t.details.joinNumber))]),t._v("人，再有"),e("span",{staticClass:"num"},[t._v(t._s((t.details.groupNumber-t.details.joinNumber).toFixed(0)))]),t._v("人参加才可拼团成功")]):e("div",{staticClass:"tips"},[t._v("当前参团人数为"),e("span",{staticClass:"num"},[t._v(t._s(t.details.joinNumber))]),t._v("人，只剩"),e("span",{staticClass:"num"},[t._v(t._s((t.details.groupUpLimit-t.details.joinNumber).toFixed(0)>0?(t.details.groupUpLimit-t.details.joinNumber).toFixed(0):0))]),t._v("个参团名额")])]),t._v(" "),2!=t.currentIndex?e("div",{staticClass:"btn",class:{active:t.details.joinNumber==t.details.groupUpLimit},on:{click:t.oilGroupBtn}},[t._v(t._s(1==t.type?"邀请好友":"点击参团"))]):t._e()]):t._e(),t._v(" "),1==t.currentIndex?e("div",{staticClass:"special"},[e("div",{staticClass:"oil"},[e("div",{staticClass:"title"},[t._v("已返利油点")]),t._v(" "),e("div",{staticClass:"oil-info num"},[t._v(t._s(t.details.oilPointNumber||0))])]),t._v(" "),e("div",{staticClass:"oil"},[e("div",{staticClass:"title"},[t._v("返利活动开始时间")]),t._v(" "),e("div",{staticClass:"oil-info"},[t._v(t._s(t.details.rebateStartTime))])]),t._v(" "),e("div",{staticClass:"oil"},[e("div",{staticClass:"title"},[t._v("返利活动结束时间")]),t._v(" "),e("div",{staticClass:"oil-info"},[t._v(t._s(t.details.rebateEndTime))])])]):t._e()]),t._v(" "),e("van-collapse",{model:{value:t.activeNames,callback:function(s){t.activeNames=s},expression:"activeNames"}},[e("van-collapse-item",{attrs:{title:"参团优惠规则"}},[e("div",{domProps:{innerHTML:t._s(t.details.activityDesc)}})])],1)],1)])}),[],!1,null,"65e56ca6",null);s.a=d.exports},Wr4Z:function(t,s,e){"use strict";var i=e("AbvJ");e.n(i).a},afTz:function(t,s,e){"use strict";e.r(s);var i=e("nV03"),a={name:"countdown",props:["endTime","type","hiddenDay","callback"],components:{},data:function(){return{d:"0",h:"00",m:"00",s:"00",trigger:!0}},methods:{parsingTime:function(){var t=this;if(this.endTime){var s=this.$store.state.severTime.currentTime,e=this.endTime-s;this.d=0,this.h="0",this.m="0",this.s="0",e<0?this.trigger&&(this.trigger=!1,setTimeout((function(){t.$emit("timeOut")}),1e3)):(this.trigger=!0,e>59?(this.s=e%60,(e=parseInt(e/60))>59?(this.m=e%60,(e=parseInt(e/60))>23?(this.h=parseInt(e%24),e=parseInt(e/24),this.d=e):this.h=e):this.m=e):e>=0&&(this.s=e),this.h<10&&(this.h="0"+this.h),this.m<10&&(this.m="0"+this.m),this.s<10&&(this.s="0"+this.s))}}},created:function(){this.parsingTime(),i.a.heartbeat()},destroyed:function(){i.a.removeHeartbeat()},watch:{"$store.state.severTime.currentTime":function(){this.parsingTime()}}},n=(e("Wr4Z"),e("KHd+")),r=Object(n.a)(a,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"countdown",class:{quan:"theme_bg_quan"==t.type}},[0==t.d||t.hiddenDay?t._e():e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.d))]),t._v(" "),0==t.d||t.hiddenDay?t._e():e("span",[t._v("天")]),t._v(" "),e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.h))]),t._v("\n  :\n  "),e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.m))]),t._v("\n  :\n  "),e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.s))])])}),[],!1,null,"403fc346",null);s.default=r.exports},nV03:function(t,s,e){"use strict";var i=e("ZToj"),a=void 0,n=0,r={heartbeat:function(){n++,a||(a=window.setInterval((function(){var t=parseInt((new Date).getTime()/1e3);i.a.state.severTime.currentTime=t+i.a.state.severTime.jetlag}),1e3))},removeHeartbeat:function(){n>0&&n--,0==n&&(window.clearInterval(a),a=null)}};s.a=r},tPnE:function(t,s,e){"use strict";var i=e("LRff");e.n(i).a}}]);