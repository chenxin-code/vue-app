(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"9cnO":function(t,e,s){"use strict";var a=s("KZH/");s.n(a).a},"KZH/":function(t,e,s){},RSrh:function(t,e,s){"use strict";s.r(e);var a=s("0ERz"),n=s.n(a),i=(s("YsXA"),s("2nGb"),s("L2JU")),o=s("PxLX"),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},r={name:"my-qrcode",components:{QRCode:n.a},props:{hasBack:{type:Boolean,default:!0}},data:function(){return{cardList:[],newsList:[],groupValue:"",completeRequest:!1,balanceUnit:"",balanceNum:0,details:""}},mounted:function(){window.document.title=this.$store.state.globalConfig.bonusAccountName,this.getlist(),this.getNewsList(),this.setIsPwdSet(this.$assign({},this.isPwdSet,{status:0,pwd:""})),this.$bridgefunc.vuexStorage()},methods:c({openRebateBonusDetails:function(t){this.details=t,1==this.details.dictKey?"1"==this.$store.state.globalConfig.qrcodePayVerify?o.a.open({type:"qrcodePay_verify",sureFunc:this.imgSureFunc,vertifyCancelEvent:function(){o.a.close()},paras:{phone:this.$store.state.login.phone,token:this.$store.state.login.token}}):this.imgSureFunc(null,null):2==this.details.dictKey&&this.$router.push({path:"/addCard"})},imgSureFunc:function(t,e){this.$router.push({path:"/usercenter/rebatebonusdetails",query:{details:JSON.stringify(this.details),verifyCode:t,uuid:e}})},backEvent:function(){"subject"==this.$route.query.type?this.$router.push({path:"/questionlist"}):"serviceSubject"==this.$route.query.type?this.$router.push({path:"/service/questionlist"}):this.$router.go(-1)},openHistory:function(t){console.log(t),this.$router.push({path:"/usercenter/rebatebonuslist",query:{dictKey:t.dictKey}})},getNewsList:function(){var t=this;this.$request.post("/app/json/news/getNewsList",{values:18}).then((function(e){0===e.status&&(t.newsList=e.data)}))},openInfo:function(t){console.log(t),this.$router.push({path:"/mall2/expire-integralinfo",query:{expireUnit:t.expireUnit,acctType:8,groupValue:t.dictKey,title:t.dictValue}})},getlist:function(){var t=this;this.$Loading.open();var e={token:this.$store.state.login.token,alias:"rewards_group"};this.$http.post("/app/json/app_dict/getDictByAlias",e).then((function(e){var s=e.data;if(0==s.status){t.cardList=s.data,t.groupValue="",t.balanceNum=0;var a=t.cardList||[],n=a.length;a.forEach((function(e,s){t.groupValue=e.dictKey,console.log(t.groupValue),t.$Loading.open();var a={token:t.$store.state.login.token,acctType:8,groupValue:t.groupValue};t.$http.post("/app/json/acct/getAccountBaseInfo",a).then((function(a){console.log(s),s+1==n&&(t.completeRequest=!0);var i=a.data||{};if(0==i.status){t.$set(e,"details",i.data),t.balanceNum=(100*t.balanceNum+100*i.data.balanceUnit)/100;var o={token:t.$store.state.login.token,acctType:8,groupValue:e.dictKey,queryDays:t.$store.state.globalConfig.Count_overdue_days};t.$http.post("/app/json/acct/getAboutExpireUnit",o).then((function(s){var a=s.data;0==a.status?t.$set(e,"expireUnit",a.data.aboutExpireBalanceUnit):t.$Toast("获取当前过期积分失败")})),console.log(e)}else t.$Toast(i.info);t.$Loading.close()}))}))}else t.$Loading.close(),t.$Toast(s.info);t.$Loading.close()}))}},Object(i.d)(["setIsPwdSet"])),computed:c({isShowRefuelAccount:function(){return 1==this.$store.state.globalConfig.isShowRefuelAccount}},Object(i.c)(["isPwdSet"])),created:function(){}},l=(s("9cnO"),s("KHd+")),u=Object(l.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-qrcode"},[a("nav-top",{attrs:{bgImg:s("vCY4"),noBack:!t.hasBack,title:t.$store.state.globalConfig.bonusAccountName},on:{backEvent:t.backEvent}}),t._v(" "),a("nav-content",{staticClass:"my-qrcode-container"},[a("div",{staticClass:"balance-title"},[t.$store.state.globalConfig.bonusTotalBalance&&1==t.$store.state.globalConfig.bonusTotalBalance&&t.completeRequest?a("div",{staticClass:"balance"},[a("p",{staticClass:"num"},[t._v(t._s(t.balanceNum))]),t._v(" "),a("p",{staticClass:"text"},[t._v("总余额")])]):t._e()]),t._v(" "),t.completeRequest?a("div",{staticClass:"code-content"},[a("ul",{staticClass:"rebate-envelopes-list"},t._l(t.cardList,(function(e,s){return a("li",{key:s,staticClass:"rebate-envelopes-item",class:{indtwo:1==s,indThree:2==s}},[a("div",{staticClass:"card-show"},[a("div",{staticClass:"title"},[a("div",{staticClass:"left-title"},[t._v(t._s(e.dictValue))]),t._v(" "),a("div",{staticClass:"right-record",on:{click:function(s){return t.openHistory(e)}}},[t._v("历史记录")])]),t._v(" "),a("div",{staticClass:"num"},[t._v("当前余额："),a("span",{staticClass:"num-info"},[t._v(t._s(e.details?e.details.balanceUnit:0))])]),t._v(" "),a("div",{staticClass:"tips-show"},[t._v("\n                余额过期提醒：您有\n                "),a("span",{staticClass:"num",on:{click:function(s){return t.openInfo(e)}}},[t._v(" "+t._s(e.expireUnit||"0")+" ")]),t._v("\n                余额即将过期，请尽快使用！\n              ")]),t._v(" "),e.details&&e.details.aboutExpireInfo?a("div",{staticClass:"expire"},[t._v(t._s(e.details?e.details.aboutExpireInfo:"")+"\n              ")]):t._e(),t._v(" "),1==e.dictKey&&t.isShowRefuelAccount||2==e.dictKey?a("div",{staticClass:"go-use-btn",on:{click:function(s){return t.openRebateBonusDetails(e)}}},[t._v("\n                去使用"),a("img",{attrs:{src:"static/images/mycenter/arrow-right.png",alt:""}})]):t._e()])])})),0),t._v(" "),a("div",{staticClass:"tips"},[a("div",{staticClass:"title"},[t._v("温馨提示：")]),t._v(" "),t._l(t.newsList,(function(e,s){return a("div",{key:s,staticClass:"content",domProps:{innerHTML:t._s(e.content)}})}))],2)]):t._e()])],1)}),[],!1,null,"cc45383c",null);e.default=u.exports},vCY4:function(t,e,s){t.exports=s.p+"static/img/bgtop.b8aa04a.png"}}]);