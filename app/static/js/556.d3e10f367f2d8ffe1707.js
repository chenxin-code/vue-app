(window.webpackJsonp=window.webpackJsonp||[]).push([[556],{"8yIZ":function(t,n,i){},Azzu:function(t,n,i){"use strict";var a=i("8yIZ");i.n(a).a},GTtd:function(t,n,i){"use strict";i.r(n);var a=i("mG4U"),e={data:function(){return{currentIndex:0,goldMenu:[{text:"待验证"},{text:"验证成功"},{text:"已取消"}],cardList:[],loading:!1,finished:!1,page:0}},mounted:function(){var t=this;a.a.$on("getErpOilCardListByUserId",(function(){t.cardList=[],t.page=0,t.finished=!1,t.loadMore()}))},methods:{loadMore:function(){var t=this;this.page=this.page+1;var n={token:this.$store.state.login.token,applyState:this.currentIndex,page:{index:this.page,pageSize:20}};this.$http.post("/app/json/app_oil_appoint/getErpOilCardListByUserId",n).then((function(n){var i=n.data;0==i.status?(t.cardList=t.cardList.concat(i.data||[]),t.cardList.length>=i.totalRecords&&(t.finished=!0)):(t.finished=!0,t.$Toast(n.info?n.info:"获取列表失败")),t.loading=!1}))},tabChange:function(t){this.currentIndex=t,this.cardList=[],this.finished=!1,this.page=0},cancelBtn:function(t){this.$router.push({path:"/handle-card",query:{details:JSON.stringify(t)}})},openDetaile:function(t){this.$router.push({path:"/handle-card",query:{details:JSON.stringify(t),currentIndex:this.currentIndex}})}},components:{}},s=(i("Azzu"),i("KHd+")),r=Object(s.a)(e,(function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"handle-oil-record"},[i("nav-top",{attrs:{title:"办卡记录"},on:{backEvent:function(n){return t.$router.go(-1)}}}),t._v(" "),i("nav-content",{staticClass:"handle-oil-record-container"},[i("div",{staticClass:"nav-bar"},t._l(t.goldMenu,(function(n,a){return i("div",{staticClass:"nav-bar-item",class:{active:t.currentIndex===a},on:{click:function(n){return t.tabChange(a)}}},[i("span",{staticClass:"text"},[t._v(t._s(n.text))])])})),0),t._v(" "),i("ul",{staticClass:"list"},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.loadMore},model:{value:t.loading,callback:function(n){t.loading=n},expression:"loading"}},t._l(t.cardList,(function(n,a){return i("li",{key:a,staticClass:"item"},[i("div",{staticClass:"left",on:{click:function(i){return t.openDetaile(n)}}},[i("div",{staticClass:"info"},[t._v("办卡人姓名："+t._s(n.cardUserName))]),t._v(" "),i("div",{staticClass:"info"},[t._v("油品信息："+t._s(n.oilName))]),t._v(" "),i("div",{staticClass:"info"},[t._v("申请办卡时间："+t._s(n.applyTime))])]),t._v(" "),0==t.currentIndex?i("div",{staticClass:"right",on:{click:function(i){return t.cancelBtn(n)}}},[i("div",{staticClass:"btn"},[t._v("取消申请")])]):t._e()])})),0)],1)])],1)}),[],!1,null,"d7eaa9c8",null);n.default=r.exports},mG4U:function(t,n,i){"use strict";var a=i("oCYn");n.a=new a.default}}]);