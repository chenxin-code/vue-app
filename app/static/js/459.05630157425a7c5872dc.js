(window.webpackJsonp=window.webpackJsonp||[]).push([[459],{"0TSK":function(t,e,a){"use strict";var o=a("KFxv");a.n(o).a},"8/56":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAASCAYAAAC5DOVpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUFBNTBFMkU4QTNBMTFFQUE1NEM5NkYyMzYyNDA0OTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUFBNTBFMkY4QTNBMTFFQUE1NEM5NkYyMzYyNDA0OTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2Nzk3Q0Q4MThBMUMxMUVBQTU0Qzk2RjIzNjI0MDQ5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2Nzk3Q0Q4MjhBMUMxMUVBQTU0Qzk2RjIzNjI0MDQ5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PokFQBIAAADgSURBVHjapNRLDoIwEAbgQi/AUUx6APUmsunWs7gydKM74yk8AZGjuNRV/ccAoaWPAZsMhUz56GOCEGha6534s5Ehcalwf1NKfdq27VZCF3QbCeAN6I6H8xqwh4QxppZ0sxacQtTLIbEU9CEHWwKGoBnGAWMQtTJUGhj4QrdHHJE7cCAyir40HogTBl29AWMOsU1Av48U/ksJsEtBTo5eQjyny/LA4EEM2Diz0LL8GcZm1DRN7RxAbuO5pVH6A3NgtjS4YAqa7Vlk45OlYa3lYZzSmGLc30wVyxE2xFeAAQBjOL9a18RBuQAAAABJRU5ErkJggg=="},KFxv:function(t,e,a){},O5yP:function(t,e,a){"use strict";a.r(e);var o=a("0ERz"),i=a.n(o),n=a("2nGb"),s={name:"recommend-code",components:{},data:function(){return{myQrcodeValue:"",qrData:"",myTimeout:null,unfold:!1,empInfo:"",logoUrl:this.$store.state.globalConfig.logoUrl,phone:this.$util.dealPhone(this.$store.state.userInfo.phone),realName:this.$store.state.userInfo.realName}},methods:{getRfrCode:function(){var t=this;this.$Loading.open();var e={token:this.$store.state.login.token};this.$http.post("/app/json/user/getUserRfrCode",e).then((function(e){t.$Loading.close();var a=e.data;if(0==a.status){t.qrData=e.data,t.$store.state.globalConfig,t.$store.state.userInfo,t.getMyInfo();var o=""+t.$store.state.globalConfig.wxBaseUrl+n.a.shareUrl+"/usercenter/downloadshare";o.indexOf("?")>-1?t.myQrcodeValue=o+"&qrCode="+a.data.qrCode:t.myQrcodeValue=o+"?qrCode="+a.data.qrCode,t.$nextTick((function(){t.toCanvas()}))}else t.$Toast(a.info)}),(function(e){t.$Loading.close()}))},getMyInfo:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/user/getUserEmpByUserId",{}).then((function(e){t.$Loading.close();var a=e.data;0==a.status?t.empInfo=a.data||{}:t.$Toast(a.info?a.info:"获取员工信息失败")}),(function(e){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},toCanvas:function(){document.getElementById("qrcode").innerHTML=" ",new i.a("qrcode",{width:200,height:200,text:this.myQrcodeValue});var t=document.getElementById("qrcode").getElementsByTagName("img")[0];t.id="qrcodeimg",t.style.width="100%",t.style.height="100%"},downloadImg:function(){var t=this;this.$messagebox.confirm("是否将二维码保存到相册？","提示").then((function(e){var a=document.getElementById("qrcodeimg"),o=document.createElement("canvas");o.width=a.width,o.height=a.height,o.getContext("2d").drawImage(a,0,0,a.width,a.height);var i=o.toDataURL("image/png"),n=i.split("base64,");2==n.length&&(i=n[1]),t.$bridgefunc.savePhoto(i,(function(e){"1"==e?t.$Toast("保存成功！"):t.$Toast("保存失败！")}))})).catch((function(t){}))}},mounted:function(){this.getRfrCode()},created:function(){}},c=(a("0TSK"),a("KHd+")),d=Object(c.a)(s,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"recommend-code"},[o("nav-top",{on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),o("nav-content",{staticClass:"recom-root"},[o("div",{staticClass:"recom-back"}),t._v(" "),o("div",{staticClass:"code-back"},[o("img",{staticClass:"logo-top",attrs:{src:t.logoUrl}}),t._v(" "),o("div",{staticClass:"acount"},[t._v(t._s(t.phone)+" ")]),t._v(" "),o("div",{staticClass:"qrcode-div",on:{click:t.downloadImg}},[o("div",{ref:"qrcode",staticClass:"qrcode",attrs:{id:"qrcode"}})]),t._v(" "),o("div",{staticClass:"code-value"},[t._v("\n           "+t._s(t.qrData.data.qrCode)+"\n           ")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.unfold,expression:"unfold"}],staticClass:"fold-area"},[o("div",{staticClass:"line"}),t._v(" "),o("div",{staticClass:"acount-info"},[o("span",[t._v("会员姓名")]),o("span",[t._v(t._s(t.realName?t.realName:"无"))])]),t._v(" "),o("div",{staticClass:"acount-info"},[o("span",[t._v("会员号")]),o("span",[t._v(t._s(t.qrData.data.userNo))])]),t._v(" "),o("div",{staticClass:"acount-info"},[o("span",[t._v("是否员工")]),o("span",[t._v(t._s(t.empInfo.empNo?"是":"否"))])]),t._v(" "),o("div",{staticClass:"acount-info"},[o("span",[t._v("员工号")]),o("span",[t._v(t._s(t.empInfo.empNo||"无"))])]),t._v(" "),o("div",{staticClass:"acount-info"},[o("span",[t._v("所属油站")]),o("span",[t._v(t._s(t.empInfo.unitName||"无"))])])]),t._v(" "),t.unfold?o("div",{staticClass:"show-more",on:{click:function(e){t.unfold=!1}}},[o("img",{attrs:{src:a("W2eJ")}}),t._v("收起")]):o("div",{staticClass:"show-more",on:{click:function(e){t.unfold=!0}}},[o("img",{attrs:{src:a("8/56")}}),t._v("下拉查看会员信息")])])])],1)}),[],!1,null,"468b3240",null);e.default=d.exports},W2eJ:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAASCAYAAAC5DOVpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUFBNTBFMzI4QTNBMTFFQUE1NEM5NkYyMzYyNDA0OTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUFBNTBFMzM4QTNBMTFFQUE1NEM5NkYyMzYyNDA0OTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFQUE1MEUzMDhBM0ExMUVBQTU0Qzk2RjIzNjI0MDQ5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFQUE1MEUzMThBM0ExMUVBQTU0Qzk2RjIzNjI0MDQ5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoOi/EIAAADfSURBVHjanNKxDcIwEAVQ+7xANkDMkAWgZIvQJCVig6xAheQGWipGYAILWkagSwlV+EYEWVHOPmPpZOvO9wr7lBKsuq4XXK3v+1+QADpgO2OvUndJAPk1R2xSIKUga+0a0eG4TIGUgoacBCQJJAVJCklAkkDj0QjBpmkqrbXyYQSQr7VlWT6cc7chj/MTuROOe+wvXzO43CJRRCC/VmETA959Q8H9aIB97iGuUw8/GFo6GkHTBbFD7TjuMzmjMfVOLCYZjRhocqAUaHKhGKi/ozHLgZhP2bKj8Qeo3gIMAMtIvSFe69x1AAAAAElFTkSuQmCC"}}]);