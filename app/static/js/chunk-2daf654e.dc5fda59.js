(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2daf654e"],{1473:function(t,e,a){},"3f0f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABLUlEQVRYR+2WvRGDMAyF5ca02SQZgWyQjEDFTFSMQDYIIySbpMUNOXP4Lufzj55cOAWUnK33+VmSpajypyrr0wHwvw4Mw3DTWs9d131K8mQcx5Mxpu37/hGKE3TAihPRREQvrfVVCrGLP4noQkT3EEQQwG5clmVWSp2lEL/i67q+m6ZpQweJ5kAJBFfcXkkyCSUQiHgWwC5AIFBxFgAXQiLOBshBSMUhgBiE/W+M2Uotle2xXgJ3Qj8n9sAicdgBdwoPgiQnd7FgB9xVONv3QOKOCQP4CbfZWNAxIYBQtluAkrbNBkiVGtKs/GpgAXDqXAqRBeCIR6qDlZjZxwhtMqgTyecYFZc4ER1IpOIoRHIkK+lwgbeDP5LZzVWH0pIpGN2bLUM0ILr+AKjuwBeoBoQwAQ33qQAAAABJRU5ErkJggg=="},"461f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index mall2"},[i("div",{staticClass:"return",on:{click:t.backEvent}},[i("img",{attrs:{src:a("3f0f"),alt:""}})]),t.hiddenInterface?i("div",[i("div",{staticClass:"title-first"},[i("div",{staticClass:"content"},[i("div",{staticClass:"content-div"},[i("span",{staticClass:"symbol"},[t._v("￥")]),i("span",[t._v(t._s(t.integer)+"."),i("span",{staticClass:"decimal"},[t._v(t._s(t.decimal))])])]),i("div",{staticStyle:{"margin-top":"10px",color:"#888888"}},[i("span",[t._v("支付剩余时间:")]),i("span",[t._v(t._s(t.timeString))])])]),i("div",{staticClass:"flex-row block-div"},[i("div",{staticClass:"tradingNumber"},[t._v("交易号:"+t._s(t.payInfo.orderNo))])])]),i("div",{staticClass:"transaction"},[t._m(0),t._l(t.payWay,(function(e){return i("div",{staticClass:"flex-row flex-now",on:{click:function(a){return t.payWaySelected(e)}}},[i("div",{staticClass:"icon-div"},[i("img",{attrs:{src:e.icon}})]),i("div",{staticClass:"full"},[t._v(t._s(e.text))]),i("div",{staticClass:"selected-mark"},[t.hasToPays!=e.payModeSub?i("i",{staticClass:"iconfont mall-weixuanzhong theme_font_tint"}):t._e(),t.hasToPays==e.payModeSub?i("i",{staticClass:"iconfont mall-xuanzhong theme_font_red"}):t._e()])])}))],2),i("div",{staticClass:"bottom-btn theme_font_white theme_standard_bg",on:{click:t.payEvent}},[t._v(" "+t._s(t.paymentMethod)+"支付￥"+t._s(t.payInfo.payAmount)+"元 ")])]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-row"},[a("div",{staticClass:"title"},[t._v("支付方式")])])}],s=a("1da1"),o=(a("96cf"),a("c975"),a("ac1f"),a("5319"),a("1276"),a("0d03"),a("d3b7"),a("25f0"),a("4795"),a("e25e"),a("75bd")),r={name:"index",components:{},data:function(){return{paymentMethod:"",payInfo:[],payWay:[],hasToPay:!1,hasToPays:"",payMode:"",myTimer:null,timeValue:0,timeString:"",prepayId:"",orderNo:"",clinetId:"",integer:"",decimal:"",redirectUrl:"",hiddenInterface:!1}},methods:{backEvent:function(){window.history.go(-1)},payWaySelected:function(t){this.hasToPays!=t.payModeSub&&(this.hasToPays=t.payModeSub,this.payMode=t.payMode),t.payModeSub&&(this.paymentMethod=t.text)},payEvent:function(){var t=this;if(""!=this.hasToPays){var e=" ",a=" ";""!=this.payInfo.payModeSub?(e=this.payInfo.payModeSub,a=this.payInfo.payMode):(this.setPayWays(),e=this.hasToPays,a=this.payMode),this.$Loading.open();var i="/app/json/app_pay/externalPay",n={clinetId:this.payInfo.clinetId,orderNo:this.payInfo.orderNo,payMode:a,payModeSub:e};this.$http.post(i,n).then((function(e){t.hasToPay=!0,t.$Loading.close(),o["a"].doPay(t.payWay[0],e.data.data.payInfo).then((function(){if(t.redirectUrl)if(t.redirectUrl.indexOf("?")>"-1"){var e=t.redirectUrl+"&result=success";window.location.replace(e)}else{var a=t.redirectUrl+"?result=success";window.location.replace(a)}else window.history.go(-1)}))["catch"]((function(){t.$Toast("支付失败，请重新支付！")}))}),(function(e){t.hasToPay=!1,t.$Loading.close()}))}else this.$Toast("请选择支付方式！")},setPayWays:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getPayWays(t.payInfo.orderType,t.payInfo.occurOuCode);case 2:t.payWay=e.sent,t.payWay.length>0&&(t.selectedPayWay=t.payWay[0]),t.hasToPays=t.payWay[0].payModeSub,t.payMode=t.payWay[0].payMode,t.paymentMethod=t.payWay[0].text;case 7:case"end":return e.stop()}}),e)})))()},checkPayResult:function(){var t=this;this.$Loading.open();var e="/app/json/app_pay/queryExternalPayInfo",a={prepayId:this.prepayId,orderNo:this.orderNo,clinetId:this.clinetId};this.$http.post(e,a).then((function(e){if(t.$Loading.close(),t.payInfo=e.data.data,"0"!=e.data.status)t.applyOrder();else{t.hiddenInterface=!0,t.payInfo=e.data.data;var a=t.payInfo.payAmount;a=a.toString().split("."),t.integer=a[0],t.decimal=a[1],t.setPayWays()}}),(function(e){t.$Loading.close()}))},applyOrder:function(){var t=this;this.$MessageBox.confirm("订单已提交，请勿重新提交订单！","提示",{showCancelButton:!1,closeOnClickModal:!1}).then((function(e){t.backEvent()}))["catch"]((function(t){}))},timerCreated:function(){var t=this,e=1800;this.myTimer||(this.timeValue=e,this.myTimer=setInterval((function(){t.timeValue>0&&t.timeValue<=e?(t.timeValue--,t.timeValueString()):(clearInterval(t.myTimer),t.myTimer=null)}),1e3))},timeValueString:function(){var t=this.timeValue,e="00",a="00",i="00";t>3600&&(e=parseInt(t/3600),t%=3600),t>60&&(a=parseInt(t/60),t%=60),i=t,this.timeString=e+":"+a+":"+i}},created:function(){this.prepayId=this.$route.query.prepayid,this.orderNo=this.$route.query.orderno,this.clinetId=this.$route.query.clientid,this.redirectUrl=this.$route.query.redirectUrl?this.$route.query.redirectUrl:"",this.timerCreated(),this.checkPayResult()},mounted:function(){var t=this;this.$bridgefunc.enterForegroundCallBack((function(){t.hasToPay&&(t.hasToPay=!1,t.checkPayResult())}))},activated:function(){}},c=r,d=(a("d519"),a("0c7c")),l=Object(d["a"])(c,i,n,!1,null,"63557765",null);e["default"]=l.exports},d519:function(t,e,a){"use strict";a("1473")}}]);