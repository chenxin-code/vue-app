(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-057645ae"],{"0b10":function(t,n,e){},"3c9a":function(t,n,e){"use strict";e("0b10")},9939:function(t,n,e){"use strict";var s=e("d4ec"),a=e("bee2"),i=(e("e7e5"),e("d399")),c=(e("a15b"),e("c975"),e("d3b7"),e("ac1f"),e("466d"),e("1276"),e("a026")),o=(e("ca00"),e("a18c"),e("751a")),r=e("653a");c["default"].use(i["a"]);var u=function(){function t(n){Object(s["a"])(this,t),this.jsApiList=n}return Object(a["a"])(t,[{key:"hideAllBaseMenu",value:function(){this._init(["hideAllNonBaseMenuItem"]).then((function(){wx.hideAllNonBaseMenuItem()}))}},{key:"getEtpLocation",value:function(t){this._init(["getLocation"]).then((function(){wx.getLocation({type:"gcj02",success:function(n){t&&t(n)}})}))}},{key:"createEnterpriseChat",value:function(t,n,e){t&&n&&this._init(["openEnterpriseChat"]).then((function(){wx.openEnterpriseChat({userIds:t.join(";"),externalUserIds:n.join(";"),groupName:"群聊",success:function(t){e&&e(t)},fail:function(t){t.errMsg.indexOf("function not exist")>-1&&alert("版本过低请升级")}})}))}},{key:"getExternalContact",value:function(t){var n=this;this._init(["getCurExternalContact"]).then((function(){n._initAgent(["getCurExternalContact"]).then((function(n){wx.invoke("getCurExternalContact",{},(function(n){"getCurExternalContact:ok"==n.err_msg&&t&&t(n.userId)}))}))}))}},{key:"_init",value:function(t){var n=this;return new Promise((function(e,s){n._getConfig().then((function(n){wx.config({beta:!0,debug:!1,appId:n.corpId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:t}),wx.ready((function(){e(n)})),wx.error((function(t){s(t)}))}))["catch"]((function(t){}))}))}},{key:"_getConfig",value:function(){return new Promise((function(t,n){var e=navigator.userAgent,s=(e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),window.location.href.split("#")[0]),a={url:s,agentId:r["a"].state.etpAgentId,appId:r["a"].state.etpAppId,hbsy_web_tag_type:1};o["a"].post("/app/json/wechat_qy/signature",a).then((function(e){var s=e.data;0===s.status?t(s.data):n("获取签名信息失败!")}))["catch"]((function(t){n(t)}))}))}},{key:"_initAgent",value:function(t){var n=this;return new Promise((function(e,s){n._getAgentConfig().then((function(n){wx.agentConfig({corpid:n.corpId,agentid:n.agentId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:t,success:function(t){e(t)},fail:function(t){t.errMsg.indexOf("function not exist")>-1&&alert("版本过低请升级")},complete:function(t){}})}))["catch"]((function(t){}))}))}},{key:"_getAgentConfig",value:function(){return new Promise((function(t,n){var e=navigator.userAgent,s=(e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),window.location.href.split("#")[0]),a={url:s,agentId:r["a"].state.etpAgentId,appId:r["a"].state.etpAppId,hbsy_web_tag_type:1};o["a"].post("/app/json/wechat_qy/agentSignature",a).then((function(e){var s=e.data;0===s.status?t(s.data):n("获取签名信息失败!")}))["catch"]((function(t){n(t)}))}))}}]),t}();n["a"]=new u},cda5:function(t,n,e){"use strict";e.r(n);var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container"},[e("div",{staticClass:"user-info"},[e("img",{staticClass:"avatar",attrs:{src:t.userInfo.avtUrl,alt:""},on:{click:t.showEruda}}),e("div",{staticClass:"info"},[e("p",{staticClass:"name"},[t._v(t._s(t.userInfo.nickName))]),e("p",{staticClass:"phone"},[t._v(t._s(t.userInfo.userPhone))])])]),e("ul",{staticClass:"basic-info-list"},[e("li",{staticClass:"item",on:{click:t.showMsg}},[e("span",{staticClass:"label"},[t._v("性别")]),e("span",{staticClass:"content"},[t._v(t._s(t.dealwithSex(t.userInfo.sex)))])]),e("li",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("客户归属")]),e("span",{staticClass:"content"},[t._v(t._s(t.userInfo.empName))])]),e("li",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("油滴余额")]),e("span",{staticClass:"content"},[t._v(t._s(t.userInfo.oilDropAmount||0))])]),e("li",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("加油频次")]),e("span",{staticClass:"content"},[t._v(t._s(t.userInfo.refuelFre||0)+"次/月")])]),e("li",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("油品偏好")]),e("span",{staticClass:"content"},[t._v(t._s(t.userInfo.oilPre))])]),e("li",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("支付偏好")]),e("span",{staticClass:"content"},[t._v(t._s(t.userInfo.payPre))])]),e("li",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("油滴会员")]),e("span",{staticClass:"content"},[t._v(t._s(t.dealwithIsAcctYoudi(t.userInfo.isAcctYoudi)))])]),e("li",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("添加好友时间")]),e("span",{staticClass:"content"},[t._v(t._s(t.userInfo.createTime))])]),e("li",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("最近活跃时间")]),e("span",{staticClass:"content"},[t._v(t._s(t.userInfo.lastRefuelTime))])]),e("li",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("常去油站")]),e("span",{staticClass:"content"},[t._v(t._s(t.userInfo.commonSta))])])]),e("div",{staticClass:"send-msg",on:{click:t.sendMsg}},[t._v("发送消息")])])},a=[],i=(e("0d03"),e("9939")),c={data:function(){return{userInfo:{}}},mounted:function(){var t=this;this.$route.query.qyUserId?this.getDetailInfo(this.$route.query.qyUserId):this.$route.query.token?(this.$store.state.login.token=this.$route.query.token,i["a"].getExternalContact((function(n){t.getDetailInfo(n)}))):alert("获取token错误！")},methods:{showEruda:function(){var t=(new Date).getTime();t-this.clickTime<1e3||-1==this.clickTime?(this.vConsoleTimes+=1,this.clickTime=t,5==this.vConsoleTimes&&(eruda.init(),this.vConsoleTimes=0,this.clickTime=-1)):(this.vConsoleTimes=0,this.clickTime=-1)},showMsg:function(){var t=this;i["a"].getExternalContact((function(n){t.getDetailInfo(n)}))},getDetailInfo:function(t){var n=this;this.$Loading.open(),this.$http.post("/app/json/wechat_qy/queryCustomerDetail",{qyUserId:t}).then((function(t){n.$Loading.close();var e=t.data;0==e.status?n.userInfo=e.data||{}:n.$Toast(e.info)}))["catch"]((function(t){n.$Loading.close(),n.$Toast("queryCustomerDetail err ".concat(t))}))},dealwithSex:function(t){return 1==t?"男":2==t?"女":"未知"},dealwithIsAcctYoudi:function(t){return 0==t?"未开通":1==t?"开通":"未知"},sendMsg:function(){var t=[this.userInfo.empQyUserId],n=[this.userInfo.qyUserId];i["a"].createEnterpriseChat(t,n,(function(t){}))}}},o=c,r=(e("3c9a"),e("0c7c")),u=Object(r["a"])(o,s,a,!1,null,"2f7a2435",null);n["default"]=u.exports}}]);