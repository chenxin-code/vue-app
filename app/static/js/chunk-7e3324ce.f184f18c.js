(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e3324ce","chunk-612ce34b"],{2999:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"slide"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"virtual-keyboard",on:{touchstart:function(e){e.stopPropagation()}}},e._l(e.keyboard,(function(t,i){return a("div",{key:i,staticClass:"keyboard-row"},[3===i?a("span",{staticClass:"keyboard-item fn-key",on:{click:e.changeKey}},[e._v(e._s(1===e.keyType?"ABC":"中文"))]):e._e(),e._l(t,(function(t){return a("span",{staticClass:"keyboard-item",class:{"flex-shrink":2===i||3===i},style:{width:2===i||3===i?e.keyWidth:"auto"},on:{click:function(s){return e.inputKey(t)}}},[e._v(e._s(t))])})),3===i?a("span",{staticClass:"keyboard-item fn-key"},[a("img",{staticClass:"delete",attrs:{src:s("b2be"),alt:""},on:{click:e.deleteKey}})]):e._e()],2)})),0)])},i=[],n=(s("a9e3"),s("4795"),{name:"",props:{show:Boolean,type:{type:Number,default:1}},data:function(){return{vanShow:!0,keyboardZh:[["京","津","渝","沪","冀","晋","辽","吉","黑","苏"],["浙","皖","闽","赣","鲁","豫","鄂","湘","粤","琼"],["川","贵","云","陕","甘","青","蒙","桂","宁","新"],["藏","使","领","警","学","港","澳"]],keyboardEn:[[1,2,3,4,5,6,7,8,9,0],["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]],keyboard:[],keyWidth:0,keyType:1}},methods:{setWidth:function(){this.keyWidth=document.querySelectorAll(".keyboard-item")[0].clientWidth+"px"},changeKey:function(){this.keyType=1===this.keyType?0:1,this.keyboard=1===this.keyType?this.keyboardZh:this.keyboardEn},deleteKey:function(){this.$emit("delete")},inputKey:function(e){this.$emit("input",e)},onBlur:function(){this.$emit("blur"),this.$emit("update:show",!1)},selfHandler:function(){this.$emit("update:show",!0)},handler:function(e){document.body[(e?"add":"remove")+"EventListener"]("touchstart",this.onBlur)}},mounted:function(){this.keyType=this.type,this.keyboard=1==this.keyType?this.keyboardZh:this.keyboardEn,this.handler(!0)},destroyed:function(){this.handler(!1)},activated:function(){this.handler(!0)},deactivated:function(){this.handler(!1)},watch:{show:function(e){e&&(clearTimeout(this.timer),this.timer=setTimeout(this.setWidth,20))},type:function(e){e&&(this.keyType=e,this.keyboard=1==this.keyType?this.keyboardZh:this.keyboardEn,this.handler(!0))}},components:{}}),o=n,r=(s("8bdc"),s("0c7c")),c=Object(r["a"])(o,a,i,!1,null,"02c6819a",null);t["default"]=c.exports},"6afa":function(e,t,s){},"8bdc":function(e,t,s){"use strict";s("6afa")},aa1c6:function(e,t,s){"use strict";s("c16d")},b2be:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABV0lEQVRYhe2Wy23DMAyGNUJG8FEAfwIawSNkBI+QEbKBR/Eldx8yQEYIMoFHcA+lAFa2JDp1ChQwAR7y/D4wfMS5I474D0FEFwDjzjkAaK3w+UM5WOETM5+9980eSURBvvdhhqevhRBOth/QuRDCiYg6/bgoIPApA+8AzET0tEgIbJDPdFUBAazCY0gTVSU0HMAY35sVANBGuC7ZOxI5eFZAGmPSpapFTqIEXxVI4BcLPCdRgy8ENJyZ+y3wVALAC8CtBF8IRNt34UrirhbM3dCc3wLM3FeXQiWSss8AXmYBsY8lHH8JH2MlSiO6EJAnHlslcg1nHNGfVd8qUev2kkR2EVklLKNWkiiuYjkcz9xkWOElieox8t43ud2gTmkVviLRmQQUaHU7Ami3nGPnnNOHzSSgJOJsX5n5vEfGk27aPYnE3/4lSySuzNzvmd77xiRwxBGfjC/Uf6m5/t20ZAAAAABJRU5ErkJggg=="},c16d:function(e,t,s){},f109:function(e,t,s){"use strict";var a="/app/json/user/getSignTagListByUserId",i="/app/json/user/getSignDetail",n="/app/json/user/brokageSign",o="/app/json/user/getSignLogListByUserId",r="/app/json/user/applySign",c="/app/json/app_shopping_order/queryEasyPayOrder",l="/app/json/user/getSignDetailById",g="/app/json/user/checkIdentifyAllDetail",d="/app/json/user/getVehicleListByUserId",u="/app/json/user/queryBankCardType",p="/app/json/user/signAgreementConfirm",h="/app/json/user/signResendReq",f="/app/json/user/passfreeQuery",v="/app/json/user/confirmCompletetSign",y="/app/json/user/cancelApply";t["a"]={methods:{gongcompleteData:function(e){return this.$http.post(v,e)},jiansheData:function(e){return this.$http.post(f,e)},duanxinData:function(e){return this.$http.post(h,e)},messageData:function(e){return this.$http.post(p,e)},leixing:function(e){return this.$http.post(u,e)},chepaiData:function(e){return this.$http.post(d,e)},judgeData:function(e){return this.$http.post(g,e)},signlistData:function(e){return this.$http.post(a,e)},signlistdetailData:function(e){return this.$http.post(i,e)},jieyueData:function(e){return this.$http.post(n,e)},jiluData:function(e){return this.$http.post(o,e)},nextData:function(e){return this.$http.post(r,e)},orderData:function(e){return this.$http.post(c,e)},successData:function(e){return this.$http.post(l,e)},cancelApply:function(e){return this.$http.post(y,e)}}}},f515:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"body"},[s("nav-top",{attrs:{title:"在线签约"},on:{backEvent:function(t){return e.$router.go(-1)}}}),s("nav-content",[s("div",{staticClass:"tipDiv"},[s("p",{staticClass:"box"},[e._v("签约信息")]),s("div",{staticClass:"table-view"},[s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_VIPNumber.png",alt:""}}),s("span",[e._v("会员手机号")])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signMessage.phone,expression:"signMessage.phone"}],attrs:{type:"text",disabled:""},domProps:{value:e.signMessage.phone},on:{input:function(t){t.target.composing||e.$set(e.signMessage,"phone",t.target.value)}}})])])]),s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/ren.png",alt:""}}),s("span",[e._v("姓名")])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signMessage.custName,expression:"signMessage.custName"}],attrs:{placeholder:"请输入姓名",type:"text"},domProps:{value:e.signMessage.custName},on:{input:function(t){t.target.composing||e.$set(e.signMessage,"custName",t.target.value)}}})])])]),e.$store.state.globalConfig.density_free_sign_type.length>1?s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/renzheng.png",alt:""}}),s("span",[e._v("签约方式")])]),s("div",{staticClass:"center"},[s("van-radio-group",{staticClass:"radioBtn",on:{change:e.selectRadio},model:{value:e.signMessage.radio,callback:function(t){e.$set(e.signMessage,"radio",t)},expression:"signMessage.radio"}},[s("div",{staticClass:"radioBtnDiv"},[3==e.singWay3?s("van-radio",{attrs:{name:"2","checked-color":"#ff884f"}},[e._v("车牌号")]):e._e(),1==e.singWay1?s("van-radio",{attrs:{name:"1","checked-color":"#ff884f"}},[e._v("标签号")]):e._e(),2==e.singWay2?s("van-radio",{attrs:{name:"3","checked-color":"#ff884f"}},[e._v("身份证号")]):e._e()],1)])],1)])]):e._e(),"1"==e.signMessage.radio?s("div",[s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_OilCard.png",alt:""}}),s("span",[e._v("标签号")])]),s("div",{staticClass:"center"},[s("mt-field",{attrs:{label:"",placeholder:"扫码或手动输入标签号"},on:{input:e.changeRfrCodeType},model:{value:e.signMessage.generateKey,callback:function(t){e.$set(e.signMessage,"generateKey",t)},expression:"signMessage.generateKey"}},[s("img",{attrs:{src:"static/image/fuelcard//btn_Sweep.png",width:"25",height:"25"},on:{click:e.sweep}})])],1)])]),s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_recommended.png",alt:""}}),s("span",[e._v("车牌号")])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signMessage.plateNo,expression:"signMessage.plateNo"}],staticClass:"carint",attrs:{type:"text",readonly:"",placeholder:"请输入车牌号"},domProps:{value:e.signMessage.plateNo},on:{focus:e.focus,touchstart:function(e){e.stopPropagation()},input:function(t){t.target.composing||e.$set(e.signMessage,"plateNo",t.target.value)}}})])])])]):e._e(),"3"==e.signMessage.radio&&1==e.shenfenView?s("div",[s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_recommended.png",alt:""}}),s("span",[e._v("身份证号")])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.shenfen.idCardNo,expression:"shenfen.idCardNo"}],attrs:{type:"text",readonly:"",placeholder:"请输入身份证号"},domProps:{value:e.shenfen.idCardNo},on:{focus:e.focus,touchstart:function(e){e.stopPropagation()},input:function(t){t.target.composing||e.$set(e.shenfen,"idCardNo",t.target.value)}}})])])])]):e._e(),"1"==e.signMessage.radio||"2"==e.signMessage.radio?s("div",{staticClass:"table-view-cell",on:{click:e.cheColor}},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_colour.png",alt:""}}),s("span",[e._v("车牌颜色")])]),s("div",{staticClass:"center right1"},[s("mt-field",{attrs:{disabled:e.disabled},model:{value:e.signMessage.plateColor,callback:function(t){e.$set(e.signMessage,"plateColor",t)},expression:"signMessage.plateColor"}})],1),s("i",{staticClass:"icon iconfont mall-arrow-down"})])]):e._e(),"2"==e.signMessage.radio?s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_recommended.png",alt:""}}),s("span",[e._v("车牌号")])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signMessage.plateNo,expression:"signMessage.plateNo"}],staticClass:"carint",attrs:{type:"text",readonly:"",placeholder:"请输入车牌号"},domProps:{value:e.signMessage.plateNo},on:{focus:e.focus,touchstart:function(e){e.stopPropagation()},input:function(t){t.target.composing||e.$set(e.signMessage,"plateNo",t.target.value)}}})]),e.actions.length>0?s("i",{staticClass:"icon iconfont mall-arrow-down",on:{click:e.morePlate}}):e._e(),s("van-action-sheet",{attrs:{id:"xialaView",actions:e.actions},on:{select:function(t){return e.onSelect(t,e.item)}},model:{value:e.showxiala,callback:function(t){e.showxiala=t},expression:"showxiala"}})],1)]):e._e(),s("div",{staticClass:"table-view-cell",on:{click:function(t){e.showContractPayers=!0}}},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_Signing2.png",alt:""}}),s("span",[e._v("签约支付方")])]),s("div",{staticClass:"center right1"},[s("mt-field",{attrs:{disabled:e.disabled},model:{value:e.signMessage.styleMoney1,callback:function(t){e.$set(e.signMessage,"styleMoney1",t)},expression:"signMessage.styleMoney1"}}),s("mt-field",{staticStyle:{display:"none"},attrs:{disabled:e.disabled},model:{value:e.signMessage.way,callback:function(t){e.$set(e.signMessage,"way",t)},expression:"signMessage.way"}})],1),s("i",{staticClass:"icon iconfont mall-arrow-down"})])]),"340002"==e.signMessage.payModelSub?s("div",[s("div",{staticClass:"table-view-cell",on:{click:function(t){return e.cardpays("1")}}},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_lei.png",alt:""}}),s("span",[e._v("证件类型")])]),s("div",{staticClass:"center right1"},[s("mt-field",{attrs:{disabled:e.disabled},model:{value:e.signMessage.custCertName,callback:function(t){e.$set(e.signMessage,"custCertName",t)},expression:"signMessage.custCertName"}})],1),s("i",{staticClass:"icon iconfont mall-arrow-down"})])]),s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_lei.png",alt:""}}),s("span",[e._v("证件号码")])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signMessage.idCardNo,expression:"signMessage.idCardNo"}],attrs:{placeholder:"请输入证件号码",type:"text"},domProps:{value:e.signMessage.idCardNo},on:{input:function(t){t.target.composing||e.$set(e.signMessage,"idCardNo",t.target.value)}}})])])]),s("div",{staticClass:"table-view-cell",on:{click:function(t){return e.cardpays("2")}}},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_ka.png",alt:""}}),s("span",[e._v("签约卡类型")])]),s("div",{staticClass:"center right1"},[s("mt-field",{attrs:{disabled:e.disabled},model:{value:e.signMessage.cardStyle,callback:function(t){e.$set(e.signMessage,"cardStyle",t)},expression:"signMessage.cardStyle"}})],1),s("i",{staticClass:"icon iconfont mall-arrow-down"})])]),"贷记卡"==e.signMessage.cardStyle?s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_ka.png",alt:""}}),s("span",[e._v("贷记卡CVV2")])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signMessage.cvn2,expression:"signMessage.cvn2"}],attrs:{placeholder:"请输入贷记卡CVV2",type:"text"},domProps:{value:e.signMessage.cvn2},on:{input:function(t){t.target.composing||e.$set(e.signMessage,"cvn2",t.target.value)}}})])])]):e._e(),"贷记卡"==e.signMessage.cardStyle?s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_ka.png",alt:""}}),s("span",[e._v("贷记卡到期日")])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signMessage.expired,expression:"signMessage.expired"}],attrs:{placeholder:"格式：0719,代表2019年7月",type:"text"},domProps:{value:e.signMessage.expired},on:{input:function(t){t.target.composing||e.$set(e.signMessage,"expired",t.target.value)}}})])])]):e._e(),s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_NO.png",alt:""}}),s("span",[e._v("银行卡号")])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signMessage.cardNo,expression:"signMessage.cardNo"}],attrs:{type:"text"},domProps:{value:e.signMessage.cardNo},on:{input:function(t){t.target.composing||e.$set(e.signMessage,"cardNo",t.target.value)}}})])])])]):e._e(),e.preAuthAmountView?s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_OilCard.png",alt:""}}),s("span",[e._v("预授权金额")])]),s("div",{staticClass:"center"},[s("mt-field",{attrs:{label:"",placeholder:"请输入预授权金额",type:"number"},model:{value:e.signMessage.preAuthAmount,callback:function(t){e.$set(e.signMessage,"preAuthAmount",t)},expression:"signMessage.preAuthAmount"}},[s("van-icon",{attrs:{name:"question-o"},on:{click:e.getTips}})],1)],1)])]):e._e(),e.getGlobalConfig.hideReferrer?e._e():s("div",{staticClass:"table-view-cell"},[s("div",{staticClass:"table-view-cell-text"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_OilCard.png",alt:""}}),s("span",[e._v("推荐人")])]),s("div",{staticClass:"center"},[s("mt-field",{attrs:{label:"",placeholder:"扫码或手动输入推荐人"},on:{input:e.changeRfrCodeType},model:{value:e.signMessage.referrer,callback:function(t){e.$set(e.signMessage,"referrer",t)},expression:"signMessage.referrer"}},[s("img",{attrs:{src:"static/image/fuelcard//btn_Sweep.png",width:"25",height:"25"},on:{click:e.sweepReferrer}})])],1)])]),s("div",{staticClass:"btns"},[s("div",{staticClass:"div1"},[s("van-checkbox",{attrs:{"checked-color":"#ff884f"},on:{click:e.allSelect},model:{value:e.allRadio,callback:function(t){e.allRadio=t},expression:"allRadio"}},[e._v(" 我已阅读并同意 "),s("router-link",{attrs:{to:"/jane/agreement"}},[e._v("《加油支付协议》")])],1)],1),s("div",{staticClass:"div2",on:{click:e.passfreeQuery}},[e._v("下一步")])])])])]),s("van-overlay",{staticStyle:{"background-color":"transparent !important"},attrs:{show:e.toastView},on:{click:function(t){e.toastView=!1}}},[e.toastView?s("div",{staticClass:"toast"},[e._v("当车辆进站后，已签约用户发起预授权后冻结预授权金额，加油后再实际扣款(如所填预授权金额小于实际加油金额将禁止使用此支付方式) ")]):e._e()]),s("virtual-keyboard",{attrs:{show:e.show},on:{"update:show":function(t){e.show=t},input:e.inputKey,delete:e.deleteKey}}),s("van-action-sheet",{attrs:{actions:e.actionContractPayers},on:{select:e.onSelectContractPayers},model:{value:e.showContractPayers,callback:function(t){e.showContractPayers=t},expression:"showContractPayers"}}),s("van-action-sheet",{attrs:{actions:e.actions2},on:{select:e.onSelect2},model:{value:e.show2,callback:function(t){e.show2=t},expression:"show2"}}),s("van-action-sheet",{attrs:{actions:e.actionsche},on:{select:e.onSelectche},model:{value:e.showche,callback:function(t){e.showche=t},expression:"showche"}}),s("van-action-sheet",{attrs:{actions:e.idCardList},on:{select:e.onCertificates},model:{value:e.showCertificates,callback:function(t){e.showCertificates=t},expression:"showCertificates"}}),s("van-overlay",{attrs:{show:e.showSigned}},[s("div",{staticClass:"wrapper",on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"block"},[s("div",{staticClass:"Signed"},[s("img",{attrs:{src:"static/image/janePay/chenggong.png",alt:""}}),s("p",[e._v("恭喜您签约成功")])]),s("div",{staticClass:"sureBtn",on:{click:e.signed}},[e._v("确定")])])])])],1)},i=[],n=(s("e7e5"),s("d399")),o=(s("e17f"),s("2241")),r=s("53ca"),c=s("5530"),l=(s("c975"),s("ac1f"),s("1276"),s("4795"),s("b0c0"),s("4160"),s("159b"),s("a434"),s("d3b7"),s("4d63"),s("25f0"),s("466d"),s("2f62")),g=s("2999"),d=(s("da71"),s("75bd"),s("f109")),u={name:"signing",mixins:[d["a"]],data:function(){return{showSigned:!1,rfrCodeType:"",passFlag:!1,disabled:!0,allRadio:!0,toastView:!1,show:!1,actions:[],showxiala:!1,shenfenView:!1,show2:!1,actions2:[{name:"借记卡",id:"1"},{name:"贷记卡",id:"3"},{name:"合并卡",id:"A"}],preAuthAmountView:!1,showContractPayers:!1,actionContractPayers:[],initContractPayers:!1,showche:!1,showCertificates:!1,idCardList:[{name:"身份证",id:"I"}],actionsche:[{name:"绿"},{name:"黄"},{name:"蓝"},{name:"白"},{name:"黑"}],gonghangView:!1,shenfen:{},chepai:{},list:[],isweChat:[],backUUID:"",singWay1:"",singWay2:"",singWay3:"",hasToSign:!1,signMessage:{phone:"",custName:"",radio:"2",generateKey:"",plateNo:"",plateColor:"蓝",styleMoney1:"",way:"",payModelSub:"",custCertName:"",idCardNo:"",cardStyle:"",cardNo:"",preAuthAmount:"",referrer:"",cvn2:"",cardType:"",expired:""}}},computed:Object(c["a"])({},Object(l["c"])(["userInfo","getGlobalConfig"])),mounted:function(){var e=this,t=this.getLocal("signMessage");t&&(this.signMessage=t,localStorage.removeItem("signMessage"));var s="";s=this.$store.state.globalConfig.density_free_sign_type||"",""==s?(this.singWay1=1,this.singWay2=2,this.singWay3=3):(s.indexOf("1")>=0&&(this.singWay1=1),s.indexOf("2")>=0&&(this.singWay2=2),s.indexOf("3")>=0&&(this.singWay3=3),this.initRadio(this.getGlobalConfig.density_free_sign_type)),this.backUUID=this.$util.randomString(),this.listenAndriodBack(),this.signMessage.phone=this.userInfo.phone,this.isauthentication(),this.chepaiList(),this.$bridgefunc.enterForegroundCallBack((function(){e.hasToSign&&e.checkSignResult()}))},methods:{initRadio:function(e){var t;switch(e.split(",")[0]){case"3":t=2;break;case"1":t=1;break;case"2":t=3;break}this.selectRadio(t)},saveLocal:function(e,t){"object"==Object(r["a"])(t)&&(t=JSON.stringify(t)),localStorage.setItem(e,t)},getLocal:function(e){var t=localStorage.getItem(e);return this.isJSON(t)?JSON.parse(t):t},isJSON:function(e){if("string"==typeof e)try{return JSON.parse(e),!0}catch(t){return!1}return!1},checkSignResult:function(){this.hasToSign=!1},listenAndriodBack:function(){var e=this;this.$bridgefunc.registeBridge("phonebridge",(function(t){var s=JSON.parse(t);s.type==e.backUUID&&o["a"].close()}))},getTips:function(){var e=this;e.toastView=!0,setTimeout((function(){e.toastView=!1}),1e4)},signed:function(){this.showSigned=!1,this.$router.go(-1)},onSelectContractPayers:function(e){this.showContractPayers=!1,this.signMessage.styleMoney1=e.name,this.signMessage.way=e.payWayName,this.signMessage.payModelSub=e.payWayModel,"340002"==this.signMessage.payModelSub?(this.gonghangView=!0,4==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1):"310001"==this.signMessage.payModelSub?this.gonghangView=!0:"305004"==this.signMessage.payModelSub?1==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1:"210007"==this.signMessage.payModelSub?3==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1:"305006"==this.signMessage.payModelSub?5==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1:"320004"==this.signMessage.payModelSub&&(2==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1)},getType:function(e){switch(type.split(",")[0]){case"2":"3";break;case"1":"1";break;case"3":"2";break}},passfreeQuery:function(){var e=this,t=this;if("305006"==this.signMessage.payModelSub||"320004"==this.signMessage.payModelSub||"340002"==this.signMessage.payModelSub){var s={token:this.$store.state.login.token,payModelSub:t.signMessage.payModelSub,plateNo:t.signMessage.plateNo};this.$Loading.open(),t.jiansheData(s).then((function(t){if(e.$Loading.close(),"success"==t.data.result){var s=t.data.data||{};if(s.contractCode)return void(e.showSigned=!0);e.nextIndex()}else Object(n["a"])(t.data.info)}))}else this.nextIndex()},cheColor:function(){this.showche=!0},cardpays:function(e){1==e?this.showCertificates=!0:2==e&&(this.show2=!0)},onSelect2:function(e){this.show2=!1,this.signMessage.cardStyle=e.name,this.signMessage.cardType=e.id},onSelectche:function(e){this.signMessage.plateColor=e.name,this.showche=!1},selectRadio:function(e){this.signMessage.radio=e,this.isauthentication()},morePlate:function(){this.showxiala=!0},onCertificates:function(e){this.showCertificates=!1,this.signMessage.custCertName=e.name,this.signMessage.custCertType=e.id},onSelect:function(e){this.showxiala=!1,this.signMessage.plateNo=e.name},isauthentication:function(){var e=this,t=this;this.gonghangView=!1;var s={token:this.$store.state.login.token};t.judgeData(s).then((function(s){"success"==s.data.result?(t.isweChat=JSON.parse(s.data.data.payWayModel)||[],t.isweChat.forEach((function(e){e.name=e.payWayName})),t.actionContractPayers=t.isweChat,t.actionContractPayers.forEach((function(e,s){"305006"==e.payWayModel&&(t.actionContractPayers.splice(s,1),t.actionContractPayers.unshift(e)),t.initContractPayers||e.payWayModel!=t.getGlobalConfig.defaultPayWayModel||(t.initContractPayers=!0,t.onSelectContractPayers(e))})),"340002"==t.actionContractPayers[0].payWayModel?(e.gonghangView=!0,4==e.$store.state.globalConfig.pass_free_preAuth_type&&(e.preAuthAmountView=!0)):"310001"==t.actionContractPayers[0].payWayModel?e.gonghangView=!0:"305004"==t.actionContractPayers[0].payWayModel?1==e.$store.state.globalConfig.pass_free_preAuth_type&&(e.preAuthAmountView=!0):"210007"==t.actionContractPayers[0].payWayModel?3==e.$store.state.globalConfig.pass_free_preAuth_type&&(e.preAuthAmountView=!0):"305006"==t.actionContractPayers[0].payWayModel?5==e.$store.state.globalConfig.pass_free_preAuth_type&&(e.preAuthAmountView=!0):"320004"==t.actionContractPayers[0].payWayModel&&2==e.$store.state.globalConfig.pass_free_preAuth_type&&(e.preAuthAmountView=!0),"3"==t.signMessage.radio?1==s.data.data.isCertificate?(t.shenfen=s.data.data.usercertificate||{},t.shenfenView=!0):(t.shenfenView=!1,e.$bridgefunc.andriodaddback(e.backUUID,(function(){o["a"].alert({title:"提示",message:"请先完成实名认证"}).then((function(){e.$bridgefunc.delandriodback(e.backUUID,(function(){e.authentication()}))}))}))):"2"==t.signMessage.radio&&1==s.data.data.isVehicle&&(t.signMessage.plateNo=s.data.data.vehicleModel.plateNum||"",t.chepai=s.data.data.vehicleModel||{})):Object(n["a"])(s.data.info)}))},authentication:function(){this.$router.push({path:"/real-name-authentication"})},chepaiList:function(){var e=this,t={token:this.$store.state.login.token};e.chepaiData(t).then((function(t){if("success"==t.data.result){var s=t.data.data||[];s.forEach((function(e){e.name=e.plateNum})),e.actions=s}}))},focus:function(){this.show=!0,document.activeElement.blur()},inputKey:function(e){this.signMessage.plateNo.length<8&&(this.signMessage.plateNo=this.signMessage.plateNo+e)},deleteKey:function(){this.signMessage.plateNo=this.signMessage.plateNo.substr(0,this.signMessage.plateNo.length-1)},changeRfrCodeType:function(){this.rfrCodeType=1},nextIndex:function(){var e=this,t=this;if(0!=t.allRadio){if("1"==t.signMessage.radio||"2"==t.signMessage.radio){if("绿"==t.signMessage.plateColor){if(8!=t.signMessage.plateNo.length)return void t.$Toast("请输入8位车牌号")}else if("蓝"==t.signMessage.plateColor){if(7!=t.signMessage.plateNo.length&&8!=t.signMessage.plateNo.length)return void t.$Toast("请输入7位或8位车牌号")}else if(7!=t.signMessage.plateNo.length)return void t.$Toast("请输入7位车牌号")}else if("1"==t.signMessage.radio&&16!=t.signMessage.generateKey.length)return void t.$Toast("请输入16位标签");if(1!=this.preAuthAmountView||t.signMessage.preAuthAmount){var s={token:this.$store.state.login.token,plateNo:t.signMessage.plateNo,generateKey:t.signMessage.generateKey,payModelSub:t.signMessage.payModelSub,signType:t.signMessage.radio,idCardNo:t.shenfen.idCardNo,returnUrl:window.location.origin+"/app-vue/app/index.html#/jane/complete",phone:t.userInfo.phone,custName:t.signMessage.custName,plateColor:t.signMessage.plateColor,cardType:t.signMessage.cardType,preAuthAmount:t.signMessage.preAuthAmount,referrer:t.signMessage.referrer};if("340002"==t.signMessage.payModelSub){var a=/^[1-9]\d{9,29}$/,i=/^\d{6}(18|19|20)\d{2}(0\d|10|11|12)([0-2]\d|30|31)\d{3}(\d|X|x)$/;if(!i.test(t.signMessage.idCardNo))return void t.$Toast("请输入正确的证件号码");if(!a.test(t.signMessage.cardNo))return void t.$Toast("请输入正确的银行卡号");s.custCertName=t.signMessage.custCertName,s.idCardNo=t.signMessage.idCardNo,s.cvn2=t.signMessage.cvn2,s.expired=t.signMessage.cvn2,s.cardNo=t.signMessage.cardNo,s.cardType=t.signMessage.cardType,s.custCertType=t.signMessage.custCertType}if(this.saveLocal("signMessage",this.signMessage),"310001"==t.signMessage.payModelSub)s.title="平安银行签约信息",s.types=1,t.$router.push({path:"/jane/agriculturalBank",query:{bankMessage:s}});else if("210009"==t.signMessage.payModelSub){var n=new Promise((function(t,s){e.$request.post("/app/json/user/getWechatUserInfo").then((function(a){0==a.status?t(a.data):1037==a.errorCode?(e.$Toast("请先进行微信绑定"),e.$router.push("/usercenter/bindwechat")):(e.$Toast(data.info),s())}))}));n.then((function(s){var a={payModelSub:t.signMessage.payModelSub,plateNo:t.signMessage.plateNo,openid:s.thirdUserId||""};e.$request.post("/app/json/user/queryWxOpenstate",a).then((function(s){0==s.status?s.data.contractCode?(t.$Toast("已签约成功"),e.$router.go(-1)):e.openWxService(a.openid):e.$Toast(s.info)}))}))}else this.$Loading.open(),t.nextData(s).then((function(a){if(e.$Loading.close(),"success"==a.data.result)if("305004"==t.signMessage.payModelSub)e.$bridgefunc.customPush({path:window.location.origin+"/app-vue/app/index.html#/jane/janeView",isnativetop:"1",superback:1,query:{info:encodeURIComponent(JSON.stringify(s))}});else if("210007"==t.signMessage.payModelSub){var i=a.data.data.info,n={pre_entrustweb_id:i};t.$bridgefunc.wxFreePay(JSON.stringify(n),(function(e){"1"==e?t.hasToSign=!0:t.$Toast("签约失败！")}))}else"320004"!=t.signMessage.payModelSub&&"305006"!=t.signMessage.payModelSub&&"340002"!=t.signMessage.payModelSub||t.$bridgefunc.customPush({path:a.data.data.info,isnativetop:"1",superback:1},!1);else t.$Toast(a.data.info)}))}else t.$Toast("请输入预授权金额")}else t.$Toast("请勾选同意协议")},openWxService:function(e){var t=this,s={payModelSub:this.signMessage.payModelSub,plateNo:this.signMessage.plateNo,openid:e};this.$Loading.open(),this.$request.post("/app/json/user/openWxService",s).then((function(e){if(0==e.status){t.$Loading.close();var s=e.data.info,a="/pages/route/index?extraData=".concat(t.renderInfoTxt(s)),i=encodeURIComponent(a);t.$bridgefunc.navigateToMiniProgram("gh_518c42c65952",i)}else t.$Toast(e.info)}))},renderInfoTxt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var t=e.split("&"),s={};return t.forEach((function(e){s[e.split("=")[0]]=e.split("=")[1]})),JSON.stringify(s)}return""},getParam:function(e,t){var s=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=e.substr(1).match(s);return null!=a?unescape(a[2]):null},sweep:function(){var e=this;this.$bridgefunc.scanCode((function(t){e.rfrCodeType=2,e.signMessage.generateKey=t.code}))},sweepReferrer:function(){var e=this;this.$bridgefunc.scanCode((function(t){e.rfrCodeType=2,e.signMessage.referrer=t.code}))},allSelect:function(){var e=this;e.allRadio=!e.allRadio}},components:{VirtualKeyboard:g["default"]}},p=u,h=(s("aa1c6"),s("0c7c")),f=Object(h["a"])(p,a,i,!1,null,"4394c84e",null);t["default"]=f.exports}}]);