(window.webpackJsonp=window.webpackJsonp||[]).push([[188,56],{"17lL":function(t,e,a){"use strict";a("4X9F");var i=a("IkEG"),n=(a("5+UC"),a("05lO"));function s(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}var o=a("2nGb"),r=a("vDqi"),l=a.n(r),c=a("oCYn"),u=a("p46w"),p=a.n(u),h=a("Qyje"),d=a.n(h),g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};c.default.use(n.a),c.default.use(i.a);var f=l.a.create({baseURL:o.a.baseURL,timeout:1e4,responseType:"json",withCredentials:!1,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});f.interceptors.request.use((function(t){n.a.loading({mask:!0,duration:0});var e=p.a.get("usertoken");return"post"===t.method?t.data=d.a.stringify(g({},t.data,{token:e})):"get"===t.method&&(t.params=g({},t.params,{token:e})),t}),(function(t){return Promise.reject(t)})),f.interceptors.response.use((function(t){return n.a.clear(),-1==t.data.status&&t.data.info.indexOf("用户信息为空")>-1&&i.a.confirm({title:"提示",message:"用户信息失效, 请重新登录"}).then((function(){})),t}),(function(t){return n.a.clear(),console.log(t),Promise.reject(t)}));var v=f,m=a("N4/4"),y=a("ZToj"),w=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsApiList=e}return w(t,[{key:"share",value:function(t,e,a,i){return s()?this._wxShare(t,e,a,i):this._appShare(t,e,a,i)}},{key:"chooseImage",value:function(t){return s()?this._wxChooseImage(t):this._appChooseImage()}},{key:"_wxChooseImage",value:function(t){var e=this;return new Promise((function(a,i){e._init(["chooseImage","uploadImage"]).then((function(){wx.chooseImage({count:t||1,sourceType:["camera"],sizeType:["original"],success:function(t){var e=t.localIds[0];wx.getLocalImgData({localId:e,success:function(t){console.log(t);var e=t.localData,i=e.substr(e.indexOf(",")+1);a({imagedata:[i]})}})}})}))}))}},{key:"_wxUploadImage",value:function(t){return new Promise((function(e,a){wx.uploadImage({localId:t,isShowProgressTips:1,success:function(t){e(t.serverId)}})}))}},{key:"_wxShare",value:function(t,e,a,i){var n=this;return console.log(t),console.log(e),console.log(a),console.log(i),new Promise((function(s,o){n._init(["onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData"]).then((function(){console.log("开始分享"),wx.onMenuShareTimeline({title:t,link:e,imgUrl:a,success:function(){console.log("onMenuShareTimeline 设置成功！"),s()}}),wx.onMenuShareAppMessage({title:t,desc:i,link:e,imgUrl:a,success:function(){console.log("onMenuShareAppMessage 设置成功！"),s()}}),wx.updateAppMessageShareData({title:t,desc:i,link:e,imgUrl:a,success:function(){console.log("updateAppMessageShareData 设置成功！")}}),wx.updateTimelineShareData({title:t,link:e,imgUrl:a,success:function(){console.log("updateTimelineShareData 设置成功！")}})}))}))}},{key:"_appShare",value:function(t,e,a,i){if(console.log(t),console.log(e),console.log(a),console.log(i),"new"==y.a.state.globalConfig.yht_protocol_type){var n={title:t,sharetext:i,imageurl:a,detailurl:e};m.a.share(n)}else{var s={type:"share",para:{title:t,sharetext:i,imageurl:a,detailurl:e}};location.href=location.origin+"?appprotocol="+encodeURIComponent(JSON.stringify(s))}}},{key:"_appUploadImage",value:function(t){var e={type:"webuploadimage",para:{callback:"appCallbackUploadImage",num:t||1}};return location.href=location.origin+"?appprotocol="+encodeURIComponent(JSON.stringify(e)),new Promise((function(t){window.appCallbackUploadImage=function(e){t(e)}}))}},{key:"_appChooseImage",value:function(){return"new"==y.a.state.globalConfig.yht_protocol_type?new Promise((function(t){m.a.getPhoto(3,(function(e){var a=[];a.push(e),t({imagedata:a})}))})):(location.href=location.origin+"?appprotocol="+encodeURIComponent(JSON.stringify({type:"nativephoto",para:{type:"3"}})),new Promise((function(t){window.photoCallBack=function(e){t(e)}})))}},{key:"scanCode",value:function(){return"new"==y.a.state.globalConfig.yht_protocol_type?new Promise((function(t){m.a.scanCode((function(e){t(e)}))})):(location.href=location.origin+"?appprotocol="+encodeURIComponent(JSON.stringify({type:"qrscan"})),new Promise((function(t){window.qrCallBack=function(e){t(e)}})))}},{key:"wxSign",value:function(t){if("new"==y.a.state.globalConfig.yht_protocol_type)m.a.wxFreePay(t);else{var e={type:"wxfreepay",para:{pre_entrustweb_id:t}};location.href=location.origin+"?appprotocol="+encodeURIComponent(JSON.stringify(e))}}},{key:"getLocation",value:function(){return new Promise((function(t){wx.getLocation({type:"wgs84",success:function(t){}})}))}},{key:"_init",value:function(t){var e=this;return new Promise((function(a,i){e._getConfig().then((function(e){wx.config({appId:e.appid,timestamp:e.timestamp,nonceStr:e.nonce,signature:e.signature,jsApiList:t}),wx.ready((function(){console.log("微信签名配置成功"),a()})),wx.error((function(t){i(t),console.log("请求信息："+JSON.stringify(e)+"-----错误信息："+JSON.stringify(t))}))})).catch((function(t){i(),console.log("发生错误！",t)}))}))}},{key:"_getConfig",value:function(){return new Promise((function(t,e){var a;a=navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.initUrl:window.location.href.split("#")[0],v.post("/app/json/wx/getAccessToken",{url:encodeURIComponent(a)}).then((function(e){0===e.data.status&&(console.log("请求",Object.assign({},e.data.data,e.data.data.signature)),t(Object.assign({},e.data.data,e.data.data.signature)))})).catch((function(t){e(t)}))}))}},{key:"openNewPage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("new"==y.a.state.globalConfig.yht_protocol_type)m.a.newPage({weburl:t,isnativetop:!0});else{var a={type:"newpage",para:{isnative:e,islogin:!0,isnativetop:!0,isopen:!0}};e?a.para.code=t:(a.para.weburl=t,console.log("打印的p",t)),location.href=location.origin+"?appprotocol="+encodeURIComponent(JSON.stringify(a))}}},{key:"finishPage",value:function(){location.href=location.origin+"?appprotocol="+encodeURIComponent(JSON.stringify({type:"finish"}))}},{key:"openLogin",value:function(){location.href=location.origin+"?appprotocol="+encodeURIComponent(JSON.stringify({type:"login"}))}},{key:"chooseImg",value:function(){var t=this;return new Promise((function(e,a){t.chooseImage().then((function(t){if(t.imagedata&&t.imagedata.length){var a=t.imagedata[0];v.get("/app/json/app_youdi/getSunboxToken").then((function(t){var s=t.data.data;n.a.loading({mask:!0,duration:0}),l.a.post("/uploadFile",d.a.stringify({base64File:a,fileType:"png",fileName:"1",token:s,bucketName:"default_file"})).then((function(t){var s=t.data.data,o={imgUrl:s,baseImgUrl:a};n.a.clear(),s?e(o):i.a.alert({title:"提示",message:"上传失败！"})}))}))}}))}))}}]),t}();e.a=new b},"8Qlj":function(t,e,a){"use strict";e.a={methods:{gongcompleteData:function(t){return this.$http.post("/app/json/user/confirmCompletetSign",t)},jiansheData:function(t){return this.$http.post("/app/json/user/passfreeQuery",t)},duanxinData:function(t){return this.$http.post("/app/json/user/signResendReq",t)},messageData:function(t){return this.$http.post("/app/json/user/signAgreementConfirm",t)},leixing:function(t){return this.$http.post("/app/json/user/queryBankCardType",t)},chepaiData:function(t){return this.$http.post("/app/json/user/getVehicleListByUserId",t)},judgeData:function(t){return this.$http.post("/app/json/user/checkIdentifyAllDetail",t)},signlistData:function(t){return this.$http.post("/app/json/user/getSignTagListByUserId",t)},signlistdetailData:function(t){return this.$http.post("/app/json/user/getSignDetail",t)},jieyueData:function(t){return this.$http.post("/app/json/user/brokageSign",t)},jiluData:function(t){return this.$http.post("/app/json/user/getSignLogListByUserId",t)},nextData:function(t){return this.$http.post("/app/json/user/applySign",t)},orderData:function(t){return this.$http.post("/app/json/app_shopping_order/queryEasyPayOrder",t)},successData:function(t){return this.$http.post("/app/json/user/getSignDetailById",t)},cancelApply:function(t){return this.$http.post("/app/json/user/cancelApply",t)}}}},Grvt:function(t,e,a){"use strict";var i=a("U8/f");a.n(i).a},KZmt:function(t,e,a){"use strict";a.r(e);var i={name:"",props:{show:Boolean,type:{type:Number,default:1}},data:function(){return{vanShow:!0,keyboardZh:[["京","津","渝","沪","冀","晋","辽","吉","黑","苏"],["浙","皖","闽","赣","鲁","豫","鄂","湘","粤","琼"],["川","贵","云","陕","甘","青","蒙","桂","宁","新"],["藏","使","领","警","学","港","澳"]],keyboardEn:[[1,2,3,4,5,6,7,8,9,0],["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]],keyboard:[],keyWidth:0,keyType:1}},methods:{setWidth:function(){this.keyWidth=document.querySelectorAll(".keyboard-item")[0].clientWidth+"px"},changeKey:function(){this.keyType=1===this.keyType?0:1,this.keyboard=1===this.keyType?this.keyboardZh:this.keyboardEn},deleteKey:function(){this.$emit("delete")},inputKey:function(t){this.$emit("input",t)},onBlur:function(){this.$emit("blur"),this.$emit("update:show",!1)},selfHandler:function(){this.$emit("update:show",!0)},handler:function(t){document.body[(t?"add":"remove")+"EventListener"]("touchstart",this.onBlur)}},mounted:function(){this.keyType=this.type,this.keyboard=1==this.keyType?this.keyboardZh:this.keyboardEn,this.handler(!0)},destroyed:function(){this.handler(!1)},activated:function(){this.handler(!0)},deactivated:function(){this.handler(!1)},watch:{show:function(t){t&&(clearTimeout(this.timer),this.timer=setTimeout(this.setWidth,20))},type:function(t){t&&(this.keyType=t,this.keyboard=1==this.keyType?this.keyboardZh:this.keyboardEn,this.handler(!0))}},components:{}},n=(a("Z5xP"),a("KHd+")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"virtual-keyboard",on:{touchstart:function(t){t.stopPropagation()}}},t._l(t.keyboard,(function(e,n){return i("div",{key:n,staticClass:"keyboard-row"},[3===n?i("span",{staticClass:"keyboard-item fn-key",on:{click:t.changeKey}},[t._v(t._s(1===t.keyType?"ABC":"中文"))]):t._e(),t._v(" "),t._l(e,(function(e){return i("span",{staticClass:"keyboard-item",class:{"flex-shrink":2===n||3===n},style:{width:2===n||3===n?t.keyWidth:"auto"},on:{click:function(a){return t.inputKey(e)}}},[t._v(t._s(e))])})),t._v(" "),3===n?i("span",{staticClass:"keyboard-item fn-key"},[i("img",{staticClass:"delete",attrs:{src:a("sr7s"),alt:""},on:{click:t.deleteKey}})]):t._e()],2)})),0)])}),[],!1,null,"e04e4f1a",null);e.default=s.exports},"U8/f":function(t,e,a){},Z5xP:function(t,e,a){"use strict";var i=a("ZGyj");a.n(i).a},ZGyj:function(t,e,a){},sr7s:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABV0lEQVRYhe2Wy23DMAyGNUJG8FEAfwIawSNkBI+QEbKBR/Eldx8yQEYIMoFHcA+lAFa2JDp1ChQwAR7y/D4wfMS5I474D0FEFwDjzjkAaK3w+UM5WOETM5+9980eSURBvvdhhqevhRBOth/QuRDCiYg6/bgoIPApA+8AzET0tEgIbJDPdFUBAazCY0gTVSU0HMAY35sVANBGuC7ZOxI5eFZAGmPSpapFTqIEXxVI4BcLPCdRgy8ENJyZ+y3wVALAC8CtBF8IRNt34UrirhbM3dCc3wLM3FeXQiWSss8AXmYBsY8lHH8JH2MlSiO6EJAnHlslcg1nHNGfVd8qUev2kkR2EVklLKNWkiiuYjkcz9xkWOElieox8t43ud2gTmkVviLRmQQUaHU7Ami3nGPnnNOHzSSgJOJsX5n5vEfGk27aPYnE3/4lSySuzNzvmd77xiRwxBGfjC/Uf6m5/t20ZAAAAABJRU5ErkJggg=="},zu4A:function(t,e,a){"use strict";a.r(e),a("5+UC");var i=a("05lO"),n=(a("4X9F"),a("IkEG")),s=(a("17lL"),a("L2JU")),o=a("KZmt"),r=(a("2nGb"),a("db0i"),a("8Qlj")),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},c={name:"signing",mixins:[r.a],data:function(){return{showSigned:!1,plateNum:"",radio:"",referrer:"",rfrCodeType:"",disabled:!0,allRadio:!0,colorstyle:"蓝",toastView:!1,way:"",waySub:"",show:!1,actions:[],showxiala:!1,shenfenView:!1,styleMoney1:"",styleMoney:"",cardStyle:"",cardType:"",preAuthAmountView:!1,preAuthAmount:null,show2:!1,actions2:[{name:"借记卡",id:"1"},{name:"贷记卡",id:"3"},{name:"合并卡",id:"A"}],tidSign:"",show1:!1,actions1:[],showche:!1,actionsche:[{name:"绿"},{name:"黄"},{name:"蓝"},{name:"白"},{name:"黑"}],signingstyle:"",gonghangView:!1,id:"",phone:"",shenfen:{},chepai:{},list:[],signType:"",isweChat:[],backUUID:"",singWay1:"",singWay2:"",singWay3:"",hasToSign:!1,isSign:!1}},computed:l({},Object(s.c)(["userInfo"])),mounted:function(){var t=this;console.log("这是签约页面11"),console.log("预授权金额",this.$store.state.globalConfig.pass_free_preAuth_type),this.getPhone();var e="";""==(e=this.$store.state.globalConfig.density_free_sign_type||"")?(this.singWay1=1,this.singWay2=2,this.singWay3=3):(e.indexOf("1")>=0&&(this.singWay1=1),e.indexOf("2")>=0&&(this.singWay2=2),e.indexOf("3")>=0&&(this.singWay3=3),"1"==e.substring(0,1)?this.radio="3":"2"==e.substring(0,1)?this.radio="1":"3"==e.substring(0,1)&&(this.radio="2")),this.backUUID=this.$util.randomString(),this.listenAndriodBack(),this.isauthentication(),this.chepaiList(),this.$bridgefunc.enterForegroundCallBack((function(){t.hasToSign&&t.checkSignResult()}))},methods:{checkSignResult:function(){this.hasToSign=!1},listenAndriodBack:function(){var t=this;this.$bridgefunc.registeBridge("phonebridge",(function(e){JSON.parse(e).type==t.backUUID&&n.a.close()}))},signed:function(){this.showSigned=!1,this.$router.go(-1)},onSelect1:function(t){this.show1=!1,this.styleMoney1=t.name,this.way=t.payWayName,this.waySub=t.payWayModel,this.isSign=!1,"340002"==this.waySub?(this.gonghangView=!0,4==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1):"310001"==this.waySub?this.gonghangView=!0:"305004"==this.waySub?1==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1:"210007"==this.waySub?3==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1:"305006"==this.waySub?5==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1:"320004"==this.waySub&&(2==this.$store.state.globalConfig.pass_free_preAuth_type?this.preAuthAmountView=!0:this.preAuthAmountView=!1)},getTips:function(){var t=this;t.toastView=!0,setTimeout((function(){t.toastView=!1}),1e4)},passfreeQuery:function(){var t=this;if("305006"==this.waySub||"320004"==this.waySub){var e={token:this.$store.state.login.token,payModelSub:this.waySub,plateNo:this.plateNum};this.jiansheData(e).then((function(e){if("success"==e.data.result){if((e.data.data||{}).contractCode)return void(t.showSigned=!0);t.nextIndex()}else Object(i.a)(e.data.info)}))}else this.nextIndex()},openWxService:function(){var t=this,e={payModelSub:this.waySub,plateNo:this.plateNum,openid:this.$store.state.login.wxOpenid};this.$request.post("/app/json/user/openWxService",e).then((function(e){if(0==e.status){t.$Loading.close();var a=e.data.info;console.log("油惠通签约",a),t.$bridgefunc.wxFreePay(a)}else t.$Toast(e.info)}))},sweepReferrer:function(){var t=this;this.$bridgefunc.scanCode((function(e){t.rfrCodeType=2,t.referrer=e.code}))},pays:function(){if("2"==this.radio){if("绿"==this.colorstyle){if(8!=this.plateNum.length)return void this.$Toast("请输入8位车牌号")}else if(7!=this.plateNum.length)return void this.$Toast("请输入7位车牌号")}else if("3"==this.radio&&7!=this.plateNum.length)return void this.$Toast("请输入7位车牌号");this.show1=!0},cheColor:function(){this.showche=!0},cardpays:function(){this.show2=!0},onSelect2:function(t){this.show2=!1,this.cardStyle=t.name,this.cardType=t.id},onSelectche:function(t){this.colorstyle=t.name,this.showche=!1},selectRadio:function(t){this.radio=t,this.isauthentication()},morePlate:function(){this.showxiala=!0},onSelect:function(t){this.showxiala=!1,this.plateNum=t.name},getPhone:function(){var t=this;this.$request.post("/app/json/user_auth/findUserPhone",{}).then((function(e){0===e.status?(console.log("手机号",e),t.phone=e.data,console.log(t.phone)):t.$Toast(e.info)}))},isauthentication:function(){var t=this,e=this;this.gonghangView=!1;var a={token:this.$store.state.login.token};e.judgeData(a).then((function(a){"success"==a.data.result?(console.log("实名认证",a),e.isweChat=JSON.parse(a.data.data.payWayModel)||[],e.isweChat.forEach((function(t){"ETC"==t.payWayName?t.name="工行ETC":t.name=t.payWayName})),e.actions1=e.isweChat,e.actions1.forEach((function(t,a){"305006"==t.payWayModel&&(e.actions1.splice(a,1),e.actions1.unshift(t))})),console.log(t.actions1,"this.actions"),e.styleMoney1=e.actions1[0].payWayName,e.waySub=e.actions1[0].payWayModel,e.way=e.actions1[0].payWayName,"340002"==e.actions1[0].payWayModel?(t.gonghangView=!0,4==t.$store.state.globalConfig.pass_free_preAuth_type&&(t.preAuthAmountView=!0)):"310001"==e.actions1[0].payWayModel?t.gonghangView=!0:"305004"==e.actions1[0].payWayModel?1==t.$store.state.globalConfig.pass_free_preAuth_type&&(t.preAuthAmountView=!0):"210007"==e.actions1[0].payWayModel?3==t.$store.state.globalConfig.pass_free_preAuth_type&&(t.preAuthAmountView=!0):"305006"==e.actions1[0].payWayModel?5==t.$store.state.globalConfig.pass_free_preAuth_type&&(t.preAuthAmountView=!0):"320004"==e.actions1[0].payWayModel&&2==t.$store.state.globalConfig.pass_free_preAuth_type&&(t.preAuthAmountView=!0),"1"==e.radio?1==a.data.data.isCertificate?(e.shenfen=a.data.data.usercertificate||{},e.shenfenView=!0):(e.shenfenView=!1,t.$bridgefunc.andriodaddback(t.backUUID,(function(){n.a.alert({title:"提示",message:"请先完成实名认证"}).then((function(){t.$bridgefunc.delandriodback(t.backUUID,(function(){t.authentication()}))}))}))):"2"==e.radio&&1==a.data.data.isVehicle&&(e.plateNum=a.data.data.vehicleModel.plateNum||"",e.chepai=a.data.data.vehicleModel||{})):Object(i.a)(a.data.info)}))},authentication:function(){this.$router.push({path:"/real-name-authentication"})},chepaiList:function(){var t=this,e={token:this.$store.state.login.token};t.chepaiData(e).then((function(e){if("success"==e.data.result){var a=e.data.data||[];a.forEach((function(t){t.name=t.plateNum})),t.actions=a}}))},focus:function(){this.show=!0,document.activeElement.blur()},inputKey:function(t){this.plateNum.length<8&&(this.plateNum=this.plateNum+t)},deleteKey:function(){this.plateNum=this.plateNum.substr(0,this.plateNum.length-1)},changeRfrCodeType:function(){this.rfrCodeType=1},nextIndex:function(){var t=this,e=this;if(0!=e.allRadio)if(1!=e.isSign){if("1"==e.radio)e.signType=3,e.colorstyle="";else if("2"==e.radio){if("绿"==e.colorstyle){if(8!=e.plateNum.length)return void e.$Toast("请输入8位车牌号")}else if(7!=e.plateNum.length)return void e.$Toast("请输入7位车牌号");e.signType=2,e.colorstyle=e.colorstyle}else if("3"==e.radio){if(16!=e.tidSign.length)return void e.$Toast("请输入16位标签");if(7!=e.plateNum.length)return void e.$Toast("请输入7位车牌号");e.signType=1,e.colorstyle=e.colorstyle}if(1!=this.preAuthAmountView||e.preAuthAmount){var a={token:this.$store.state.login.token,plateNo:e.plateNum?e.plateNum:"",generateKey:e.tidSign?e.tidSign:"",payModelSub:e.waySub,signType:e.signType,idCardNo:e.shenfen.idcardNum?e.shenfen.idcardNum:"",returnUrl:window.location.origin+"/app-vue/app/index.html#/jane/complete",plateColor:e.colorstyle,preAuthAmount:e.preAuthAmount,referrer:e.referrer?this.referrer:""};if(this.$Loading.open(),console.log(e.waySub),"340002"==e.waySub||"310001"==e.waySub)this.$Loading.close(),a.cardType=e.cardType,a.phone=e.phone,"310001"==e.waySub?(a.title="平安银行签约信息",a.types=1):(a.title="农行签约信息",a.types=2),e.$router.push({path:"/jane/agriculturalBank",query:{bankMessage:a}});else if("210009"==e.waySub){if(console.log(e.$store.state.login.wxOpenid),!e.$store.state.login.wxOpenid)return this.$Toast("请先进行微信绑定"),void this.$router.push("/usercenter/bindwechat");var i={payModelSub:e.waySub,plateNo:e.plateNum,openid:e.$store.state.login.wxOpenid};console.log(i),this.$request.post("/app/json/user/queryWxOpenstate",i).then((function(a){t.$Loading.close(),0==a.status?a.data.contractCode?(e.$Toast("已签约成功"),t.$router.go(-1)):t.openWxService():t.$Toast(a.info)}))}else e.$http.post("/app/json/user/applySign",a).then((function(i){t.$Loading.close(),console.log("签约",i),"success"==i.data.result?"305004"==e.waySub?(console.log(encodeURIComponent(JSON.stringify(a))),t.$bridgefunc.customPush({path:window.location.origin+"/app-vue/app/index.html#/jane/janeView",isnativetop:"1",superback:1,query:{info:encodeURIComponent(JSON.stringify(a))}})):"320004"==e.waySub?(t.$Loading.close(),e.$bridgefunc.customPush({path:i.data.data.info,isnativetop:"1",superback:1})):"305006"==e.waySub&&(t.$Loading.close(),e.$bridgefunc.customPush({path:i.data.data.info,isnativetop:"1",superback:1})):e.$Toast(i.data.info)}))}else e.$Toast("请输入预授权金额")}else e.$Toast("您已经签约过了");else e.$Toast("请勾选同意协议")},getvar:function(t,e){for(var a=t.split("?")[1].split("&"),i=a.length-1;i>=0;i--){var n=a[i].split("=");if(n[0]==e)return n[1]}return!1},sweep:function(){var t=this;this.$bridgefunc.scanCode((function(e){t.rfrCodeType=2,t.tidSign=e.code}))},allSelect:function(){this.allRadio=!this.allRadio}},components:{VirtualKeyboard:o.default}},u=(a("Grvt"),a("KHd+")),p=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body"},[a("nav-top",{attrs:{title:"在线签约"},on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),a("nav-content",[a("div",{staticClass:"tipDiv"},[a("p",{staticClass:"box"},[t._v("签约信息")]),t._v(" "),a("div",{staticClass:"table-view"},[a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_VIPNumber.png",alt:""}}),t._v(" "),a("span",[t._v("会员手机号")])]),t._v(" "),a("div",{staticClass:"center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"text",disabled:""},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})])])]),t._v(" "),t.$store.state.globalConfig.density_free_sign_type.length>1?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/renzheng.png",alt:""}}),t._v(" "),a("span",[t._v("签约方式")])]),t._v(" "),a("div",{staticClass:"center"},[a("van-radio-group",{staticClass:"radioBtn",on:{change:t.selectRadio},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("div",{staticClass:"radioBtnDiv"},[1==t.singWay1?a("van-radio",{attrs:{name:"3","checked-color":"#ff884f"}},[t._v("标签号")]):t._e(),t._v(" "),2==t.singWay2?a("van-radio",{attrs:{name:"1","checked-color":"#ff884f"}},[t._v("身份证号")]):t._e(),t._v(" "),3==t.singWay3?a("van-radio",{attrs:{name:"2","checked-color":"#ff884f"}},[t._v("车牌号")]):t._e()],1)])],1)])]):t._e(),t._v(" "),"3"==t.radio?a("div",[a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_OilCard.png",alt:""}}),t._v(" "),a("span",[t._v("标签号")])]),t._v(" "),a("div",{staticClass:"center"},[a("mt-field",{attrs:{label:"",placeholder:"扫码或手动输入卡编号"},on:{input:t.changeRfrCodeType},model:{value:t.tidSign,callback:function(e){t.tidSign=e},expression:"tidSign"}},[a("img",{attrs:{src:"static/image/fuelcard//btn_Sweep.png",width:"25",height:"25"},on:{click:t.sweep}})])],1)])]),t._v(" "),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_recommended.png",alt:""}}),t._v(" "),a("span",[t._v("车牌号")])]),t._v(" "),a("div",{staticClass:"center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.plateNum,expression:"plateNum"}],staticClass:"carint",attrs:{type:"text",readonly:"",placeholder:"请输入车牌号"},domProps:{value:t.plateNum},on:{focus:t.focus,touchstart:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.plateNum=e.target.value)}}})])])])]):t._e(),t._v(" "),"1"==t.radio&&1==t.shenfenView?a("div",[a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/ren.png",alt:""}}),t._v(" "),a("span",[t._v("姓名")])]),t._v(" "),a("div",{staticClass:"center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.shenfen.name,expression:"shenfen.name"}],attrs:{placeholder:"请输入姓名",type:"text"},domProps:{value:t.shenfen.name},on:{input:function(e){e.target.composing||t.$set(t.shenfen,"name",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_recommended.png",alt:""}}),t._v(" "),a("span",[t._v("身份证号")])]),t._v(" "),a("div",{staticClass:"center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.shenfen.idcardNum,expression:"shenfen.idcardNum"}],attrs:{type:"text",readonly:"",placeholder:"请输入身份证号"},domProps:{value:t.shenfen.idcardNum},on:{focus:t.focus,touchstart:function(t){t.stopPropagation()},input:function(e){e.target.composing||t.$set(t.shenfen,"idcardNum",e.target.value)}}})])])])]):t._e(),t._v(" "),"2"==t.radio?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/ren.png",alt:""}}),t._v(" "),a("span",[t._v("姓名")])]),t._v(" "),a("div",{staticClass:"center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.chepai.ownerName,expression:"chepai.ownerName"}],attrs:{placeholder:"请输入姓名",type:"text"},domProps:{value:t.chepai.ownerName},on:{input:function(e){e.target.composing||t.$set(t.chepai,"ownerName",e.target.value)}}})])])]):t._e(),t._v(" "),"2"==t.radio?a("div",{staticClass:"table-view-cell",on:{click:t.cheColor}},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_colour.png",alt:""}}),t._v(" "),a("span",[t._v("车牌颜色")])]),t._v(" "),a("div",{staticClass:"center right1"},[a("mt-field",{attrs:{disabled:t.disabled},model:{value:t.colorstyle,callback:function(e){t.colorstyle=e},expression:"colorstyle"}})],1),t._v(" "),a("i",{staticClass:"icon iconfont mall-arrow-down"})])]):t._e(),t._v(" "),"2"==t.radio?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_recommended.png",alt:""}}),t._v(" "),a("span",[t._v("车牌号")])]),t._v(" "),a("div",{staticClass:"center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.plateNum,expression:"plateNum"}],staticClass:"carint",attrs:{type:"text",readonly:"",placeholder:"请输入车牌号"},domProps:{value:t.plateNum},on:{focus:t.focus,touchstart:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.plateNum=e.target.value)}}})]),t._v(" "),t.actions.length>0?a("i",{staticClass:"icon iconfont mall-arrow-down",on:{click:t.morePlate}}):t._e(),t._v(" "),a("van-action-sheet",{attrs:{id:"xialaView",actions:t.actions},on:{select:function(e){return t.onSelect(e,t.item)}},model:{value:t.showxiala,callback:function(e){t.showxiala=e},expression:"showxiala"}})],1)]):t._e(),t._v(" "),a("div",{staticClass:"table-view-cell",on:{click:t.pays}},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_Signing2.png",alt:""}}),t._v(" "),a("span",[t._v("签约支付方")])]),t._v(" "),a("div",{staticClass:"center right1"},[a("mt-field",{attrs:{disabled:t.disabled},model:{value:t.styleMoney1,callback:function(e){t.styleMoney1=e},expression:"styleMoney1"}}),t._v(" "),a("mt-field",{staticStyle:{display:"none"},attrs:{disabled:t.disabled},model:{value:t.way,callback:function(e){t.way=e},expression:"way"}})],1),t._v(" "),a("i",{staticClass:"icon iconfont mall-arrow-down"})])]),t._v(" "),t.$store.state.globalConfig.preAuthAmountViewPermission&&t.preAuthAmountView?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_OilCard.png",alt:""}}),t._v(" "),a("span",[t._v("预授权金额")])]),t._v(" "),a("div",{staticClass:"center"},[a("mt-field",{attrs:{label:"",placeholder:"请输入预授权金额"},model:{value:t.preAuthAmount,callback:function(e){t.preAuthAmount=e},expression:"preAuthAmount"}},[a("van-icon",{attrs:{name:"question-o"},on:{click:t.getTips}})],1)],1)])]):t._e(),t._v(" "),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[a("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_OilCard.png",alt:""}}),t._v(" "),a("span",[t._v("推荐人")])]),t._v(" "),a("div",{staticClass:"center"},[a("mt-field",{attrs:{label:"",placeholder:"扫码或手动输入推荐人"},on:{input:t.changeRfrCodeType},model:{value:t.referrer,callback:function(e){t.referrer=e},expression:"referrer"}},[a("img",{attrs:{src:"static/image/fuelcard//btn_Sweep.png",width:"25",height:"25"},on:{click:t.sweepReferrer}})])],1)])]),t._v(" "),a("div",{staticClass:"btns"},[a("div",{staticClass:"div1"},[a("van-checkbox",{attrs:{"checked-color":"#ff884f"},on:{click:t.allSelect},model:{value:t.allRadio,callback:function(e){t.allRadio=e},expression:"allRadio"}},[t._v("我已阅读并同意\n              "),a("router-link",{attrs:{to:"/jane/agreement"}},[t._v("《加油支付协议》")])],1)],1),t._v(" "),a("div",{staticClass:"div2",on:{click:t.passfreeQuery}},[t._v("下一步")])])])])]),t._v(" "),a("virtual-keyboard",{attrs:{show:t.show},on:{input:t.inputKey,delete:t.deleteKey,blur:function(e){t.show=!1}}}),t._v(" "),a("van-overlay",{attrs:{show:t.toastView},on:{click:function(e){t.toastView=!1}}},[t.toastView?a("div",{staticClass:"toast"},[t._v("当车辆进站后，已签约用户发起预授权后冻结预授权金额，加油后再实际扣款(如所填预授权金额小于实际加油金额将禁止使用此支付方式)")]):t._e()]),t._v(" "),a("van-action-sheet",{attrs:{actions:t.actions1},on:{select:t.onSelect1},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}}),t._v(" "),a("van-action-sheet",{attrs:{actions:t.actions2},on:{select:t.onSelect2},model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}}),t._v(" "),a("van-action-sheet",{attrs:{actions:t.actionsche},on:{select:t.onSelectche},model:{value:t.showche,callback:function(e){t.showche=e},expression:"showche"}}),t._v(" "),a("van-overlay",{attrs:{show:t.showSigned}},[a("div",{staticClass:"wrapper",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"block"},[a("div",{staticClass:"Signed"},[a("img",{attrs:{src:"static/image/janePay/chenggong.png",alt:""}}),t._v(" "),a("p",[t._v("恭喜您签约成功")])]),t._v(" "),a("div",{staticClass:"sureBtn",on:{click:t.signed}},[t._v("确定")])])])])],1)}),[],!1,null,"1db8e80e",null);e.default=p.exports}}]);