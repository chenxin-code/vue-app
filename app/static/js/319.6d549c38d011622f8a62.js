(window.webpackJsonp=window.webpackJsonp||[]).push([[319],{"7pG+":function(t,s,i){"use strict";var e=i("9Aox");i.n(e).a},"8Qlj":function(t,s,i){"use strict";s.a={methods:{gongcompleteData:function(t){return this.$http.post("/app/json/user/confirmCompletetSign",t)},jiansheData:function(t){return this.$http.post("/app/json/user/passfreeQuery",t)},duanxinData:function(t){return this.$http.post("/app/json/user/signResendReq",t)},messageData:function(t){return this.$http.post("/app/json/user/signAgreementConfirm",t)},leixing:function(t){return this.$http.post("/app/json/user/queryBankCardType",t)},chepaiData:function(t){return this.$http.post("/app/json/user/getVehicleListByUserId",t)},judgeData:function(t){return this.$http.post("/app/json/user/checkIdentifyAllDetail",t)},signlistData:function(t){return this.$http.post("/app/json/user/getSignTagListByUserId",t)},signlistdetailData:function(t){return this.$http.post("/app/json/user/getSignDetail",t)},jieyueData:function(t){return this.$http.post("/app/json/user/brokageSign",t)},jiluData:function(t){return this.$http.post("/app/json/user/getSignLogListByUserId",t)},nextData:function(t){return this.$http.post("/app/json/user/applySign",t)},orderData:function(t){return this.$http.post("/app/json/app_shopping_order/queryEasyPayOrder",t)},successData:function(t){return this.$http.post("/app/json/user/getSignDetailById",t)},cancelApply:function(t){return this.$http.post("/app/json/user/cancelApply",t)}}}},"8SUu":function(t,s,i){"use strict";var e=i("cSeC");i.n(e).a},"9Aox":function(t,s,i){},c87H:function(t,s,i){"use strict";i.r(s);var e=i("PxLX"),n={props:["phone"],data:function(){return{content:"获取验证码",totalTime:60,disabled:!1,clock:null}},created:function(){console.log(this.$store.state.globalConfig.station_countdown),this.totalTime=60*this.$store.state.globalConfig.station_countdown||60},methods:{countDown:function(){if(!this.disabled){if(!this.phone||""==this.phone)return void this.$Toast("手机号不能为空");if(!this.$util.checkMobile(this.phone))return void this.$Toast("请输入正确的手机号码");e.a.open({type:"login",sureFunc:this.imgSureFunc,vertifyCancelEvent:function(){},paras:{phone:this.phone}})}},imgSureFunc:function(t,s){this.$emit("getSmsEvent",t,s)},startTime:function(){var t=this;this.disabled||(this.disabled=!0,this.content="剩余:"+this.totalTime+"秒",this.clock=window.setInterval((function(){t.totalTime--,t.content="剩余:"+t.totalTime+"秒",0==t.totalTime&&t.resetClock()}),1e3))},resetClock:function(){this.$emit("countDown",!0),this.clock&&window.clearInterval(this.clock),this.content="获取验证码",this.totalTime=60*this.$store.state.globalConfig.station_countdown||60,this.disabled=!1}}},a=(i("7pG+"),i("KHd+")),o=Object(a.a)(n,(function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"base_con"},[s("div",{ref:"btnEl",staticClass:"count-button1",attrs:{disabled:this.disabled},on:{click:this.countDown}},[this._v("\n\t\t"+this._s(this.content)+"\n  ")])])}),[],!1,null,"6e86df46",null).exports,l=i("L2JU"),c=i("8Qlj"),r=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},u={name:"",components:{CountButton:o},mixins:[c.a],data:function(){return{plateNo:"",station:"",payModelSub:"建行",hasToSign:!1,sideFiltrateModalShow:!1,show:!1,chepaiList:[],stationList:[],stationCode:"",btnView:!1,stationListView:!1,chepaiListView:!1}},computed:r({},Object(l.c)(["userInfo"])),mounted:function(){var t=this;console.log(this.$store.state.globalConfig.station_countdown),this.backUUID=this.$util.randomString(),this.$bridgefunc.enterForegroundCallBack((function(){t.hasToSign&&t.checkSignResult()})),this.$http.post("/app/json/user/getSignTagListByUserId",{token:this.$store.state.login.token}).then((function(s){var i=s.data;0==i.status?(t.chepaiListView=!0,t.chepaiList=s.data.data||[]):t.$Toast(i.info)}));var s={token:this.$store.state.login.token,getType:1,distLess:this.$store.state.globalConfig.station_distless,posx:this.$store.state.currentLocation.posx,posy:this.$store.state.currentLocation.posy};this.$http.post("/app/json/station/getStationList",s).then((function(s){var i=s.data;0==i.status?(t.stationListView=!0,t.stationList=s.data.data||[]):t.$Toast(i.info)}))},methods:{checkSignResult:function(){this.hasToSign=!1},getCode:function(){this.judgebtnView()},select:function(t){this.show=1==t,this.sideFiltrateModalShow=!0},judgebtnView:function(){this.plateNo?this.station?this.btnView=!0:this.$Toast("请选择油站"):this.$Toast("请选择车牌")},getMsgCode:function(t,s){var i=this;this.$refs.countBtn.startTime(),this.$Loading.open();var e={phone:this.userInfo.phone,plateNo:this.plateNo,stationId:this.stationCode};this.$http.post("/app/json/user/sendMessage",e).then((function(t){i.$Loading.close();var s=t.data;0==s.status?i.$Toast("获取验证码成功"):(i.$refs.countBtn.resetClock(),i.$Toast(s.info?s.info:"获取短信验证码失败"))}),(function(t){i.$Loading.close(),i.$refs.countBtn.resetClock(),i.$Toast("系统运行过程中遇到问题，请稍候再试")}))},gitPlateNo:function(t){console.log(t),this.plateNo=t.plateNo,this.sideFiltrateModalShow=!1,this.judgebtnView()},gitStation:function(t){this.stationCode=t.standardCode,this.station=t.stationName,this.sideFiltrateModalShow=!1,this.judgebtnView()}}},h=(i("8SUu"),Object(a.a)(u,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"body"},[i("nav-top",{attrs:{title:"加油机验证获取"},on:{backEvent:function(s){return t.$router.go(-1)}}}),t._v(" "),i("nav-content",[i("div",{staticClass:"tipDiv"},[i("div",{staticClass:"table-view"},[i("div",{staticClass:"table-view-cell"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[i("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_VIPNumber.png",alt:""}}),t._v(" "),i("span",[t._v("会员手机号")])]),t._v(" "),i("div",{staticClass:"center"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.phone,expression:"userInfo.phone"}],attrs:{type:"text",disabled:""},domProps:{value:t.userInfo.phone},on:{input:function(s){s.target.composing||t.$set(t.userInfo,"phone",s.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"table-view-cell",on:{click:function(s){return t.select("1")}}},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[i("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon_colour.png",alt:""}}),t._v(" "),i("span",[t._v("选择车牌")])]),t._v(" "),i("div",{staticClass:"center right1"},[i("mt-field",{attrs:{disabled:"",placeholder:"请选择车牌号"},model:{value:t.plateNo,callback:function(s){t.plateNo=s},expression:"plateNo"}})],1),t._v(" "),i("i",{staticClass:"icon iconfont mall-arrow-down"})])]),t._v(" "),i("div",{staticClass:"table-view-cell",on:{click:function(s){return t.select("2")}}},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[i("img",{staticClass:"img1",attrs:{src:"static/image/janePay/icon-you.png",alt:""}}),t._v(" "),i("span",[t._v("选择油站")])]),t._v(" "),i("div",{staticClass:"center right1"},[i("mt-field",{attrs:{disabled:"",placeholder:"请选择油站"},model:{value:t.station,callback:function(s){t.station=s},expression:"station"}})],1),t._v(" "),i("i",{staticClass:"icon iconfont mall-arrow-down"})])]),t._v(" "),i("div",{staticClass:"effective"},[i("div",[i("p",[t._v("*短信验证码"+t._s(t.$store.state.globalConfig.station_countdown)+"分钟内有效")])]),t._v(" "),i("div",{staticClass:"btns"},[t.btnView?i("span",{staticClass:"code"},[i("count-button",{ref:"countBtn",staticClass:"theme_standard_font",attrs:{phone:t.userInfo.phone},on:{getSmsEvent:t.getMsgCode}})],1):i("span",{staticClass:"code gray",on:{click:t.getCode}},[t._v("获取建行验证码")])])])])])]),t._v(" "),i("transition",{attrs:{name:"filtrate-mask"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.sideFiltrateModalShow,expression:"sideFiltrateModalShow"}],staticClass:"filtrate-modal-mask",on:{click:function(s){t.sideFiltrateModalShow=!1}}})]),t._v(" "),i("transition",{attrs:{name:"filtrate"}},[t.sideFiltrateModalShow?i("div",{ref:"sideFiltrateModal",staticClass:"filtrate-modal-wrapper"},[t.show?i("div",{staticClass:"model"},[i("div",{on:{click:function(s){t.sideFiltrateModalShow=!1}}},[i("i",{staticClass:"icon iconfont mall-fanhui"}),t._v(" "),i("span",[t._v("请选择已签约车牌")])]),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:0!=t.chepaiList.length,expression:"chepaiList.length != 0"}]},t._l(t.chepaiList,(function(s){return i("li",{on:{click:function(i){return t.gitPlateNo(s)}}},[t._v(t._s(s.plateNo))])})),0),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.chepaiListView,expression:"chepaiListView"}]},[i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.chepaiList.length,expression:"chepaiList.length == 0"}],staticClass:"nullData"},[t._v("暂无已签约车牌")])])]):i("div",{staticClass:"model"},[i("div",{on:{click:function(s){t.sideFiltrateModalShow=!1}}},[i("i",{staticClass:"icon iconfont mall-fanhui"}),t._v(" "),i("span",[t._v("油站列表")]),t._v(" "),i("span"),t._v(" "),i("span",{staticClass:"distance"},[t._v("以下是您周边"+t._s(t.$store.state.globalConfig.station_distless)+"公里内的油站")])]),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:0!=t.stationList.length,expression:"stationList.length != 0"}]},t._l(t.stationList,(function(s){return i("li",{on:{click:function(i){return t.gitStation(s)}}},[t._v(t._s(s.stationName))])})),0),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.stationListView,expression:"stationListView"}]},[i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.stationList.length,expression:"stationList.length == 0"}],staticClass:"nullData"},[t._v("暂无油站")])])])]):t._e()])],1)}),[],!1,null,"1d1ba9de",null));s.default=h.exports},cSeC:function(t,s,i){}}]);