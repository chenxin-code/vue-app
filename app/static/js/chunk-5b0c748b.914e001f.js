(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b0c748b"],{"0315":function(t,e,s){},"0388":function(t,e,s){"use strict";s("6519")},"0538":function(t,e,s){"use strict";var i=s("1c0b"),n=s("861d"),o=[].slice,a={},r=function(t,e,s){if(!(e in a)){for(var i=[],n=0;n<e;n++)i[n]="a["+n+"]";a[e]=Function("C,a","return new C("+i.join(",")+")")}return a[e](t,s)};t.exports=Function.bind||function(t){var e=i(this),s=o.call(arguments,1),a=function(){var i=s.concat(o.call(arguments));return this instanceof a?r(e,i.length,i):e.apply(t,i)};return n(e.prototype)&&(a.prototype=e.prototype),a}},"1bd8":function(t,e,s){"use strict";s("2e09")},"2e09":function(t,e,s){},6050:function(t,e,s){"use strict";var i,n=s("a026"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popup"},[s("van-popup",{staticClass:"popupCard",attrs:{title:"提示","close-on-click-overlay":!1},model:{value:t.cancellation,callback:function(e){t.cancellation=e},expression:"cancellation"}},[s("div",{staticClass:"popupText"},[s("p",[t._v("提示")]),s("div",{staticClass:"content"},[s("span",[t._v(t._s(t.cancellationText))])])]),s("div",{staticClass:"popupBtn"},[s("span",{on:{click:function(e){t.cancellation=!1}}},[t._v("关闭")]),s("span",{on:{click:function(e){t.cancellation=!1}}},[t._v("确定")])])])],1)},a=[],r=(s("76a0"),{name:"popup",components:{},data:function(){return{cancellation:!0,cancellationText:""}}}),c=r,l=(s("0388"),s("0c7c")),h=Object(l["a"])(c,o,a,!1,null,"51654094",null),u=h.exports,d=n["default"].extend(u);e["a"]={open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=new d,i.cancellationText=t.cancellationText,i.visible||(i.$mount(),document.getElementById("app").appendChild(i.$el),n["default"].nextTick((function(){i.visible=!0})))},close:function(){i&&(i.visible=!1)}}},"640e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index login2"},[i("nav-top",{attrs:{noTitle:!0,"no-back":!0}},[i("div",{staticClass:"right-btn",staticStyle:{right:"0px",height:"44px",top:"0px","padding-right":"10px","font-size":"12px"},on:{click:t.backEvent}},[i("img",{staticStyle:{"margin-top":"7px",width:"28px"},attrs:{src:"static/image/mall/close.png"}})])]),t.$store.state.login.gestureID&&t.$store.state.login.gestureNumbers&&!t.isNeedAccountLogin?t._e():i("nav-content",[i("div",{staticClass:"app-info"},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:s("7d5b")}})]),i("div",{staticClass:"title"},[t._v(t._s(t.loginTitle))])]),"sms"==t.$store.state.globalConfig.login_mode_default?i("div",{staticClass:"login-div"},[i("div",{staticClass:"text-input"},[i("div",{staticClass:"left"},[t._v("手机号")]),i("div",{staticClass:"cell-phone left-10"},[i("van-field",{attrs:{type:"tel",placeholder:"请输入手机号码",maxlength:"11",autosize:"",clearable:"",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode)))",pattern:"[0-9]*"},on:{input:function(e){t.phone=/^\d+/.exec(t.phone)?/^\d+/.exec(t.phone)[0]:""},blur:t.phoneBlur},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)]),i("div",{staticClass:"passwords-input"},[i("div",{staticClass:"passwords"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.msgCode,expression:"msgCode"}],attrs:{placeholder:"请输入短信验证码"},domProps:{value:t.msgCode},on:{input:function(e){e.target.composing||(t.msgCode=e.target.value)}}})]),i("div",{staticClass:"forget-btn"},[i("count-button",{ref:"countBtn",staticClass:"theme_standard_font",attrs:{phone:t.phone},on:{getSmsEvent:t.getMsgCode}})],1)]),"0"!=t.$store.state.globalConfig.user_register_referrer_input&&"1"!=t.isRegister?i("div",{staticClass:"passwords-input-new"},[i("div",{staticClass:"left-img"},[i("img",{attrs:{src:"static/image/login2/registe5.png",alt:""}})]),i("div",{staticClass:"passwords"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.referrer,expression:"referrer"}],attrs:{placeholder:"请输入推荐码"},domProps:{value:t.referrer},on:{input:function(e){e.target.composing||(t.referrer=e.target.value)}}})]),i("div",{staticClass:"show-passwords",on:{click:t.scanCodeFunc}},[i("img",{staticClass:"scancode",attrs:{src:"static/image/setting/icon-scan.png"}})])]):t._e(),i("div",{staticClass:"common-btn theme_standard_bg theme_font_white mt100",on:{click:function(e){return t.getCheckOutFun()}}},[t._v("提交")]),i("div",{staticClass:"login-way"},[i("div",{staticClass:"btn-extend",on:{click:function(e){return t.jumpJustLogin()}}},[t._v("账号密码登录")]),i("div",{staticClass:"btn-extend",on:{click:function(e){return t.jumpNewUser()}}},[t._v("新用户注册")])])]):i("div",{staticClass:"login-div"},[i("div",{staticClass:"text-input"},[i("div",{staticClass:"cell-phone"},[i("van-field",{attrs:{type:"tel",placeholder:"请输入手机号码",maxlength:"11",autosize:"",clearable:"",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode)))",pattern:"[0-9]*"},on:{input:function(e){t.phone=/^\d+/.exec(t.phone)?/^\d+/.exec(t.phone)[0]:""}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)]),i("div",{staticClass:"passwords-input"},[i("div",{staticClass:"passwords"},["checkbox"===(t.isShowPwd?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.passwords,expression:"passwords"}],attrs:{placeholder:"请输入密码",type:"checkbox"},domProps:{checked:Array.isArray(t.passwords)?t._i(t.passwords,null)>-1:t.passwords},on:{change:function(e){var s=t.passwords,i=e.target,n=!!i.checked;if(Array.isArray(s)){var o=null,a=t._i(s,o);i.checked?a<0&&(t.passwords=s.concat([o])):a>-1&&(t.passwords=s.slice(0,a).concat(s.slice(a+1)))}else t.passwords=n}}}):"radio"===(t.isShowPwd?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:t.passwords,expression:"passwords"}],attrs:{placeholder:"请输入密码",type:"radio"},domProps:{checked:t._q(t.passwords,null)},on:{change:function(e){t.passwords=null}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.passwords,expression:"passwords"}],attrs:{placeholder:"请输入密码",type:t.isShowPwd?"text":"password"},domProps:{value:t.passwords},on:{input:function(e){e.target.composing||(t.passwords=e.target.value)}}})]),i("div",{staticClass:"show-passwords"},[i("img",{attrs:{src:t.isShowPwd?"static/image/login2/see-icon.png":"static/image/login2/icon-eye.png"},on:{click:function(e){return t.showPassword()}}})]),i("div",{staticClass:"forget-btn",on:{click:t.forgetPwd}},[t._v("忘记密码?")])]),"true"==t.$store.state.globalConfig.user_pwdLogin_verify_sms?i("div",{staticClass:"passwords-input"},[i("div",{staticClass:"passwords"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.msgCode,expression:"msgCode"}],attrs:{placeholder:"请输入短信验证码"},domProps:{value:t.msgCode},on:{input:function(e){e.target.composing||(t.msgCode=e.target.value)}}})]),i("div",{staticClass:"forget-btn"},[i("count-button",{ref:"countBtn",staticClass:"theme_standard_font",attrs:{phone:t.phone},on:{getSmsEvent:t.getMsgCode}})],1)]):t._e(),i("div",{staticClass:"common-btn theme_standard_bg theme_font_white mt100",on:{click:function(e){return t.checkOutFun()}}},[t._v("登录")]),t.showShanyan?i("div",{staticClass:"common-btn shanyan-btn",on:{click:t.shanyanLogin}},[t._v("本机号码一键登录")]):t._e(),i("div",{staticClass:"login-way"},[i("div",{staticClass:"btn-extend",on:{click:function(e){return t.jumpCodeLogin()}}},[t._v("短信验证码登录")]),i("div",{staticClass:"btn-extend",on:{click:function(e){return t.jumpNewUser()}}},[t._v("新用户注册")])])])]),t.isShow?i("Mark"):t._e()],1)},n=[],o=s("1da1"),a=(s("96cf"),s("c975"),s("0d03"),s("c0b6"),s("643a")),r=s("76a0"),c=s("19e7"),l=s("c1b2"),h=s("b90b"),u=s("3f12"),d=s("6050"),g={name:"index",components:{Mark:a["a"],Toast:r["Toast"],gcanvas:l["a"],CountButton:h["a"]},data:function(){return{loginTitle:this.$store.state.globalConfig.projectName,isShow:!1,phone:"",passwords:"",isShowPwd:!1,isNeedAccountLogin:!1,thirdItems:[{icon:"static/image/login2/weixin.png",title:"微信",id:1},{icon:"static/image/login2/zhifubao.png",title:"支付宝",id:2}],msgCode:"",isRegister:"1",referrer:"",scanCode:"",showShanyan:!1}},watch:{msgCode:function(t){this.msgCode=this.$util.checkVerifyCodeLenght(this.msgCode)}},methods:{shanyanLogin:function(){var t=this;this.$bridgefunc.shanyanLogin((function(e){if("0"==e.result);else if("-1"==e.result);else if("1"==e.result){var s=e.token;if(""==s)return void Object(r["Toast"])("闪验授权失败");t.$util.shanyanLogin(s)}else"2"==e.result?t.thirdLogin(1):"3"==e.result&&t.thirdLogin(2)}))},phoneBlur:function(){var t=this;if(this.$util.checkMobile(this.phone)&&"0"!=this.$store.state.globalConfig.user_register_referrer_input){var e="/app/json/login/getPreRegReferrerByPhone",s={phone:this.phone};this.$http.post(e,s).then((function(e){var s=e.data;0==s.status?(t.referrer=s.data&&""!=s.data?s.data.referrer:"",t.isRegister=s.data&&""!=s.data?s.data.isRegister:"0"):t.$Toast(s.info)}),(function(t){}))}},scanCodeFunc:function(){var t=this;this.$bridgefunc.scanCode((function(e){var s=e.code;e.code&&e.code.indexOf("http")>-1&&(s=t.$util.getUrlParam(e.code,"qrCode")),t.scanCode=s,t.referrer=s}))},smsLoginFun:function(){var t=this;this.$Loading.open();var e="/app/json/login/smsLogin",s={phone:this.phone,smsVerifyCode:this.msgCode};this.referrer&&this.referrer.length&&(s["rfrCode"]=this.referrer),this.referrer==this.scanCode?s["rfrCodeType"]=2:s["rfrCodeType"]=1,this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?(t.$Toast(s.info?s.info:"登录成功"),t.$userCenter.retsetToIndex(s.data,1)):(t.$refs.countBtn.resetClock(),t.$Toast(s.info?s.info:"登录失败"))}),(function(e){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},getCheckOutFun:function(){var t=this,e=/^1\d{10}$/;if(""!=this.phone)if(e.test(this.phone))if(""!=this.msgCode)if(this.$store.state.globalConfig.user_privacy_ask_flag="true","true"!=this.$store.state.globalConfig.user_privacy_ask_flag)this.smsLoginFun();else{var s=localStorage.getItem("user_privacy_ask_flag");if("true"==s)this.smsLoginFun();else if("false"==s)this.smsLoginFun();else{var i="".concat(this.$store.state.globalConfig.downloadName,"APP将会采集当前手机的地理位置信息，如果您不同意，APP的部分功能可能会受限，如果您同意请点击下面同意按钮");this.$messagebox.confirm(i,"提示",{confirmButtonText:"同意",cancelButtonText:"不同意"}).then((function(e){localStorage.setItem("user_privacy_ask_flag","true"),t.smsLoginFun()}))["catch"]((function(e){localStorage.setItem("user_privacy_ask_flag","false");var s={};s.province=t.$store.state.globalConfig.province,s.city=t.$store.state.globalConfig.city,s.district=t.$store.state.globalConfig.district,s.longitude=t.$store.state.globalConfig.longitude,s.latitude=t.$store.state.globalConfig.latitude;var i=t.$util.bd_decrypt(s.longitude,s.latitude);t.$store.state.currentLocation.posx=i.gg_lon,t.$store.state.currentLocation.posy=i.gg_lat,t.$store.state.indexData.province=s.province,t.$store.state.indexData.city=s.city,t.$bridgefunc.vuexStorage((function(){})),t.smsLoginFun()}))}}else this.$Toast("验证码不能为空!");else this.$Toast("手机号格式不对!");else this.$Toast("手机号不能为空!")},getMsgCode:function(t,e){var s=this;if(""!=this.phone)if(this.$util.checkMobile(this.phone)){this.$refs.countBtn.startTime(),this.$Loading.open();var i="/app/json/login/sendSms",n={smsType:"1020",phone:this.phone,imgVerifyCode:t,uuid:e};this.$http.post(i,n).then((function(t){s.$Loading.close();var e=t.data;0==e.status?s.$Toast("获取验证码成功"):(s.$refs.countBtn.resetClock(),s.$Toast(e.info?e.info:"获取短信验证码失败"))}),(function(t){s.$Loading.close(),s.$refs.countBtn.resetClock(),s.$Toast("系统运行过程中遇到问题，请稍候再试")}))}else this.$Toast("请输入正确的手机号码！");else this.$Toast("手机号不能为空!")},getGesture:function(t){this.isEqual(this.getIndexArr(t))?(this.otherLogin(2),this.$refs.gcanvas.reset()):(this.$Toast("手势错误"),this.$refs.gcanvas.reset())},faceOrTouchLogin:function(){var t=this;this.$store.state.login.faceID&&this.$store.state.login.facePwd?this.$bridgefunc.faceIDRe((function(e){1==e&&t.otherLogin(3)})):this.$store.state.login.touchID&&this.$store.state.login.touchPwd&&this.$bridgefunc.fingerPrintRe((function(e){1==e&&t.otherLogin(4)}))},isEqual:function(t){for(var e="",s="",i=0;i<this.$store.state.login.gestureNumbers.length;i++)e+=this.$store.state.login.gestureNumbers[i];for(i=0;i<t.length;i++)s+=t[i];return e===s},getIndexArr:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s].index;e.push(i)}return e},otherLogin:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var i,n,o,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$bridgefunc.getArgsWithPromise();case 2:i=s.sent,e.$Loading.open("请求中"),n="/app/json/login/userDevicePwdLogin",e.$store.state.login.token,(new Date).valueOf(),o="",2==t?o=e.$store.state.login.gesturePwd:3==t?o=e.$store.state.login.facePwd:4==t&&(o=e.$store.state.login.touchPwd),a={userPwdMode:t,pwdCode:o,deviceId:i.deviceId},e.$http.post(n,a).then((function(t){e.$Loading.close();var s=t.data;0==s.status?(e.$Toast(s.info?s.info:"登录成功"),e.$store.state.login.phone=e.phone,e.$store.state.login.password=Object(c["a"])(e.passwords),e.$userCenter.retsetToIndex(s.data)):e.$Toast(s.info?s.info:"登录失败")}),(function(t){e.$Loading.close(),e.$Toast("系统运行过程中遇到问题，请稍候再试")}));case 11:case"end":return s.stop()}}),s)})))()},numberInput:function(t){this.phone=this.phone+""+t},inputChange:function(t){var e=t.target.value;this.phone=this.$util.onlyNumber(e)},backEvent:function(){this.$router.go(-1)},thirdLogin:function(t){var e=this;1==t?this.$bridgefunc.wxAuth((function(t){""==t?e.$Toast("微信授权失败"):e.wxLogin(t)})):2==t&&this.getAliLoginCodeStr()},getAliLoginCodeStr:function(){var t=this;this.$Loading.open();var e="/app/json/login/getAliLoginCodeStr";this.$http.post(e,{}).then((function(e){t.$Loading.close();var s=e.data;0==s.status?t.$bridgefunc.aliAuth(s.data,(function(e){var s=JSON.parse(decodeURIComponent(e));""==s.user_id?t.$Toast("支付宝授权失败"):t.zhifubaoLogin(s.auth_code)})):t.$Toast(s.info?s.info:"支付宝授权登录失败")}),(function(e){t.$Loading.close(),t.$Toast("支付宝授权登录失败")}))},zhifubaoLogin:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.$Loading.open(),i="/app/json/login/aliLogin",n={code:t},e.$http.post(i,n).then((function(s){e.$Loading.close();var i=s.data;if(0==i.status)e.$Toast("登录成功"),e.$userCenter.retsetToIndex(i.data),window.localStorage.setItem("hobby",1);else if(1034==i.errorCode){var n={};n.user_id=i.info,n.auth_code=t,e.bind(n,"6")}else e.$Toast(i.info?i.info:"支付宝授权登录失败")}),(function(t){e.$Loading.close(),e.$Toast("系统运行过程中遇到问题，请稍候再试")}));case 4:case"end":return s.stop()}}),s)})))()},wxLogin:function(t){var e=this;this.$Loading.open();var s="/app/json/login/wechatLogin",i={code:t};this.$http.post(s,i).then((function(s){e.$Loading.close();var i=s.data;if(0==i.status)e.$Toast("登录成功"),e.$userCenter.retsetToIndex(i.data),window.localStorage.setItem("hobby",1);else if(1034==i.errorCode){var n={};n.user_id=i.info,n.auth_code=t,e.bind(n,"3")}else e.$Toast(i.info?i.info:"微信授权登录失败")}),(function(t){e.$Loading.close(),e.$Toast("系统运行过程中遇到问题，请稍候再试")}))},bind:function(t,e){var s=this;this.$messagebox.confirm("是否已有账号？","提示",{confirmButtonText:"去绑定",cancelButtonText:"去注册"}).then((function(i){s.$router.push({path:"/usercenter/loginbinding",query:{thirdUserId:t.user_id,code:t.auth_code,regChannel:e,bindType:1}})}))["catch"]((function(i){s.$router.push({path:"/usercenter/loginbindingpw",query:{thirdUserId:t.user_id,code:t.auth_code,regChannel:e,bindType:2}})}))},registerEvent:function(){},forgetPwd:function(){this.$router.push({path:"/usercenter/forgetpassword"})},jumpCodeLogin:function(){this.$router.push({path:"/usercenter/codeverify"})},jumpJustLogin:function(){this.$router.push({path:"/usercenter/justlogin"})},jumpNewUser:function(){this.$router.push({path:"/usercenter/register"})},showPassword:function(){this.isShowPwd?this.isShowPwd=!1:this.isShowPwd=!0},checkOutFun:function(){""!=this.phone?""!=this.passwords?this.$util.checkMobile(this.phone)?"true"!=this.$store.state.globalConfig.user_pwdLogin_verify_sms||""!=this.msgCode?"true"==this.$store.state.globalConfig.verify_checkcode_login_enable?u["a"].open({type:"login",sureFunc:this.loginFun,vertifyCancelEvent:function(){},paras:{phone:this.phone}}):this.loginFun():this.$Toast("验证码不能为空!"):this.$Toast("请输入正确的手机号码！"):this.$Toast("密码不能为空!"):this.$Toast("账号不能为空!")},loginFun:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,s){var i,n,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i="/app/json/login/login",n={phone:this.phone,userPwd:Object(c["a"])(this.passwords),smsVerifyCode:this.msgCode},"1"==this.$store.state.globalConfig.user_loginPwd_type&&(n.userPwd=this.passwords),e&&s&&(n.imgVerifyCode=e,n.uuid=s),this.$store.state.login.phone=this.phone,this.$Loading.open(),this.$http.post(i,n).then((function(t){o.$Loading.close();var e=t.data;if(0==e.status){if(1==o.$store.state.globalConfig.ComplexPwd&&!o.$util.checkPassWord(o.passwords,!1))return void o.$messagebox.alert("密码过于简单，请重新设置密码。","提示",{confirmButtonText:"确定"}).then((function(t){o.$router.push({path:"/usercenter/forgetpassword",query:{title:"重新设置密码",phone:o.phone}})}));o.$Toast(e.info?e.info:"登录成功"),o.$store.state.login.phone=o.phone,window.localStorage.setItem("hobby",1),o.$store.state.login.password=Object(c["a"])(o.passwords),o.$userCenter.retsetToIndex(e.data)}else e.info.indexOf("注销")>-1?d["a"].open({cancellationText:e.info||"该账号已注销!"}):o.$Toast(e.info?e.info:"登录失败")}),(function(t){o.$Loading.close(),o.$Toast("系统运行过程中遇到问题，请稍候再试")}));case 8:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}()},mounted:function(){this.faceOrTouchLogin();var t=sessionStorage.getItem("shanyanInitResult");"1"==t&&(this.showShanyan=!0)},created:function(){var t=this.$store.state.login.phone;this.$util.checkMobile(t)&&(this.phone=t)}},p=g,f=(s("1bd8"),s("0c7c")),v=Object(f["a"])(p,i,n,!1,null,"60e080f0",null);e["default"]=v.exports},"643a":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mark"},[s("div",{staticClass:"mark-center"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:"static/image/login2/zhiwen.png"}})]),s("p",{staticClass:"text"},[t._v("请验证您的指纹")]),s("div",{staticClass:"cancel"},[t._v("取消")])])])}],o={name:"index",components:{},data:function(){return{}},methods:{registerEvent:function(){}},created:function(){}},a=o,r=(s("88d7"),s("0c7c")),c=Object(r["a"])(a,i,n,!1,null,"428b4c2c",null);e["a"]=c.exports},6519:function(t,e,s){},"7d5b":function(t,e,s){t.exports=s.p+"static/images/81d2d7410b5b082d62b948a994f70b9d.jpg"},"81d5":function(t,e,s){"use strict";var i=s("7b0b"),n=s("23cb"),o=s("50c4");t.exports=function(t){var e=i(this),s=o(e.length),a=arguments.length,r=n(a>1?arguments[1]:void 0,s),c=a>2?arguments[2]:void 0,l=void 0===c?s:n(c,s);while(l>r)e[r++]=t;return e}},"88d7":function(t,e,s){"use strict";s("dc95")},b93f:function(t,e,s){"use strict";s("0315")},c0b6:function(t,e,s){var i=s("23e7"),n=s("0538");i({target:"Function",proto:!0},{bind:n})},c1b2:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gcanvas"},[s("canvas",{ref:"canvas",staticClass:"canvas"})])},n=[],o=(s("a434"),s("cb29"),{name:"gcanvas",components:{},data:function(){return{ctx:"",devicePixelRatio:0,r:"",lastPoint:[],arr:[],restPoint:[],drawStyle:"red"}},methods:{init:function(){this.initDom(),this.lastPoint=[],this.touchFlag=!1,this.ctx=this.$refs.canvas.getContext("2d"),this.createCircle(),this.bindEvent()},reset:function(){this.createCircle()},bindEvent:function(){var t=this,e=this.$refs.canvas;e.addEventListener("touchstart",(function(e){e.preventDefault();for(var s=t.getPosition(e),i=0;i<t.arr.length;i++)if(Math.abs(s.x-t.arr[i].x)<t.r&&Math.abs(s.y-t.arr[i].y)<t.r){t.touchFlag=!0,t.lastPoint.push(t.arr[i]),t.drawPoint(this.drawStyle),t.restPoint.splice(i,1);break}}),!1),e.addEventListener("touchmove",(function(e){t.touchFlag&&t.update(t.getPosition(e))}),!1),e.addEventListener("touchend",(function(e){t.touchFlag&&(t.touchFlag=!1,t.update(void 0,!0),t.storePass(t.lastPoint))}),!1)},initDom:function(){this.devicePixelRatio=window.devicePixelRatio||1;var t=this.$refs.canvas,e=window.innerWidth,s=window.innerWidth;t.style.width=e+"px",t.style.height=s+"px",t.height=s*this.devicePixelRatio,t.width=e*this.devicePixelRatio},createCircle:function(){var t=3,e=0;this.r=this.ctx.canvas.width/(2+4*t),this.lastPoint=[],this.arr=[],this.restPoint=[];for(var s=this.r,i=0;i<t;i++)for(var n=0;n<t;n++){e++;var o={x:4*n*s+3*s,y:4*i*s+3*s,index:e};this.arr.push(o),this.restPoint.push(o)}this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(i=0;i<this.arr.length;i++)this.drawCle(this.arr[i].x,this.arr[i].y)},drawCle:function(t,e){this.ctx.fillStyle="#DDDDDD",this.ctx.beginPath(),this.ctx.arc(t,e,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},drawPoint:function(t){for(var e=0;e<this.lastPoint.length;e++)this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.arc(this.lastPoint[e].x,this.lastPoint[e].y,this.r/2.5,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},drawStatusPoint:function(t){for(var e=0;e<this.lastPoint.length;e++)this.ctx.strokeStyle=t,this.ctx.beginPath(),this.ctx.arc(this.lastPoint[e].x,this.lastPoint[e].y,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.stroke()},drawLine:function(t,e,s){this.ctx.beginPath(),this.ctx.strokeStyle=t,this.ctx.lineWidth=3,this.ctx.moveTo(this.lastPoint[0].x,this.lastPoint[0].y);for(var i=1;i<this.lastPoint.length;i++)this.ctx.lineTo(this.lastPoint[i].x,this.lastPoint[i].y);this.ctx.lineTo(e.x,e.y),this.ctx.stroke(),this.ctx.closePath()},getPosition:function(t){var e=t.currentTarget.getBoundingClientRect(),s={x:(t.touches[0].clientX-e.left)*this.devicePixelRatio,y:(t.touches[0].clientY-e.top)*this.devicePixelRatio};return s},update:function(t,e){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(var s=0;s<this.arr.length;s++)this.drawCle(this.arr[s].x,this.arr[s].y);if(this.drawPoint(this.drawStyle),this.drawStatusPoint(this.drawStyle),e)this.lastPoint.length&&this.drawLine(this.drawStyle,this.lastPoint[this.lastPoint.length-1],this.lastPoint);else{this.drawLine(this.drawStyle,t,this.lastPoint);for(s=0;s<this.restPoint.length;s++)if(Math.abs(t.x-this.restPoint[s].x)<this.r&&Math.abs(t.y-this.restPoint[s].y)<this.r){this.lastPoint.push(this.restPoint[s]),this.drawPoint(this.drawStyle),this.restPoint.splice(s,1);break}}},storePass:function(t){this.$emit("getGesture",t)}},mounted:function(){this.init()},created:function(){}}),a=o,r=(s("b93f"),s("0c7c")),c=Object(r["a"])(a,i,n,!1,null,"361e8269",null);e["a"]=c.exports},cb29:function(t,e,s){var i=s("23e7"),n=s("81d5"),o=s("44d2");i({target:"Array",proto:!0},{fill:n}),o("fill")},dc95:function(t,e,s){}}]);