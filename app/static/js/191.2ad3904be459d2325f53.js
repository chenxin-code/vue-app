(window.webpackJsonp=window.webpackJsonp||[]).push([[191,797,1005],{"0snt":function(t,e,n){t.exports=n.p+"static/img/jyq-icon-2.c9b858a.png"},"6ngc":function(t,e,n){t.exports=n.p+"static/img/bj-coupon.e62fc79.png"},AqR5:function(t,e,n){"use strict";n.r(e);var i=n("chc6"),a={name:"subpage",components:{ImageAd:function(){return Promise.all([n.e(45),n.e(1e3)]).then(n.bind(null,"AAUX"))},Rubik:function(){return n.e(521).then(n.bind(null,"JAfl"))},ProductList:function(){return Promise.all([n.e(0),n.e(33)]).then(n.bind(null,"6cKT"))},ProductInfinite:function(){return Promise.all([n.e(0),n.e(39)]).then(n.bind(null,"h6oS"))},Auxiliary:function(){return n.e(69).then(n.bind(null,"5wcc"))},MyCenter:function(){return Promise.all([n.e(47),n.e(1001)]).then(n.bind(null,"Ozsn"))},MyCenterHeader:function(){return n.e(517).then(n.bind(null,"AzRk"))},MyOrder:function(){return n.e(518).then(n.bind(null,"m7vU"))},FuelPrices:function(){return n.e(431).then(n.bind(null,"m+oH"))},MyAssets:function(){return n.e(516).then(n.bind(null,"TcXZ"))},SecondsKill:function(){return Promise.all([n.e(0),n.e(38),n.e(1002)]).then(n.bind(null,"Pe7J"))},PickupAddress:function(){return n.e(520).then(n.bind(null,"IMmR"))},MyPoints:function(){return n.e(519).then(n.bind(null,"FH2X"))},MyPointsHeader:function(){return n.e(65).then(n.bind(null,"WgjJ"))},HScroll:function(){return Promise.all([n.e(0),n.e(265)]).then(n.bind(null,"Cit7"))},Floater:function(){return n.e(512).then(n.bind(null,"y6U2"))},HYTop:function(){return Promise.all([n.e(34),n.e(1003)]).then(n.bind(null,"GZ48"))},HYNews:function(){return n.e(514).then(n.bind(null,"ajuS"))},News:function(){return n.e(432).then(n.bind(null,"cuCu"))},CustomText:function(){return n.e(522).then(n.bind(null,"Gznn"))},FuelFree:function(){return n.e(64).then(n.bind(null,"6zDU"))},CoverFlow:function(){return n.e(506).then(n.bind(null,"wqBJ"))},MemberCard:function(){return n.e(515).then(n.bind(null,"BNZD"))},CouponsTag:function(){return n.e(505).then(n.bind(null,"St0h"))},CouponHQ:function(){return Promise.all([n.e(0),n.e(41),n.e(1004)]).then(n.bind(null,"Jvtp"))},ProductTabs:function(){return Promise.all([n.e(0),n.e(42)]).then(n.bind(null,"4Uzd"))},MemberLevels:function(){return n.e(266).then(n.bind(null,"p+j1"))},ESHTop:function(){return n.e(511).then(n.bind(null,"Bw+z"))},ESHNearStation:function(){return n.e(509).then(n.bind(null,"p1NU"))},ESHDZJYQ:function(){return n.e(507).then(n.bind(null,"8hL0"))},ESHJFHQ:function(){return n.e(508).then(n.bind(null,"WB1r"))},ESHQQJY:function(){return n.e(510).then(n.bind(null,"u8O5"))},HKTop:function(){return n.e(513).then(n.bind(null,"8+bW"))},BtnProduct:function(){return n.e(504).then(n.bind(null,"WJkU"))}},props:["divKeywords","pgCode","comData","propsPageData"],data:function(){return{pageData:null}},methods:{getMyPageData:function(){var t=this,e="vuePageData_",n=[];n.push({appType:1}),n.push({accessType:2}),this.pgCode&&""!=this.pgCode?(e+=this.pgCode,n.push({pgCode:this.pgCode})):(n.push({divKeywords:this.divKeywords}),e+=this.$util.md5String(this.divKeywords)),-1!=this.$store.state.webtype&&n.push({webType:this.$store.state.webtype}),i.a.request("/appcontent/js/app_vue_page/vuePageData.js",e,n).then((function(e){if(0==e.status){var n=e.data.pageData;if(!n.pageDataJson)return;t.pageData=JSON.parse(n.pageDataJson),t.$emit("dataLoaded")}}))}},created:function(){this.propsPageData?(this.pageData=this.propsPageData,this.$emit("dataLoaded")):this.getMyPageData()}},s=(n("xpvW"),n("KHd+")),o=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!=t.pageData?n("div",{staticClass:"subpage"},t._l(t.pageData.moduleList,(function(e,i){return n("div",[n(e.code,{ref:"page_module_"+i,refInFor:!0,tag:"component",attrs:{myIndex:i,usePorpData:!0,propData:t.pageData,comData:t.comData}})],1)})),0):t._e()}),[],!1,null,"505bd157",null);e.default=o.exports},ImBM:function(t,e,n){"use strict";n.r(e);var i=n("AqR5"),a={name:"exchange-coupon-list",components:{PriceOrder:n("WQzh").a,SubPage:i.default},data:function(){return{activityId:"",listData:[],layoutType:"0",couponDetail:{},myPageTitle:"",mTitle:""}},methods:{getJYJInfo:function(){var t=this,e={userId:this.$store.state.userInfo.userId};this.$Loading.open(),this.$http.post("/app/json/djljy/router?m=getAccount",e).then((function(e){t.$Loading.close();var n=e.data;0===n.status?t.couponDetail=JSON.parse(n.data).walletObj:t.$Toast(n.info)})).catch((function(e){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},toUse:function(){"1"==this.layoutType?(console.log("去 大家来加油 小程序！"),this.$market.enterNav({link:{type:9,url:"/pages/openMp/main?xcxId="+encodeURIComponent("wx32fe2eb8b2fa221f")+"&imgUrl="+encodeURIComponent(this.$store.state.globalConfig.appNavMnpImgUrl)+"&path="+encodeURIComponent("/pages/my-coupon/main")}})):(console.log("去 一键加油 小程序！"),this.$market.enterNav({link:{type:9,url:"/pages/openMp/main?xcxId="+encodeURIComponent("wxbfe24664b9cf5b3b")+"&imgUrl="+encodeURIComponent(this.$store.state.globalConfig.appNavMnpImgUrlYJJY)+"&path="+encodeURIComponent("/pages/index/onekeyrefuel/QGOneKeyRefuel")}}))},getAssetsValue:function(t){if(t.rewardType){for(var e=this.$store.state.mall2.myAssets.rewardList,n=0;e&&n<e.length;n++)if(e[n].rewardsSurplusOrderType==t.rewardType)return e[n].rewardsSurplus;return"0"}return this.$store.state.mall2.myAssets[t.countKey]},toRules:function(){this.$router.push({path:"/usercenter/agreement",query:{value:80}})},exchangeEvent:function(t){this.$market.exchangeCoupon(t)},getListData:function(){var t=this,e={page:1,rows:10};e.activityId=this.activityId,e.productType="513",this.$http.post("/app/json/product/getAppProSearchList",e).then((function(e){var n=e.data;if(0==n.status){for(var i=n.data.list,a=[],s=0;s<i.length;s++){var o=t.$market.dataProcessing(i[s]);a.push(o)}t.listData=t.listData.concat(a)}}),(function(t){}))}},created:function(){this.layoutType=this.$route.query.layoutType||"0",this.activityId=this.$route.query.activity||"",this.listData=[],this.getListData(),this.getJYJInfo(),0==this.layoutType?(this.myPageTitle="加油金专区",this.mTitle="我的加油金"):1==this.layoutType&&(this.myPageTitle="加油券专区",this.mTitle="我的加油券"),window.document.title=this.myPageTitle}},s=(n("bSiB"),n("KHd+")),o=Object(s.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"exchange-coupon-list"},[i("nav-top",{attrs:{title:t.myPageTitle},on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),i("nav-content",[i("div",{staticClass:"scroll-div"},[1==t.layoutType?i("div",{staticClass:"my-balance"},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:n("0snt")}})]),t._v(" "),i("div",{staticClass:"title"},[t._v(t._s(t.mTitle))]),t._v(" "),i("div",{staticClass:"right-div"},[i("div",{staticClass:"number"},[t._v("¥"),i("span",[t._v(t._s(t.couponDetail.totalAmount||"0"))])]),t._v(" "),i("div",{staticClass:"btn",on:{click:t.toUse}},[t._v("去使用")])])]):t._e(),t._v(" "),0==t.layoutType?i("div",{staticClass:"my-balance bj",on:{click:t.toUse}},[i("img",{attrs:{src:n("6ngc"),alt:""}})]):t._e(),t._v(" "),i("div",{staticClass:"tip"},[t._v("您当前可用的优客点余额为："+t._s(t.getAssetsValue({rewardType:"100"})))]),t._v(" "),i("div",{staticClass:"coupon-content"},t._l(t.listData,(function(e,n){return i("div",{key:n,staticClass:"item"},[i("img",{staticClass:"bg-img",attrs:{src:"static/images/hk/coupon-bg.png"}}),t._v(" "),i("div",{staticClass:"coup-cont"},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:e.phMainUrl}})]),t._v(" "),i("div",{staticClass:"info"},[i("div",{staticClass:"couFaceValue"},[t._v("¥"),i("span",[t._v(t._s(e.skuPropValues||"0元"))])]),t._v(" "),i("div",{staticClass:"center-info"},[i("div",{staticClass:"title"},[t._v(t._s(e.shortName))])])]),t._v(" "),i("div",{staticClass:"right-div"},[i("div",[t._v("兑换价")]),t._v(" "),i("div",{staticClass:"price single-line"},[i("PriceOrder",{attrs:{listitem:e,isRMBEnd:!0}})],1),t._v(" "),i("div",{staticClass:"btn",on:{click:function(n){return t.exchangeEvent(e)}}},[t._v("立即兑换")])])])])})),0)])])],1)}),[],!1,null,"75df4253",null);e.default=o.exports},OGEx:function(t,e,n){},bSiB:function(t,e,n){"use strict";var i=n("OGEx");n.n(i).a},chc6:function(t,e,n){"use strict";var i=n("2nGb"),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=document.getElementsByTagName("head")[0],r=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e||"",this.funcName=n;var a=document.createElement("script");e+=(~e.indexOf("?")?"&":"?")+"callback="+n,a.src=e,a.type="text/javascript",this.myTimer=setTimeout((function(){i.callCallback({status:1,info:"网络加载较慢！"}),i.clearup()}),1e4),window[n]=function(t){i.callCallback({status:0,data:t,info:""}),i.clearup()},a.onerror=function(){i.callCallback({status:1,info:"网络加载较慢！"}),i.clearup()},this.scriptNode=a,o.appendChild(this.scriptNode)}return s(t,[{key:"then",value:function(t){this.callbackFunc=t}},{key:"callCallback",value:function(t){var e=this;setTimeout((function(){e.callbackFunc(t)}),0)}},{key:"clearup",value:function(){this.myTimer&&clearTimeout(this.myTimer),this.myTimer=null,this.scriptNode.src="",o.removeChild(this.scriptNode)}}]),t}(),u={request:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!t)throw new Error("url 不能为空");return 0!=t.indexOf("http")&&(t=i.a.baseURL+t),n.forEach((function(e){if("object"===(void 0===e?"undefined":a(e)))for(var n in e)t+=~t.indexOf("?")?"&":"?",t+=n+"="+e[n]})),new r(t,e)},cancelAll:function(){}};e.a=u},iijq:function(t,e,n){},xpvW:function(t,e,n){"use strict";var i=n("iijq");n.n(i).a}}]);