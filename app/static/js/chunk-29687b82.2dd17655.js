(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29687b82"],{"4aec":function(e,t,a){},d146:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mobile-preview"},[e.notch?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.isPreview,expression:"!$store.state.isPreview"}],staticClass:"top_bg"}):e._e(),"0"==e.pageData.type&&e.pageShow?a("div",{staticClass:"full-div"},[a("PreviewComponent",{ref:"Ref_Com_One",tag:"component",attrs:{pageData:e.pageData,barHeight:e.getTopHeight()},on:{getPageData:function(t){return e.getPageData(e.pgCode,-1)}}})],1):e._e(),"1"==e.pageData.type&&e.pageShow?a("div",{staticClass:"full-div"},[a("div",{staticClass:"page-content",class:{"page-content-2":"top"==e.pageData.tabbarType}},e._l(e.tabbarSubDatas,(function(t,s){return t.hasShow&&t.data?a("div",{directives:[{name:"show",rawName:"v-show",value:s==e.selectedIndex,expression:"index == selectedIndex"}],staticClass:"full-div"},[a(e.getItemCode(t),{ref:e.getComRef(s),refInFor:!0,tag:"component",attrs:{hasBack:e.getHasbackEvent(t.code),pageData:t.data,barHeight:e.getTopHeight(),commonShow:e.selectedIndex==s},on:{getPageData:function(a){return e.getPageData(t.pgCode,s)},tabbarEvent:e.tabbarChanged}})],1):e._e()})),0),a("Tabbar",{ref:"tabbar2",attrs:{usePorpData:!0,propData:e.pageData},on:{tabbarEvent:e.tabbarEvent}})],1):e._e(),e.adPageKey?a("AdPage",{attrs:{pageAdKeywords:e.adPageKey}}):e._e()],1)},o=[],i=(a("d3b7"),a("3ca3"),a("ddb0"),a("c975"),a("9911"),a("4795"),a("e25e"),a("6120")),n=a("99b4"),r={name:"index",components:{PreviewComponent:function(){return a.e("chunk-2c41940f").then(a.bind(null,"bff5"))},LinkComponent:function(){return a.e("chunk-751da5e9").then(a.bind(null,"e1e9"))},WebViewComponent:function(){return a.e("chunk-3506645b").then(a.bind(null,"2985c"))},Tabbar:i["a"],AdPage:n["a"]},data:function(){return{pgCode:"",pageShow:!1,pageData:{},fullPageData:{},tabbarSubDatas:[],selectedIndex:-1,isFirstShow:!0,lastPath:"",adPageKey:"",pagePosition:0,notch:!1}},computed:{},methods:{commonPageShow:function(e){var t=this.getComRef(e);if(this.$refs[t]){var a=this.$refs[t],s=a[0];if(s.pageShow){this.tabbarSubDatas[this.selectedIndex];s.pageShow()}}},tabbarChanged:function(e){this.$refs.tabbar.tabbarEvent(e)},getHasbackEvent:function(e){return!1},getComRef:function(e){return"com"+e},getItemCode:function(e){return"LinkComponent"==e.code&&0==e.data.url.indexOf("http")&&(e.code="WebViewComponent"),"2"==e.code&&"/usercenter/rebatebonus"==e.data.url&&(e.code="RebateBonus"),e.code},getTopHeight:function(){return this.$store.state.barHeight},tabbarEvent:function(e){var t=this,a=this.tabbarSubDatas[e];if(a.hasShow&&this.selectedIndex!=e&&this.commonPageShow(e),""==this.$store.state.login.token&&"Mallshoppingcart"==a.code)return this.$store.state.indexData.selectedIndex=e,this.$store.state.pushData={},this.tabbarChanged(this.selectedIndex),void this.$util.toLogin();a.hasShow=!0,this.selectedIndex=e,this.$nextTick((function(){t.getComRef(e)&&t.$refs[t.getComRef(e)]&&"PreviewComponent"==a.code&&t.$refs[t.getComRef(e)][0].refresh()}))},getPageData:function(e,t){var a=this,s="/app/json/app_vue_page/vueGetPageData",o={};e&&(o.pgCode=e),o.cityName=this.$store.state.indexData.city?this.$store.state.indexData.city:"",o.provinceName=this.$store.state.indexData.province?this.$store.state.indexData.province:"",o.accessType=2,o.appType=1,this.$STLoading.open(),this.$http.post(s,o).then((function(e){var s=e.data;if(a.$STLoading.close(),0==s.status){var o=s.data,i=JSON.parse(o.pageDataJson);i.pgCode=o.pgCode,a.adPageKey="AD_Key_Common_"+o.pgCode,-1==t?(a.fullPageData=o,a.pageData=i,a.pageShow=!1,a.$nextTick((function(){a.pageShow=!0})),"1"==a.pageData.type&&a.getSubPageDatas()):a.tabbarSubDatas[t].data=i}else a.$Toast("网络加载较慢，请稍后重试!")}))["catch"]((function(e){a.$STLoading.close(),a.$Toast("网络加载较慢，请稍后重试!")}))},getSubPageDatas:function(){for(var e=this,t=this.pageData.moduleList.length,a=[],s=-1,o=0;o<t;o++){var i=this.pageData.moduleList[o];1==i["default"]&&(s=o);var n=i.link,r={};"1"==n.type?(r.code="PreviewComponent",r.data="",r.pgCode=n.pgCode):"2"==n.type?(r.code=n.code,r.data={title:n.label,url:n.url}):"3"==n.type&&(r.code="LinkComponent",r.data={title:n.label,url:n.url}),r.hasShow=!1,a.push(r)}this.tabbarSubDatas=a;for(var h=0;h<this.tabbarSubDatas.length;h++){var c=this.tabbarSubDatas[h];"PreviewComponent"==c.code&&this.getPageData(c.pgCode,h)}-1!=s&&setTimeout((function(){e.$refs.tabbar2.tabbarEvent(s)}),20)}},watch:{},mounted:function(){var e=window.screen.height/window.screen.width,t=window.screen.height==window.screen.availHeight?1.8:1.65;e>t&&"3"!==this.$store.state.webtype&&"2"!==this.$store.state.webtype&&"/common2/:id"!==this.$route.matched[0].path&&(this.notch=!0)},activated:function(){if("0"==this.pageData.type){if(this.pageShow){var e=this.$refs.Ref_Com_One;e&&e.setScrollSite&&(e.setScrollSite(this.pagePosition),e.pageShow())}}else if(this.pageShow){var t=this.getComRef(this.selectedIndex);if(this.$refs[t]){var a=this.$refs[t],s=a[0];s.setScrollSite&&(s.setScrollSite(this.pagePosition),s.pageShow())}}},beforeRouteLeave:function(e,t,a){if(e.path==this.lastPath)this.$keepaliveHelper.deleteCache(this);else if("0"==this.pageData.type){var s=this.$refs.Ref_Com_One;s.getScrollSite&&(this.pagePosition=parseInt(s.getScrollSite()))}else{var o=this.getComRef(this.selectedIndex);if(this.$refs[o]){var i=this.$refs[o],n=i[0];n.getScrollSite&&(this.pagePosition=parseInt(n.getScrollSite()))}}a()},created:function(){this.$store.state.clientWidth=document.documentElement.clientWidth,this.pgCode=this.$route.query.pgCode?this.$route.query.pgCode:"",this.lastPath=this.$route.query.lastPath?this.$route.query.lastPath:"",this.getPageData(this.pgCode,-1),this.isFirstShow=!0}},h=r,c=(a("eed2"),a("0c7c")),d=Object(c["a"])(h,s,o,!1,null,"517284f9",null);t["default"]=d.exports},eed2:function(e,t,a){"use strict";a("4aec")}}]);