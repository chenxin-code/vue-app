(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7301c227"],{1273:function(t,i,e){},"7a8e":function(t,i,e){"use strict";e("1273")},ce4d:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"evaluation"},[e("nav-top",{attrs:{title:t.title},on:{backEvent:function(i){return t.$router.go(-1)}}}),t.complete?e("nav-content",{staticClass:"evaluation-container"},[e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v("被考核人信息")]),e("div",{staticClass:"card"},[e("div",{staticClass:"text"},[e("div",{staticClass:"title"},[t._v("员工编号")]),e("div",{staticClass:"info"},[t._v(t._s(t.details.staffCode))])]),e("div",{staticClass:"text"},[e("div",{staticClass:"title"},[t._v("姓名")]),e("div",{staticClass:"info"},[t._v(t._s(t.details.name))])]),e("div",{staticClass:"text"},[e("div",{staticClass:"title"},[t._v("所在部门")]),e("div",{staticClass:"info"},[t._v(t._s(t.details.depart))])]),e("div",{staticClass:"text"},[e("div",{staticClass:"title"},[t._v("职位")]),e("div",{staticClass:"info"},[t._v(t._s(t.details.position))])]),e("div",{staticClass:"text"},[e("div",{staticClass:"title"},[t._v("所在轮岗/借调部门名称")]),e("div",{staticClass:"info"},[t._v(t._s(t.details.loanDepart))])]),e("div",{staticClass:"text"},[e("div",{staticClass:"title"},[t._v("测评等级")]),e("div",{staticClass:"info"},[t._v(t._s(t.details.examinationLevelValue))])])]),e("div",{staticClass:"title"},[t._v("被考核人履职情况")]),t._l(t.details.performDuties,(function(i,s){return e("div",{key:s,staticClass:"card"},[e("div",{staticClass:"name"},[e("div",{staticClass:"title"},[t._v(t._s(i.jobTitle))]),e("div",{staticClass:"inp"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:i.describe,expression:"item.describe"}],attrs:{rows:"3",readonly:"",cols:"20"},domProps:{value:i.describe},on:{input:function(e){e.target.composing||t.$set(i,"describe",e.target.value)}}})])]),e("div",{staticClass:"text special",on:{click:function(e){return t.openShow(i)}}},[e("div",{staticClass:"title"},[t._v("完成情况评价")]),e("div",{staticClass:"info change"},[t._v(" "+t._s(i.completion)+" "),e("van-icon",{attrs:{name:"ellipsis"}})],1)]),e("div",{staticClass:"text"},[e("div",{staticClass:"title"},[t._v("是否属于公司重点工作")]),e("div",{staticClass:"info"},[e("van-radio-group",{attrs:{disabled:t.disabled},model:{value:i.radio,callback:function(e){t.$set(i,"radio",e)},expression:"item.radio"}},t._l(t.radioList,(function(s,a){return e("van-radio",{key:a,attrs:{"checked-color":"#F80F16",name:s.type},on:{click:function(e){return t.clickRadio(i,s)}}},[t._v(t._s(s.text))])})),1)],1)]),2==t.type?e("div",{staticClass:"text special",on:{click:function(e){return t.openShow(i)}}},[e("div",{staticClass:"title"},[t._v("轮岗/借调部门完成情况评价")]),e("div",{staticClass:"info change"},[t._v(" "+t._s(i.loanCompleteEvaluate)+" "),e("van-icon",{attrs:{name:"ellipsis"}})],1)]):t._e(),2==t.type?e("div",{staticClass:"text"},[e("div",{staticClass:"title"},[t._v("轮岗/借调部门是否属于公司重点工作")]),e("div",{staticClass:"info"},[e("van-radio-group",{attrs:{disabled:""},model:{value:i.loanIsKeyWork.toString(),callback:function(e){t.$set(i.loanIsKeyWork,"toString()",e)},expression:"item.loanIsKeyWork.toString()"}},t._l(t.radioList,(function(s,a){return e("van-radio",{key:a,attrs:{"checked-color":"#F80F16",name:s.type},on:{click:function(e){return t.clickRadio(i,s)}}},[t._v(t._s(s.text))])})),1)],1)]):t._e()])})),e("div",{staticClass:"title"},[t._v("述职报告")]),e("div",{staticClass:"card"},[e("div",{staticClass:"name"},[e("div",{staticClass:"inp"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.details.debriefing,expression:"details.debriefing"}],attrs:{rows:"3",readonly:"",placeholder:"请输入述职报告",cols:"20"},domProps:{value:t.details.debriefing},on:{input:function(i){i.target.composing||t.$set(t.details,"debriefing",i.target.value)}}})])])])],2),1!=t.currentIndex?e("div",{staticClass:"btn",on:{click:t.nextBtn}},[t._v(t._s(1==t.type?"提交":"下一步"))]):t._e(),e("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(i){t.show=i},expression:"show"}},[e("div",{staticClass:"show-title"},[e("div",{staticClass:"left"},[t._v("完成情况选择")]),e("div",{staticClass:"close",on:{click:function(i){t.show=!1}}},[e("van-icon",{attrs:{color:"#999",size:"20px",name:"cross"}})],1)]),e("ul",{staticClass:"list"},t._l(t.typeList,(function(i,s){return e("li",{key:s,staticClass:"item",class:{active:t.ind==s},on:{click:function(e){return t.changeType(s,i)}}},[e("div",{staticClass:"type"},[t._v(t._s(i.text))])])})),0)])],1):t._e()],1)},a=[],o=(e("4160"),e("159b"),e("0d03"),e("d3b7"),e("25f0"),{data:function(){return{list:[1,2,3],show:!1,complete:!1,typeList:[{text:"完成",type:"3"},{text:"基本完成",type:"2"},{text:"部分完成",type:"1"},{text:"未完成",type:"0"}],radioList:[{text:"是",type:"1"},{text:"否",type:"0"}],ind:-1,type:"",details:"",info:"",title:"",disabled:!1,currentIndex:""}},mounted:function(){this.type=this.$route.query.type||"",this.currentIndex=this.$route.query.currentIndex||"",this.disabled=1!=this.type||1==this.currentIndex,this.title=1==this.type?"部门负责人评价":"考评中心",this.evaluationDetail()},methods:{evaluationDetail:function(){var t=this;this.$request.post("/app/json/evaluation_center/evaluationDetail",{id:this.$route.query.id}).then((function(i){0===i.status?(t.details=i.data,t.details.performDuties.forEach((function(i){if(1==t.type&&1!=t.currentIndex)t.$set(i,"completion","选择完成情况"),t.$set(i,"completeEvaluate",""),t.$set(i,"radio","");else{var e="",s="";e=0==i.completeEvaluate?"未完成":1==i.completeEvaluate?"部分完成":2==i.completeEvaluate?"基本完成":"完成",s=0==i.loanCompleteEvaluate?"未完成":1==i.loanCompleteEvaluate?"部分完成":2==i.loanCompleteEvaluate?"基本完成":"完成",t.$set(i,"completion",e),t.$set(i,"radio",i.isKeyWork.toString()),t.$set(i,"loanCompleteEvaluate",s)}})),t.complete=!0):t.$Toast(i.info?i.info:"获取信息失败")}))},submitEvaluate:function(){var t=this,i=[];this.details.performDuties.forEach((function(t){i.push({id:t.id,completeEvaluate:t.completeEvaluate,isKeyWork:t.radio})})),this.$request.post("/app/json/evaluation_center/submitEvaluate",{id:this.$route.query.id,performDuties:i,secondmentFlag:this.details.secondmentFlag}).then((function(i){0===i.status?(t.$Toast("评价成功"),t.$router.go(-1)):t.$Toast(i.info?i.info:"获取信息失败")}))},changeType:function(t,i){var e=this;this.ind=t,this.details.performDuties.forEach((function(t){t.id==e.info.id&&(t.completion=i.text,t.completeEvaluate=i.type)})),this.show=!1},clickRadio:function(t,i){this.details.performDuties.forEach((function(e){e.id==t.id&&(e.radio=i.type)}))},openShow:function(t){1==this.type&&1!=this.currentIndex&&(this.show=!0,this.ind=-1,this.info=t)},nextBtn:function(){for(var t=0;t<this.details.performDuties.length;t++){if("选择完成情况"==this.details.performDuties[t].completion)return void this.$toast("".concat(this.details.performDuties[t].jobTitle,"完成情况评价未选择"));if(!this.details.performDuties[t].radio)return void this.$toast("".concat(this.details.performDuties[t].jobTitle,"未选择是否属于公司重点工作"))}1==this.type?this.submitEvaluate():this.$router.push({path:"/subject",query:{questionaireId:this.details.questionaireId,id:this.details.id}})}},components:{}}),n=o,l=(e("7a8e"),e("0c7c")),c=Object(l["a"])(n,s,a,!1,null,"7becfe72",null);i["default"]=c.exports}}]);