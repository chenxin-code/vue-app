(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56f0132c"],{"0410":function(t,n,e){},"0538":function(t,n,e){"use strict";var i=e("1c0b"),o=e("861d"),a=[].slice,s={},c=function(t,n,e){if(!(n in s)){for(var i=[],o=0;o<n;o++)i[o]="a["+o+"]";s[n]=Function("C,a","return new C("+i.join(",")+")")}return s[n](t,e)};t.exports=Function.bind||function(t){var n=i(this),e=a.call(arguments,1),s=function(){var i=e.concat(a.call(arguments));return this instanceof s?c(n,i.length,i):n.apply(t,i)};return o(n.prototype)&&(s.prototype=n.prototype),s}},"0b18":function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"bind-wechat login2"},[e("nav-top",{on:{backEvent:t.backEvent}}),e("nav-content",[e("div",{staticClass:"wechat"},[e("div",{staticClass:"warm-prompt mine-box-shodow"},[e("h2",{staticClass:"warm-title"},[t._v("温馨提示")]),e("p",{staticClass:"unorder"},[t._v("1.销售APP账号与微信号需互相唯一；")]),e("p",{staticClass:"unorder"},[t._v("2.当前账号绑定新微信需先解绑当前账号；")]),e("p",{staticClass:"unorder"},[t._v("3.如微信号已绑定另外账号，需回原账号解绑.。")])]),e("div",{staticClass:"bind-warp"},[e("div",{staticClass:"bind-logo"},[e("img",{attrs:{src:"static/image/setting/bindwechat.png"}})]),1==t.bindType?e("p",{staticClass:"bound"},[t._v("已绑定账号:"),e("span",{staticClass:"chart-name"},[t._v(t._s(t.wechatInfo.wxNickName))])]):t._e()]),-1!=t.bindType?e("div",{staticClass:"common-btn theme_bg_red theme_font_white mt100",on:{click:t.wechatOp}},[t._v(t._s(2==t.bindType?"马上绑定微信":"解绑微信")+" ")]):t._e()])])],1)},o=[],a=(e("c0b6"),{name:"setting",components:{},data:function(){return{wechatInfo:null,bindType:-1}},methods:{backEvent:function(){this.$router.go(-1)},wechatOp:function(){var t=this;2==this.bindType?this.$bridgefunc.wxAuth((function(n){""==n?t.$Toast("微信授权失败"):t.wxLogin(n)})):1==this.bindType&&this.unBindWechat()},unBindWechat:function(){var t=this;this.$Loading.open();var n="/app/json/user/unBindThirdUser",e={token:this.$store.state.login.token,regChannel:5};this.$http.post(n,e).then((function(n){t.$Loading.close();var e=n.data;0==e.status?(t.$Toast("解绑成功"),t.bindType=2):t.$Toast(e.info)}),(function(n){t.$Loading.close(),t.$Toast("获取数据失败")}))},wxLogin:function(t){var n=this;this.$Loading.open();var e="/app/json/user/getWechatThirdId",i={code:t,token:this.$store.state.login.token};this.$http.post(e,i).then((function(e){n.$Loading.close();var i=e.data;if(0==i.status){var o={};o.user_id=i.data,o.auth_code=t,n.bind(o)}else n.$Toast(i.info)}),(function(t){n.$Loading.close(),n.$Toast("系统运行过程中遇到问题，请稍候再试")}))},bind:function(t){this.$router.push({path:"/usercenter/bindphone",isnativetop:"1",query:{thirdUserId:t.user_id,code:t.auth_code,regChannel:"3",bindType:3}})},getWechatInfo:function(){var t=this;this.$Loading.open();var n="/app/json/user/getWechatUserInfo",e={token:this.$store.state.login.token};this.$http.post(n,e).then((function(n){t.$Loading.close();var e=n.data;0==e.status?(t.wechatInfo=e.data,t.bindType=1):1037==e.errorCode?t.bindType=2:(t.$Toast(e.info),t.bindType=-1)}),(function(n){t.$Loading.close(),t.$Toast("获取数据失败")}))}},created:function(){this.getWechatInfo()}}),s=a,c=(e("1407"),e("0c7c")),r=Object(c["a"])(s,i,o,!1,null,"47764478",null);n["default"]=r.exports},1407:function(t,n,e){"use strict";e("0410")},c0b6:function(t,n,e){var i=e("23e7"),o=e("0538");i({target:"Function",proto:!0},{bind:o})}}]);