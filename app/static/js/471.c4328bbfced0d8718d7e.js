(window.webpackJsonp=window.webpackJsonp||[]).push([[471],{DTa9:function(t,e){t.exports="data:image/png;base64,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"},LoRP:function(t,e,o){"use strict";o.r(e),o("QUrY");var a=o("eoI6"),s=o("wd/R"),i=o.n(s),n={data:function(){return{tips:!1,isShowStopDialog:!1,isFinish:!1,countdownTime:0,isPause:!1,ifFinished:!1,pauseTime:60,interId:null,orderId:"",orderType:"",tradeNo:""}},mounted:function(){if(console.log("orderId",this.$route.query.orderId),console.log("orderType",this.$route.query.orderType),console.log("tradeNo",this.$route.query.tradeNo),console.log("deviceCode",this.$route.query.deviceCode),console.log("storeOuCode",this.$route.query.storeOuCode),1==this.$route.query.isCountContinue){var t=i()(this.$route.query.startTime).add(Number(this.$route.query.washerTime),"minutes"),e=i()();this.countdownTime=t.diff(e),this.startHandler()}else this.startWashCar()},components:{"van-count-down":a.a},methods:{startWashCar:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/app_self_car_order/start",{orderId:this.$route.query.orderId,deviceCode:this.$route.query.deviceCode,tradeNo:this.$route.query.tradeNo,orderType:this.$route.query.orderType}).then((function(e){t.$Loading.close();var o=e.data;if(0==o.status){var a=i()(o.data.stockupFinishTime).add(Number(o.data.utilityType),"minutes"),s=i()();t.countdownTime=a.diff(s),t.startHandler()}else t.$Toast(o.info)})).catch((function(e){t.$Loading.close(),t.$Toast("start err "+e)}))},checkWorkState:function(){var t=this;this.$Loading.open();var e={orderType:this.orderType,orderId:this.orderId};this.$http.post("/app/json/app_wash_car_order/detail",e).then((function(e){t.$Loading.close();var o=e.data;0==o.status?18!=o.data.state&&19!=o.data.state||(t.ifFinished=!0):t.$Toast(o.info)})).catch((function(e){t.$Loading.close(),t.$Toast("detail err "+e)}))},startHandler:function(){var t=this;this.$nextTick((function(){t.$refs.countDown.start(),document.querySelector(".loader").classList.add("has-animation")}))},pauseHandler:function(){var t=this;this.$nextTick((function(){t.isPause?(t.$Loading.open(),t.$http.post("/app/json/app_wash_car_order/continuing",{orderId:t.orderId,orderType:t.orderType}).then((function(e){t.$Loading.close();var o=e.data;0==o.status?(t.isPause=!t.isPause,t.$refs.countDown.start(),document.querySelector(".loader").setAttribute("style","animation-play-state: running"),t.interId&&window.clearInterval(t.interId)):t.$Toast(o.info)})).catch((function(e){t.$Loading.close(),t.$Toast("continuing err "+e)}))):(t.$Loading.open(),t.$http.post("/app/json/app_wash_car_order/pause",{orderId:t.orderId,orderType:t.orderType}).then((function(e){t.$Loading.close();var o=e.data;0==o.status?(t.isPause=!t.isPause,t.$refs.countDown.pause(),document.querySelector(".loader").setAttribute("style","animation-play-state: paused"),t.startPauseCountDown()):t.$Toast(o.info)})).catch((function(e){t.$Loading.close(),t.$Toast("pause err "+e)}))),t.pauseTime=60}))},startPauseCountDown:function(){var t=this;this.interId&&window.clearInterval(this.interId),this.interId=setInterval((function(){--t.pauseTime,console.log("计时钟",t.pauseTime),t.pauseTime<=0&&(window.clearInterval(t.interId),t.pauseHandler(),t.checkWorkState(),t.interId=null)}),1e3)},confirmStopWash:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/app_self_car_order/stop",{deviceCode:this.$route.query.deviceCode,tradeNo:this.$route.query.tradeNo,orderId:this.$route.query.orderId,orderType:this.$route.query.orderType}).then((function(e){t.$Loading.close();var o=e.data;0==o.status?t.countdownFinish():t.$Toast(o.info)})).catch((function(e){t.$Loading.close(),t.$Toast("stop err "+e)}))},countdownFinish:function(){var t=this;this.$nextTick((function(){document.querySelector(".loader").setAttribute("style","animation-play-state: paused"),t.countdownTime=0,t.$refs.countDown.pause(),t.isFinish=!0}))},viewWashOrder:function(){this.$router.replace({path:"/carWash/washRecording"})},backHome:function(){this.$router.replace("/carWash/home")}},beforeRouteLeave:function(t,e,o){this.interId&&window.clearInterval(this.interId),o()}},r=(o("ce6X"),o("KHd+")),d=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-top",{on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),a("nav-content",{staticClass:"container"},[a("div",{staticClass:"wash-state-container"},[a("div",{staticClass:"loader-wrapper"},[a("div",{staticClass:"loader"},[a("div",{staticClass:"loader-inner"})]),t._v(" "),a("div",{staticClass:"countdown-time"},[a("img",{attrs:{src:o("hbHA"),alt:""}})]),t._v(" "),a("div",{staticClass:"time"},[a("p",[t._v("剩余")]),t._v(" "),a("van-count-down",{ref:"countDown",staticClass:"count-down",attrs:{time:t.countdownTime,format:"mm’ss''","auto-start":!1},on:{finish:t.countdownFinish}})],1)])]),t._v(" "),t.isFinish?a("div",{staticClass:"btm-btn-f"},[a("div",{staticClass:"btn-l",on:{click:t.viewWashOrder}},[t._v("查看洗车记录")]),t._v(" "),a("div",{staticClass:"btn-r",on:{click:t.backHome}},[t._v("返回洗车首页")])]):a("div",{staticClass:"btm-btn"},[a("div",{staticClass:"btn-l",on:{click:function(e){t.isShowStopDialog=!0}}},[a("img",{staticClass:"icon-btn",attrs:{src:o("DTa9"),alt:""}}),t._v("\n        停止洗车\n      ")])]),t._v(" "),a("div",{staticClass:"tel"},[t._v("客服电话："),a("a",{attrs:{href:"3021883"}},[t._v("3021883")])])]),t._v(" "),a("van-dialog",{staticClass:"reset-dialog-style",attrs:{"show-cancel-button":"","cancel-button-text":"再想想","confirm-button-text":"确认"},on:{confirm:t.confirmStopWash},model:{value:t.isShowStopDialog,callback:function(e){t.isShowStopDialog=e},expression:"isShowStopDialog"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("紧急停止")]),t._v("\n    点击紧急停止，将直接结束当前洗车，"),a("br"),t._v("是否确认紧急停止？\n  ")]),t._v(" "),a("van-dialog",{staticClass:"reset-dialog-style",attrs:{"confirm-button-text":"我知道了！"},model:{value:t.tips,callback:function(e){t.tips=e},expression:"tips"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("停车位置错误")]),t._v("\n    当前停车不在洗车的有效范围内！"),a("br"),t._v("无法开启洗车服务\n  ")])],1)}),[],!1,null,"9af5622c",null);e.default=d.exports},ce6X:function(t,e,o){"use strict";var a=o("nAAh");o.n(a).a},hbHA:function(t,e,o){t.exports=o.p+"static/img/洗车未开始.ddf9ff4.png"},nAAh:function(t,e,o){}}]);