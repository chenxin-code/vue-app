(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7f29882"],{"0c27":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("nav-top",{attrs:{title:"分享优惠券"},on:{backEvent:function(a){return t.$router.go(-1)}}}),i("nav-content",[t.list.length>0?i("div",{staticClass:"box"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:"static/image/microShop/banner@2x.png",alt:""}})]),t._l(t.list,(function(a,s){return i("div",{key:s,staticClass:"couponDiv"},[i("div",{staticClass:"div"},[i("div",{staticClass:"divPic"},[i("div",{staticClass:"price-info"},[i("span",{staticClass:"unit"},[t._v("￥")]),i("span",{staticClass:"price"},[t._v(t._s(a.couFaceValue))])]),i("div",{staticClass:"msg"},[t._v("满"+t._s(a.couFaceValue)+"元可用")])]),i("div",{staticClass:"coupon-right"},[i("div",{staticClass:"double-line"},[i("span",{staticClass:"text"},[t._v(t._s(a.couTypeTitle))])]),i("div",{staticClass:"time-wrapper"},[i("span",{staticClass:"time"},[t._v(t._s(a.startDate)+"-"+t._s(a.endDate))])]),i("div",{staticClass:"status"}),i("div",{staticClass:"used",on:{click:function(s){return t.share(a.couNo)}}},[i("img",{attrs:{src:"static/image/microShop/fenxiangico.png",alt:""}})])])])])}))],2):t._e(),0==t.list.length?i("div",{staticClass:"nodata"},[t._v("暂无数据")]):t._e()]),t.show?i("div",{staticClass:"tip tip2"},[i("i",{staticClass:"icon iconfont mall-guanbi",on:{click:t.close}}),i("p",[t._v("优惠券分享有礼")]),i("p",[i("span",[t._v("温馨提示：")]),i("span",[t._v("首次分享已使用券，您将获得优惠券"+t._s(t.awardNum)+"张,好友点击后，也同样可以获得优惠券。")])])]):t._e(),i("van-popup",{staticClass:"shareBox",style:{height:"15%"},attrs:{position:"bottom"},on:{click:t.sharePage},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[i("img",{staticClass:"firendimg",attrs:{src:"static/image/microShop/zhifu2.png",alt:""}}),i("p",[t._v("微信好友")])]),t.sharedView?i("div",{staticClass:"boxModel",on:{click:t.close}},[i("div",{staticClass:"shared"},[i("img",{attrs:{src:s("d116"),alt:""}}),i("i",{staticClass:"icon iconfont mall-guanbi",on:{click:t.close}}),i("p",{staticClass:"p"},[t._v("分享成功")]),i("div",{staticClass:"prizes"},t._l(t.parzeList,(function(a,s){return i("p",{key:s},[t._v("恭喜您获得"+t._s(a.awardName)+t._s(a.awardNum))])})),0)])]):t._e(),i("van-popup",{staticClass:"stateBox",model:{value:t.shareView,callback:function(a){t.shareView=a},expression:"shareView"}},[i("img",{attrs:{src:"static/image/microShop/jiantou@2x.png",alt:""}}),i("p",[t._v("请点击右上角进行分享")])])],1)},e=[],n=(s("99af"),s("da71")),o=s("c95d"),c={name:"",mixins:[o["a"]],data:function(){return{list:[],couPic:"static/image/microShop/succee-icon.png",show:!1,sharedView:!1,shareData:{},sharemiMrssage:"",shareView:!1,parzeList:"",couNo:"",awardNum:""}},created:function(){},mounted:function(){this.loadIndex()},methods:{loadIndex:function(){var t=this,a={token:this.$store.state.login.token};t.listData(a).then((function(a){"success"===a.data.result&&(t.list=a.data.data||[])}))},share:function(t){var a=this,s=this;s.couNo=t;var i={token:this.$store.state.login.token,couNo:t};s.sharecont(i).then((function(i){"success"===i.data.result?(s.shareData={title:i.data.data.title,sharetext:i.data.data.subTitle,imageurl:i.data.data.imageUrl,detailurl:"".concat(a.$store.state.globalConfig.wxBaseUrl).concat(n["a"].shareUrl,"/user_center/sharePage?couNo=").concat(t)},s.awardNum=i.data.data.awardNum,s.show=!0):s.$toast(i.data.info)}))},close:function(){this.show=!1,this.sharedView=!1},sharePage:function(){var t=this;t.show=!1,t.$bridgefunc.wechatShare(t.shareData,(function(a){if("1"==a){var s={token:t.$store.state.login.token,couNo:t.couNo};t.prize(s).then((function(a){"success"===a.data.result&&(t.parzeList=a.data.data.mktAwardModelList||[],t.parzeList.length>0&&(t.sharedView=!0))}))}else t.$toast("分享失败")}))}}},r=c,l=(s("df72"),s("0c7c")),u=Object(l["a"])(r,i,e,!1,null,"6944b1b8",null);a["default"]=u.exports},c720:function(t,a,s){},c95d:function(t,a,s){"use strict";var i="/app/json/fission_activity/getShareUsedCoupons",e="/app/json/fission_activity/share",n="/app/json/fission_activity/sharedReceiveAward",o="/app/json/fission_activity/shareDetails",c="/app/json/fission_activity/beSharedReceiveAward";a["a"]={methods:{listData:function(t){return this.$http.post(i,t)},sharecont:function(t){return this.$http.post(e,t)},prize:function(t){return this.$http.post(n,t)},detailData:function(t){return this.$http.post(o,t)},getData:function(t){return this.$http.post(c,t)}}}},d116:function(t,a,s){t.exports=s.p+"static/images/35bd7598ceaee2a492b2f1d9ed091f0f.png"},df72:function(t,a,s){"use strict";s("c720")}}]);