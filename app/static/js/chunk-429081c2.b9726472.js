(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-429081c2"],{1148:function(t,e,a){"use strict";var i=a("a691"),s=a("1d80");t.exports=function(t){var e=String(s(this)),a="",o=i(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(a+=e);return a}},"1b5e":function(t,e,a){"use strict";a("62ad")},"408a":function(t,e,a){var i=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"476d":function(t,e,a){"use strict";var i="/app/json/micro_store_front_end/applyMicroStore",s="/app/json/micro_store_front_end/queryMicroStoreOpenState",o="/app/json/micro_store_front_end/queryMicroStoreOpenProcess",r="/app/json/micro_store_front_end/queryMicroStoreForProfit",n="/app/json/micro_store_front_end/getRewardTypeList",c="/app/json/micro_store_front_end/cashEarningsDetail",l="/app/json/micro_store_front_end/getMonthProfitList",p="/app/json/micro_store_front_end/getEmployeeInfoByUserId",d="/app/json/micro_store_front_end/queryMicroStoreForDecoration",u="/app/json/micro_store_front_end/updateMicroStoreInfoById",m="/app/json/micro_store_front_end/saveBankInfo";e["a"]={methods:{applyData:function(t){return this.$http.post(i,t)},stateData:function(t){return this.$http.post(s,t)},stateDatahn:function(t){return this.$http.post(o,t)},profitData:function(t){return this.$http.post(r,t)},profitDatahn:function(t){return this.$http.post(c,t)},monthData:function(t){return this.$http.post(l,t)},detailData:function(t){return this.$http.post(p,t)},modifyData:function(t){return this.$http.post(d,t)},getRewardData:function(t){return this.$http.post(n,t)},modifyafterData:function(t){return this.$http.post(u,t)},modifyBankData:function(t){return this.$http.post(m,t)}}}},"62ad":function(t,e,a){},"733f":function(t,e,a){t.exports=a.p+"static/images/c99ddccbb085ff9c4fa0a783bcb9e8a7.png"},"7aab":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("van-popup",{attrs:{position:"bottom"},on:{"click-overlay":t.clickOverlay},model:{value:t.detailData.popupShow,callback:function(e){t.$set(t.detailData,"popupShow",e)},expression:"detailData.popupShow"}},[a("div",{staticClass:"popup"},[a("div",{staticClass:"popup-content",on:{click:t.sharewx}},[a("img",{attrs:{src:"static/image/mall2/weixin.png",alt:""}}),a("span",[t._v("微信")])]),a("div",{staticClass:"popup-content",on:{click:t.QRcode}},[a("img",{attrs:{src:"static/image/microShop/code@2x.png",alt:""}}),a("span",[t._v("二维码")])])])]),t.codeShow?a("div",{staticClass:"code-div",on:{click:function(e){return e.target!==e.currentTarget?null:t.btnbox.apply(null,arguments)}}},[a("div",{ref:"imageWrapper",staticClass:"code-content"},[a("div",{staticClass:"code-content-img"},[a("div",{staticClass:"code-content-img-top"},[a("img",{attrs:{src:t.imgUrl,alt:"",crossOrigin:"anonymous"}})]),t.detailData.groupFlag?a("div",{staticClass:"code-content-img-buttom"},[a("div",{staticClass:"price theme_font_red"},t._l(t.getPrices(),(function(e,i){return a("div",{staticClass:"price-item"},[0!=i?a("p",{staticClass:"xian"},[t._v(" ~ ")]):t._e(),a("p",[t._v("¥")]),a("p",{staticClass:"big"},[t._v(t._s(e.iNum)+".")]),a("p",[t._v(t._s(e.dNum))])])})),0),a("div",{staticClass:"text theme_font_black"},[t._v(t._s(t.detailData.showTitle))])]):a("div",{staticClass:"code-content-img-buttom"},[a("div",{staticClass:"text theme_font_red"},[a("span",{staticClass:"font-small price-z theme_font_red",staticStyle:{"font-weight":"700"}},[t._v("￥")]),a("span",{staticClass:"price-z theme_font_red",staticStyle:{"margin-left":"-4px"}},[t._v(t._s(t.getInteger(t.detailData.salePrice)))]),a("span",{staticClass:"font-small price-z theme_font_red",staticStyle:{"margin-left":"-4px","font-weight":"700"}},[t._v("."+t._s(t.getDecimals(t.detailData.salePrice)))])]),a("div",{staticClass:"text theme_font_black"},[t._v(t._s(t.detailData.dpedData.featureName||t.detailData.skuName))])])]),a("div",{staticClass:"code-content-line"}),t._m(0),a("div",{staticClass:"code-content-zanwei"})]),a("div",{staticClass:"code-btn"},[a("div",{staticClass:"btn theme_bg_red",on:{click:function(e){return e.stopPropagation(),t.preservation.apply(null,arguments)}}},[t._v("保存图片到本地")]),a("div",{staticClass:"text"},[t._v("记得发送给朋友或发布到朋友圈呦！")])])]):t._e()],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"code-content-code"},[a("canvas",{staticClass:"qrcode",attrs:{id:"qrcode"}}),a("p",[t._v("微信扫码或长按识别二维码")])])}],o=a("5530"),r=(a("ac1f"),a("1276"),a("99af"),a("e25e"),a("c0e9")),n=a.n(r),c=a("da71"),l=a("d055"),p=a.n(l),d=a("2f62"),u=a("ae5c"),m={name:"share",props:["shareObj"],computed:Object(o["a"])({},Object(d["c"])(["getPutaggregate"])),data:function(){return{imgUrl:"",timeOutEvent:0,popupShow:!0,codeShow:this.shareObj.codeShow,detailData:this.$util.deepClone(this.shareObj)}},mounted:function(){this.setOssImg(this.detailData.phMainUrl||this.detailData.picMainUrl||this.detailData.picUrls[0])},methods:{getPrices:function(){return u["a"].getPriceShow(this.detailData.purPriceRules)},setOssImg:function(t){var e=this;this.imgUrl="",this.$request.post("/app/json/home/getFileBase64",{filePath:t}).then((function(t){0==t.status?t.data?e.imgUrl="data:image/png;base64,".concat(t.data||""):e.$Toast("getFileBase64 返回为空"):e.$Toast(t.info)}))},getInteger:function(t){var e=this.$util.toDecimal2(t),a=e.split(".");return a[0]},getDecimals:function(t){var e=this.$util.toDecimal2(t),a=e.split(".");return a[1]},clickOverlay:function(){this.detailData.popupShow=!1,this.$emit("setshareData",this.detailData.storeCode)},sharewx:function(){var t="/micro_sho/shareDetail/";this.detailData.groupFlag&&(t="/micro_sho/sharebuyingDetail/");var e={};e={},e.title=this.detailData.showTitle||this.detailData.skuName,e.sharetext=this.detailData.skuName,e.imageurl=this.detailData.phMainUrl,e.detailurl=this.$store.state.globalConfig.wxBaseUrl+c["a"].shareUrl+"".concat(t).concat(this.$util.getDataString()),e.detailurl=e.detailurl+"?id="+(this.detailData.id||this.detailData.skuId)+"&skuId="+(this.detailData.skuId||this.detailData.id)+"&microStoreCode="+this.getPutaggregate.storeCode+"&storeName="+this.getPutaggregate.storeName+"&productType="+this.detailData.productType+"&deliveryType="+this.$store.state.mall2.staticDeliverType+"&storeOuCodeNew="+this.$store.state.mall2.zitiAddress.id+"&proSkuDistributionId="+this.detailData.proSkuDistributionId,this.$store.state.login.token&&""!=this.$store.state.login.token&&(e.detailurl=e.detailurl+"&recommend="+this.$store.state.userInfo.userId,e.detailurl=e.detailurl+"&recommendPhone="+this.$store.state.login.phone),this.$bridgefunc.wechatShare(e)},QRcode:function(){var t=this,e="/micro_sho/shareDetail";this.detailData.groupFlag&&(e="/micro_sho/sharebuyingDetail"),this.codeShow=!0,this.$emit("qRcodeStstus",this.codeShow),this.$nextTick((function(a){var i="".concat(t.$store.state.globalConfig.wxBaseUrl).concat(c["a"].shareUrl).concat(e),s="".concat(i,"/").concat(t.$util.getDataString(),"?id=").concat(t.detailData.id||t.detailData.skuId,"&skuId=").concat(t.detailData.skuId||t.detailData.id,"&microStoreCode=").concat(t.getPutaggregate.storeCode,"&storeName=").concat(t.getPutaggregate.storeName,"&productType=").concat(t.detailData.productType,"&deliveryType=").concat(t.$store.state.mall2.staticDeliverType,"&storeOuCodeNew=").concat(t.$store.state.mall2.zitiAddress.id,"&proSkuDistributionId=").concat(t.detailData.proSkuDistributionId);p.a.toCanvas(document.getElementById("qrcode"),s,{width:140})}))},btnbox:function(){this.codeShow=!1,this.$emit("qRcodeStstus",this.codeShow)},preservation:function(){var t=this,e=document.querySelector(".code-content"),a=parseInt(window.getComputedStyle(e).width),i=parseInt(window.getComputedStyle(e).height),s=document.createElement("canvas"),o=2;s.width=a*o,s.height=i*o,s.getContext("2d").scale(o,o);var r={useCORS:!0,scale:o,canvas:s,backgroundColor:"#000"};n()(this.$refs.imageWrapper,r).then((function(e){var a=e.toDataURL("image/png");t.codeShow=!1;var i=a.split("base64,");t.$bridgefunc.savePhoto(i[1],(function(e){"1"==e?(t.detailData.popupShow=!1,t.$emit("setshareData",t.detailData),t.$Toast("保存成功！")):t.$Toast("保存失败！")}))}))}}},g=m,h=(a("1b5e"),a("0c7c")),v=Object(h["a"])(g,i,s,!1,null,"06153066",null);e["a"]=v.exports},ae5c:function(t,e,a){"use strict";a("ac1f"),a("1276");var i=a("ca00"),s={getPriceShow:function(t){if(0==t.length)return"";for(var e=t[0].price,a=t[0].price,i=1;i<t.length;i++){var s=t[i].price;e>s&&(e=s),a<s&&(a=s)}if(e==a){var o=this.getINumDNum(e);return[o]}var r=this.getINumDNum(e),n=this.getINumDNum(a);return[r,n]},getINumDNum:function(t){var e=i["a"].toDecimal2(t),a=e.split("."),s=a[0],o=a[1];return{iNum:s,dNum:o}}};e["a"]=s},b680:function(t,e,a){"use strict";var i=a("23e7"),s=a("a691"),o=a("408a"),r=a("1148"),n=a("d039"),c=1..toFixed,l=Math.floor,p=function(t,e,a){return 0===e?a:e%2===1?p(t,e-1,a*t):p(t*t,e/2,a)},d=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},u=function(t,e,a){var i=-1,s=a;while(++i<6)s+=e*t[i],t[i]=s%1e7,s=l(s/1e7)},m=function(t,e){var a=6,i=0;while(--a>=0)i+=t[a],t[a]=l(i/e),i=i%e*1e7},g=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var i=String(t[e]);a=""===a?i:a+r.call("0",7-i.length)+i}return a},h=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){c.call({})}));i({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,a,i,n,c=o(this),l=s(t),h=[0,0,0,0,0,0],v="",f="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(e=d(c*p(2,69,1))-69,a=e<0?c*p(2,-e,1):c/p(2,e,1),a*=4503599627370496,e=52-e,e>0){u(h,0,a),i=l;while(i>=7)u(h,1e7,0),i-=7;u(h,p(10,i,1),0),i=e-1;while(i>=23)m(h,1<<23),i-=23;m(h,1<<i),u(h,1,1),m(h,2),f=g(h)}else u(h,0,a),u(h,1<<-e,0),f=g(h)+r.call("0",l);return l>0?(n=f.length,f=v+(n<=l?"0."+r.call("0",l-n)+f:f.slice(0,n-l)+"."+f.slice(n-l))):f=v+f,f}})},c07b4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body",attrs:{id:"body"}},[a("div",{ref:"elements",staticClass:"head",class:[3!=this.profitObj.integralWay&&8!=this.profitObj.oilWay&&9!=this.profitObj.peasWay&&0!=this.profitObj.moneyWay&&1!=t.$store.state.globalConfig.microshop_index&&1==t.getPutaggregate.empFlag?"isActive":"head"],style:"background-image: url("+(t.getPutaggregate.backgroundImgUrl||"static/image/microShop/up.png")+")"},[a("nav-top",{attrs:{title:"我的微店"},on:{backEvent:t.backEvent}}),1==t.$store.state.globalConfig.microshop_index&&1==t.getPutaggregate.empFlag||1!=t.getPutaggregate.empFlag?a("div",{staticClass:"containerTop"},[a("div",{ref:"element",staticClass:"container"},[a("div",{staticClass:"div"},[a("div",{staticClass:"div1",on:{click:t.toRenovation}},[a("img",{attrs:{src:t.getPutaggregate.pictureUrl?t.getPutaggregate.pictureUrl:t.$store.state.globalConfig.microshop_headurl,alt:""}}),a("span",{staticClass:"span"},[t._v(t._s(t.getPutaggregate.storeName?t.getPutaggregate.storeName:"我的小店"))])]),a("div",{staticClass:"div2",on:{click:t.mallDetail}},[a("img",{attrs:{src:"static/image/microShop/ma.png",alt:""}}),a("span",[t._v("店铺码")])])]),t.prizeList.length>0?a("div",{staticClass:"grayDiv"},t._l(t.prizeList,(function(e,i){return a("div",{key:i,staticClass:"prizeDiv"},[a("router-link",{attrs:{to:{name:"micro_sho/profit",params:{type:e.value}}}},[a("div",["3"==e.value?a("p",{staticClass:"p1"},[t._v(t._s(t.allIntegralAccounted))]):t._e(),"8"==e.value?a("p",{staticClass:"p1"},[t._v(t._s(t.allOilAccounted))]):t._e(),"9"==e.value?a("p",{staticClass:"p1"},[t._v(t._s(t.allPeasAccounted))]):t._e(),"0"!=e.value?a("p",{staticClass:"p2"},[t._v(t._s(e.name))]):t._e()])]),"0"==e.value?a("router-link",{attrs:{to:{name:"micro_sho/cash_shop"}}},[a("div",[a("p",{staticClass:"p1"},[t._v(t._s(t.allMoneyAccounted))]),a("p",{staticClass:"p2"},[t._v(t._s(e.name))])])]):t._e()],1)})),0):t._e()])]):t._e(),1!=t.$store.state.globalConfig.microshop_index&&1==t.getPutaggregate.empFlag?a("div",{staticClass:"containerTop"},[a("div",{staticClass:"container"},[a("div",{staticClass:"div"},[a("div",{staticClass:"div1",on:{click:t.toRenovation}},[a("img",{attrs:{src:t.getPutaggregate.pictureUrl?t.getPutaggregate.pictureUrl:t.$store.state.globalConfig.microshop_headurl,alt:""}}),a("span",{staticClass:"span"},[t._v(t._s(t.getPutaggregate.storeName?t.getPutaggregate.storeName:"我的小店"))])]),a("div",{staticClass:"div2",on:{click:t.mallDetail}},[a("img",{attrs:{src:"static/image/microShop/ma.png",alt:""}}),a("span",[t._v("店铺码")])])]),t.prizeView?a("div",{staticClass:"grayDiv"},[3==t.profitObj.integralWay?a("div",{staticClass:"prizeDiv"},[a("router-link",{attrs:{to:{name:"micro_sho/profit",params:{type:t.profitObj.integralWay}}}},[a("div",[a("p",{staticClass:"p1"},[t._v(t._s(t.allIntegralAccounted))]),a("p",{staticClass:"p2"},[t._v("收益积分")])])])],1):t._e(),8==t.profitObj.oilWay?a("div",{staticClass:"prizeDiv"},[a("router-link",{attrs:{to:{name:"micro_sho/profit",params:{type:t.profitObj.oilWay}}}},[a("div",[a("p",{staticClass:"p1"},[t._v(t._s(t.allOilAccounted))]),a("p",{staticClass:"p2"},[t._v("收益油滴")])])])],1):t._e(),9==t.profitObj.peasWay?a("div",{staticClass:"prizeDiv"},[a("router-link",{attrs:{to:{name:"micro_sho/profit",params:{type:t.profitObj.peasWay}}}},[a("div",[a("p",{staticClass:"p1"},[t._v(t._s(t.allPeasAccounted))]),a("p",{staticClass:"p2"},[t._v("收益豌豆")])])])],1):t._e(),0==t.profitObj.moneyWay?a("div",{staticClass:"prizeDiv"},[0==t.profitObj.moneyWay?a("router-link",{attrs:{to:{name:"micro_sho/profit",params:{type:t.profitObj.moneyWay}}}},[a("div",[a("p",{staticClass:"p1"},[t._v(t._s(t.allMoneyAccounted))]),a("p",{staticClass:"p2"},[t._v("收益金额")])])]):t._e()],1):t._e()]):t._e()])]):t._e()],1),a("nav-content",{style:t.navcontentStyleObj},[a("div",{ref:"menuItem",staticClass:"menuItem",style:t.contentStyleObj},[a("div",{staticClass:"enter"},[a("div",{staticClass:"enterBox"},[a("div",{on:{click:function(e){return t.enterDetail("1")}}},[a("img",{attrs:{src:"static/image/microShop/icon32x.png",alt:""}}),a("p",[t._v("添加商品")])]),a("div",{on:{click:function(e){return t.enterDetail("2")}}},[a("img",{attrs:{src:"static/image/microShop/icon42x.png",alt:""}}),a("p",[t._v("商品管理")])]),a("div",{on:{click:function(e){return t.enterDetail("3")}}},[a("img",{attrs:{src:"static/image/microShop/icon52x.png",alt:""}}),a("p",[t._v("订单管理")])]),a("div",{on:{click:function(e){return t.enterDetail("4")}}},[a("img",{attrs:{src:"static/image/microShop/icon62x.png",alt:""}}),a("p",[t._v("店铺装修")])]),1==t.$store.state.globalConfig.microshop_groupbuying_exhibition?a("div",{on:{click:function(e){return t.enterDetail("5")}}},[a("img",{attrs:{src:"static/image/microShop/add.png",alt:""}}),a("p",[t._v("新增团购商品")])]):t._e(),1==t.$store.state.globalConfig.microshop_groupbuying_exhibition?a("div",{on:{click:function(e){return t.enterDetail("6")}}},[a("img",{attrs:{src:"static/image/microShop/guanli.png",alt:""}}),a("p",[t._v("团购商品管理")])]):t._e(),1==t.$store.state.globalConfig.microshop_sku_isquery?a("div",{on:{click:function(e){return t.enterDetail("7")}}},[a("img",{attrs:{src:"static/image/microShop/shop.png",alt:""}}),a("p",[t._v("商品查询")])]):t._e()])]),1!=t.$store.state.globalConfig.microshop_index?a("div",{staticClass:"enterBoxList"},[a("h2",[t._v("月度收益排名")]),a("van-tabs",{on:{click:t.changeData},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}},[3==t.profitObj.integralWay?a("van-tab",{attrs:{title:"积分"}},[a("div",{staticClass:"enterBoxListTitle"},[a("span",[t._v("姓名")]),a("span",[t._v("部门")]),a("span",[t._v("收益")])]),0==t.rankingList.length?a("div",{staticClass:"nullData"},[t._v("暂无收益")]):t._e(),t.rankingList.length>0?a("ul",t._l(t.rankingList,(function(e,i){return i<5?a("li",[a("div",{staticClass:"div1"},[a("p",[e.pictureUrl?a("img",{staticClass:"img1",attrs:{src:e.pictureUrl,alt:""}}):a("img",{staticClass:"img1",attrs:{src:"static/image/microShop/head@2x.png",alt:""}}),a("span",[0==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.1@2x.png",alt:""}}):t._e(),1==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.2@2x.png",alt:""}}):t._e(),2==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.3@2x.png",alt:""}}):t._e(),i>2?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no4@2x.png",alt:""}}):t._e(),a("span",{staticClass:"num"},[t._v("第"+t._s(i+1)+"名")])])]),a("span",[t._v(t._s(e.employeeName))])]),a("div",[t._v(t._s(e.departmentName))]),a("div",{staticClass:"div3"},[t._v(t._s(e.rewardAccounted))])]):t._e()})),0):t._e(),t.rankingList.length>0?a("router-link",{attrs:{to:"/micro_sho/profitlist"}},[a("div",{staticClass:"more"},[t._v("查看更多")])]):t._e()],1):t._e(),8==t.profitObj.oilWay?a("van-tab",{attrs:{title:"油滴"}},[a("div",{staticClass:"enterBoxListTitle"},[a("span",[t._v("姓名")]),a("span",[t._v("部门")]),a("span",[t._v("收益")])]),0==t.rankingList.length?a("div",{staticClass:"nullData"},[t._v("暂无收益")]):t._e(),t.rankingList.length>0?a("ul",t._l(t.rankingList,(function(e,i){return i<5?a("li",[a("div",{staticClass:"div1"},[a("p",[e.pictureUrl?a("img",{staticClass:"img1",attrs:{src:e.pictureUrl,alt:""}}):a("img",{staticClass:"img1",attrs:{src:"/static/image/microShop/head@2x.png",alt:""}}),a("span",[0==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.1@2x.png",alt:""}}):t._e(),1==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.2@2x.png",alt:""}}):t._e(),2==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.3@2x.png",alt:""}}):t._e(),i>2?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no4@2x.png",alt:""}}):t._e(),a("span",{staticClass:"num"},[t._v("第"+t._s(i+1)+"名")])])]),a("span",[t._v(t._s(e.employeeName))])]),a("div",[t._v(t._s(e.departmentName))]),a("div",{staticClass:"div3"},[t._v(t._s(e.rewardAccounted))])]):t._e()})),0):t._e(),t.rankingList.length>0?a("router-link",{attrs:{to:"/micro_sho/profitlist"}},[a("div",{staticClass:"more"},[t._v("查看更多")])]):t._e()],1):t._e(),9==t.profitObj.peasWay?a("van-tab",{attrs:{title:"豌豆"}},[a("div",{staticClass:"enterBoxListTitle"},[a("span",[t._v("姓名")]),a("span",[t._v("部门")]),a("span",[t._v("收益")])]),0==t.rankingList.length?a("div",{staticClass:"nullData"},[t._v("暂无收益")]):t._e(),t.rankingList.length>0?a("ul",t._l(t.rankingList,(function(e,i){return i<5?a("li",[a("div",{staticClass:"div1"},[a("p",[e.pictureUrl?a("img",{staticClass:"img1",attrs:{src:e.pictureUrl,alt:""}}):a("img",{staticClass:"img1",attrs:{src:"static/image/microShop/head@2x.png",alt:""}}),a("span",[0==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.1@2x.png",alt:""}}):t._e(),1==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.2@2x.png",alt:""}}):t._e(),2==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.3@2x.png",alt:""}}):t._e(),i>2?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no4@2x.png",alt:""}}):t._e(),a("span",{staticClass:"num"},[t._v("第"+t._s(i+1)+"名")])])]),a("span",[t._v(t._s(e.employeeName))])]),a("div",[t._v(t._s(e.departmentName))]),a("div",{staticClass:"div3"},[t._v(t._s(e.rewardAccounted))])]):t._e()})),0):t._e(),t.rankingList.length>0?a("router-link",{attrs:{to:"/micro_sho/profitlist"}},[a("div",{staticClass:"more"},[t._v("查看更多")])]):t._e()],1):t._e(),12==t.profitObj.moneyWay?a("van-tab",{attrs:{title:"收益金额"}},[a("div",{staticClass:"enterBoxListTitle"},[a("span",[t._v("姓名")]),a("span",[t._v("部门")]),a("span",[t._v("收益")])]),0==t.rankingList.length?a("div",{staticClass:"nullData"},[t._v("暂无收益")]):t._e(),t.rankingList.length>0?a("ul",t._l(t.rankingList,(function(e,i){return i<5?a("li",[a("div",{staticClass:"div1"},[a("p",[e.pictureUrl?a("img",{staticClass:"img1",attrs:{src:e.pictureUrl,alt:""}}):a("img",{staticClass:"img1",attrs:{src:"static/image/microShop/head@2x.png",alt:""}}),a("span",[0==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.1@2x.png",alt:""}}):t._e(),1==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.2@2x.png",alt:""}}):t._e(),2==i?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no.3@2x.png",alt:""}}):t._e(),i>2?a("img",{staticClass:"img2",attrs:{src:"static/image/microShop/no4@2x.png",alt:""}}):t._e(),a("span",{staticClass:"num"},[t._v("第"+t._s(i+1)+"名")])])]),a("span",[t._v(t._s(e.employeeName))])]),a("div",[t._v(t._s(e.departmentName))]),a("div",{staticClass:"div3"},[t._v(t._s(e.rewardAccounted))])]):t._e()})),0):t._e(),t.rankingList.length>0?a("router-link",{attrs:{to:"/micro_sho/profitlist"}},[a("div",{staticClass:"more"},[t._v("查看更多")])]):t._e()],1):t._e()],1)],1):t._e(),1==t.$store.state.globalConfig.microshop_index?a("div",{staticClass:"enterBoxList enterBoxListSku",attrs:{id:"skuList"}},[a("div",{staticClass:"main"},[a("div",{staticClass:"row-text"},[a("div",t._l(t.deliveryTypes,(function(e,i){return a("div",{key:i,staticClass:"type-btn",class:{theme_light_bg:t.selectedType==e.tag,theme_standard_bdr_i:t.selectedType==e.tag},on:{click:function(a){return t.selectedTypeEvent(e.tag)}}},[a("i",{staticClass:"iconfont theme_font_common icon-size",class:[e.fontclass,{theme_standard_font_i:t.selectedType==e.tag}]}),a("span",{staticClass:"theme_font_common",class:{theme_standard_font_i:t.selectedType==e.tag}},[t._v(t._s(e.text))])])})),0),1==t.getPutaggregate.empFlag?a("div",{staticClass:"type-btn",on:{click:t.isRecommendBtn}},[a("van-icon",{staticStyle:{"margin-right":"4px","margin-top":"-3px","vertical-align":"middle"},attrs:{name:t.isRecommend?"arrow-up":"arrow-down"}}),a("span",[t._v(t._s(t.recommendText))])],1):t._e()]),a("div",{staticClass:"screen"},t._l(t.screenArr,(function(e,i){return a("div",{key:i,staticClass:"btn",class:{theme_standard_font_i:t.screenType==e.type},on:{click:function(a){return t.screenBtn(e)}}},[t._v(t._s(e.name+"（"+e.number+"）"))])})),0),a("list",{ref:"list",attrs:{params:t.params,styleObj:t.styleObj},on:{productEvent:t.productEvent,addshare:t.addshareBtn,listData:t.listData,upperShelf:t.upperShelf,deleteShare:t.deleteShare}})],1)]):t._e()])]),t.popupShow?a("Share",{attrs:{shareObj:t.shareObj},on:{setshareData:t.setshareData,qRcodeStstus:t.qRcodeStstus}}):t._e(),a("van-action-sheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.isRecommend,callback:function(e){t.isRecommend=e},expression:"isRecommend"}}),a("van-action-sheet",{attrs:{actions:t.threePointsArr},on:{select:t.onSelectPoints},model:{value:t.isThreePoints,callback:function(e){t.isThreePoints=e},expression:"isThreePoints"}})],1)},s=[],o=a("2909"),r=a("5530"),n=(a("ac1f"),a("1276"),a("b680"),a("a9e3"),a("4160"),a("159b"),a("99af"),a("b0c0"),a("476d")),c=a("0ae6"),l=a("7aab"),p=a("2f62"),d={name:"shopIndex",mixins:[n["a"]],data:function(){return{active:0,contentStyleObj:{"margin-top":"0px"},navcontentStyleObj:{top:"0px"},allIntegralAccounted:"",allOilAccounted:"",allPeasAccounted:"",allMoneyAccounted:"",type:"",typeList:"",prizeList:[],profitObj:{},hasToSign:!1,rewardType:"",rankingList:[],id:"",title:"",prizeView:!1,is:!0,actions:[{name:"全部商品",value:""},{name:"自主商品",value:"2"},{name:"推荐商品",value:"1"}],itemAddshare:{},isThreePoints:!1,threePointsArr:[],threePointsArrQB:[{name:"商品分享",value:"1"}],threePointsArrZD:[{name:"商品下架",value:"0"},{name:"商品置顶",value:"2"}],threePointsArrQZD:[{name:"商品下架",value:"0"},{name:"取消置顶",value:"2"}],deliveryTypes:[{text:"配送",fontclass:"mall-peisong",tag:"2"},{text:"自提",fontclass:"mall-ziti",tag:"1"}],screenArr:[{name:"出售中",number:"0",type:1},{name:"已下架",number:"0",type:2},{name:"无效商品",number:"0",type:0}],params:{page:1,rows:"",queryTypeRecommend:"",deliverType:this.$store.state.mall2.staticDeliverType,queryType:"1"},styleObj:{listStyle:!1,rowStyle:3,isObject:1,isHeight:"76",url:"/app/json/app_distribution_order/getProList"},isType:"",selectedType:this.$store.state.mall2.staticDeliverType,screenType:"1",showView:!0,popupShow:!1,shareObj:{popupShow:!1,codeShow:!1,deliveryType:this.$store.state.mall2.staticDeliverType},objData:{},isRecommend:!1,recommendText:"全部商品",codeStstus:!1}},mounted:function(){var t=this;(1==this.$store.state.globalConfig.microshop_index&&1==this.getPutaggregate.empFlag||1!=this.getPutaggregate.empFlag)&&this.loadgetReward(),this.loadIndex(),"1"==this.$store.state.globalConfig.delivertype_default?this.deliveryTypes=[{text:"自提",fontclass:"mall-ziti",tag:"1"}]:"2"==this.$store.state.globalConfig.delivertype_default&&(this.deliveryTypes=[{text:"配送",fontclass:"mall-peisong",tag:"2"}]),this.backUUID=this.$util.randomString(),this.listenAndriodBack(),this.$bridgefunc.enterForegroundCallBack((function(){t.hasToSign&&t.checkSignResult()}))},components:{list:c["a"],Share:l["a"]},computed:Object(r["a"])(Object(r["a"])({},Object(p["c"])(["getPutaggregate","userInfo"])),{},{bg:function(){return a("733f")}}),beforeRouteLeave:function(t,e,a){this.codeStstus?this.shareObj.codeShow=!1:this.popupShow?this.popupShow=!1:a()},methods:{getInteger:function(t){var e=this.$util.toDecimal2(t),a=e.split(".");return a[0]},getDecimals:function(t){var e=this.$util.toDecimal2(t),a=e.split(".");return a[1]},enterDetail:function(t){var e="",a=0;1==t?e="/micro_sho/add_merchandise":2==t?e="/micro_sho/commodity_management":3==t?e="/micro_sho/order_management":4==t?e="/micro_sho/renovation":5==t?(e="/micro_sho/add_merchandise",a=1):6==t?(e="/micro_sho/commodity_management",a=1):7==t&&(e="/micro_sho/commodity_query"),this.$router.push({path:e,query:{groupFlag:a}})},loadIndex:function(){var t=this,e=this,a={token:this.$store.state.login.token};e.profitData(a).then((function(a){if("success"===a.data.result){var i=a.data.data||{};e.profitObj=i,e.allIntegralAccounted=(Number(e.profitObj.integralAccounted)+Number(e.profitObj.integralUnaccounted)).toFixed()||0,e.allOilAccounted=(Number(e.profitObj.oilAccounted)+Number(e.profitObj.oilUnaccounted)).toFixed()||0,e.allPeasAccounted=(Number(e.profitObj.peasAccounted)+Number(e.profitObj.peasUnaccounted)).toFixed()||0,e.allMoneyAccounted=(Number(e.profitObj.moneyAccounted)+Number(e.profitObj.moneyUnaccounted)).toFixed(2)||0,e.rankingIndex(),1==t.$store.state.globalConfig.microshop_index&&1==t.getPutaggregate.empFlag||1!=t.getPutaggregate.empFlag||t.$nextTick((function(){if(3!=t.profitObj.integralWay&&8!=t.profitObj.oilWay&&9!=t.profitObj.peasWay&&0!=t.profitObj.moneyWay)t.navcontentStyleObj.top="64px !important";else{var a=e.$refs.elements.offsetHeight;e.contentStyleObj["margin-top"]=a+"px",e.prizeView=!0,e.navcontentStyleObj.top="64px !important"}}))}}))},toRenovation:function(){this.$router.push({path:"/micro_sho/renovation"})},loadgetReward:function(){var t=this,e=this,a={token:this.$store.state.login.token,queryType:"1",thirdFlag:"2"};e.getRewardData(a).then((function(a){if("success"===a.data.result){var i=a.data.data||[];e.prizeList=i,e.prizeList.forEach((function(t){e.allIntegralAccounted=(Number(t.integralAccounted)+Number(t.integralUnaccounted)).toFixed(),e.allOilAccounted=(Number(t.oilAccounted)+Number(t.oilUnaccounted)).toFixed(),e.allPeasAccounted=(Number(t.peasAccounted)+Number(t.peasUnaccounted)).toFixed(),e.allMoneyAccounted=(Number(t.moneyAccounted)+Number(t.moneyUnaccounted)).toFixed(2)})),t.$nextTick((function(){var e=t.$refs.element.offsetHeight;t.contentStyleObj["margin-top"]=e+"px",t.prizeList.length,t.navcontentStyleObj.top="64px !important"}))}}))},listenAndriodBack:function(){var t=this;this.$bridgefunc.registeBridge("phonebridge",(function(e){var a=JSON.parse(e);a.type==t.backUUID&&t.backEvent()}))},checkSignResult:function(){this.hasToSign=!1},backEvent:function(){"authentication"==this.$route.query.lastPath?this.$router.go(-2):this.$router.go(-1)},rankingIndex:function(){var t=this;3==t.profitObj.integralWay?t.rewardType=3:8==t.profitObj.oilWay?t.rewardType=8:9==t.profitObj.peasWay?t.rewardType=9:12==t.profitObj.moneyWay&&(t.rewardType=12);var e={token:this.$store.state.login.token,rewardType:t.rewardType};t.monthData(e).then((function(e){if("success"===e.data.result){var a=e.data.data||[];t.rankingList=a}}))},mallDetail:function(){var t=this;t.$router.push({path:"/micro_sho/microshopqrcode",query:{profitObj:JSON.stringify(t.profitObj)}})},changeData:function(t,e){var a=this;a.rankingList=[],"积分"==e?a.rewardType=3:"油滴"==e?a.rewardType=8:"豌豆"==e?a.rewardType=9:"收益金额"==e&&(a.rewardType=12);var i={token:this.$store.state.login.token,rewardType:a.rewardType};a.monthData(i).then((function(t){if("success"===t.data.result){var e=t.data.data||[];a.rankingList=e}}))},qRcodeStstus:function(t){this.codeStstus=t},selectedTypeEvent:function(t){this.selectedType=t,this.shareObj.deliveryType=t,this.$store.state.mall2.staticDeliverType=t,2==this.selectedType?this.showView=!0:this.showView=!1,this.params.deliverType=t,this.screenType=1,this.params.queryType="1"},screenBtn:function(t){this.screenType=t.type,this.params.queryType=t.type,this.$store.state.microSho.screenType=t.type},listData:function(t){var e=t.data||{};this.$set(this.screenArr[2],"number",e.numsForInvalid),this.$set(this.screenArr[0],"number",e.numsForSale),this.$set(this.screenArr[1],"number",e.numsForSoldOut)},setshareData:function(t){this.popupShow=!1,this.shareObj=Object.assign({},t)},upperShelf:function(t){var e=this;this.$messagebox.confirm("确定上架？","提示").then((function(a){e.$Loading.open();var i="/app/json/app_distribution_order/updateProFromMicroStore",s={token:e.$store.state.login.token,skuId:t.skuId,storeId:e.getPutaggregate.id,status:"1"};e.$http.post(i,s).then((function(t){e.$Loading.close();var a=t.data;0==a.status?(e.$Toast("上架成功！"),e.$refs.list._loadProList(!0)):e.$Toast(a.info)}))}))},deleteShare:function(t){var e=this;this.$messagebox.confirm("该商品已经停止分销，是否要删除？","提示").then((function(a){e.$Loading.open();var i="/app/json/app_distribution_order/removeProFromMicroStore",s={token:e.$store.state.login.token,storeId:e.getPutaggregate.id,proSkuDistributionId:t.proSkuDistributionId,skuId:t.skuId};e.$http.post(i,s).then((function(t){e.$Loading.close();var a=t.data;0==a.status?(e.$Toast("删除成功！"),e.$refs.list._loadProList(!0)):e.$Toast(a.info)}))}))["catch"]((function(){}))},productEvent:function(t){if(0!=this.screenType){var e="/micro_sho/detail/"+this.$util.getDataString();this.$router.push({path:e,query:{id:t.skuId,skuId:t.skuId,lastPath:this.$route.path,deliveryType:this.$store.state.mall2.staticDeliverType,productType:t.productType,isRecommend:t.isRecommend,proSkuDistributionId:t.proSkuDistributionId,obj:{queryType:this.screenType}}})}},addshareBtn:function(t){this.isThreePoints=!0,this.itemAddshare=t,t.isRecommend?this.threePointsArr=[].concat(Object(o["a"])(this.threePointsArrQB),[{name:"取消",value:"-1"}]):t.topFlag?this.threePointsArr=[].concat(Object(o["a"])(this.threePointsArrQB),Object(o["a"])(this.threePointsArrQZD),[{name:"取消",value:"-1"}]):this.threePointsArr=[].concat(Object(o["a"])(this.threePointsArrQB),Object(o["a"])(this.threePointsArrZD),[{name:"取消",value:"-1"}])},onSelectPoints:function(t){0==t.value?this.upDownMethod():1==t.value?(this.shareObj=Object.assign({},this.shareObj,this.itemAddshare,{phMainUrl:this.itemAddshare.mainMobilePicUrl,showTitle:this.itemAddshare.skuName,dpedData:{linePrice:this.itemAddshare.salePrice}}),this.popupShow=!0,this.shareObj.popupShow=!0):2==t.value&&this.microStoreProTop(),this.isThreePoints=!1},microStoreProTop:function(){var t=this;this.$messagebox.confirm("确定要操作该商品吗!","提示").then((function(e){t.$Loading.open(),t.$http.post("/app/json/app_distribution_order/microStoreProTop",{id:t.itemAddshare.microStoreProId}).then((function(e){t.$Loading.close(),0==e.data.status?(t.$Toast("操作成功!"),t.$refs.list._loadProList(t.params)):t.$Toast(e.data.info)}))}))},upDownMethod:function(){var t=this;this.$messagebox.confirm("确定要下架该商品吗!","提示").then((function(e){t.$Loading.open(),t.$http.post("/app/json/app_distribution_order/updateProFromMicroStore",{skuId:t.itemAddshare.skuId,storeId:t.getPutaggregate.id,status:0}).then((function(e){t.$Loading.close(),0==e.data.status?(t.$Toast("下架成功!"),t.$refs.list._loadProList(t.params)):t.$Toast(e.data.info)}))}))},isRecommendBtn:function(){this.isRecommend=!0},onSelect:function(t){this.recommendText=t.name,this.isRecommend=!1,this.params.queryTypeRecommend=t.value}}},u=d,m=(a("cdef"),a("0c7c")),g=Object(m["a"])(u,i,s,!1,null,"29786f6c",null);e["default"]=g.exports},ccff:function(t,e,a){},cdef:function(t,e,a){"use strict";a("ccff")}}]);