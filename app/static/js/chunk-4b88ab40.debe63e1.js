(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b88ab40","chunk-2d0d6337","chunk-2d0e24d1","chunk-2d0e24d1"],{"46a3":function(e,t,s){},7217:function(e,t,s){"use strict";var a=s("53ca"),i=s("d4ec"),r=s("bee2"),o=(s("c975"),s("4795"),s("4160"),s("159b"),s("da71")),n=document.getElementsByTagName("head")[0],d=function(){function e(t,s){var a=this;Object(i["a"])(this,e),this.url=t||"",this.funcName=s;var r=document.createElement("script");t+=(~t.indexOf("?")?"&":"?")+"callback="+s,r.src=t,r.type="text/javascript",this.myTimer=setTimeout((function(){a.callCallback({status:1,info:"网络加载较慢！"}),a.clearup()}),1e4),window[s]=function(e){a.callCallback({status:0,data:e,info:""}),a.clearup()},r.onerror=function(){a.callCallback({status:1,info:"网络加载较慢！"}),a.clearup()},this.scriptNode=r,n.appendChild(this.scriptNode)}return Object(r["a"])(e,[{key:"then",value:function(e){this.callbackFunc=e}},{key:"callCallback",value:function(e){var t=this;setTimeout((function(){t.callbackFunc(e)}),0)}},{key:"clearup",value:function(){this.myTimer&&clearTimeout(this.myTimer),this.myTimer=null,this.scriptNode.src="",n.removeChild(this.scriptNode)}}]),e}(),l={request:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)throw new Error("url 不能为空");0!=e.indexOf("http")&&(e=o["a"].baseURL+e),s.forEach((function(t){if("object"===Object(a["a"])(t))for(var s in t)e+=~e.indexOf("?")?"&":"?",e+=s+"="+t[s]}));var i=new d(e,t);return i},cancelAll:function(){}};t["a"]=l},"7db0":function(e,t,s){"use strict";var a=s("23e7"),i=s("b727").find,r=s("44d2"),o="find",n=!0;o in[]&&Array(1)[o]((function(){n=!1})),a({target:"Array",proto:!0,forced:n},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},9130:function(e,t,s){"use strict";s("46a3")},"96ee":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"presale-cart"},[s("nav-top",{attrs:{noTitle:!0,noBack:!e.hasBack},on:{backEvent:e.backEvent}},[s("div",{staticClass:"cart-top"},[s("div",{staticClass:"cart-title",on:{click:function(t){return e.chooseAddress(e.deliverType)}}},[s("span",{staticClass:"title theme_font_black"},[e._v("购物车")]),s("span",{staticClass:"address theme_font_gray"},[e._v(e._s(e.getAddressName()))]),s("i",{staticClass:"iconfont mall-dingwei theme_font_black"})]),s("p",{staticClass:"cart-edit theme_font_gray",on:{click:e.setEdit}},[e._v(e._s(e.isEditing?"完成":"编辑"))])])]),s("nav-content",["1"!=e.presaleDeliverType&&"2"!=e.presaleDeliverType?s("div",{staticClass:"row"},e._l(e.topArr,(function(t,a){return s("div",{staticClass:"type-btn",class:{theme_light_bg:e.deliverType==t.type,theme_standard_bdr_i:e.deliverType==t.type},on:{click:function(s){return e.deliverTypeEvent(t)}}},[s("i",{staticClass:"iconfont  theme_font_common icon-size",class:[t.class,{theme_standard_font_i:e.deliverType==t.type}]}),s("span",{staticClass:"theme_font_common",class:{theme_standard_font_i:e.deliverType==t.type}},[e._v(e._s(t.name))]),e.peisongNum>0&&2==t.type?s("span",{staticClass:"theme_font_common",class:{theme_standard_font_i:e.deliverType==t.type}},[e._v("("+e._s(e.peisongNum)+")")]):e._e(),e.zitiNum>0&&1==t.type?s("span",{staticClass:"theme_font_common",class:{theme_standard_font_i:e.deliverType==t.type}},[e._v("("+e._s(e.zitiNum)+")")]):e._e()])})),0):e._e(),s("div",{staticClass:"list-content",class:{notop:"1"==e.presaleDeliverType||"2"==e.presaleDeliverType}},e._l(e.topArr,(function(t,a){return t.hasShow?s("CartList",{directives:[{name:"show",rawName:"v-show",value:e.deliverType==t.type,expression:"deliverType == item.type"}],key:a,ref:e.getCartRef(t.type),refInFor:!0,attrs:{deliverType:t.type,isPresale:!0,isEditing:e.isEditing,orderCategory:e.orderCategory,vipUnitUserCode:e.vipUnitUserCode},on:{updateEdit:e.setEdit}}):e._e()})),1)])],1)},i=[],r=(s("4795"),s("c597")),o=s("56a8"),n=s("72c7"),d=s("99b4"),l={name:"presale-cart",components:{CartList:o["a"],AdPage:d["a"]},props:{hasBack:{type:Boolean,default:!0},commonShow:{type:Boolean,default:!1}},data:function(){return{presaleDeliverType:"1",topArr:[],deliverType:null,listZitiId:null,cartAddress:null,isEditing:!1,peisongNum:0,zitiNum:0,dataIsLoad:!1,firstZiti:!0,orderCategory:"",vipUnitUserCode:void 0,lastPath:""}},methods:{backEvent:function(){this.$router.go(-1),this.$keepaliveHelper.deleteCache(this)},setEdit:function(){this.isEditing=!this.isEditing},getAddressName:function(){var e=null;return(2==this.deliverType||1==this.deliverType)&&(e=""),e},chooseAddress:function(e){if(2==e)this.$router.push({path:"/mall2/addresslist"});else{if("cnooc"==this.$store.state.globalConfig.app_home_special_flag)return;this.$router.push({path:"/mall2/mypickupaddress"})}},deliverTypeEvent:function(e){2==e.type?(this.saveItemSel(e),this.getData()):1==e.type&&(1!=this.firstZiti||void 0!=this.$store.state.mall2.zitiAddress.id&&""!=this.$store.state.mall2.zitiAddress.id?(this.saveItemSel(e),this.getData()):this.chooseAddress(e.type),this.firstZiti=!1)},saveItemSel:function(e){e.hasShow=!0,this.deliverType=e.type,this.$store.state.mall2.staticDeliverType=this.deliverType,this.$bridgefunc.vuexStorage()},pageShow:function(){this.deliverType=this.$store.state.mall2.staticDeliverType,this.getData()},getData:function(){var e=this;if(1==this.deliverType)n["a"].checkIsInitialLoad((function(t){if(t)e.getData();else{var s=e.getCartRef(e.deliverType);e.$nextTick((function(){if(e.$refs[s]){var t=e.$refs[s];t[0].getDataList(),sessionStorage.removeItem("RHY_Pickup_Address")}}))}}));else{var t=this.getCartRef(this.deliverType);this.$nextTick((function(){if(e.$refs[t]){var s=e.$refs[t];s[0].getDataList(),sessionStorage.removeItem("RHY_Pickup_Address")}}))}},getCartRef:function(e){return"cart"+e},getItemByType:function(e){for(var t=0;t<this.topArr.length;t++){var s=this.topArr[t];if(s.type==e)return s}return null},_getCartCount:function(e){var t=this,s="/app/json/app_cart/getCartCount",a={token:this.$store.state.login.token,deliveryType:e,orderCategory:this.orderCategory,vipUnitUserCode:this.vipUnitUserCode};this.$http.post(s,a).then((function(s){var a=s.data;0==a.status&&(t.$store.state.mall2.cartNum=a.data,1==e?t.zitiNum=a.data:t.peisongNum=a.data)}),(function(e){}))}},activated:function(){if(("/common"!=this.$route.path||this.commonShow)&&1==this.dataIsLoad){this.deliverType=this.$store.state.mall2.staticDeliverType;var e=this.getItemByType(this.deliverType);this.deliverTypeEvent(e)}},beforeRouteLeave:function(e,t,s){e.path!=this.lastPath&&"/"!=this.lastPath&&""!=this.lastPath||this.$keepaliveHelper.deleteCache(this),s()},mounted:function(){var e=this;this.deliverType=this.$store.state.mall2.staticDeliverType;var t=this.getItemByType(this.deliverType);this.deliverTypeEvent(t),setTimeout((function(){e.dataIsLoad=!0}),500),1==this.deliverType?(this.zitiNum=this.$store.state.mall2.cartNum,"cnooc"==this.$store.state.globalConfig.app_home_special_flag?""!=this.$store.state.mall2.zitiAddress.mchOuCode&&this._getCartCount(2):this._getCartCount(2)):(this.peisongNum=this.$store.state.mall2.cartNum,"cnooc"==this.$store.state.globalConfig.app_home_special_flag?""!=this.$store.state.mall2.zitiAddress.id&&this._getCartCount(2):this._getCartCount(1))},created:function(){var e=this;if(this.presaleDeliverType="1",this.lastPath=this.$route.query.lastPath?this.$route.query.lastPath:"",this.topArr=r["a"].getTopArr(),this.$route.query.pickupId)this.$mallCommon.getSysStoreById(this.$route.query.pickupId,(function(t){e.$store.state.mall2.zitiAddress=t,sessionStorage.setItem("RHY_Pickup_Address",e.$route.query.pickupId),e.$userCenter._setDefaultPickupAddress(t.id)}));else if(this.$route.query.pickupAddress){var t=JSON.parse(this.$route.query.pickupAddress);this.$store.state.mall2.zitiAddress=t,sessionStorage.setItem("RHY_Pickup_Address",this.$route.query.pickupAddress),this.$userCenter._setDefaultPickupAddress(t.id)}this.listZitiId=this.$route.query.pickupId,this.cartAddress=this.$store.state.mall2.selectAddress,this.orderCategory=this.$route.query.orderCategory,this.vipUnitUserCode=this.$route.query.vipUnitUserCode},watch:{"$store.state.mall2.cartNum":function(e,t){0==e&&(this.isEditing=!1),1==this.deliverType?this.zitiNum=e:this.peisongNum=e}}},c=l,p=(s("b9b6"),s("0c7c")),u=Object(p["a"])(c,a,i,!1,null,"7994d1c4",null);t["default"]=u.exports},"99b4":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showAdpage?s("div",{staticClass:"adpage",on:{click:function(t){return t.stopPropagation(),e.adPageHide.apply(null,arguments)}}},[s("div",[s("ImageAd",{attrs:{usePorpData:!0,propData:e.pageData},on:{closeEvent:e.adPageHide}})],1)]):e._e()},i=[],r=(s("d3b7"),s("3ca3"),s("ddb0"),s("7db0"),s("0d03"),s("7217")),o={name:"adpage",components:{ImageAd:function(){return s.e("chunk-1d60e26c").then(s.bind(null,"0401"))}},props:["pageAdKeywords","pgCode"],data:function(){return{pageData:null,show:!1}},computed:{showAdpage:function(){var e=this.show&&null!=this.pageData&&this.pageData.adData&&""!=this.pageData.adData;if(e){var t=this.pageData.adData,s=t.rows.find((function(e){return 0!=e.canSee}));void 0==s&&(e=!1)}return e}},methods:{adPageIsShow:function(e){var t=window.localStorage.getItem(this.pageAdKeywords+e);if(t){var s=(new Date).getTime();s>t&&(this.show=!0)}else this.show=!0},adPageHide:function(){this.show=!1},getMyPageData:function(){var e=this,t="/appcontent/js/app_vue_page/vuePageData.js",s="vuePageData_",a=[];if(a.push({appType:1}),a.push({accessType:2}),this.pgCode&&""!=this.pgCode)s+=this.pgCode,a.push({pgCode:this.pgCode});else{a.push({pageAdKeywords:this.pageAdKeywords});var i=this.$util.md5String(this.pageAdKeywords);s+=i}r["a"].request(t,s,a).then((function(t){if(0==t.status){var s=t.data.pageData;if(!s.pageDataJson)return;e.pageData=JSON.parse(s.pageDataJson);var a=t.data.id||"",i=e.pageData.adData;if(e.adPageIsShow(a),i&&e.show)if("1"==i.showFrequency){var r=new Date;r=r.setDate(r.getDate()+1),r=new Date(r).setHours(2,0,0,0);var o=new Date(r).getTime();window.localStorage.setItem(e.pageAdKeywords+a,o)}else if("2"==i.showFrequency){var n=new Date;n=n.setDate(n.getDate()+999);var d=new Date(n).getTime();window.localStorage.setItem(e.pageAdKeywords+a,d)}else if("3"==i.showFrequency){var l=(new Date).getTime()+36e3;window.localStorage.setItem(e.pageAdKeywords+a,l)}else if("4"==i.showFrequency){var c=(new Date).getTime()+0;window.localStorage.setItem(e.pageAdKeywords+a,c)}else{var p=(new Date).getTime()+36e5;window.localStorage.setItem(e.pageAdKeywords+a,p)}}}))}},created:function(){this.getMyPageData()}},n=o,d=(s("9130"),s("0c7c")),l=Object(d["a"])(n,a,i,!1,null,"1e81e30a",null);t["a"]=l.exports},b9b6:function(e,t,s){"use strict";s("c9aa")},c9aa:function(e,t,s){}}]);