(window.webpackJsonp=window.webpackJsonp||[]).push([[26,52],{"6+zW":function(t,i,e){"use strict";var o=e("L2JU"),a=e("2nGb"),r=e("W34l"),s=e("afTz"),n=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},c={name:"",components:{Countdown:s.default},props:{groupCoupon:{type:Object,default:function(){return null}},mybargainList:{type:Boolean,required:!1,default:!1},type:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{shareView:!1,isToUse:!1,countDownTimeout:!1,percentage:0}},mounted:function(){var t={},i=this.groupCoupon;if(t.title=i.proName,t.sharetext=i.actDesc,t.imageurl=i.pcMainUrl,t.detailurl=this.$store.state.globalConfig.wxBaseUrl+a.a.shareUrl+"/bargain/bargain_details?id="+i.id+"&skuId="+i.skuId+"&origId="+(i.origId||i.id)+"&productId="+i.id+"&bargainActId="+i.bargainActId+"&storeOuCode="+i.storeOucode+"&oprice="+(i.originalPrice||i.origPrice)+"&kprice="+i.minPrice+"&userId="+this.userInfo.userId+"&bargainOrderId="+i.id,1==this.$store.state.webtype);else if(2==this.$store.state.webtype)r.a.wxSetShareData(t);else if(3==this.$store.state.webtype){r.a.wxmpPath(this.$route);var e={title:i.proName,path:a.a.shareUrl+"/bargain/bargain_details?id="+i.id+"&skuId="+i.skuId+"&origId="+(i.origId||i.id)+"&productId="+i.id+"&bargainActId="+i.bargainActId+"&storeOuCode="+i.storeOucode+"&oprice="+(i.originalPrice||i.origPrice)+"&kprice="+i.minPrice+"&userId="+this.userInfo.userId+"&bargainOrderId="+i.id,imageUrl:i.pcMainUrl};wx.miniProgram.postMessage({data:JSON.stringify(e)})}this.percentage=(this.groupCoupon.actStock/this.groupCoupon.setActStock*100).toFixed(2)||0},computed:n({},Object(o.c)(["userInfo"])),methods:{getTotalHeight:function(t){return"width:"+(t.actStock/t.setActStock*100).toFixed(0)+"%"},getPer:function(t){return(t.actStock/t.setActStock*100).toFixed(0)||0},toDetails:function(t,i){console.log(i),0==i.cutActivityType&&4!=t.actState&&(0==t.actState||2==t.actState?this.$router.push({path:"/bargain/prodetail",query:{id:t.id,skuId:t.skuId,origId:t.origId,productId:t.id,bargainActId:t.bargainActId,storeOuCode:t.storeOucode,oprice:t.originalPrice||t.origPrice,kprice:t.minPrice,bargainOrderId:t.id}}):this.$router.push({path:"/bargain/bargain_details",query:{id:t.id,skuId:t.skuId,origId:t.state?t.id:t.origId,productId:t.id,bargainActId:t.bargainActId,storeOuCode:t.storeOucode,oprice:t.originalPrice||t.origPrice,kprice:t.minPrice,bargainOrderId:t.id,EnterFlag:!0}}))},payEvent:function(t){var i=this,e={orderType:"200015",orderId:t.orderId};this.$request.post("/app/json/app_shopping_order/detail",e).then((function(t){if(0==t.status){var e=t.data||{};i.$router.push({path:"/mall2/checkstand",query:{payInfo:JSON.stringify({orderId:e.id,orderType:e.orderType,payAmount:e.payAmount,tradeNo:e.tradeNo}),occurOuCode:e.ouCode,cutPrice:!0}})}else i.$Toast(t.info)}))},launchBtn:function(t){this.$router.push({path:"/bargain/prodetail",query:{id:t.id,skuId:t.skuId,origId:t.origId,productId:t.id,bargainActId:t.bargainActId,storeOuCode:t.storeOucode,oprice:t.originalPrice||t.origPrice,kprice:t.minPrice,bargainOrderId:t.id}})},invitationBtn:function(t){var i=this;console.log(this.$parent),console.log(t,"item");var e={};e.title=t.proName,e.sharetext=t.actDesc,e.imageurl=t.pcMainUrl,e.detailurl=this.$store.state.globalConfig.wxBaseUrl+a.a.shareUrl+"/bargain/bargain_details?id="+t.id+"&skuId="+t.skuId+"&origId="+(t.origId||t.id)+"&productId="+t.id+"&bargainActId="+t.bargainActId+"&storeOuCode="+t.storeOucode+"&oprice="+(t.originalPrice||t.origPrice)+"&kprice="+t.minPrice+"&userId="+this.userInfo.userId+"&bargainOrderId="+t.id,1==this.$store.state.webtype?this.$bridgefunc.wechatShare(e):2==this.$store.state.webtype?r.a.getWechatSignature((function(t){t?i.shareView=!0:console.log("签名失败")})):3==this.$store.state.webtype&&this.$emit("inventFrend",!0)},successBtn:function(t){this.$emit("successBtn",t)}}},u=(e("WLra"),e("KHd+")),p=Object(u.a)(c,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t.groupCoupon?e("div",{staticClass:"coupon",class:{shadow:!t.groupCoupon.tagging},on:{click:function(i){return t.toDetails(t.groupCoupon,t.type)}}},[e("div",{staticClass:"coupon-type",style:{width:t.groupCoupon.tagging?"65px":"85px",height:t.groupCoupon.tagging?"65px":"85px"}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.groupCoupon.pcMainUrl,expression:"groupCoupon.pcMainUrl"}],staticClass:"img",attrs:{alt:""}})]),t._v(" "),e("div",{staticClass:"coupon-content"},[e("div",{staticClass:"title"},[1==t.groupCoupon.actState?e("div",{staticClass:"dowm"},[e("countdown",{staticClass:"count-down-con",attrs:{hiddenDay:!1,endTime:t.groupCoupon.timEnew}})],1):t._e(),t._v("\n          "+t._s(t.groupCoupon.proName)+"\n        ")]),t._v(" "),t.mybargainList?e("div",{staticClass:"title sotck"},[e("div",{staticClass:"prograss"},[e("div",{staticClass:"p1",style:t.getTotalHeight(t.groupCoupon)},[t._v(t._s((t.groupCoupon.actStock/t.groupCoupon.setActStock*100).toFixed(0)+"%"))]),t._v(" "),e("div",{staticClass:"p2"})]),t._v(" "),e("div",[e("span",[t._v("正在疯抢")]),t._v(" "),e("span",[t._v("剩余库存"+t._s(t.groupCoupon.actStock))])])]):t._e(),t._v(" "),"bargainDetails"==t.groupCoupon.tagging?e("div",{staticClass:"operation"},[e("div",{staticClass:"price bargainDetails"},[e("div",{staticClass:"price-top"},[t._v("可砍至 ¥"+t._s(t.$util.toDecimal2(t.groupCoupon.minPrice)))]),t._v(" "),e("div",{staticClass:"price-buttom",class:{"price-lift":t.groupCoupon.tagging}},[t._v("原价 ¥"+t._s(t.$util.toDecimal2(t.groupCoupon.originalPrice||t.groupCoupon.origPrice)))])])]):e("div",{staticClass:"operation"},[t.mybargainList?[1==t.groupCoupon.state?e("div",{staticClass:"price"},[e("div",{staticClass:"count-down"},[e("countdown",{staticClass:"count-down-con",attrs:{hiddenDay:!0,endTime:t.groupCoupon.timEnew}}),t._v(" 后结束")],1),t._v(" "),e("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("还差 "),e("span",{staticStyle:{color:"#f80f16"}},[t._v(t._s(t.$util.toDecimal2((100*Number(t.groupCoupon.actPrice)-100*Number(t.groupCoupon.minPrice))/100))+"元")]),t._v(" 元")])]):t._e(),t._v(" "),2==t.groupCoupon.state?e("div",{staticClass:"price"},[e("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("砍价结束")]),t._v(" "),e("div",{staticStyle:{height:"12px"}}),t._v(" "),e("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("还差 "),e("span",{staticStyle:{color:"#f80f16"}},[t._v(t._s(t.$util.toDecimal2((100*Number(t.groupCoupon.actPrice)-100*Number(t.groupCoupon.minPrice))/100)))]),t._v(" 元，砍价成功")])]):t._e(),t._v(" "),3==t.groupCoupon.state?e("div",{staticClass:"price"},[e("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("砍价结束")]),t._v(" "),e("div",{staticStyle:{height:"12px"}}),t._v(" "),e("div",{staticClass:"font-small",staticStyle:{color:"#989898"}},[t._v("还差 "),e("span",{staticStyle:{color:"#f80f16"}},[t._v(t._s(t.$util.toDecimal2((100*Number(t.groupCoupon.actPrice)-100*Number(t.groupCoupon.minPrice))/100))+"元")]),t._v(" 元，砍价失败")])]):t._e(),t._v(" "),e("div",[1==t.groupCoupon.state?e("span",{staticClass:"btn",on:{click:function(i){return i.stopPropagation(),t.invitationBtn(t.groupCoupon)}}},[t._v("邀请好友")]):t._e(),t._v(" "),2==t.groupCoupon.state&&2!=t.groupCoupon.orderState&&3!=t.groupCoupon.orderState?e("span",{staticClass:"btn",on:{click:function(i){return i.stopPropagation(),t.successBtn(t.groupCoupon)}}},[t._v("立即购买")]):t._e(),t._v(" "),2==t.groupCoupon.state&&3==t.groupCoupon.orderState?e("span",{staticClass:"btn"},[t._v("已支付")]):t._e(),t._v(" "),2==t.groupCoupon.state&&2==t.groupCoupon.orderState?e("span",{staticClass:"btn",on:{click:function(i){return i.stopPropagation(),t.payEvent(t.groupCoupon)}}},[t._v("去支付")]):t._e(),t._v(" "),3==t.groupCoupon.state?e("span",{staticClass:"btn",on:{click:function(i){return i.stopPropagation(),t.toDetails(t.groupCoupon,t.type)}}},[t._v("查看详情")]):t._e()])]:[e("div",{staticClass:"price"},[e("div",{staticClass:"price-top price-top-new"},[t._v("可砍至 ¥"+t._s(t.$util.toDecimal2(t.groupCoupon.minPrice)))]),t._v(" "),e("div",{staticClass:"price-buttom"},[e("span",{staticClass:"price"},[t._v("原价 ¥"+t._s(t.$util.toDecimal2(t.groupCoupon.originalPrice||t.groupCoupon.origPrice)))]),t._v(" "),e("span",{staticClass:"price-lift"},[t._v("库存 "+t._s(t.groupCoupon.actStock||0))])])]),t._v(" "),1==t.type.cutActivityType?e("div",[e("span",{staticClass:"dis-btn"},[t._v("未开始")])]):e("div",{staticClass:"btn-con"},[e("div",[0==t.groupCoupon.actState?e("span",{staticClass:"btn",on:{click:function(i){return i.stopPropagation(),t.launchBtn(t.groupCoupon)}}},[t._v("发起砍价")]):t._e(),t._v(" "),1==t.groupCoupon.actState?e("span",{staticClass:"btn",on:{click:function(i){return i.stopPropagation(),t.invitationBtn(t.groupCoupon)}}},[t._v("邀请好友")]):t._e(),t._v(" "),2==t.groupCoupon.actState?e("span",{staticClass:"btn",on:{click:function(i){return i.stopPropagation(),t.launchBtn(t.groupCoupon)}}},[t._v("再次发起")]):t._e(),t._v(" "),4==t.groupCoupon.actState?e("span",{staticClass:"btn"},[t._v("暂无库存")]):t._e()]),t._v(" "),e("van-progress",{attrs:{percentage:t.percentage,color:"#ee0a24"}})],1)]],2)])]):t._e()])}),[],!1,null,"1f60a3d3",null);i.a=p.exports},AbvJ:function(t,i,e){},WLra:function(t,i,e){"use strict";var o=e("bG1+");e.n(o).a},Wr4Z:function(t,i,e){"use strict";var o=e("AbvJ");e.n(o).a},afTz:function(t,i,e){"use strict";e.r(i);var o=e("nV03"),a={name:"countdown",props:["endTime","type","hiddenDay","callback"],components:{},data:function(){return{d:"0",h:"00",m:"00",s:"00",trigger:!0}},methods:{parsingTime:function(){var t=this;if(this.endTime){var i=this.$store.state.severTime.currentTime,e=this.endTime-i;this.d=0,this.h="0",this.m="0",this.s="0",e<0?this.trigger&&(this.trigger=!1,setTimeout((function(){t.$emit("timeOut")}),1e3)):(this.trigger=!0,e>59?(this.s=e%60,(e=parseInt(e/60))>59?(this.m=e%60,(e=parseInt(e/60))>23?(this.h=parseInt(e%24),e=parseInt(e/24),this.d=e):this.h=e):this.m=e):e>=0&&(this.s=e),this.h<10&&(this.h="0"+this.h),this.m<10&&(this.m="0"+this.m),this.s<10&&(this.s="0"+this.s))}}},created:function(){this.parsingTime(),o.a.heartbeat()},destroyed:function(){o.a.removeHeartbeat()},watch:{"$store.state.severTime.currentTime":function(){this.parsingTime()}}},r=(e("Wr4Z"),e("KHd+")),s=Object(r.a)(a,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"countdown",class:{quan:"theme_bg_quan"==t.type}},[0==t.d||t.hiddenDay?t._e():e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.d))]),t._v(" "),0==t.d||t.hiddenDay?t._e():e("span",[t._v("天")]),t._v(" "),e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.h))]),t._v("\n  :\n  "),e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.m))]),t._v("\n  :\n  "),e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.s))])])}),[],!1,null,"403fc346",null);i.default=s.exports},"bG1+":function(t,i,e){},nV03:function(t,i,e){"use strict";var o=e("ZToj"),a=void 0,r=0,s={heartbeat:function(){r++,a||(a=window.setInterval((function(){var t=parseInt((new Date).getTime()/1e3);o.a.state.severTime.currentTime=t+o.a.state.severTime.jetlag}),1e3))},removeHeartbeat:function(){r>0&&r--,0==r&&(window.clearInterval(a),a=null)}};i.a=s}}]);