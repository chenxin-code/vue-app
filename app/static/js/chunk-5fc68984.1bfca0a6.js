(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fc68984"],{8900:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-qrcode"},[a("nav-top",{attrs:{title:"积分支付"},on:{backEvent:t.backEvent}}),t.complete?a("nav-content",{staticClass:"my-qrcode-container"},[a("div",{staticClass:"code-content"},[a("div",{staticClass:"top-div"}),a("div",{staticClass:"qr-div"},[a("div",{staticClass:"phone"},[t._v("积分："+t._s(t.$route.query.integralinfo||0))]),a("div",{staticClass:"barcode"},[a("canvas",{attrs:{id:"barcode"}})]),a("p",{staticClass:"code"},[t._v(t._s(t.myInfo.qrCode))]),a("div",{staticClass:"codeimg-content"},[a("div",{ref:"qrcode",staticClass:"qrcode",attrs:{id:"qrcode"}}),a("div",{staticClass:"icon"},[t._v("五分钟有效")])])])])]):t._e()],1)},n=[],i=(a("4795"),a("d044")),s=a.n(i),r=a("62c5"),c=a.n(r),d=a("efff"),y=a("19e7"),u={name:"my-qrcode",components:{QRCode:s.a},data:function(){return{myInfo:{},complete:!1,myTimeout:null,brightnessResult:{}}},mounted:function(){this.makePayQrcode()},methods:{makePayQrcode:function(){var t=this;this.$Loading.open();var e="/app/json/app_pay/makePayQrcode",a={token:this.$store.state.login.token,payMode:120,distOuCode:1,imgVerifyCode:this.$route.query.verifyCode||"",uuid:this.$route.query.uuid||""};this.$http.post(e,a).then((function(e){t.$Loading.close();var a=e.data;0==a.status?(t.complete=!0,t.myInfo=a.data,t.$nextTick((function(){t.toCanvas(),clearInterval(t.queryPayStateTimer),t.queryPayStateTimer=setInterval((function(){t.payQrcodeCheck(t.myInfo.qrcode)}),2e3)}))):("1"==t.$store.state.globalConfig.qrcodePayVerify&&t.$router.go(-1),t.$Toast(a.info))}),(function(e){t.$Loading.close()}))},payQrcodeCheck:function(t){var e=this;this.digitalPWD="";var a="/app/json/app_pay/payQrcodeCheck",o={token:this.$store.state.login.token,payMode:120,qrcode:t};this.$http.post(a,o).then((function(a){var o=a.data;if(0==o.status&&(e.payDetais=o.data,e.payDetais.payUnit))if(clearInterval(e.queryPayStateTimer),e.payDetais.needPayPwd){if("1"==e.payDetais.payPwdState)return void e.$Toast("支付密码已锁定，请稍后再试！");d["a"].open({initData:{payPwdState:e.payDetais.payPwdState},toSettingPwd:function(){e.$router.push({path:"/usercenter/nosetpwd",query:{isSet:e.payDetais.payPwdState,source:"rebate"}}),d["a"].close()},inputFinished:function(a){e.digitalPWD=a,e.payQrcodePay(e.digitalPWD,t),d["a"].close()}})}else e.payQrcodePay(e.digitalPWD,t)}),(function(t){}))},payQrcodePay:function(t,e){var a=this,o="";t&&(o=Object(y["a"])(t)),this.$request.post("/app/json/app_pay/payQrcodePay",{payMode:120,qrcode:e,PayPwd:o}).then((function(t){0===t.status?a.$router.push({path:"/usercenter/pay-results",query:{payInfo:JSON.stringify(a.payDetais)}}):a.$Toast(t.info)}))},toCanvas:function(){var t=document.getElementById("barcode");c()(t,this.myInfo.qrcode);var e=document.getElementById("qrcode");e.innerHTML="";new s.a("qrcode",{width:200,height:200,text:this.myInfo.qrcode});var a=document.getElementById("qrcode").getElementsByTagName("img"),o=a[0];o.style.width="100%",o.style.height="100%"},backEvent:function(){this.$keepaliveHelper.deleteCache(this),this.$router.go(-1)}},destroyed:function(){clearInterval(this.queryPayStateTimer)}},p=u,l=(a("8b61"),a("0c7c")),f=Object(l["a"])(p,o,n,!1,null,"83577b0c",null);e["default"]=f.exports},"8b61":function(t,e,a){"use strict";a("9fd8")},"9fd8":function(t,e,a){}}]);