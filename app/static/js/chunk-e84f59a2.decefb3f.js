(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e84f59a2"],{1148:function(t,e,s){"use strict";var i=s("a691"),a=s("1d80");t.exports=function(t){var e=String(a(this)),s="",o=i(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(s+=e);return s}},2915:function(t,e,s){t.exports=s.p+"static/images/4cc4f6ef77581104b6da96487b8d5920.png"},"408a":function(t,e,s){var i=s("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"5d96":function(t,e,s){"use strict";s("dd42")},a623:function(t,e,s){"use strict";var i=s("23e7"),a=s("b727").every,o=s("a640"),n=o("every");i({target:"Array",proto:!0,forced:!n},{every:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},b680:function(t,e,s){"use strict";var i=s("23e7"),a=s("a691"),o=s("408a"),n=s("1148"),r=s("d039"),l=1..toFixed,c=Math.floor,d=function(t,e,s){return 0===e?s:e%2===1?d(t,e-1,s*t):d(t*t,e/2,s)},u=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},f=function(t,e,s){var i=-1,a=s;while(++i<6)a+=e*t[i],t[i]=a%1e7,a=c(a/1e7)},v=function(t,e){var s=6,i=0;while(--s>=0)i+=t[s],t[s]=c(i/e),i=i%e*1e7},p=function(t){var e=6,s="";while(--e>=0)if(""!==s||0===e||0!==t[e]){var i=String(t[e]);s=""===s?i:s+n.call("0",7-i.length)+i}return s},m=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){l.call({})}));i({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,s,i,r,l=o(this),c=a(t),m=[0,0,0,0,0,0],h="",_="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(h="-",l=-l),l>1e-21)if(e=u(l*d(2,69,1))-69,s=e<0?l*d(2,-e,1):l/d(2,e,1),s*=4503599627370496,e=52-e,e>0){f(m,0,s),i=c;while(i>=7)f(m,1e7,0),i-=7;f(m,d(10,i,1),0),i=e-1;while(i>=23)v(m,1<<23),i-=23;v(m,1<<i),f(m,1,1),v(m,2),_=p(m)}else f(m,0,s),f(m,1<<-e,0),_=p(m)+n.call("0",c);return c>0?(r=_.length,_=h+(r<=c?"0."+n.call("0",c-r)+_:_.slice(0,r-c)+"."+_.slice(r-c))):_=h+_,_}})},b792:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.complete?i("div",{staticClass:"oil-package",on:{click:t.cancelClickBtn}},[i("nav-top",{attrs:{title:"油滴套餐"},on:{backEvent:function(e){return t.$router.go(-1)}}},[0!=t.cut?i("div",{staticClass:"tips icon-tips"},[t._v(t._s(t.cut))]):t._e(),i("i",{staticClass:"iconfont mall-gengduo",on:{click:function(e){e.stopPropagation(),t.dropmenuShow=!t.dropmenuShow}}})]),t.showOpen?i("nav-content",{staticClass:"oil-package-container open"},[i("div",{staticClass:"content"},[t.isOverdue?i("div",{staticClass:"title-tips"},[i("div",{staticClass:"text"},[t._v("您的套餐即将过期")]),i("div",{staticClass:"btn",on:{click:t.overdue}},[t._v("点此续签")])]):t._e(),t.alreadyDue?i("div",{staticClass:"already"},[i("div",{staticClass:"top"},[i("span",{staticClass:"over-due-tips"},[t._v("已续签")]),i("span",{staticClass:"text"},[t._v(t._s(t.renewalInfo.orderModel.packageRefuelName+"("+t.renewalInfo.orderModel.duration+"天)"))])]),i("div",{staticClass:"bottom"},[t._v("生效日期："+t._s(""+t.renewalInfo.orderModel.startDate))])]):t._e(),i("div",{staticClass:"title-info"},[i("div",{staticClass:"info"},[i("div",{staticClass:"title-name"},[i("div",{staticClass:"left"},[t._v(t._s(t.myHomeInfo.orderModel.packageRefuelName)+"  "+t._s(t.myHomeInfo.orderModel.duration)+"天")]),i("div",{staticClass:"right"},[t._v(t._s(t.state))])]),i("div",{staticClass:"text"},[t._v("套餐开始时间："+t._s(t.myHomeInfo.orderModel.startDate))]),i("div",{staticClass:"text"},[t._v("套餐结束时间："+t._s(t.myHomeInfo.orderModel.endDate))]),1==t.ruleDesc.rebateType?i("div",[t.rebate.length>1?i("div",{staticClass:"special"},[t._v(" 您当前再加"+t._s(t.dealNum(t.rebate[1].oilLiter,this.myHomeInfo.orderModel.sumOilLiter||0))+"升油即可升级返利档次。 ")]):t._e()]):i("div",[t.rebate.length&&3==t.myHomeInfo.orderModel.packageType?i("div",{staticClass:"special"},[t._v(" 您当前加油单笔即时返利为"+t._s(t.rebate[0].rebate)+"%"),1!=t.rebate.length?i("span",[t._v(",再加"+t._s(t.dealNum(t.rebate[1].oilLiter,this.myHomeInfo.orderModel.sumOilLiter||0))+"升，即可升级实时返利比例至"+t._s(t.rebate[1].rebate)+"%。")]):t._e()]):t._e(),t.rebate.length&&3!=t.myHomeInfo.orderModel.packageType?i("div",{staticClass:"special"},[t._v(" 您当前加油单笔即时返利为"+t._s(t.ruleDesc.baseRebate)+"%,套餐到期后的补返比例为"+t._s(t.rebate[0].rebate)+"%"),1!=t.rebate.length?i("span",[t._v(",再加"+t._s(t.dealNum(t.rebate[1].oilLiter,this.myHomeInfo.orderModel.sumOilLiter||0))+"升，即可升级累计补返比例至"+t._s(t.rebate[1].rebate)+"%。")]):t._e()]):t._e()])])]),2==t.myHomeInfo.orderModel.packageType?i("div",{staticClass:"statistical"},[i("div",{staticClass:"title"},[t._v("套餐加油统计")]),i("ul",{staticClass:"list"},[i("li",{staticClass:"item"},[i("div",{staticClass:"oil-info"},[i("div",{staticClass:"name"},[t._v("加油升数")]),i("div",{staticClass:"num"},[t._v(t._s(t.myHomeInfo.orderModel.sumOilLiter||"0"))])]),i("div",{staticClass:"oil-info middle"},[i("div",{staticClass:"name"},[t._v("实时返利金额")]),i("div",{staticClass:"num"},[t._v(t._s(t.myHomeInfo.orderModel.rebate||"0"))])]),i("div",{staticClass:"oil-info"},[i("div",{staticClass:"name"},[t._v("加油金额")]),i("div",{staticClass:"num"},[t._v(t._s(t.myHomeInfo.orderModel.sumAmount||"0.00"))])])])])]):t._e(),i("div",{staticClass:"statistical"},[i("div",{staticClass:"title"},[t._v("个人加油统计")]),i("ul",{staticClass:"list"},[i("li",{staticClass:"item"},[i("div",{staticClass:"oil-info"},[i("div",{staticClass:"name"},[t._v("加油升数")]),i("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(1)))])]),i("div",{staticClass:"oil-info middle"},[i("div",{staticClass:"name"},[t._v("实时返利金额")]),i("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(2)))])]),i("div",{staticClass:"oil-info"},[i("div",{staticClass:"name"},[t._v("加油金额")]),i("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(3)))])])])])]),2==t.myHomeInfo.orderModel.packageType?i("div",{staticClass:"title"},[t._v("个人加油明细")]):1==t.myHomeInfo.orderModel.packageType?i("div",{staticClass:"title"},[t._v("加油明细")]):i("div",{staticClass:"title"},[t._v("返利明细")])]),i("ul",{staticClass:"details-list"},[t._l(t.oilRecordList,(function(e,s){return s<5?i("li",{key:s,staticClass:"details-item"},[i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v("订单号")]),i("div",{staticClass:"details-text"},[t._v(t._s(e.orderNo))])]),i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v("加油时间")]),i("div",{staticClass:"details-text"},[t._v(t._s(e.tradeTime))])]),i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v("加油升数")]),i("div",{staticClass:"details-text"},[t._v(t._s(e.oilLiter||"0"))])]),i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v("加油金额")]),i("div",{staticClass:"details-text"},[t._v(t._s(e.amount||"0.00"))])]),i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v("实时返利金额")]),i("div",{staticClass:"details-text"},[t._v(t._s(e.rebate||"0"))])])]):t._e()})),0==t.oilRecordList.length?i("div",{staticClass:"no-data"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:s("f94a"),alt:""}})]),i("div",{staticClass:"text"},[t._v("暂无数据")])]):t._e(),i("div",{staticClass:"more-btn"},[t.oilRecordList.length>5?i("div",{staticClass:"seeMore",on:{click:t.openRecord}},[t._v("查看更多加油记录")]):t._e(),t.oilRecordList.length>5&&(3==t.myHomeInfo.orderModel.packageType||1==t.myHomeInfo.orderModel.packageType||2==t.myHomeInfo.orderModel.packageType)?i("div",[t._v(" | ")]):t._e(),3==t.myHomeInfo.orderModel.packageType||1==t.myHomeInfo.orderModel.packageType||2==t.myHomeInfo.orderModel.packageType?i("div",{staticClass:"icon-right",on:{click:t.exitPackage}},[t._v("退出套餐")]):t._e()])],2),i("div",{staticClass:"tab"},t._l(t.tabList,(function(e,s){return i("div",{key:s,staticClass:"item"},[i("div",{staticClass:"text",on:{click:function(s){return t.linkTo(e)}}},[t._v(t._s(e.text.substr(0,2))),i("br"),t._v(t._s(e.text.substr(2,2)))])])})),0)]):i("nav-content",{staticClass:"oil-package-container "},[i("div",{staticClass:"no-open"},[t.bgImgList?i("div",{staticClass:"bg-img",domProps:{innerHTML:t._s(t.bgImgList)}}):i("div",{staticClass:"bg-img"},[i("img",{attrs:{src:s("2915"),alt:""}})]),i("div",{staticClass:"content"},[i("div",{staticClass:"main-info"},[t.oilOpen?i("div",{staticClass:"oil-open-tips",on:{click:t.openOil}},[t._v("开通套餐需要开通油滴账户，点击"),i("span",{staticClass:"oil-text"},[t._v("开通油滴")]),t._v("前往开通 ")]):t._e(),i("div",{staticClass:"news",domProps:{innerHTML:t._s(t.newsList)},on:{click:t.openInfo}})]),i("div",{staticClass:"open-btn",on:{click:t.changeBtn}},[i("div",{staticClass:"left"}),i("div",{staticClass:"center"},[t._v("申请开通")]),i("div",{staticClass:"right"})])]),i("div",{staticClass:"tab"},t._l(t.tabList,(function(e,s){return 0==s?i("div",{key:s,staticClass:"item"},[i("div",{staticClass:"text",on:{click:function(s){return t.linkTo(e)}}},[t._v(t._s(e.text.substr(0,2))),i("br"),t._v(t._s(e.text.substr(2,2))+" ")])]):t._e()})),0)])])],1):t._e()},a=[],o=(s("e17f"),s("2241")),n=(s("4160"),s("159b"),s("a623"),s("ac1f"),s("1276"),s("0d03"),s("4e82"),s("99af"),s("b680"),s("ca00")),r=(s("a78e"),{data:function(){return{tabList:[{text:"套餐说明",type:1},{text:"我的邀约",type:2}],active:!0,dropmenuShow:!1,oilRecordList:[],cut:"",myHomeInfo:"",newsList:"",oilOpen:!1,complete:!1,oilState:"",isOverdue:!1,alreadyDue:!1,isUpgrade:!0,oilId:"",state:"",showOpen:!1,myInviteList:[],rebate:[],ruleDesc:"",renewalInfo:"",bgImgList:""}},mounted:function(){this.queryMyHomeInfo(),this.showagreement(),this.getNewsList(),this.getAcctInfoList()},methods:{getNewsList:function(){var t=this;this.$request.post("/app/json/news/getNewsList",{values:47}).then((function(e){0==e.status?t.bgImgList=e.data[0]?e.data[0].content:"":t.$Toast(e.info?e.info:"获取获取内容中心失败")}))},cancelClickBtn:function(){this.dropmenuShow=!1,this.tabList.forEach((function(t){t.showClick=!1}))},queryMyHomeInfo:function(){var t=this;this.$request.post("/app/json/app_package_refuel/queryMyHomeInfo",{}).then((function(e){if(0===e.status){t.myHomeInfo=e.data;var s="";t.myHomeInfo?(t.state=t.dealState(t.myHomeInfo.orderModel.state,t.myHomeInfo.orderModel.startDate,t.myHomeInfo.orderModel.endDate),1==t.myHomeInfo.orderModel.packageType?s=t.myHomeInfo.orderDetailModelList[0].packageRefuelOrderId:t.myHomeInfo.orderDetailModelList.forEach((function(t){"INVITER"==t.joinType&&(s=t.packageRefuelOrderId)})),t.ruleDesc=JSON.parse(t.myHomeInfo.orderModel.ruleDesc)||{},t.dealRebate(t.ruleDesc.sumRebate,t.myHomeInfo.orderModel.sumOilLiter||0),t.queryPackageRefuelOrderRecord(s),t.isOverdue=t.overdueDeal(),t.isOverdue&&t.queryRenewalInfo(),"签约中"==t.state||"未开始"==t.state?(t.showOpen=!0,t.complete=!0):("已结束"==t.state||"已结算"==t.state||"已取消"==t.state||"待签约"==t.state&&2==t.myHomeInfo.orderModel.packageType)&&(t.showOpen=!1,t.complete=!0)):t.queryMyInviteList()}else t.$Toast(e.info?e.info:"获取列表失败")}))},queryMyInviteList:function(){var t=this;this.$request.post("/app/json/app_package_refuel/queryMyInviteList",{}).then((function(e){if(0===e.status)if(t.cut=e.data.length,t.myInviteList=e.data,t.myInviteList.length){var s=[],i="",a=[];if(t.myInviteList.forEach((function(e){i=t.dealState(e.state,e.startDate,e.endDate),"待签约"==i&&a.push(e),s.push(i)})),s.every(t.sourceState))for(var o=0;o<a.length;o++)-1!=t.timeJudge(a[o].startDate.split(" ")[0])?t.$router.push({path:"/invitation-details",query:{id:a[o].packageRefuelOrderId,joinType:a[o].joinType}}):(t.showOpen=!1,t.complete=!0);else t.showOpen=!1,t.complete=!0}else t.showOpen=!1,t.complete=!0;else t.$Toast(e.info?e.info:"获取列表失败")}))},queryRenewalInfo:function(){var t=this;this.$request.post("/app/json/app_package_refuel/queryRenewalInfo",{}).then((function(e){0===e.status?(t.renewalInfo=e.data,t.renewalInfo&&t.renewalInfo.orderModel.id!=t.myHomeInfo.orderModel.id&&(t.isOverdue=!1,t.alreadyDue=!0)):t.$Toast(e.info?e.info:"获取续签信息失败")}))},timeJudge:function(t){var e=n["a"].getMyDate(new Date),s=new Date(t),i=new Date(s.getTime()+2592e5);return n["a"].dateCompare(e,n["a"].getPreTime(i.getTime()).split(" ")[0])},sourceState:function(t){return"待签约"==t},dealDiffData:function(t){var e=this,s="";return 1==this.myHomeInfo.orderModel.packageType||3==this.myHomeInfo.orderModel.packageType?1==t?this.myHomeInfo.orderDetailModelList[0].sumOilLiter||"0":2==t?this.myHomeInfo.orderDetailModelList[0].sumRebate||"0":this.myHomeInfo.orderDetailModelList[0].sumAmount||"0.00":(this.myHomeInfo.orderDetailModelList.forEach((function(i){i.userId==e.$store.state.mall2.behalf.userId&&(s=1==t?i.sumOilLiter?i.sumOilLiter:"0":2==t?i.sumRebate||"0":i.sumAmount||"0.00")})),s)},getAcctInfoList:function(){var t=this;this.$request.post("/app/json/app_youdi/getAcctInfoList",{}).then((function(e){0===e.status?(t.oilState=e.data||[],(t.oilState.length&&0===t.oilState.state||!t.oilState.length)&&(t.oilOpen=!0)):t.$Toast(e.info?e.info:"获取油滴账户信息失败")}))},queryPackageRefuelOrderRecord:function(t){var e=this;this.oilId=t,this.$request.post("/app/json/app_package_refuel/queryPackageRefuelOrderRecord",{packageRefuelOrderId:t}).then((function(t){0===t.status?e.oilRecordList=t.data:e.$Toast(t.info?t.info:"获取列表失败")}))},dealState:function(t,e,s){var i=n["a"].getMyDate(new Date);if("WAIT_SIGN_UP"==t)return"待签约";if("SIGNED_UP"==t){var a=n["a"].dateCompare(i,e.split(" ")[0]),o=n["a"].dateCompare(i,s.split(" ")[0]);return 1==a?"未开始":0!=a&&-1!=a||1!=o&&0!=o?"已结束":"签约中"}return"SETTLED"==t?"已结算":"CANCELED"==t?"已取消":void 0},overdueDeal:function(){var t=n["a"].getMyDate(new Date),e=this.myHomeInfo.orderModel.endDate.split(" ")[0],s=n["a"].getAfterWeek(e).split(" ")[0];return n["a"].isDateBetween(t,s,e)},dealRebate:function(t,e){for(var s=[].concat(t).sort((function(t,e){return t.oilLiter-e.oilLiter})),i=[],a=0;a<s.length-1;a++){var o=s[a],n=s[a+1];if(o.oilLiter<=e&&e<n.oilLiter){i.push(o),i.push(n);break}if(a===s.length-2&&e>=n.oilLiter){i.push(n);break}}this.rebate=i},overdue:function(){this.$router.push({path:"/package-change",query:{overdueDate:this.myHomeInfo.orderModel.endDate}})},showagreement:function(){var t=this;this.$request.post("/app/json/news/getNewsList",{values:35}).then((function(e){0==e.status?t.newsList=e.data[0]?e.data[0].content:"":t.$Toast(e.info?e.info:"获取获取内容中心失败")}))},openOil:function(){window.location.href="/app-vue/oildrop"},dealTime:function(t,e){return t.split(" ")[0]+"~"+e.split(" ")[0]},linkTo:function(t){1==t.type?this.$router.push({path:"/instructions"}):2==t.type?this.$router.push({path:"/my-invitation"}):this.$router.push({path:"/history-invitation"})},openInfo:function(){this.$router.push({path:"/instructions"})},changeBtn:function(){this.oilState.length?0==this.oilState.state?this.$Toast("您还未开通油滴套餐，请前往开通吧!"):2==this.oilState.state?this.$Toast("您的油滴账号已被冻结，无法开通套餐!"):4==this.oilState.state?this.$Toast("您的油滴账号已被锁定，无法开通套餐!"):this.$router.push({path:"/package-change"}):this.$Toast("您还未开通油滴套餐，请前往开通吧!")},openRecord:function(){this.$router.push({path:"/oil-record",query:{id:this.oilId,packageType:this.myHomeInfo.orderModel.packageType}})},exitPackage:function(){var t=this;o["a"].confirm({title:"提示",message:"退出套餐后再次加入，返利比例将会按最低返利档次重新计算，是否确认退出？",confirmButtonText:"不了，我再想想",cancelButtonText:"确定我要退出"}).then((function(){}))["catch"]((function(){t.$request.post("/app/json/app_package_refuel/quitPackageOrder",{id:t.myHomeInfo.orderModel.id}).then((function(e){0==e.status?(t.$Toast("退出套餐成功"),t.queryMyHomeInfo()):t.$Toast(e.info?e.info:"退出套餐失败")}))}))},dealNum:function(t,e){var s=(100*t-100*e)/100;return s.toFixed(2)}},components:{}}),l=r,c=(s("5d96"),s("0c7c")),d=Object(c["a"])(l,i,a,!1,null,"3ec95fc5",null);e["default"]=d.exports},dd42:function(t,e,s){},f94a:function(t,e,s){t.exports=s.p+"static/images/24b66ca23e59fd090a1c1d5d977449cf.png"}}]);