(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d9177f2"],{1865:function(t,e,o){},"6ad0":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"index"},[o("nav-top",{on:{backEvent:t.goBack}}),t.loaded?o("nav-content",[o("div",{ref:"collection",staticClass:"no-collection"},[o("van-tabs",{staticClass:"van-tab-container",on:{change:t.changeTabs},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[o("van-tab",{attrs:{title:"收藏的商品"}},[o("div",[t.isShowCollect?t._e():o("div",[o("img",{staticClass:"no-collection-img",attrs:{src:"static/image/mall2/collection.png"}}),o("div",{staticClass:"recommend-div"},[o("Recommend")],1)]),t.isShowCollect?o("div",t._l(t.proList,(function(e,a){return o("div",{staticClass:"row theme_bg_white",on:{click:function(o){return t.productEvent(e)}}},[t._v(" "+t._s(t.dataProcessing(e))+" "),o("mt-cell-swipe",{staticClass:"cell-swipe",attrs:{right:[{content:"取消收藏",style:{padding:"20px 14px",background:"#F80F16",color:"white",display:"flex",alignItems:"center"},handler:function(){return t.collectEvent(e,a)}}]}},[o("div",{attrs:{slot:"title"},slot:"title"},[o("div",{staticClass:"img-div"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.phMainUrl,expression:"item.phMainUrl"}]})]),o("div",{staticClass:"info-div"},[o("div",{staticClass:"title theme_font_black double-line"},[t._v(t._s(e.skuName))]),o("div",{staticClass:"info-row price"},[o("span",{staticClass:"price-x theme_font_red"},[t._v("￥")]),o("span",{staticClass:"left-no-space price-z theme_font_red"},[t._v(t._s(e.dpedData.integer))]),o("span",{staticClass:"left-no-space price-x theme_font_red"},[t._v("."+t._s(e.dpedData.decimals))]),e.dpedData.linePrice?o("span",{staticClass:"font-small theme_font_tint line-through"},[t._v("￥"+t._s(e.dpedData.linePrice))]):t._e()])])])])],1)})),0):t._e()])]),o("van-tab",{attrs:{title:"收藏的微店"}},[o("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.collectionStore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[o("div",t._l(t.storeList,(function(e,a){return o("div",{key:a},[o("ul",[o("li",{on:{click:function(o){return t.operation(e)}}},[1==e.microStoreAttentionInfo.topFlag?o("p",{staticClass:"top"},[t._v("置顶")]):t._e(),o("div",{staticClass:"contain"},[o("div",{staticClass:"div1"},[o("img",{attrs:{src:e.pictureUrl?e.pictureUrl:"/static/image/microShop/head@2x.png",alt:""}}),o("div",{staticClass:"containDiv"},[o("p",{staticClass:"user"},[t._v(t._s(e.storeName))]),o("div",{staticClass:"code"},[t._v("关注店铺："+t._s(e.microStoreAttentionInfo.id))]),o("div",{staticClass:"count"},[o("p",[t._v("关注"),o("span",[t._v(t._s(e.microStoreAttentionInfo.attentionCount))])]),o("p",[t._v("订单"),o("span",[t._v(t._s(e.microStoreAttentionInfo.orderCount))]),t._v("笔")]),o("p",[t._v("成交额"),o("span",[t._v(t._s(e.microStoreAttentionInfo.sellAmount))]),t._v("元")])])])]),o("span",{staticClass:"iconfont mall-gengduo"})])])])])})),0)])],1),o("van-tab",{attrs:{title:"收藏的品牌"}},[o("div",{staticClass:"brand-list-container"},[o("van-list",{attrs:{finished:t.isFinished,"finished-text":"没有更多了",offset:200},on:{load:t.getBrandList},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},t._l(t.brandList,(function(e,a){return o("van-swipe-cell",{key:a,staticClass:"brand-item",scopedSlots:t._u([{key:"right",fn:function(){return[o("van-button",{staticClass:"cancel-collection",attrs:{type:"danger",text:"取消收藏"},on:{click:function(o){return o.stopPropagation(),t.cancelCollection(e)}}})]},proxy:!0}],null,!0)},[o("div",{staticClass:"item",on:{click:function(o){return o.stopPropagation(),t.brandClick(e)}}},[o("img",{staticClass:"logo",attrs:{src:e.logoUrl,alt:""}}),o("p",{staticClass:"brand-name"},[t._v(t._s(e.brandName))])])])})),1)],1)])],1)],1)]):t._e(),o("van-action-sheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),o("van-action-sheet",{attrs:{actions:t.actions1},on:{select:t.onSelect},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}})],1)},n=[],i=o("2909"),s=(o("e7e5"),o("d399")),c=(o("b0c0"),o("99af"),o("a9e3"),o("947f")),l="/app/json/micro_store_front_end/getCollectMicroStoreByUserId",r="/app/json/micro_store_front_end/sortOrCancelMicroStoreCollect",d="/app/json/micro_store_front_end/addOrCancelMicroStoreCollect",p={methods:{applyData:function(t){return this.$http.post(l,t)},upData:function(t){return this.$http.post(r,t)},collectionData:function(t){return this.$http.post(d,t)}}},u=o("a946"),h={name:"index",mixins:[p],components:{Recommend:c["a"]},data:function(){return{proList:[],loaded:!1,isShowCollect:!1,isShowshop:!0,scrollValue:0,active:0,show:!1,show1:!1,storeList:[],actions:[{name:"置顶"},{name:"取消收藏"}],actions1:[{name:"取消置顶"},{name:"取消收藏"}],page:0,loading:!1,finished:!1,topType:"",operationId:"",isLoading:!0,isFinished:!1,queryBrandPage:0,brandList:[]}},methods:{goBack:function(){this.$route.query.backApp?u["a"].navigatorBack({url:"0"}).then((function(t){})):this.$router.go(-1)},collectEvent:function(t){var e=this,o="/app/json/user_pro_collect/addOrCancelUserProCollect",a={token:this.$store.state.login.token,id:t.id,skuId:t.skuId,deliveryType:t.deliveryType,storeOuCode:t.storeOuCode};this.$http.post(o,a).then((function(t){var o=t.data;0==o.status?e._getCollectionData():e.$Toast(o.info)}),(function(t){e.$Toast("请求数据失败！")}))},dataProcessing:function(t){var e=this.$mallCommon.priceFromItem(t);t.dpedData=e},_getCollectionData:function(){var t=this;this.proList=[];var e="/app/json/product/loadUserProCollectList",o={token:this.$store.state.login.token};this.$Loading.open(),this.$http.post(e,o).then((function(e){t.$Loading.close();var o=e.data;0==o.status?(t.proList=o.data,t.proList.length>0?t.isShowCollect=!0:t.isShowCollect=!1,t.loaded=!0):(t.$Toast(o.info),t.isShowCollect=!1)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！"),t.isShowCollect=!1}))},productEvent:function(t){var e="/mall2/detail/"+this.$util.getDataString();2==t.productType&&(e="/mall2/ticketdetail"),this.$router.push({path:e,query:{id:t.id,skuId:t.skuId,lastPath:this.$route.path,productType:t.productType}})},onSelect:function(t){var e=this;e.show=!1,e.show1=!1,"置顶"==t.name||"取消置顶"==t.name?e.upFun():"取消收藏"==t.name&&e.collectionFun()},operation:function(t){var e=this;e.operationId=t.storeId,1==t.sortVal?(e.show=!1,e.show1=!0,e.topType=2):2==t.sortVal&&(e.show1=!1,e.show=!0,e.topType=1)},upFun:function(){var t=this,e={token:this.$store.state.login.token,id:t.operationId,topType:t.topType};t.upData(e).then((function(e){"success"===e.data.result&&(t.finished=!1,t.page=0,t.storeList=[],t.collectionStore())}))},collectionFun:function(){var t=this,e={token:this.$store.state.login.token,storeId:this.operationId};t.collectionData(e).then((function(e){"success"===e.data.result&&(t.finished=!1,t.page=0,t.storeList=[],t.collectionStore())}))},collectionStore:function(){var t=this;t.page=t.page+1;var e={token:this.$store.state.login.token,page:t.page,rows:10};t.loading=!0,t.applyData(e).then((function(e){if("success"===e.data.result){var o=e.data.data||[];t.storeList=t.storeList.concat(o)||[],t.page>=e.data.totalPages&&(t.finished=!0)}else Object(s["a"])(e.data.info);t.loading=!1}))},getBrandList:function(){var t=this;this.$Loading.open(),this.queryBrandPage++,this.isLoading=!0,this.$http.post("/app/json/product/loadUserBrandCollectList",{page:this.queryBrandPage,rows:20,collectType:3}).then((function(e){t.isLoading=!1;var o,a=e.data;0==a.status?a.data instanceof Array?((o=t.brandList).push.apply(o,Object(i["a"])(a.data)),t.brandList.length>=a.totalRecords&&(t.isFinished=!0)):t.isFinished=!0:t.$Toast(a.info);t.$Loading.close()}))["catch"]((function(e){t.$Toast("loadUserProCollectList err ".concat(e)),t.$Loading.close()}))},cancelCollection:function(t){var e=this;this.$http.post("/app/json/user_pro_collect/addOrCancelUserProCollect",{collectType:3,brandId:t.brandId,brandName:t.brandName,logoUrl:t.logoUrl}).then((function(t){var o=t.data;0==o.status?(e.$Toast("已取消收藏"),e.isLoading=!0,e.finished=!1,e.brandList=[],e.getBrandList()):e.$Toast(o.info)}),(function(t){e.$Toast("请求数据失败！")}))},brandClick:function(t){this.$router.push({path:"/brand_prod_list",query:{brandId:t.brandId}})},changeTabs:function(t){2==t&&(this.queryBrandPage=0,this.isFinished=!1,this.isLoading=!0,this.brandList=[],this.getBrandList())}},created:function(){this.active=this.$route.query.active?Number(this.$route.query.active):0},mounted:function(){},activated:function(){this._getCollectionData()},beforeRouteLeave:function(t,e,o){this.$keepaliveHelper.deleteCache(this),o()}},v=h,f=(o("a521"),o("0c7c")),g=Object(f["a"])(v,a,n,!1,null,"6d4ae7f4",null);e["default"]=g.exports},a521:function(t,e,o){"use strict";o("1865")}}]);