(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd259814"],{4056:function(t,e,i){"use strict";i("68ef"),i("9d70"),i("3743"),i("09fe")},6680:function(t,e,i){t.exports=i.p+"static/images/8e419da2765fc2ec6b4951597cd1de3e.png"},"81ba":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orderList"},[i("van-sticky",[i("div",{staticClass:"heard"},[i("div",{staticClass:"tab"},[i("div",{staticClass:"tab_back",on:{click:function(e){return t.goBack()}}},[i("van-icon",{staticClass:"arrow_left",attrs:{name:"arrow-left",color:"#000000",size:"0.471467rem"}})],1),t._l(t.tab,(function(e,a){return i("div",{key:a,staticClass:"tab_item",class:t.currentTab==a?"current_tab":"",on:{click:function(e){return t.changesTab(a)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]),i("div",{staticClass:"goods_list"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{load:t.onLoad,"update:error":function(e){t.error=e}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.allList,(function(e,a){return i("div",{key:a,staticClass:"goods_item",on:{click:function(i){return t.navToDetail(e)}}},[i("div",{staticClass:"goods_title"},[i("div",{staticClass:"goods_ID"},[t._v("#"+t._s(e.activityOrderItemNo))]),i("div",{staticClass:"goods_type"},[t._v(" "+t._s(0==e.activityOrderItemState?"待支付":1==e.activityOrderItemState?"待发货":2==e.activityOrderItemState?"待配送":3==e.activityOrderItemState?"待提货":4==e.activityOrderItemState?"已完成":5==e.activityOrderItemState?"已取消":"")+" ")])]),i("div",{staticClass:"good_user"},[i("div",{staticClass:"user"},[i("van-image",{staticClass:"user-image",attrs:{src:e.contactAvatar,"error-icon":t.defaultAvatar}}),i("div",{staticClass:"user_name"},[t._v(t._s(e.contactName))]),i("div",{staticClass:"user_phone"},[t._v(t._s(e.contactPhone))])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.activityOrderItemState||3==e.activityOrderItemState,expression:"\n                item.activityOrderItemState == 2 ||\n                item.activityOrderItemState == 3\n              "}],staticClass:"user_type",class:2==e.activityOrderItemState?"delivery":3==e.activityOrderItemState?"pick_up":""},[t._v(" "+t._s(2==e.activityOrderItemState?"配送上门":3==e.activityOrderItemState?"自提":"")+" ")])]),i("div",{staticClass:"goods_img"},t._l(e.orderSkuImg,(function(t){return i("img",{key:t,attrs:{src:t,alt:""}})})),0),i("div",{staticClass:"goods_detail"},[i("div",{staticClass:"detail"},[i("span",[t._v("共计"+t._s(e.productQuantity)+"件商品，合计支付 ")]),i("span",[t._v(t._s(e.totalAmount))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.activityOrderItemState&&4!==e.activityOrderItemState&&5!==e.activityOrderItemState,expression:"\n                item.activityOrderItemState !== 0 &&\n                item.activityOrderItemState !== 4 &&\n                item.activityOrderItemState !== 5\n              "}],staticClass:"confirm",on:{click:function(i){return i.stopPropagation(),t.confirm(e)}}},[t._v(" 确认"+t._s(1==e.activityOrderItemState?"送达":2==e.activityOrderItemState?"配送":3==e.activityOrderItemState?"提货":"")+" ")])])])})),0)],1)],1),i("van-popup",{model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[i("div",{staticClass:"popup"},[i("div",{staticClass:"popup_title"},[t._v("确认订单商品")]),i("div",{staticClass:"popup_detail"},[t._v(" "+t._s(1==t.skuInfo.activityOrderItemState?"抵达":2==t.skuInfo.activityOrderItemState?"送达消费者":3==t.skuInfo.activityOrderItemState?"被消费者提走":"")+" ")]),i("div",{staticClass:"popup_btn"},[i("div",{staticClass:"confirm_btn",on:{click:function(e){return t.confirmOrder()}}},[t._v("确认")]),i("div",{staticClass:"cancel_btn",on:{click:function(e){t.showPopup=!1}}},[t._v("取消")])])])])],1)},r=[],s=(i("d81d"),i("ac1f"),i("1276"),i("99af"),i("4328")),n=i.n(s),o=(i("acc4"),{name:"orderList",props:{},data:function(){return{defaultAvatar:i("6680"),tab:[{name:"待发货",value:1},{name:"待提货",value:3},{name:"已完成",value:4},{name:"已取消",value:5}],allList:[],currentTab:0,refreshing:!1,loading:!1,finished:!1,showPopup:!1,currentPage:1,error:!1,skuInfo:{}}},created:function(){this.loading=!0},methods:{goBack:function(){this.$router.go(-1)},changesTab:function(t){this.currentTab=t,this.currentPage=1,this.allList=[],this.onLoad()},onLoad:function(){this.loading=!0,this.error=!1,this.finished=!1;var t=this.currentPage,e=this.finished,i=this.tab,a=this.currentTab,r={pageNum:t,pageSize:10,sortBy:"create_time_DESC",orderItemState:i[a].value?i[a].value:""};e||this.getListFn(r)},onRefresh:function(){this.currentPage=1,this.finished=!1,this.refreshing=!0,this.loading=!0;var t={pageNum:this.currentPage,pageSize:10,sortBy:"create_time_DESC",orderItemState:tab[currentTab]?tab[currentTab].value:""};this.getListFn(t)},getListFn:function(t){var e=this,i=this.currentPage;this.$http.post("/app/json/group_buying_order/findGroupBuyingActivityOrderItemListByOrderId",n.a.stringify(t)).then((function(t){if(e.loading=!1,e.refreshing=!1,"success"==t.data.result){var a=t.data.data;if(i<a.pages||i==a.pages){var r=a.records;r.map((function(t){if(""!==t.productSkuInfo){var e=JSON.parse(t.productSkuInfo)[0];t.orderSkuImg=e.groupbuySkuPicurl.split(",")}else t.orderSkuImg=[]})),e.allList=e.allList.concat(r),e.currentPage++,i==a.pages&&(e.finished=!0)}else e.finished=!0}else e.refreshing=!1,e.error=!0}))["catch"]((function(t){e.$toast("请求失败，点击重新加载"),e.refreshing=!1,e.loading=!1,e.error=!0}))},navToDetail:function(t){this.$router.push({path:"/bulk_order_detail",query:{id:JSON.stringify(t.activityOrderItemNo)}})},confirm:function(t){this.showPopup=!0,this.skuInfo=t},confirmOrder:function(){var t=this,e=0;e=1==this.skuInfo.activityOrderItemState||2==this.skuInfo.activityOrderItemState||3==this.skuInfo.activityOrderItemState?this.skuInfo.activityOrderItemState:void 0,this.$http.post("/app/json/group_buying_order/confirmReceiveDeliveryPickup",{orderItemId:this.skuInfo.activityOrderItemNo,confirmType:e}).then((function(e){e.data.data.isTrue&&(t.showPopup=!1,t.$toast("操作成功"),t.changesTab(t.currentTab)),"error"==e.data.result&&(t.showPopup=!1,t.$toast(e.data.info))}))["catch"]((function(e){t.showPopup=!1,t.$toast("请求失败，请重新尝试")}))}}}),c=o,u=(i("c3e3"),i("0c7c")),d=Object(u["a"])(c,a,r,!1,null,"31d65c56",null);e["default"]=d.exports},"99c7":function(t,e,i){},acc4:function(t,e,i){"use strict";i("4056");var a=i("44bf"),r=i("a026");r["default"].use(a["a"])},c3e3:function(t,e,i){"use strict";i("99c7")}}]);