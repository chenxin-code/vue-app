(window.webpackJsonp=window.webpackJsonp||[]).push([[876],{CbB8:function(t,a,e){},K51k:function(t,a,e){"use strict";e.r(a);var s=e("wd/R"),i=e.n(s),r={data:function(){return{activeTab:0,tempActiveTab:0,queryTime:"",currentDate:"",isShowDatePicker:!1,maxDate:new Date,registerData:[],consumptionData:[],totalInfo:{totalNum:""}}},created:function(){this.queryTime=i()().format("YYYY-MM"),this.initReferUserNum(),this.initRegisterAwardList()},methods:{changeTabs:function(t){t!==this.tempActiveTab&&(this.initReferUserNum(),this.initRegisterAwardList()),this.tempActiveTab=t},initRegisterAwardList:function(){var t=this;this.$Loading.open();var a={referrerTime:this.queryTime};0==this.activeTab?a.refererType=1:a.refererType=3,this.$http.post("/app/json/user/getMyReferUserList",a).then((function(a){t.$Loading.close();var e=a.data;0==e.status?(e.data.regUserInfoList instanceof Array&&e.data.regUserInfoList.length>0&&e.data.regUserInfoList.forEach((function(t){t.referrerTime=i()(t.referrerTime).format("YYYY-MM-DD");var a=t.phone+"";t.phone=a.substr(0,3)+"****"+a.substr(7)})),0==t.activeTab?t.registerData=e.data.regUserInfoList||[]:t.consumptionData=e.data.regUserInfoList||[]):t.$Toast(e.info)})).catch((function(a){t.$Loading.close(),t.$Toast("queryRecommendRegisterAwardList err "+a)}))},confirmChoseDate:function(t){this.queryTime=i()(t).format("YYYY-MM"),this.isShowDatePicker=!1,this.initReferUserNum(),this.initRegisterAwardList()},initReferUserNum:function(){var t=this;this.$Loading.open();var a={referrerTime:this.queryTime};0==this.activeTab?a.refererType=1:a.refererType=3,this.$http.post("/app/json/user/getMyReferUserNum",a).then((function(a){t.$Loading.close();var e=a.data;0==e.status?t.totalInfo=e.data:t.$Toast(e.info)})).catch((function(a){t.$Loading.close(),t.$Toast("getMyReferUserNum err "+a)}))},dealwithProdName:function(t){var a="-";if(t){var e=[];JSON.parse(t).forEach((function(t){e.push(t.skuName)})),a=e.join(",")}return a}}},n=(e("OK8r"),e("KHd+")),o=Object(n.a)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav-top",{on:{backEvent:function(a){return t.$router.go(-1)}}}),t._v(" "),e("nav-content",{staticClass:"container"},[e("van-tabs",{attrs:{color:"#C9A063","title-active-color":"#C9A063"},on:{click:t.changeTabs},model:{value:t.activeTab,callback:function(a){t.activeTab=a},expression:"activeTab"}},[e("van-tab",{attrs:{title:"推荐注册"}}),t._v(" "),e("van-tab",{attrs:{title:"推荐消费"}})],1),t._v(" "),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"date-time",on:{click:function(a){t.isShowDatePicker=!0}}},[e("span",{staticClass:"date-text"},[t._v(t._s(t.queryTime))]),t._v(" "),e("van-icon",{staticClass:"icon-arrow",attrs:{name:"arrow-down"}})],1),t._v(" "),0==t.activeTab?e("div",{staticClass:"total-info"},[t._v("\n        共计推荐注册人数"),e("span",{staticClass:"num"},[t._v(t._s(t.totalInfo.totalNum||0))]),t._v("人\n      ")]):e("div",{staticClass:"total-info"},[t._v("\n        总计金额¥"),e("span",{staticClass:"num"},[t._v(t._s(t.totalInfo.totalOrderAmount||0))])])]),t._v(" "),0==t.activeTab?e("div",{staticClass:"table-container"},[e("div",{staticClass:"thead-c"},[e("p",{staticClass:"index"},[t._v("序号")]),t._v(" "),e("p",{staticClass:"name"},[t._v("日期")]),t._v(" "),e("p",{staticClass:"name"},[t._v("账号")])]),t._v(" "),e("div",{staticClass:"tbody-c"},t._l(t.registerData,(function(a,s){return e("div",{key:s,staticClass:"tr-c"},[e("div",{staticClass:"td-c"},[t._v(t._s(s+1))]),t._v(" "),e("div",{staticClass:"td-c"},[t._v(t._s(a.referrerTime))]),t._v(" "),e("div",{staticClass:"td-c"},[t._v(t._s(a.phone))])])})),0)]):e("div",{staticClass:"table-container"},[e("div",{staticClass:"thead-c"},[e("p",{staticClass:"index"},[t._v("序号")]),t._v(" "),e("p",{staticClass:"name"},[t._v("日期")]),t._v(" "),e("p",{staticClass:"name"},[t._v("商品")]),t._v(" "),e("p",{staticClass:"name"},[t._v("金额")])]),t._v(" "),e("div",{staticClass:"tbody-c"},t._l(t.consumptionData,(function(a,s){return e("div",{key:s,staticClass:"tr-c"},[e("div",{staticClass:"td-c"},[t._v(t._s(s+1))]),t._v(" "),e("div",{staticClass:"td-c"},[t._v(t._s(a.referrerTime))]),t._v(" "),e("div",{staticClass:"td-c"},[t._v(t._s(t.dealwithProdName(a.orderProInfos)))]),t._v(" "),e("div",{staticClass:"td-c"},[t._v("￥"+t._s(a.orderAmount))])])})),0)])],1),t._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:t.isShowDatePicker,callback:function(a){t.isShowDatePicker=a},expression:"isShowDatePicker"}},[e("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月","max-date":t.maxDate},on:{confirm:t.confirmChoseDate,cancel:function(a){t.isShowDatePicker=!1}},model:{value:t.currentDate,callback:function(a){t.currentDate=a},expression:"currentDate"}})],1)],1)}),[],!1,null,"3c9d99b2",null);a.default=o.exports},OK8r:function(t,a,e){"use strict";var s=e("CbB8");e.n(s).a}}]);