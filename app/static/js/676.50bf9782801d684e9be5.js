(window.webpackJsonp=window.webpackJsonp||[]).push([[676],{"2wRi":function(t,o,n){t.exports=n.p+"static/img/top-bg.9972178.png"},P2SV:function(t,o,n){"use strict";var a=n("uKMh");n.n(a).a},uKMh:function(t,o,n){},z8RJ:function(t,o,n){"use strict";n.r(o);var a=n("p46w"),i=n.n(a),s={name:"points-to-coupon",components:{},data:function(){return{jfhqCouponList:[],loaded:!1}},methods:{submitExchangeOrder:function(t){var o=this,n={exchangeDetailId:t.id};this.$Loading.open(),this.$http.post("/app/json/app_exchange/submitExchangeOrder",n).then((function(t){o.$Loading.close();var n=t.data,a=n.data||{};0==n.status?o.$market.doPay({payMode:305,payModeSub:305007},a.payInfo).then((function(){i.a.set("icbc_tradeNo",a.tradeNo)})).catch((function(){o.$Toast("支付失败！")})):o.$Toast(n.info)}),(function(t){o.$Loading.close(),o.$Toast("请求数据失败！")}))},resultHand:function(t,o){this.$Loading.close(),"1"==t?this.$router.replace({path:"/icbc/success",query:{orderType:o.orderType,orderId:o.id,fromPage:1}}):this.$Toast("支付失败！")},buyCouponEvent2:function(t){this.$router.push({path:"/icbc/coupondetail",query:{type:2,couponData:JSON.stringify(t)}})},backEvent:function(){this.$router.go(-1)},getJFCouponList:function(){var t=this,o={longitude:this.$store.state.currentLocation.posx,latitude:this.$store.state.currentLocation.posy};this.$Loading.open(),this.$http.post("/app/json/app_exchange/queryExchangeDetailList",o).then((function(o){t.$Loading.close();var n=o.data;0===n.status?(t.jfhqCouponList=n.data,t.loaded=!0):t.$Toast(n.info)}),(function(o){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))}},created:function(){this.getJFCouponList()}},e=(n("P2SV"),n("KHd+")),c=Object(e.a)(s,(function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"points-to-coupon"},[a("nav-top",{attrs:{bgImg:n("2wRi")},on:{backEvent:t.backEvent}}),t._v(" "),a("nav-content",[t.jfhqCouponList.length>0&&t.loaded?a("div",{staticClass:"jfhq-div"},t._l(t.jfhqCouponList,(function(o){return a("div",{staticClass:"coupon",on:{click:function(n){return t.buyCouponEvent2(o)}}},[a("div",{staticClass:"mianer"},[a("span",[t._v("¥")]),t._v(" "),a("span",{staticClass:"big"},[t._v(t._s(t.$util.toDecimal2(o.couType.couFaceValue)))])]),t._v(" "),a("div",{staticClass:"cou-info"},[a("div",{staticClass:"cou-title double-line"},[t._v(t._s(o.couType.couTypeTitle))]),t._v(" "),a("div",{staticClass:"cou-time"},[t._v("有效期："+t._s(o.couType.validDays)+"天")])]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"text"},[t._v("消耗积分")]),t._v(" "),a("div",{staticClass:"points"},[t._v(t._s(o.exchangeUnit))]),t._v(" "),a("div",{staticClass:"btn",on:{click:function(n){return n.stopPropagation(),t.submitExchangeOrder(o)}}},[t._v("立即兑换")])])])})),0):t._e(),t._v(" "),t.loaded&&0==t.jfhqCouponList.length?a("div",{staticClass:"no-data"},[t._v("暂无数据！")]):t._e()])],1)}),[],!1,null,"a26fc042",null);o.default=c.exports}}]);