(window.webpackJsonp=window.webpackJsonp||[]).push([[451],{"/3bs":function(t,o,e){t.exports=e.p+"static/img/storelogo.b78efed.png"},"Ho/E":function(t,o,e){"use strict";var s=e("IGe1");e.n(s).a},IGe1:function(t,o,e){},XGsk:function(t,o,e){"use strict";e.r(o),e("Ya7C");var s,n=e("0xSJ"),a=(e("CdMl"),e("LW2U")),i=e("ZToj"),c=e("L5r+"),r=(e("L71I"),e("ygAv"),e("oYx3"),e("0FX9"),e("sxGJ"),e("PxLX")),l=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t};function u(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var h={name:"",components:(s={},u(s,a.a.name,a.a),u(s,n.a.name,n.a),s),watch:{distance:function(){this.list=[],this.search()}},data:function(){return{dynamicCode:null,totalPage:null,pageInfo:{page:0,rows:10},list:[],show:!1,content:null,isLoading:!1,finished:!1,distance:5e3,keyWords:null,coupon:{},currentObj:{},option1:[{text:"5KM",value:5e3},{text:"10KM",value:1e4},{text:"20KM",value:2e4},{text:"50KM",value:5e4},{text:"100KM",value:1e5},{text:"全部",value:""}]}},created:function(){this.coupon=this.$route.query,this.loadMore(),this.getInfo()},methods:{clickSearch:function(){var t=this;c.a.open({initData:{barHeight:i.a.state.barHeight,searchHistory:[],flag:!1,text:"可用店铺"},clearSearchHistory:function(){i.a.state.mall2.searchHistory=[]},searchEvent:function(o){console.log(o,"searchStr"),c.a.close(),t.keyWords=o,console.log(o),t.list=[],t.search()}})},goToMap:function(t){console.log(t,this.$store.state),this.$bridgefunc.baiduNav({startlong:this.$store.state.currentLocation.posx,startlat:this.$store.state.currentLocation.posy,endlong:t.posx,endlat:t.posy,type:"nav"})},loadMore:function(){var t=this;this.isLoading=!0,this.pageInfo.page++,this.$Loading.open();var o=l({couTypeCode:this.coupon.couTypeCode,getType:"1",posx:this.$store.state.currentLocation.posx,posy:this.$store.state.currentLocation.posy,distLess:this.distance,storeOuName:this.keyWords},this.pageInfo);this.$http.post("/app/json/coupon/queryCanUseCouStoreList",o).then((function(o){var e,s=o.data;console.log(o),t.isLoading=!1,0==s.status?(console.log(t,"this"),t.totalPage=o.data.totalPages,t.totalPage==t.pageInfo.page&&(t.finished=!0),"[object Array]"==Object.prototype.toString.call(o.data.data)?(e=t.list).push.apply(e,function(t){if(Array.isArray(t)){for(var o=0,e=Array(t.length);o<t.length;o++)e[o]=t[o];return e}return Array.from(t)}(o.data.data)):t.finished=!0):t.$Toast(s.info),t.$Loading.close()})).catch((function(o){t.$Toast(o),t.finished=!0}))},backEvent:function(){"subject"==this.$route.query.type?this.$router.push({path:"/questionlist"}):"serviceSubject"==this.$route.query.type?this.$router.push({path:"/service/questionlist"}):"equity_car"==this.$route.query.type?this.$router.push({path:"/equity_card/equityList"}):this.$router.go(-1)},getInfo:function(){var t=this;this.$http.post("/app/json/news/getNewsList?values=64",{}).then((function(o){var e=o.data;console.log(o),0==e.status?t.content=o.data.data[0].content:t.$Toast(e.info)})).catch((function(o){t.$Toast(o)}))},search:function(){this.pageInfo.page=0,this.loadMore()},getMyCouInfo:function(){var t=this;"1"==this.$store.state.globalConfig.couponOpenVerify?r.a.open({type:"coupon_verify",sureFunc:this.imgSureFunc,vertifyCancelEvent:function(){t.$router.go(-1)},paras:{phone:this.$store.state.login.phone}}):this.couponRequest(null,null)},imgSureFunc:function(t,o){this.couponRequest(t,o)},couponRequest:function(t,o){var e=this;this.$Loading.open();var s=this.isGroupCoupon?this.couponList[this.ind].couNo:this.$route.query.couNo,n={token:this.$store.state.login.token,couNo:s};null!=t&&null!=o&&(n.type="20000",n.imgVerifyCode=t,n.uuid=o,n.couNo=this.coupon.couNo),this.$http.post("/app/json/coupon/getMyCouInfo",n).then((function(t){e.$Loading.close();var o=t.data;0==o.status?(console.log(o.data,"data.data"),e.dynamicCode=o.data.dynamicCode,window.location.href="http://mobile.shinexiche.com/welcome_wash?storeOuCode="+e.currentObj.storeCode+"&phone="+e.$store.state.login.phone+"&couNo="+e.coupon.couNo):"1"==e.$store.state.globalConfig.couponOpenVerify&&(e.$Toast("验证码验证失败，请重试！"),e.getMyCouInfo())}))},enter:function(){console.log(this.$store.state.login,"this.$store.state.login"),window.location.href="http://mobile.shinexiche.com/welcome_wash?storeOuCode="+this.currentObj.storeCode+"&phone="+this.$store.state.login.phone+"&couNo="+this.coupon.couNo},useBenefits:function(t){this.show=!0,this.currentObj=t}}},p=(e("Ho/E"),e("KHd+")),d=Object(p.a)(h,(function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"coupon-list"},[s("nav-top",{attrs:{title:"可用店铺"},on:{backEvent:t.backEvent}}),t._v(" "),s("nav-content",{staticClass:"coupon-center"},[s("div",{staticClass:"main"},[s("van-dropdown-menu",[s("van-dropdown-item",{attrs:{options:t.option1},model:{value:t.distance,callback:function(o){t.distance=o},expression:"distance"}}),t._v(" "),s("div",{staticClass:"right-top"},[s("div",{staticClass:"search-bg",on:{click:t.clickSearch}},[s("div",{staticClass:"search-main",staticStyle:{height:"30px","line-height":"30px"}},[s("i",{staticClass:"iconfont mall-sousuo theme_font_tint",staticStyle:{"font-size":"16px"}}),t._v("\n              "+t._s(t.keyWords?t.keyWords:"请输入可用店铺")+"\n            ")])])])],1),t._v(" "),s("ul",{staticClass:"stores-c"},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",offset:200},on:{load:t.loadMore},model:{value:t.isLoading,callback:function(o){t.isLoading=o},expression:"isLoading"}},t._l(t.list,(function(o,n){return s("li",{key:n,staticClass:"item"},[s("div",{staticClass:"top"},[s("div",{staticClass:"left"},[s("img",{staticClass:"prod-img",attrs:{src:e("/3bs"),alt:""}})]),t._v(" "),s("div",{staticClass:"center"},[s("p",{staticClass:"prod-name"},[t._v(t._s(o.ouName))]),t._v(" "),s("p",{staticClass:"prod-address"},[s("van-icon",{attrs:{name:"location-o"}}),t._v("地址："+t._s(o.addressFull))],1),t._v(" "),s("p",{staticClass:"prod-address"},[t._v("距离当前距离"+t._s(t.$util.toDecimal2(o.distance/1e3))+"km")])]),t._v(" "),s("div",{staticClass:"right",on:{click:function(e){return t.goToMap(o)}}},[s("img",{staticClass:"icon-nav",attrs:{src:e("oIWA"),alt:""}}),t._v(" "),s("span",{staticClass:"prod-distance"},[t._v("导航")])])])])})),0)],1)],1),t._v(" "),s("van-dialog",{attrs:{title:"使用授权协议及免责申明","show-cancel-button":"",confirmButtonText:"同意并继续"},on:{confirm:t.enter},model:{value:t.show,callback:function(o){t.show=o},expression:"show"}},[s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content)}},[t._v(" "+t._s(t.content))])])],1)],1)}),[],!1,null,"171a234b",null);o.default=d.exports},oIWA:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAAH7+Yj7AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAAE40lEQVRYCcWYTWhcVRTHM180doLk06Qk6hAiEVETjBUsWgeq+IEoCLH4QY0LLbpIIwpVd65E3Oha0YXFheJGqd3ECIJFwaLEdCGCUppFJ9+0Tprv8XeGOS937rvvYzoTfTCce8/5n/8599zz7ntvmpocV8LUtba2lmSe6OzszG9tbX1vGr2xoBTpKWXgVIphZGQk4wUCtSzgRCLxTcJ2WVlZ8YBlPhsQHEQCmVd7e/vr4i2/XU4QPsqKl8ROyTiXyzUjNiv6KlGVoGmB9bCG6+3t7VBbmVEnItfW1i40Nzc3sf6Zubm5r0xb5JgIP1ctxvYwFjfuA/b09OQI/7fpJAtKqqKtre2UMNgg7EuC8e2XOqrU8iQrg6pQCjJlOTTgfnHgOmUalU10vsUYK20ygd5iDKaxyvhJQ+cemqyK8IVWQ1zZ1dU1vLm5+RP4feJTE2GpVErQy6eRj7oClgvnMqiuo6NjbHt7+1Odh0ktZFpB0sqrq6u/Eb1PdZDpMFQmk8mbFJCmBj0cKX8Ui8XrVVmjPLa0tHRRfZw1pH9/INP7FRQkabTPlpeXj5l2J6EJcLWG2CGbhexGE1vW2wrX3EWqm2DjIzNUB5M0iEyxsaVJGuQUO8MgAtWzkc9R17G6Ccn6E0hfFGL68ZFrIuSB0Eodf4UjJ0R6SW29O0WVYZL7+OGdnZ0zAZvygfjGypD6vE+jvxEWTIMEZjgwMLBvYWFBjqVhyMK4pMnPK8CXISfMQQ6FHwFkFBQlW1pa9s/Ozl4VnEfIst4kk3ejnB32LZbrBU+z7ZOAjkQty0FUVrHcvGlLojhnKmodc0BIebwrieKk7BDXq5425oBGfseGejVUA7V8jOWf1nmY1FYxMb7nKBl/K0Ci324C7TErOmvrZO4jVBDH+nmchnRuy6GhoQdsncx9S7ZBriOLQFdZyX4bK/PADA2w6xXiHsNeNYzMUNB2lq7NUNY4GQp2wnNIJl/TcV1SsrQzdREGnjY2mDb6kP68xdbb81g1tJ32Ys7bcxcvxsfljiXxAxKD8df/S4Kjo6OpqampJ3ianCAZ5/1Bfn/S6oP/SYJ8Mg7yDBgn6AsklJXqhF1U7nIqlerjAXQlds+EEZq27u7u7MbGhrzfjZPMrWLj5dOERI13MpnMXXyfXRFg3RXkzjkMzwl+coD4PgrR1XRRuQcXFxe/U6eaKshWHaBvXuF3HIIblKRRkjv7ZTM54Q1MMJ/Pp6enp59im6SRDwm4xq0Sl9gXffceD5yPbAdvi3luyuNNGvl5ErrOBu7lnOS+5I592hUjQWK/k1Dos9fl2EDdOZ5NdwfxySvNHfLw4pJ/d94GWAgC74G+wLdquX2CuL0ttgFymE5OTh5Ff5IK32nbGzDf4Di5eX5+/lIYV2CCLie+JQ6RrLwvP469Jl+bL51OH+Qg/sXW2/O6gtC/n5PsMzZp1Jzj5Ch37BdROLHHfT9yctG/z9K3Z5zGACX4t+ImJxR1VVBzoJJnqeS9Og+RH3NDvhRi95kakiDJyX9WM8jbfBF2FVMkd2R3Gm9U1xZrCLat1N/fP4z0/lFSW0X+NTEx8ZClizVtSAU1krzJrK+vX2Du/aVM0v/w66XvLiuuFtmQCmrAQqFQzGazgyRUrOhKvJ2MXGtyyttwST/2cePM8LuvXvJ/ATbQs32MVWgTAAAAAElFTkSuQmCC"}}]);