(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66fb7174"],{"02b3":function(t,e,n){"use strict";n("6968")},"086f":function(t,e,n){"use strict";var o=n("d055"),a=n.n(o),s=function(t){return function(){var e=Array.prototype.slice.call(arguments);return new Promise((function(n,o){e.push((function(t,e){t?o(t):n(e)})),t.apply(null,e)}))}};function i(t){return"function"===typeof t}function r(t){return"string"===typeof t}var c=s(a.a.toCanvas),d=function(t){var e=t.canvas,n=t.content,o=t.width,a=void 0===o?0:o,s=t.nodeQrCodeOptions,i=void 0===s?{}:s;return i.errorCorrectionLevel=i.errorCorrectionLevel||l(n),u(n,i).then((function(t){return i.scale=0===a?void 0:a/t*4,c(e,n,i)}))},u=function(t,e){var n=document.createElement("canvas");return c(n,t,e).then((function(){return n.width}))},l=function(t){return t.length>36?"M":t.length>16?"Q":"H"},f=function(t){var e=t.canvas,n=(t.content,t.logo);if(n){var o=e.width,a=n.logoSize,s=void 0===a?.15:a,i=n.borderColor,r=n.bgColor,c=void 0===r?i||"#ffffff":r,d=n.borderSize,u=void 0===d?.05:d,l=n.crossOrigin,f=n.borderRadius,h=void 0===f?8:f,v=n.logoRadius,m=void 0===v?0:v,C="string"===typeof n?n:n.src,p=o*s,y=o*(1-s)/2,b=o*(s+u),$=o*(1-s-u)/2,q=e.getContext("2d");g(q)($,$,b,b,h),q.fillStyle=c,q.fill();var _=new Image;(l||m)&&_.setAttribute("crossOrigin",l||"anonymous"),_.src=C;var w=function(t){q.drawImage(t,y,y,p,p)},T=function(t){var e=document.createElement("canvas");e.width=y+p,e.height=y+p,e.getContext("2d").drawImage(t,y,y,p,p),g(q)(y,y,p,p,m),q.fillStyle=q.createPattern(e,"no-repeat"),q.fill()};return new Promise((function(t,e){_.onload=function(){m?T(_):w(_),t()}}))}},g=function(t){return function(e,n,o,a,s){var i=Math.min(o,a);return s>i/2&&(s=i/2),t.beginPath(),t.moveTo(e+s,n),t.arcTo(e+o,n,e+o,n+a,s),t.arcTo(e+o,n+a,e,n+a,s),t.arcTo(e,n+a,e,n,s),t.arcTo(e,n,e+o,n,s),t.closePath(),t}},h=function(t){return d(t).then((function(){return t})).then(f)},v=function(t){var e=document.createElement("canvas");return t.canvas=e,t.logo&&(r(t.logo)&&(t.logo={src:t.logo}),t.logo.crossOrigin="Anonymous"),h(t).then((function(){var n=t.image,o=void 0===n?new Image:n,a=t.downloadName,s=void 0===a?"qr-code":a,r=t.download;if(o.src=e.toDataURL(),!0===r||i(r)){r=!0===r?function(t){return t()}:r;var c=function(){m(o,s)};r(c)}}))},m=function(t,e){var n=t.src,o=document.createElement("a");o.download=e,o.href=n,document.body.appendChild(o),o.click(),document.body.removeChild(o)},C={toCanvas:h,toImage:v};e["a"]=C},"0adc":function(t,e,n){"use strict";var o=n("653a");function a(t){var e=void 0;if("海南省"==o["a"].state.globalConfig.province&&(e="hainan"),e){var n="static/enterpriseImg/"+e+"/"+t;return n}return null}e["a"]=a},1726:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agreement-content"},[n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.agreementContent)}})])},a=[],s={name:"agreement-content",components:{},props:["value","noloading"],data:function(){return{agreementContent:""}},methods:{getAgreement:function(){var t,e,n=this;"true"!=this.noloading&&this.$Loading.open(),18==this.value?(t="/app/json/news/getNewsList",e={values:52}):(t="/app/json/news/getList",e={token:this.$store.state.login.token,value:this.value}),this.$http.post(t,e).then((function(t){"true"!=n.noloading&&n.$Loading.close();var e=t.data,o=e.data;if(o&&""!=o){var a=o[0];n.agreementContent=a.content}}),(function(t){"true"!=n.noloading&&n.$Loading.close(),n.$Toast("请求数据失败！")}))}},mounted:function(){this.getAgreement()},created:function(){}},i=s,r=(n("ad60"),n("0c7c")),c=Object(r["a"])(i,o,a,!1,null,"9f41190a",null);e["a"]=c.exports},"52b1":function(t,e,n){},6968:function(t,e,n){},ad60:function(t,e,n){"use strict";n("52b1")},bed1:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-qrcode"},[n("nav-top",{on:{backEvent:t.backEvent}}),n("nav-content",{staticClass:"my-qrcode-container"},[n("div",{staticClass:"code-content"},[n("div",{staticClass:"top-div"},[n("div",{staticClass:"title-div"},[n("img",{attrs:{src:"static/image/setting/qrcode-tag.png",alt:""}}),n("p",{staticClass:"theme_font_white"},[t._v("会员码: "+t._s(t.myInfo.userNo))])])]),n("div",{staticClass:"qr-div"},[n("div",{staticClass:"head-div"},[n("img",{staticClass:"headImg",attrs:{src:t.$store.state.globalConfig.user_qrcode_icon?t.$store.state.globalConfig.user_qrcode_icon:"static/image/setting/logo.png",alt:""}})]),n("p",{staticClass:"phone"},[t._v(t._s(t.$store.state.login.phone))]),"2"!=t.$store.state.globalConfig.user_qrCode_type?n("div",{staticClass:"barcode"},[n("canvas",{attrs:{id:"barcode"}})]):t._e(),"1"!=t.$store.state.globalConfig.user_qrCode_type?n("div",{staticClass:"codeimg-content"},[n("div",{ref:"qrcode",staticClass:"qrcode"},[n("canvas",{attrs:{id:"qrcode"}})]),n("div",{staticClass:"icon",on:{click:t.refreshBtn}},[n("i",{staticClass:"iconfont mall-shuaxin"})])]):t._e()]),n("div",{staticClass:"qrcode-agreement"},[n("AgreementContent",{attrs:{value:"1"}})],1)])])],1)},a=[],s=(n("4795"),n("99af"),n("086f")),i=n("0adc"),r=n("62c5"),c=n.n(r),d=n("1726"),u=n("da71"),l={name:"my-qrcode",components:{QRCode:s["a"],AgreementContent:d["a"]},data:function(){return{myInfo:{},myTimeout:null,brightnessResult:{}}},methods:{backEvent:function(){this.$router.go(-1)},refreshBtn:function(){this.requestCode()},getMycode:function(){var t=this;this.$Loading.open();var e="/app/json/user/queryQrCodeInfo",n={token:this.$store.state.login.token};this.$http.post(e,n).then((function(e){t.$Loading.close();var n=e.data;0==n.status?(t.myInfo=n.data,t.$nextTick((function(){t.myInfo.qrCodeWithAppDownload?t.createQRCode(t.myInfo.qrCodeWithAppDownload):t.toCanvas(),t.myTimeout&&(clearTimeout(t.myTimeout),t.myTimeout=null),t.myTimeout=setTimeout((function(){t.getMycode()}),18e4)}))):t.$Toast(n.info)}),(function(e){t.$Loading.close()}))},toCanvas:function(){if("2"!=this.$store.state.globalConfig.user_qrCode_type){var t=document.getElementById("barcode");c()(t,this.myInfo.qrCode,{displayValue:!1})}if("1"!=this.$store.state.globalConfig.user_qrCode_type){var e=document.getElementById("qrcode"),n=e.getContext("2d");n.clearRect(0,0,e.width,e.height);var o="".concat(this.$store.state.globalConfig.wxBaseUrl).concat(u["a"].shareUrl,"/usercenter/downloadshare"),a=this.myInfo.qrCode;this.$route.query.isToRegiste&&(o="".concat(this.$store.state.globalConfig.wxBaseUrl).concat(u["a"].shareUrl,"/usercenter/loginbindqrcode")),this.$route.query.isPreRegiste&&(o="".concat(this.$store.state.globalConfig.wxBaseUrl).concat(u["a"].shareUrl,"/usercenter/preregistration")),2==this.$store.state.globalConfig.user_getUserRfrCode_isShortAddress?this.createQRCode(o+"?qrCode=".concat(a)):this.getShort(o,a)}},getShort:function(t,e){var n=this;this.$Loading.open();var o="/app/json/short_address/makeShortAddress",a={token:this.$store.state.login.token,longAddress:t,addressData:e};this.$http.post(o,a).then((function(t){n.$Loading.close();var o=t.data;0==o.status?n.createQRCode(o.data+"?qrCode=".concat(e)):n.$Toast(o.info)}),(function(t){n.$Loading.close()}))},createQRCode:function(t){if("2"!=this.$store.state.globalConfig.user_qrCode_type){var e=document.getElementById("barcode");c()(e,this.myInfo.qrCode,{displayValue:!1})}if("1"!=this.$store.state.globalConfig.user_qrCode_type){var n={canvas:document.getElementById("qrcode"),content:t,width:140,nodeQrCodeOptions:{margin:0}},o=Object(i["a"])("qr-logo.png");o&&(n.logo={src:o}),s["a"].toCanvas(n)}},getUserRfrCode:function(){var t=this;this.$Loading.open();var e="/app/json/user/getUserRfrCode",n={token:this.$store.state.login.token};this.$http.post(e,n).then((function(e){t.$Loading.close();var n=e.data;0==n.status?(t.myInfo=n.data,t.$nextTick((function(){t.toCanvas()}))):t.$Toast(n.info)}),(function(e){t.$Loading.close()}))},requestCode:function(){this.$route.query.isToRegiste||this.$route.query.isPreRegiste?this.getUserRfrCode():this.getMycode()}},mounted:function(){},created:function(){var t=this;this.requestCode(),this.$bridgefunc.brightness(1,0,(function(e){t.brightnessResult=e}))},destroyed:function(){this.myTimeout&&(clearTimeout(this.myTimeout),this.myTimeout=null),this.$bridgefunc.brightness(this.brightnessResult.value,this.brightnessResult.isauto,(function(t){}))}},f=l,g=(n("02b3"),n("0c7c")),h=Object(g["a"])(f,o,a,!1,null,"2f45e55f",null);e["default"]=h.exports}}]);