(window.webpackJsonp=window.webpackJsonp||[]).push([[345],{Q4si:function(t,e,s){},W9FF:function(t,e,s){"use strict";var i=s("Q4si");s.n(i).a},XdS8:function(t,e,s){},ksbq:function(t,e,s){"use strict";s.r(e),s("dqDD");var i={name:"aqgl",components:{gcanvas:s("wbJX").a},data:function(){return{showGesture:!1,gestureType:0,aqglList:[{name:"微信绑定",id:"5",type:1,isHide:"1"!=this.$store.state.globalConfig.isShowWXLoginBtn},{name:"支付宝绑定",id:"8",type:1,isHide:"1"!=this.$store.state.globalConfig.isShowAliLoginBtn},{name:"指纹密码",id:"2",type:0,value:this.$store.state.login.touchID,isHide:"1"==this.$store.state.globalConfig.isHideFingerprintBtn},{name:"人脸识别",id:"3",type:0,value:this.$store.state.login.faceID,isHide:!0},{name:"设置登录密码",id:"1",type:1},{name:"手势密码",id:"6",type:0,value:this.$store.state.login.gestureID,isHide:"1"==this.$store.state.globalConfig.isHideGestureBtn},{name:"手势设置",id:"4",type:1},{name:"自动加入自提点",id:"7",type:0,value:1==this.$store.state.addPickupAddressType}]}},methods:{getIndexArr:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s].index;e.push(i)}return e},isEqual:function(t){for(var e="",s="",i=0;i<this.$store.state.login.gestureNumbers.length;i++)e+=this.$store.state.login.gestureNumbers[i];for(i=0;i<t.length;i++)s+=t[i];return e===s},getGesture:function(t){if(this.isEqual(this.getIndexArr(t))){if(this.$refs.gcanvas.reset(),6==this.gestureType)return this.$store.state.login.gestureID=!1,this.$store.state.login.gestureNumbers=void 0,this.$store.state.login.gesturePwd="",this.$bridgefunc.vuexStorage(),this.$Toast("手势关闭成功"),void(this.showGesture=!1);if(4==this.gestureType)return this.showGesture=!1,void this.$router.push({path:"/usercenter/setgesture"})}else this.$Toast("手势错误"),this.$refs.gcanvas.reset()},getCellIsShow:function(t){return 4!=t.id||this.$store.state.login.gestureID},getSupportTypes:function(){var t=this;this.$bridgefunc.getSupportType((function(e){"1"==e.touchID&&(t.setShowWithID(2),console.log(123)),"1"==e.faceID&&t.setShowWithID(3)}))},setShowWithID:function(t){for(var e=0;e<this.aqglList.length;e++){var s=this.aqglList[e];s.id==t&&(s.isHide=!1)}},backEvent:function(){this.$router.go(-1)},changeSwitch:function(t,e){var s=this;2==t.id?this.$bridgefunc.fingerPrintRe((function(t){if("1"==t)s.$store.state.login.touchID?(s.$store.state.login.touchID=!1,s.$bridgefunc.vuexStorage(),s.$Toast("指纹登录关闭成功")):s.openSpecialPwd(4);else{var i=s.aqglList[e];i.value=!i.value,s.$Toast("指纹识别失败")}})):3==t.id?this.$bridgefunc.faceIDRe((function(t){if("1"==t)s.$store.state.login.faceID?(s.$store.state.login.faceID=!1,s.$bridgefunc.vuexStorage(),s.$Toast("面部登录关闭成功")):s.openSpecialPwd(3);else{var i=s.aqglList[e];i.value=!i.value,s.$Toast("识别失败")}})):6==t.id?(this.$store.state.login.gestureID?(this.gestureType=6,this.showGesture=!0):(this.$store.state.login.gestureID=!0,this.$Toast("手势打开成功")),this.$bridgefunc.vuexStorage()):7==t.id&&(1==this.$store.state.addPickupAddressType?this.$store.state.addPickupAddressType=2:this.$store.state.addPickupAddressType=1,this.$bridgefunc.vuexStorage())},openSpecialPwd:function(t){var e,s=this;return(e=regeneratorRuntime.mark((function e(){var i,n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.$bridgefunc.getArgsWithPromise();case 2:i=e.sent,s.$Loading.open("请求中"),"/app/json/user/openSpecialPwd",n=s.$store.state.login.token,a=(new Date).valueOf(),r={token:n,userPwdMode:t,pwdCode:a,deviceId:i.deviceId,deviceName:i.deviceName,deviceModel:i.model,authType:"1"},s.$http.post("/app/json/user/openSpecialPwd",r).then((function(e){s.$Loading.close();var i=e.data;0==i.status?(3==t?(s.$store.state.login.faceID=!0,s.$store.state.login.facePwd=i.data):4==t&&(s.$store.state.login.touchID=!0,s.$store.state.login.touchPwd=i.data),s.$bridgefunc.vuexStorage(),s.$Toast({message:i.info?i.info:"打开成功！",position:"bottom",duration:2e3})):s.$Toast({message:i.info?i.info:"打开失败！",position:"bottom",duration:2e3})}),(function(t){s.$Loading.close(),s.$Toast({message:"打开失败！",position:"bottom",duration:2e3})}));case 9:case"end":return e.stop()}}),e,s)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,s){return function i(n,a){try{var r=t[n](a),o=r.value}catch(t){return void s(t)}if(!r.done)return Promise.resolve(o).then((function(t){i("next",t)}),(function(t){i("throw",t)}));e(o)}("next")}))})()},jumpUrl:function(t){var e=this;if("0"==t.id)this.$MessageBox.confirm("修改手机号会将系统中绑定的加油卡</br>和微信自动解绑，是否继续？","提示",{confirmButtonText:"确定"}).then((function(t){e.$router.push({path:"/usercenter/choseway"})})).catch((function(t){}));else if("1"==t.id)this.$router.push({path:"/usercenter/setpassword"});else if("4"==t.id){if(!this.$store.state.login.gestureNumbers||0==this.$store.state.login.gestureNumbers.length)return void this.$router.push({path:"/usercenter/setgesture"});this.gestureType=4,this.showGesture=!0}else"5"==t.id?this.$router.push({path:"/usercenter/bindwechat"}):"8"==t.id?this.$router.push({path:"/usercenter/bindalipay"}):"9"==t.id&&this.$router.push({path:"/usercenter/canceluser"})}},created:function(){"1"==this.$store.state.globalConfig.has_cancel_user&&this.aqglList.push({name:"注销账户",id:"9",type:1}),this.getSupportTypes()}},n=(s("rnFh"),s("KHd+")),a=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"aqgl"},[s("nav-top",{on:{backEvent:t.backEvent}}),t._v(" "),s("nav-content",[s("ul",{staticClass:"aqgl-list mine-box-shodow"},t._l(t.aqglList,(function(e,i){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.getCellIsShow(e),expression:"getCellIsShow(item)"}],staticClass:"public-bar border-bottom",class:1==e.type?"icon-more":"",on:{click:function(s){return t.jumpUrl(e)}}},[e.isHide?t._e():[s("span",{staticClass:"left-text"},[t._v(t._s(e.name))]),t._v(" "),0==e.type?s("span",{staticClass:"right-text"},[s("mt-switch",{on:{change:function(s){return t.changeSwitch(e,i)}},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"item.value"}})],1):t._e()]],2)})),0),t._v(" "),t.showGesture?s("div",{staticClass:"gesturelogin"},[s("div",{staticClass:"gesturediv"},[s("gcanvas",{ref:"gcanvas",on:{getGesture:t.getGesture}})],1)]):t._e()])],1)}),[],!1,null,"11030700",null);e.default=a.exports},rnFh:function(t,e,s){"use strict";var i=s("XdS8");s.n(i).a},wbJX:function(t,e,s){"use strict";var i={name:"gcanvas",components:{},data:function(){return{ctx:"",devicePixelRatio:0,r:"",lastPoint:[],arr:[],restPoint:[],drawStyle:"red"}},methods:{init:function(){this.initDom(),this.lastPoint=[],this.touchFlag=!1,this.ctx=this.$refs.canvas.getContext("2d"),this.createCircle(),this.bindEvent()},reset:function(){this.createCircle()},bindEvent:function(){var t=this,e=this.$refs.canvas;e.addEventListener("touchstart",(function(e){e.preventDefault();for(var s=t.getPosition(e),i=0;i<t.arr.length;i++)if(Math.abs(s.x-t.arr[i].x)<t.r&&Math.abs(s.y-t.arr[i].y)<t.r){t.touchFlag=!0,t.lastPoint.push(t.arr[i]),t.drawPoint(this.drawStyle),t.restPoint.splice(i,1);break}}),!1),e.addEventListener("touchmove",(function(e){t.touchFlag&&t.update(t.getPosition(e))}),!1),e.addEventListener("touchend",(function(e){t.touchFlag&&(t.touchFlag=!1,t.update(void 0,!0),t.storePass(t.lastPoint))}),!1)},initDom:function(){this.devicePixelRatio=window.devicePixelRatio||1;var t=this.$refs.canvas,e=window.innerWidth,s=window.innerWidth;t.style.width=e+"px",t.style.height=s+"px",t.height=s*this.devicePixelRatio,t.width=e*this.devicePixelRatio},createCircle:function(){var t=0;this.r=this.ctx.canvas.width/14,this.lastPoint=[],this.arr=[],this.restPoint=[];for(var e=this.r,s=0;s<3;s++)for(var i=0;i<3;i++){var n={x:4*i*e+3*e,y:4*s*e+3*e,index:++t};this.arr.push(n),this.restPoint.push(n)}for(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),s=0;s<this.arr.length;s++)this.drawCle(this.arr[s].x,this.arr[s].y)},drawCle:function(t,e){this.ctx.fillStyle="#DDDDDD",this.ctx.beginPath(),this.ctx.arc(t,e,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},drawPoint:function(t){for(var e=0;e<this.lastPoint.length;e++)this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.arc(this.lastPoint[e].x,this.lastPoint[e].y,this.r/2.5,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},drawStatusPoint:function(t){for(var e=0;e<this.lastPoint.length;e++)this.ctx.strokeStyle=t,this.ctx.beginPath(),this.ctx.arc(this.lastPoint[e].x,this.lastPoint[e].y,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.stroke()},drawLine:function(t,e,s){this.ctx.beginPath(),this.ctx.strokeStyle=t,this.ctx.lineWidth=3,this.ctx.moveTo(this.lastPoint[0].x,this.lastPoint[0].y);for(var i=1;i<this.lastPoint.length;i++)this.ctx.lineTo(this.lastPoint[i].x,this.lastPoint[i].y);this.ctx.lineTo(e.x,e.y),this.ctx.stroke(),this.ctx.closePath()},getPosition:function(t){var e=t.currentTarget.getBoundingClientRect();return{x:(t.touches[0].clientX-e.left)*this.devicePixelRatio,y:(t.touches[0].clientY-e.top)*this.devicePixelRatio}},update:function(t,e){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(var s=0;s<this.arr.length;s++)this.drawCle(this.arr[s].x,this.arr[s].y);if(this.drawPoint(this.drawStyle),this.drawStatusPoint(this.drawStyle),e)this.lastPoint.length&&this.drawLine(this.drawStyle,this.lastPoint[this.lastPoint.length-1],this.lastPoint);else for(this.drawLine(this.drawStyle,t,this.lastPoint),s=0;s<this.restPoint.length;s++)if(Math.abs(t.x-this.restPoint[s].x)<this.r&&Math.abs(t.y-this.restPoint[s].y)<this.r){this.lastPoint.push(this.restPoint[s]),this.drawPoint(this.drawStyle),this.restPoint.splice(s,1);break}},storePass:function(t){this.$emit("getGesture",t)}},mounted:function(){this.init()},created:function(){}},n=(s("W9FF"),s("KHd+")),a=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gcanvas"},[e("canvas",{ref:"canvas",staticClass:"canvas"})])}),[],!1,null,"1bef0843",null);e.a=a.exports}}]);