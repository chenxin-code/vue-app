(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b02b4cca"],{"73ab":function(t,s,n){"use strict";n("7a48")},"7a48":function(t,s,n){},8203:function(t,s,n){"use strict";n.r(s);var i=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",[n("nav-content",[n("div",{staticClass:"contentImg"},[n("div",{staticClass:"contentImgBottom"},[n("span"),n("span",[t._v("会员特权")])])]),n("div",{staticClass:"list"},[n("scroll",{attrs:{pullUpLoad:!0,listenScroll:!0,data:t.equityArr.concat(t.openAccess),hasMore:t.isCanLoadMore}},[t._l(t.openAccess,(function(s,i){return n("div",{key:i,staticClass:"equity"},[n("div",{staticClass:"mark"},[n("span",{staticClass:"text"},[t._v(t._s("特权"+t.turnNumber[i+1]))])]),n("div",{staticClass:"equity-details"},[n("div",{staticClass:"equity-details-left"},[n("span",[t._v(t._s(s.activityTitle))])])])])})),t._l(t.equityArr,(function(s,i){return n("div",{key:"equityArr"+i,staticClass:"equity"},[n("div",{staticClass:"mark"},[n("span",{staticClass:"text"},[t._v(t._s("特权"+t.turnNumber[i+1+t.openAccess.length]))])]),n("div",{staticClass:"equity-details"},[n("div",{staticClass:"equity-details-left"},[n("span",[t._v(t._s(s.activityTitle))])])])])})),n("div",{staticClass:"explain"},[n("p",[t._v("活动说明")]),n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.cardPrompt)}})])],2)],1)]),n("div",{staticClass:"bottom-btns"},[n("span",{on:{click:t.openingBtn}},[t._v("10元/月，确认开通")])]),n("van-popup",{staticClass:"popupPhoneInfo",model:{value:t.popupPhoneInfo,callback:function(s){t.popupPhoneInfo=s},expression:"popupPhoneInfo"}},[t._v("该活动仅限江西移动用户参加！")]),n("van-popup",{staticClass:"popupCard",attrs:{"close-on-click-overlay":!1},model:{value:t.isOpening,callback:function(s){t.isOpening=s},expression:"isOpening"}},[n("div",{staticClass:"popupCardText"},[n("span",[t._v("开通双V会员10元/月，")]),n("span",[t._v("可享受更多特权，请确认是否开通！")])]),n("div",{staticClass:"popupCardBtn"},[n("span",{on:{click:function(s){t.isOpening=!1}}},[t._v("取消")]),n("span",{on:{click:t.isOpeningTrue}},[t._v("开通")])])]),n("van-popup",{staticClass:"popupCard",attrs:{"close-on-click-overlay":!1},model:{value:t.popupCard,callback:function(s){t.popupCard=s},expression:"popupCard"}},[n("div",{staticClass:"popupCardText"},[n("span",[t._v("您尚未绑定加油卡，")]),n("span",[t._v("需要绑定加油卡后方可参与活动！")])]),n("div",{staticClass:"popupCardBtn"},[n("span",{on:{click:function(s){t.popupCard=!1}}},[t._v("取消")]),n("span",{on:{click:t.openingCard}},[t._v("立即绑定")])])])],1)},a=[],e=(n("ac1f"),n("5319"),n("d3b7"),n("3ca3"),n("ddb0"),n("3ac8")),o={name:"opening",mixins:[e["a"]],data:function(){return{isOpening:!1,popupCard:!1,popupPhoneInfo:!1,isCanLoadMore:!1,cardPrompt:"",equityArr:[],openAccess:[]}},beforeRouteLeave:function(t,s,n){this.$keepaliveHelper.deleteCache(this),n()},mounted:function(){this.getNewsList(),this.getVVGetCouMktList(),this.queryCanAttendActivity()},methods:{queryCanAttendActivity:function(){var t=this;this.$request.post(this.queryCanAttendActivityUrl,{orderType:999001}).then((function(s){0==s.status?t.openAccess=s.data||[]:t.$Toast(s.info)}))},getVVGetCouMktList:function(){var t=this;this.$request.post(this.getVVGetCouMktListUrl,{activityTag:"移动双V会员"}).then((function(s){var n=s.data;0==s.status?t.equityArr=n:t.$Toast(s.info)}))},getNewsList:function(){var t=this;this.$request.post(this.getNewsListUrl,{values:25}).then((function(s){0==s.status?t.cardPrompt=s.data[0]?s.data[0].content:"":t.$Toast(s.info)}))},openingBtn:function(){var t=this,s={phone:this.userInfo.phone};this.$request.post(this.getPhoneInfoUrl,s).then((function(n){if(0==n.status){var i=n.data.data,a=JSON.parse(i.replace(/\s*/g,""));"1"!=a.code?t.popupPhoneInfo=!0:t.checkBindOilCard(s)}else t.$Toast(n.info)}))},checkBindOilCard:function(t){var s=this;this.$request.post(this.checkBindOilCardUrl,t).then((function(t){0==t.status?(s.popupCard=!t.data,s.isOpening=t.data):s.$Toast(t.info)}))},isOpeningTrue:function(){var t=this;this.$request.post(this.addTwoVMemberUrl,{phone:this.userInfo.phone}).then((function(s){0==s.status?(t.$Toast("开通成功"),t.isOpening=!1,t.$emit("checkTwo")):t.$Toast(s.info)}))},openingCard:function(){this.$router.push({path:"/addCard"})}},components:{Scroll:function(){return Promise.all([n.e("chunk-2d0b724a"),n.e("chunk-28c407f0")]).then(n.bind(null,"bba4"))}}},c=o,p=(n("73ab"),n("0c7c")),r=Object(p["a"])(c,i,a,!1,null,"2a3203f0",null);s["default"]=r.exports}}]);