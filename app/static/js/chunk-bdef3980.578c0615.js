(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdef3980"],{"0e58":function(t,e,s){},"34c9":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"place-order mall2"},[s("nav-top",{on:{backEvent:t.backEvent}}),s("nav-content",[s("div",{staticClass:"scroll-div"},[s("div",{staticClass:"block-div no-padding-bottom"},[t.$store.state.mall2.selectAddress.id>0&&2==t.deliveryType?s("div",{on:{click:t.toSelectAddress}},[s("div",{staticClass:"flex-row"},[s("div",{staticClass:"name theme_font_black"},[t._v(t._s(t.$store.state.mall2.selectAddress.receiverName))]),s("div",{staticClass:"name theme_font_black"},[t._v(t._s(t.$store.state.mall2.selectAddress.mobile))]),1==t.$store.state.mall2.selectAddress.isDefault?s("div",{staticClass:"act-item-full theme_bg_red theme_font_white"},[t._v("默认 ")]):t._e()]),s("div",{staticClass:"flex-row"},[s("div",{staticClass:"full theme_font_tint font-small"},[t._v(t._s(t.$store.state.mall2.selectAddress.addressFull))]),s("div",[s("i",{staticClass:"iconfont mall-gengduojiantou theme_font_tint icon-font"})])])]):t._e(),t.$store.state.mall2.selectAddress.id>0||2!=t.deliveryType?t._e():s("div",{on:{click:t.toSelectAddress}},[s("div",{staticClass:"flex-row"},[t._v(" 请选择地址信息 ")])]),t.$store.state.mall2.zitiAddress.id>0&&1==t.deliveryType?s("div",{on:{click:t.toSelectZitiAddress}},[s("div",{staticClass:"pickup-shop"},[s("div",{staticStyle:{flex:"1"}},[s("div",{staticClass:"flex-row"},[s("div",{staticClass:"name theme_font_black"},[t._v("自提店铺："+t._s(t.$store.state.mall2.zitiAddress.storeName))])]),s("div",{staticClass:"flex-row"},[s("div",{staticClass:"full theme_font_tint font-small",staticStyle:{"line-height":"1.4"}},[t._v(" "+t._s(t.$store.state.mall2.zitiAddress.addressFull)+" "+t._s(t.$store.state.mall2.zitiAddress.phone&&""!=t.$store.state.mall2.zitiAddress.phone?"("+t.$store.state.mall2.zitiAddress.phone+")":"")+" ")])])]),s("div",[s("i",{staticClass:"iconfont mall-gengduojiantou theme_font_tint icon-font"})])])]):t._e(),s("div",{staticClass:"colorfulline"},[s("img",{attrs:{src:"static/image/mall2/colorfulline.png"}})])]),2==t.pageType?s("div",[s("div",{staticClass:"block-div"},[s("div",{staticClass:"flex-row",on:{click:function(e){t.payWayPopShow=!0}}},[s("div",{staticClass:"label-middle theme_font_common"},[t._v("支付方式")]),s("div",{staticClass:"full"}),s("div",{staticClass:"theme_font_common right-margin"},[t._v(t._s(t.payWayText))]),s("div",[s("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])])]),s("div",{staticClass:"block-div theme_bg_white"},[s("div",{staticClass:"flex-row"},[s("div",{staticClass:"theme_font_gray full"},[t._v("预约单联系方式")])]),s("div",{staticClass:"flex-row"},[s("div",{staticClass:"label theme_font_common"},[t._v("姓名")]),s("div",{staticClass:"full input-bg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{placeholder:"请输入您的姓名"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),s("div",{staticClass:"flex-row"},[s("div",{staticClass:"label theme_font_common"},[t._v("联系电话")]),s("div",{staticClass:"full input-bg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"tel",placeholder:"请输入手机号码",maxlength:"11",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode)))",pattern:"[0-9]*"},domProps:{value:t.phone},on:{input:[function(e){e.target.composing||(t.phone=e.target.value)},function(e){t.phone=/^\d+/.exec(t.phone)?/^\d+/.exec(t.phone)[0]:""}]}})])])]),s("div",{staticClass:"block-div theme_bg_white"},[s("div",{staticClass:"pro-row"},[s("div",{staticClass:"img-div"},[s("img",{attrs:{src:this.img}})]),s("div",{staticClass:"info-div"},[s("div",{staticClass:"title theme_font_black"},[t._v(t._s(t.showTitle))]),s("div",{staticClass:"price theme_font_red"},[t._l(t.getPrices(),(function(e,i){return s("div",{staticClass:"price-item"},[0!=i?s("span",{staticClass:"xian"},[t._v(" ~ ")]):t._e(),s("span",[t._v("¥")]),s("span",{staticClass:"big"},[t._v(t._s(e.iNum)+".")]),s("span",[t._v(t._s(e.dNum))])])})),s("div",{staticClass:"theme_font_gray",staticStyle:{"text-align":"right",flex:"1"}},[t._v("x "+t._s(t.number))])],2)])]),s("div",{staticClass:"flex-row"},[s("div",{staticClass:"label theme_font_common"},[t._v("备注")]),s("div",{staticClass:"full input-bg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{placeholder:"请留下您想说的话"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})])])]),s("div",{staticClass:"block-div theme_bg_white"},[s("div",{staticClass:"flex-row"},[s("div",{staticClass:"label theme_font_gray"},[t._v("订单金额")]),s("div",{staticClass:"full"}),s("div",{staticClass:"theme_font_red total"},[s("span",{staticClass:"font-small"},[t._v("¥")]),t._v(" "+t._s(t.$util.toDecimal2(this.price*this.number)))])])])]):s("div",[s("div",{staticClass:"block-div theme_bg_white"},[s("div",{staticClass:"flex-row"},[s("div",{staticClass:"theme_font_gray full"},[t._v("预约单联系方式")])]),s("div",{staticClass:"flex-row"},[s("div",{staticClass:"label theme_font_common"},[t._v("姓名")]),s("div",{staticClass:"full input-bg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{placeholder:"请输入您的姓名"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),s("div",{staticClass:"flex-row"},[s("div",{staticClass:"label theme_font_common"},[t._v("联系电话")]),s("div",{staticClass:"full input-bg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"tel",placeholder:"请输入手机号码",maxlength:"11",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode)))",pattern:"[0-9]*"},domProps:{value:t.phone},on:{input:[function(e){e.target.composing||(t.phone=e.target.value)},function(e){t.phone=/^\d+/.exec(t.phone)?/^\d+/.exec(t.phone)[0]:""}]}})])])]),s("div",{staticClass:"block-div theme_bg_white"},[s("div",{staticClass:"pro-row"},[s("div",{staticClass:"img-div"},[s("img",{attrs:{src:this.img}})]),s("div",{staticClass:"info-div"},[s("div",{staticClass:"title theme_font_black"},[t._v(t._s(t.showTitle))]),s("div",{staticClass:"price theme_font_red"},[t._l(t.getPrices(),(function(e,i){return s("div",{staticClass:"price-item"},[0!=i?s("span",{staticClass:"xian"},[t._v(" ~ ")]):t._e(),s("span",[t._v("¥")]),s("span",{staticClass:"big"},[t._v(t._s(e.iNum)+".")]),s("span",[t._v(t._s(e.dNum))])])})),s("div",{staticClass:"theme_font_gray",staticStyle:{"text-align":"right",flex:"1"}},[t._v("x "+t._s(t.number))])],2)])]),s("div",{staticClass:"flex-row"},[s("div",{staticClass:"label theme_font_common"},[t._v("备注")]),s("div",{staticClass:"full input-bg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{placeholder:"请留下您想说的话"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})])])]),s("div",{staticClass:"block-div theme_bg_white"},[s("div",{staticClass:"flex-row"},[s("div",{staticClass:"label theme_font_gray"},[t._v("订单金额")]),s("div",{staticClass:"full"}),s("div",{staticClass:"theme_font_red total"},[s("span",{staticClass:"font-small"},[t._v("¥")]),t._v(" "+t._s(t.$util.toDecimal2(this.price*this.number)))])])])])]),s("div",{staticClass:"bottom-div"},[s("div",{staticClass:"btn theme_bg_red",on:{click:t.submitOrder}},[t._v("提交订单")]),s("div",{staticClass:"other"},[s("div",{staticClass:"theme_font_red total"},[s("span",{staticClass:"font-small"},[t._v("¥")]),t._v(" "+t._s(t.$util.toDecimal2(this.price*this.number)))])])]),t.payWayPopShow?s("pop-view",{on:{closeEvent:function(e){t.payWayPopShow=!1}}},[s("div",{staticClass:"pop-body"},[s("div",{staticClass:"pop-title theme_font_common"},[t._v("请选择支付方式")]),s("div",{staticClass:"items-div pop-scroll-div"},t._l(t.payWays,(function(e){return s("div",{staticClass:"item theme_font_common theme_bg_white_ef",class:{theme_light_bg:t.payWaySelected==e.tag,theme_standard_font_i:t.payWaySelected==e.tag,theme_standard_bdr_i:t.selectedPayWay.tag==e.tag},on:{click:function(s){return t.payWayEvent(e)}}},[t._v(t._s(e.text)+" ")])})),0),s("div",{staticClass:"bottom-btn theme_font_white theme_standard_bg bottom-space",on:{click:t.popSureEvent}},[t._v("确定 ")])])]):t._e()],1)],1)},a=[],l=(s("ac1f"),s("5319"),s("b0c0"),s("a020")),o={name:"place-order",components:{},data:function(){return{number:1,img:"",showTitle:"",price:0,name:"",phone:"",proId:"",remark:"",deliveryType:"",pageType:"1",carts:[],microStoreCode:"",payWayPopShow:!1,selectedPayWay:{},payWays:[{text:"在线支付",tag:"1"},{text:"货到付款",tag:"0"},{text:"提货付款",tag:"0"}]}},methods:{payWayEvent:function(t){0!=t.tag?this.selectedPayWay=t:this.$Toast("暂不支持！")},backEvent:function(){this.$router.go(-1)},toSelectZitiAddress:function(){var t=[this.proId];this.$router.push({path:"/mall2/mypickupaddress",query:{skuIds:JSON.stringify(t)}})},toSelectAddress:function(){this.$router.push({path:"/mall2/addresslist"})},settleCart:function(){var t=this,e="/app/json/app_purchase_order/settleCart",s={deliveryType:this.deliveryType,carts:this.carts,microStoreCode:this.microStoreCode};1==this.deliveryType?s.pickupId=this.$store.state.mall2.zitiAddress.id:s.userAddressId=this.$store.state.mall2.selectAddress.id,this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?t.$router.replace({path:"/mall2/submitfinished",query:s.data}):t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},submitOrder:function(){var t=this;if(""!=this.name&&""!=this.phone){var e="/app/json/app_purchase_order/submitOrder",s={token:this.$store.state.login.token,skuId:this.proId,buyCount:this.number,deliverType:this.deliveryType,subscOrdReceiver:this.name,subscOrdMobile:this.phone,Remark:this.remark};1==this.deliveryType?s.pickupId=this.$store.state.mall2.zitiAddress.id:s.userAddressId=this.$store.state.mall2.selectAddress.id,this.$http.post(e,s).then((function(e){t.$Loading.close();var s=e.data;0==s.status?t.$router.replace({path:"/mall2/submitfinished",query:s.data}):t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))}else this.$Toast("请完善预约单信息")},getPrices:function(){var t=[{price:this.price}];return l["a"].getPriceShow(t)}},created:function(){this.phone=this.$store.state.login.phone?this.$store.state.login.phone:"",this.name=this.$store.state.userInfo.nickName?this.$store.state.userInfo.nickName:"",this.proId=this.$route.query.id,this.number=this.$route.query.number,this.img=this.$route.query.img,this.showTitle=this.$route.query.showTitle,this.price=this.$route.query.price,this.deliveryType=this.$store.state.mall2.staticDeliverType,this.pageType=this.$route.query.pageType||"1","2"==this.pageType&&(this.carts=JSON.parse(this.$route.query.carts),this.microStoreCode=this.$route.query.microStoreCode||"",this.settleCart())}},r=o,n=(s("4a65"),s("0c7c")),c=Object(n["a"])(r,i,a,!1,null,"94f2d342",null);e["default"]=c.exports},"4a65":function(t,e,s){"use strict";s("0e58")},a020:function(t,e,s){"use strict";s("ac1f"),s("1276");var i=s("ca00"),a={getPriceShow:function(t){if(0==t.length)return"";for(var e=t[0].price,s=t[0].price,i=1;i<t.length;i++){var a=t[i].price;e>a&&(e=a),s<a&&(s=a)}if(e==s){var l=this.getINumDNum(e);return[l]}var o=this.getINumDNum(e),r=this.getINumDNum(s);return[o,r]},getINumDNum:function(t){var e=i["a"].toDecimal2(t),s=e.split("."),a=s[0],l=s[1];return{iNum:a,dNum:l}}};e["a"]=a}}]);