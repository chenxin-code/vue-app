(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07594b21"],{"4a61b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-top",{on:{backEvent:t.backEvent}}),a("nav-content",{directives:[{name:"show",rawName:"v-show",value:t.isDetail,expression:"isDetail"}],staticClass:"container mall2"},[a("div",{staticClass:"item"},[a("div",{staticClass:"leftImg"},[a("img",{staticClass:"img",attrs:{src:t.item.orderExtendData.picUrl,alt:""}})]),a("div",{staticClass:"center-content"},[a("span",{staticClass:"titer"},[t._v("设备编号："+t._s(t.item.orderExtendData.deviceCode))]),a("span",{staticStyle:{color:"#666"}},[t._v(t._s(t.item.orderExtendData.brandName)+t._s(t.item.orderExtendData.deviceName))]),a("span",{staticStyle:{color:"#666"}},[t._v(t._s(t.item.orderExtendData.stationName))])]),3==t.item.state&&10==t.item.rechargeState?a("div",{staticClass:"right-btn"},[a("span",[t._v("剩余")]),a("van-count-down",{attrs:{time:t.item.stockupFinishTimeNew,format:"mm:ss"}})],1):t._e()]),a("div",{staticClass:"explain"},[a("p",[t._v("服务信息")]),a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v("使用时长")]),a("div",{staticClass:"theme_font_black"},[t._v(t._s(20==t.item.rechargeState?t.item.rechargeNo:t.item.stockupFinishTime?((t.$util.getDateFromString(t.item.completeTime)-t.$util.getDateFromString(t.item.stockupFinishTime)>0?t.$util.getDateFromString(t.item.completeTime)-t.$util.getDateFromString(t.item.stockupFinishTime):0)/60).toFixed():0)+" 分钟")])]),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v("开始时间")]),a("div",{staticClass:"theme_font_black"},[t._v(t._s(t.item.stockupFinishTime||"--"))])]),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v("结束时间")]),a("div",{staticClass:"theme_font_black"},[t._v(t._s(t.item.completeTime||"--"))])]),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v("结束方式")]),a("div",{staticClass:"theme_font_black"},[t._v(t._s(t.rechargeState(t.item.rechargeState)))])])])]),a("div",{staticClass:"explain"},[a("p",[t._v("订单信息")]),a("div",{staticClass:"block-div"},[a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v("订单号")]),a("div",{staticClass:"theme_font_black"},[t._v(t._s(t.item.tradeNo))])]),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v("支付时间")]),a("div",{staticClass:"theme_font_black"},[t._v(t._s(t.item.paidTime))])]),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v("支付方式")]),a("div",{staticClass:"theme_font_black"},[t._v(t._s(0==t.item.priceMode?t.item.orderExtendData.payModeStr:t.getDictByAliasText(t.item.orderExtendData.priceMode))+"支付")])]),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v("订单时长")]),a("div",{staticClass:"theme_font_black"},[t._v(t._s(t.item.rechargeNo)+" 分钟")])]),a("div",{staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v("订单金额")]),a("div",{staticClass:"theme_standard_font"},[0==t.item.priceMode?[t._v(" ¥ "+t._s(t.$util.toDecimal2(t.item.orderExtendData.amount))+" ")]:[t._v(" "+t._s(t.item.orderExtendData.amount)+t._s(t.getDictByAliasText(t.item.orderExtendData.priceMode))+" ")]],2)]),t._l(t.acctListType,(function(e,i){return a("div",{key:i,staticClass:"flex-row"},[a("div",{staticClass:"label full theme_font_common"},[t._v(t._s(e.acctTypeName))]),a("div",{staticClass:"theme_standard_font"},[t._v("-￥"+t._s(t.$util.toDecimal2(e.acctTypeAmount)))])])})),a("span",{staticStyle:{display:"block",height:"1px",width:"100%","background-color":"rgb(232, 232, 232)","margin-bottom":"10px"}}),a("div",{staticClass:"flex-row top-padding"},[a("div",{staticClass:"full"}),a("div",{staticClass:"price theme_font_common"},[a("span",[t._v("实付金额:")]),a("span",{staticClass:"theme_standard_font"},[0==t.item.priceMode?[t._v(" ¥ "+t._s(t.$util.toDecimal2(t.item.payAmount))+" ")]:8==t.item.orderExtendData.priceMode?[t._v(" "+t._s(t.item.orderExtendData.amount)+t._s(t.getDictByAliasText(t.item.orderExtendData.priceMode))+" ")]:[t._v(" "+t._s(t.item.payAmount)+t._s(t.getDictByAliasText(t.item.orderExtendData.priceMode))+" ")]],2)])]),a("div",{staticClass:"flex-row top-padding"},[a("div",{staticClass:"full"}),a("div",{staticClass:"theme_font_common"},[3==t.item.state&&10==t.item.rechargeState?a("div",{staticClass:"bottom-btn"},[a("span",[a("a",{attrs:{href:"tel:"+t.item.orderExtendData.hotline}},[t._v("联系客服")])]),a("span",{on:{click:function(e){return e.stopPropagation(),t.stopClick.apply(null,arguments)}}},[t._v("强制结束")]),a("span",{on:{click:function(e){return e.stopPropagation(),t.addSubmit.apply(null,arguments)}}},[t._v("加时间")])]):t._e(),3!=t.item.state||20!=t.item.rechargeState&&30!=t.item.rechargeState?t._e():a("div",{staticClass:"bottom-btn"},[30!=t.item.rechargeState||t.item.afterSaleHasReturn?t._e():a("span",{on:{click:function(e){return e.stopPropagation(),t.applyRefund.apply(null,arguments)}}},[t._v("申请退款")])]),12==t.item.state?a("div",{staticClass:"bottom-btn"}):t._e(),70==t.item.state?a("div",{staticClass:"bottom-btn"},[a("span",[a("a",{attrs:{href:"tel:"+t.item.orderExtendData.hotline}},[t._v("联系客服")])]),a("span",{on:{click:function(e){return e.stopPropagation(),t.applyRefund.apply(null,arguments)}}},[t._v("我的申请")])]):t._e()])])],2)]),a("van-popup",{staticClass:"popupCard",attrs:{"close-on-click-overlay":!1},model:{value:t.stopStatus,callback:function(e){t.stopStatus=e},expression:"stopStatus"}},[a("div",{staticClass:"popupCardText"},[a("span",[t._v("设备正在运行是否要强制结束？")])]),a("div",{staticClass:"popupCardBtn"},[a("span",{on:{click:function(e){t.stopStatus=!1}}},[t._v("取消")]),a("span",{on:{click:t.stop}},[t._v("确定")])])])],1)],1)},s=[],o=a("ade3"),c=(a("414a"),a("7a823")),n=(a("b0c0"),a("4160"),a("159b"),a("b82d")),r={name:"home",mixins:[n["a"]],data:function(){return{title:"",isDetail:!1,stopStatus:!1,query:{},rowItem:{},item:{orderExtendData:[{}]},acctListType:[]}},components:Object(o["a"])({},c["a"].name,c["a"]),created:function(){var t=this;this.query=this.$route.query||{},this.$request.post("/app/json/app_self_washer_order/detail",{orderId:this.query.id,orderType:this.query.orderType}).then((function(e){0==e.status?(t.item=e.data||{},t.item.orderExtendData&&(t.item.orderExtendData=JSON.parse(t.item.orderExtendData)),t.item.stockupFinishTime&&(t.item.stockupFinishTimeNew=1e3*(60*t.item.rechargeNo-(t.$store.state.severTime.currentTime-t.$util.getDateFromString(t.item.stockupFinishTime)))),t.isDetail=!0,t.renderType()):t.$Toast(e.info)})),this.renderType()},mounted:function(){},methods:{renderType:function(){var t=this,e=[],a=this.$store.state.globalConfig.acctList,i={"acct.points":"Points","acct.rewards_a":"RewardsA","acct.rewards":"Rewards","acct.emp_rewards":"EmpRewards","acct.enterprise":"Enterprise","acct.limit_wallet":"LimitWallet","acct.elec":"Elec"},s=function(t){a.forEach((function(a){a.acctType===i[t]&&e.push({acctKey:a.acctType,detailsKey:"".concat(a.acctType.toLowerCase(),"Amount")})}))};for(var o in i)s(o);e.forEach((function(e){t.item[e.detailsKey]&&0!==t.item[e.detailsKey]&&t.acctListType.push({acctTypeName:$mallCommon.accTypeToName(e.acctKey),acctTypeAmount:t.item[e.detailsKey]})}))},backEvent:function(){this.$router.go(-1)},addSubmit:function(t){this.$router.push({path:"/device_management/payment",query:{addSubmit:!0,id:26}})},stopClick:function(t){this.stopStatus=!0,this.rowItem=t},stop:function(){var t=this;this.$request.post("/app/json/app_self_washer_order/stop",{orderType:this.rowItem.orderType,orderId:this.rowItem.id}).then((function(e){0==e.status?(t.getQueryOrder(t.queryOrder),t.$Toast("结束成功！")):t.$Toast(e.info)}))},buyAgain:function(){this.$router.push({path:"/device_management/payment",query:{id:this.item.orderExtendData.id}})},applyRefund:function(){this.$router.push({path:"/device_management/applyRefund",query:{item:JSON.stringify(this.item)}})}}},l=r,d=(a("9af1"),a("0c7c")),m=Object(d["a"])(l,i,s,!1,null,"45d58b60",null);e["default"]=m.exports},"9af1":function(t,e,a){"use strict";a("bccd")},b82d:function(t,e,a){"use strict";a("4160"),a("159b");e["a"]={data:function(){return{queryDictsByAliasArr:[]}},computed:{},components:{},created:function(){var t=this,e="/app/json/app_dict/getDictByAlias",a={token:this.$store.state.login.token,alias:"selfServiceDevicePayType"};this.$request.post(e,a).then((function(e){0==e.status?t.queryDictsByAliasArr=e.data||[]:t.$Toast(e.info)}))},methods:{useState:function(t){var e={typeText:"",color:""};return 0==t.deviceState?(e.typeText="已禁用",e.color="#e02d2c"):0==t.useState?(e.typeText="空闲中",e.color="#3c9443"):1==t.useState&&(e.typeText="使用中",e.color="#fe9010"),e},status:function(t){var e="";switch(t){case 70:e="审核中";break;case 12:e="已退款";break;case 71:e="已拒绝";break}return e},rechargeState:function(t){var e="";switch(t){case 0:e="启动失败";break;case 5:e="等待中";break;case 10:e="进行中";break;case 20:e="正常结束";break;case 30:e="强制结束";break}return e},getDictByAliasText:function(t){var e="";return this.queryDictsByAliasArr.forEach((function(a){a.dictKey!=t||(e=a.dictValue)})),e}}}},bccd:function(t,e,a){}}]);