(window.webpackJsonp=window.webpackJsonp||[]).push([[224,1005],{"6ZYp":function(t,e,s){"use strict";s.r(e);var a=s("5CqX"),i=s("DRbV"),o=s("T+U4"),r=s("L5r+"),n=s("xZc2"),c=s("hZLh"),l=s("9kh8"),d=s("tlkr"),u=s("YxET"),h=s("afTz"),p=s("lH8D"),f=(s("csf6"),s("mbR2")),y={name:"list",components:{PriceOrder:s("WQzh").a,Countdown:h.default,CardList:a.a,DetailList:i.a,Filtrate:o.a,GiftList:c.a,PullTo:l.a,Category:d.a,Recommend:p.a,AllCategory:u.a,AdPage:f.a},props:["componentName","orderCategory","vipUnitUserCode"],data:function(){return{deductionSkuId:"",listStyle:1,pickuYD:!1,selectedType:2,listZitiId:"",filterType:0,category:"",listData:[],showCreated:!1,showFiltrate:!1,filterBrands:[],filterFeatureies:[],pageType:"",activityId:"",couponId:"",subtotal:"0.00",searchKey:"",scrollTopValue1:0,backRefresh:!1,activityInfo:{},cartJS:n.a,cateLevel:"",nowPage:1,isCanLoadMore:!1,clsType:"1",isFirstEnter:!0,maxPrice:"",minPrice:"",lastPath:"",cateText:"全部分类",showCategory:!1,cateList:[],couFaceValue:"0",couThresholdAmount:"0",cartCanUseCouponAmount:"0",endTime:"",tipText:"",isNoList:!1,storeOuCode:"",showGuide:!1,showAllCategory:!1,addToCartItem:void 0,showProductImg:!1,showAddCartAn:!1,addCartBtnAn:!1,easyCardId:"",cardType:"",productType:"",categoryIdList:"",location:{},carts:[],num:0,occurData:{},paramsData_toPlaceOrder:{},resData_toPlaceOrder:{},cartProducts:[],showCartProducts:!1,loaded:!1}},mounted:function(){this.easyCardId=this.$route.query.easyCardId,this.cardType=this.$route.query.cardType},methods:{onChange:function(t,e){for(var s=-1,a=0;a<this.carts.length;a++){if(0==e){s=a;break}this.carts[a].skuId==t&&(this.carts[a].number=e)}s>-1&&this.carts.splice(s,1),this.carts.length?this._settleCart(this.carts[0].storeOuCode):(this.num=0,this.cartProducts=[],this.occurData={},this.saveTCPS_Carts())},getCouponTip:function(){var t=""!=this.cartCanUseCouponAmount?this.cartCanUseCouponAmount:"0";return parseFloat(t)>parseFloat(this.couThresholdAmount)?"您已可以使用优惠券，优惠"+this.couFaceValue+"元":"还差"+this.$util.toDecimal2(parseFloat(this.couThresholdAmount)-parseFloat(t))+"元可以优惠"+this.couFaceValue+"元"},cateEvent:function(t){this.showCreated=!1,this.filterBrands=[],this.filterFeatureies=[],this.showAllCategory=!1,this.showCategory=!1,this.cateText=t.name,this.category=t.id,this.cateLevel=t.cateLevel,this.clsType=t.clsType,this.nowPage=0,this._loadProList()},categoryEvent:function(){""!=this.pageType?this.showCategory=!this.showCategory:this.showAllCategory=!this.showAllCategory},getGiftText:function(){return 3==this.activityInfo.linkType?"选择赠品":4==this.activityInfo.linkType?"选择换购":5==this.activityInfo.linkType?"查看赠品":6==this.activityInfo.linkType?"查看换购":void 0},goCart:function(){1==this.$route.query.fromCart?this.$router.go(-1):this.$router.push({path:"/mall2/cart",query:{orderCategory:this.orderCategory,vipUnitUserCode:this.vipUnitUserCode}})},goGift:function(){var t=n.a.getGiftIsOnlyScan(this.activityInfo),e=n.a.getGiftType(this.activityInfo);c.a.open({listData:this.activityInfo.gift,activityId:this.activityInfo.mktActivityId,sureFunc:this.sureFunc,isScan:t,giftType:e})},sureFunc:function(t){var e=this;this.$Loading.open();var s={token:this.$store.state.login.token,carts:t,deliveryType:this.selectedType,orderCategory:this.orderCategory,vipUnitUserCode:this.vipUnitUserCode};this.$http.post("/app/json/app_cart/addCart",s).then((function(t){e.$Loading.close();var s=t.data;0==s.status?(e.$store.state.mall2.cartNum=s.data,e.$Toast("添加购物车成功！")):e.$Toast(s.info)}),(function(t){e.$Loading.close(),e.$Toast("请求数据失败！")}))},backEvent:function(){this.$router.go(-1)},toSearchEvent:function(){var t=this;r.a.open({initData:{barHeight:this.$store.state.barHeight,searchHistory:this.$store.state.mall2.searchHistory},clearSearchHistory:function(){t.$store.state.mall2.searchHistory=[]},searchEvent:function(e){r.a.close(),t.$mallCommon.pushSearchHistory(e),t.searchKey=e,t.nowPage=0,t._loadProList()}})},listStyleEvent:function(){1==this.listStyle?this.listStyle=2:this.listStyle=1},filtrateCloseEvent:function(){this.showFiltrate=!1},selectedTypeEvent:function(t){this.$store.state.mall2.staticDeliverType=t,this.$bridgefunc.vuexStorage(),this.selectedType=t,1==t&&""==this.$store.state.mall2.zitiAddress.id?(this.backRefresh=!0,this.$router.push({path:"/mall2/mypickupaddress"})):(this.nowPage=0,this._loadProList(),this._getCartCount())},filterEvent:function(t){this.showCategory=!1,0==t?this.filterType=0:1==t?2==this.filterType?this.filterType=0:this.filterType=2:2==t&&(3==this.filterType?this.filterType=4:this.filterType=3),this.nowPage=0,this._loadProList()},filtrateEvent:function(t){this.showFiltrate=!1,this.filterBrands=[],this.filterFeatureies=[];for(var e=0;e<t.brands.length;e++)this.filterBrands.push(t.brands[e].id);for(var s=0;s<t.featureies.length;s++)this.filterFeatureies.push({id:t.featureies[s].id,featureType:t.featureies[s].featureType});this.maxPrice=t.maxPrice,this.minPrice=t.minPrice,this.nowPage=0,this._loadProList()},superFilter:function(){this.showCategory=!1,this.showFiltrate=!0,this.showCreated=!0},_loadProList:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isCanLoadMore=!1,this.isNoList=!1;var a=this.nowPage+1;0==this.nowPage&&(this.listData=[]),this.$Loading.open();var i={token:this.$store.state.login.token,page:a,rows:20,orderByKey:"",ascOrDesc:"",deliverType:this.selectedType,categoryId:this.category,cateLevel:this.cateLevel,brandIds:this.filterBrands,featureIds:this.filterFeatureies,couTypeCode:this.couponId,activityId:this.activityId,proName:this.searchKey,clsType:this.clsType,maxPrice:this.maxPrice,minPrice:this.minPrice,easyCardId:this.$route.query.easyCardId,orderCategory:this.orderCategory,vipUnitUserCode:this.vipUnitUserCode};1==this.filterType?(i.orderByKey="1",i.ascOrDesc="0"):2==this.filterType?(i.orderByKey="1",i.ascOrDesc="1"):3==this.filterType?(i.orderByKey="0",i.ascOrDesc="0"):4==this.filterType&&(i.orderByKey="0",i.ascOrDesc="1"),i.supportCountryDelivery="0",i.area={provinceId:this.location.provinceId,cityId:this.location.cityId,countryId:this.location.countryId,townId:this.location.townId};var o=this.$route.query.storeOuCode;o&&(i.storeOuCode=o),this.productType&&""!=this.productType&&(i.productType=this.productType),""!=this.categoryIdList&&(i.categoryIdList=this.categoryIdList),this.$http.post("/app/json/product/getAppProSearchList",i).then((function(a){e.$Loading.close();var o=a.data;if(0==o.status){if(e.activityId?e.$actionStatistics.listAction("130020",JSON.stringify(i),e.activityId):e.$actionStatistics.listAction("130010",JSON.stringify(i),e.activityId),0!=e.nowPage)e.listData=e.listData.concat(o.data.list);else if(e.listData=o.data.list,0==e.listData.length?"1"!=sessionStorage.getItem("Pickup_YD_Is_Show")?(e.pickuYD=!0,sessionStorage.setItem("Pickup_YD_Is_Show","1")):e.isNoList=!0:(e.deductionSkuId=e.listData[0].skuId,e.storeOuCode=e.listData[0].storeOuCode,s&&e.$refs.All_Category.loadProCateList(e.storeOuCode)),""!=e.pageType&&e.cateList.length<=1){var r=o.data.cateList;e.cateList=[{name:"全部分类",id:"",childList:[{name:"全部分类",id:""}]}];for(var n=0;n<r.length;n++){var c=r[n].childList;e.cateList=e.cateList.concat(c)}}e.nowPage++,o.data.page.count<=e.listData.length?e.isCanLoadMore=!1:e.isCanLoadMore=!0}else e.$Toast(o.info);t&&t("done")}),(function(s){t&&t("done"),e.$Loading.close(),e.$Toast("请求数据失败！")}))},productEvent:function(t){this.$router.push({path:"/mall2/city-delivery/detail",query:{id:t.id,skuId:t.skuId,storeOuCode:this.$route.query.storeOuCode}})},_getCartCount:function(){var t=this;if(""!=this.$store.state.login.token){var e={token:this.$store.state.login.token,deliveryType:this.selectedType,orderCategory:this.orderCategory,vipUnitUserCode:this.vipUnitUserCode};this.$http.post("/app/json/app_cart/getCartCount",e).then((function(e){var s=e.data;0==s.status?t.$store.state.mall2.cartNum=s.data:t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))}},addToCart:function(t){for(var e=!1,s=0;s<this.carts.length;s++)if(this.carts[s].skuId==t.skuId){if(e=!0,t.stockNum<parseInt(this.carts[s].number)+1)return void this.$Toast("当前商品库存不足！");this.carts[s].number=parseInt(this.carts[s].number)+1}if(0==e){if(t.stockNum<1)return void this.$Toast("当前商品库存不足！");this.carts.push({skuId:t.skuId,storeOuCode:t.storeOuCode,activityId:this.activityId,selfActivityId:t.activityId,deliveryType:"2",number:1})}this._settleCart(t.storeOuCode)},_settleCart:function(t){var e=this;this.num=0;for(var s=0;s<this.carts.length;s++)this.num+=parseInt(this.carts[s].number);this.$Loading.open();var a={token:this.$store.state.login.token,carts:this.carts,deliveryType:"2",userAddress:this.location,userAddressId:"",couNo:["-1"]};this.$http.post("/app/json/app_cart/SettleCart",a).then((function(t){e.$Loading.close();var s=t.data;0==s.status?(e.loaded=!0,e.paramsData_toPlaceOrder=a,e.resData_toPlaceOrder=s.data,e.occurData=s.data.occur[0],e.getCartsProducts()):e.$Toast(s.info)}),(function(t){e.$Loading.close(),e.$Toast("请求数据失败！")}))},getCartsProducts:function(){var t=[];this.num=0;for(var e=[],s=this.occurData.store[0],a=0;a<s.activity.length;a++)for(var i=s.activity[a].cart,o=0;o<i.length;o++)t.push(i[o]),this.num+=i[o].number,e.push({skuId:i[o].skuId,storeOuCode:i[o].storeOuCode,activityId:this.activityId,selfActivityId:i[o].activityId,deliveryType:"2",number:i[o].number});for(var r=s.noActivityCart,n=0;n<r.length;n++)t.push(r[n]),this.num+=r[n].number,e.push({skuId:r[n].skuId,storeOuCode:r[n].storeOuCode,activityId:this.activityId,selfActivityId:r[n].activityId,deliveryType:"2",number:r[n].number});this.cartProducts=t,this.carts=e,this.saveTCPS_Carts()},saveTCPS_Carts:function(){sessionStorage.setItem("TCPS_Carts",JSON.stringify({carts:this.carts,cityId:this.location.cityId,storeOuCode:this.$route.query.storeOuCode}))},getTCPS_Carts:function(){return JSON.parse(sessionStorage.getItem("TCPS_Carts"))},selectAddressClick:function(){this.backRefresh=!0,this.$store.state.location.selectType="4",this.$router.push({path:"/cityselector/0"})},productImgAfterEnter:function(t){this.showProductImg=!1,this.showAddCartAn=!0},beforeEnter:function(t){t.style.transform="translate3d(0,0,0)",t.children[0].style.opacity=0},afterEnter:function(t){var e=this,s=t.getBoundingClientRect().bottom,a=t.children[0].getBoundingClientRect().left,i=this.$refs.gouwuche.getBoundingClientRect().left,o=this.$refs.gouwuche.getBoundingClientRect().top;t.style.transform="translate3d(0,"+(o-s)+"px,0)",t.style.transition="transform .55s cubic-bezier(0.3, -0.25, 0.7, -0.15)",t.children[0].style.transform="translate3d("+(i-a)+"px,0,0)",t.children[0].style.transition="transform .55s linear",t.children[0].style.opacity=1,this.showAddCartAn=!1,t.addEventListener("transitionend",(function(){e.addCartBtnAn=!0,e.$refs.gouwuche.addEventListener("webkitAnimationEnd",(function(){e.addCartBtnAn=!1}))}))},toPlaceOrder:function(){if(0!=this.num){if(this.resData_toPlaceOrder.occur.length>0){var t=this.resData_toPlaceOrder.occur[0];if(t.startAmount>0&&t.startAmount>t.realAmount)return void this.$Toast(t.startAmount+"元起送！")}var e={res:this.resData_toPlaceOrder,paramsData:this.paramsData_toPlaceOrder,deliveryType:"2"};this.$router.push({name:"citydeliveryplaceorder",params:e})}},testCarts:function(){var t=this.getTCPS_Carts();t&&t.cityId==this.location.cityId&&t.storeOuCode==this.$route.query.storeOuCode?(this.carts=t.carts||[],this.carts.length>0&&this._settleCart(this.carts[0].storeOuCode)):(this.carts=[],this.cartProducts=[],this.num=0,this.occurData={},this.saveTCPS_Carts())}},created:function(){var t=this;"2"==this.$store.state.globalConfig.city_delivery_default_filter_type?this.filterType="2":"3"==this.$store.state.globalConfig.city_delivery_default_filter_type?this.filterType="3":"4"==this.$store.state.globalConfig.city_delivery_default_filter_type&&(this.filterType="4"),this.lastPath=this.$route.query.lastPath?this.$route.query.lastPath:"",this.searchKey=this.$route.query.searchKey?this.$route.query.searchKey:"",this.clsType=this.$route.query.clsType?this.$route.query.clsType:"1",this.cateText=this.$route.query.categoryName?this.$route.query.categoryName:"全部分类",this.nowPage=0,this.isCanLoadMore=!1,this.isNoList=!1;var e=sessionStorage.getItem("Address_City_Seleted");e?(e=JSON.parse(e),this.location=e,this._loadProList(null,!0),this.testCarts()):this.$bridgefunc.getLocation((function(e){var s={province:e.province,city:e.city,district:e.area};e.city==e.province&&(s.city=e.area,s.district=""),t.$mallCommon.pureLocationAnalysis((function(e){t.location=e,sessionStorage.setItem("Address_City_Seleted",JSON.stringify(e)),t._loadProList(null,!0),t.testCarts()}),s)}))},activated:function(){if(this.backRefresh){this.backRefresh=!1;var t=sessionStorage.getItem("Address_City_Seleted");t&&(t=JSON.parse(t),this.location=t,this.nowPage=0,this._loadProList(null,!0))}else this.$refs.listContent.setScrollTopValue(this.scrollTopValue1);this.loaded&&this.testCarts()},beforeRouteLeave:function(t,e,s){t.path!=this.lastPath?this.scrollTopValue1=this.$refs.listContent.getScrollTopValue():this.$keepaliveHelper.deleteCache(this),s()}},v=(s("oxqz"),s("KHd+")),g=Object(v.a)(y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("nav-top",{on:{backEvent:t.backEvent}}),t._v(" "),s("nav-content",[s("div",{staticClass:"all-content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"local-div single-line",on:{click:function(e){return t.selectAddressClick()}}},[s("span",{staticClass:"theme_font_gray single-line"},[t._v(t._s(t.location.cityName))]),t._v(" "),s("i",{staticClass:"iconfont mall-arrow-down icon-size theme_font_gray"})]),t._v(" "),s("div",{staticClass:"search-div theme_bg_white_f5",on:{click:t.toSearchEvent}},[s("i",{staticClass:"iconfont mall-sousuo theme_font_tint",staticStyle:{"font-size":"16px"}}),t._v(" "),s("span",{staticClass:"theme_font_tint single-line"},[t._v(t._s(t.searchKey?t.searchKey:"搜你想要的商品"))])])]),t._v(" "),s("div",{staticClass:"row row-filter top-showdow"},[""==t.categoryIdList?s("div",{staticClass:"filter-btn theme_font_black",on:{click:t.categoryEvent}},[s("i",{staticClass:"iconfont mall-datubiao filter-size-1 theme_font_black"}),t._v(" "),s("span",{staticClass:"cate single-line"},[t._v(t._s(t.cateText))])]):t._e(),t._v(" "),s("div",{staticClass:"filter-btn theme_font_black",on:{click:function(e){return t.filterEvent(0)}}},[s("span",{staticClass:"single-line",class:{theme_standard_font_i:0==t.filterType}},[t._v("综合排序")])]),t._v(" "),s("div",{staticClass:"filter-btn theme_font_black",on:{click:function(e){return t.filterEvent(1)}}},[s("span",{staticClass:"single-line",class:{theme_standard_font_i:1==t.filterType||2==t.filterType}},[t._v("销量")])]),t._v(" "),s("div",{staticClass:"filter-btn theme_font_black",on:{click:function(e){return t.filterEvent(2)}}},[s("span",{staticClass:"single-line",class:{theme_standard_font_i:3==t.filterType||4==t.filterType}},[t._v("价格")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.filterType||4==t.filterType,expression:"filterType == 3 || filterType == 4"}]},[s("i",{staticClass:"iconfont mall-sanjiaoxiabiao arrow-icon theme_font_tint",class:{theme_standard_font_i:3==t.filterType}}),t._v(" "),s("i",{staticClass:"iconfont mall-xiala arrow-icon theme_font_tint",class:{theme_standard_font_i:4==t.filterType}})])]),t._v(" "),s("div",{staticClass:"filter-btn theme_font_black",on:{click:t.superFilter}},[s("span",{staticClass:"single-line"},[t._v("筛选")]),t._v(" "),s("i",{staticClass:"iconfont mall-shaixuan filter-size theme_font_tint"})])]),t._v(" "),s("div",{staticClass:"list-content"},[s("div",{staticClass:"list-pull-to"},[s("pull-to",{ref:"listContent",attrs:{bottomConfig:{pullText:"",triggerText:"释放更新",loadingText:"加载中...",doneText:t.isCanLoadMore?"加载完成":"没有更多数据了",failText:"加载失败",loadedStayTime:400,stayDistance:40,triggerDistance:50},"bottom-load-method":t._loadProList,isBottomAutoS:!0,isBottomBounce:t.isCanLoadMore}},[s("div",[""!=t.pageType&&""!=t.endTime?s("div",{staticClass:"list-tip theme_bg_yl theme_font_red"},[s("p",[t._v("限时促销： "+t._s(t.tipText))]),t._v(" "),s("p",[t._v("距离结束：\n                  "),s("countdown",{attrs:{endTime:t.endTime}})],1)]):t._e(),t._v(" "),t.listData.length>0?s("CardList",{attrs:{listData:t.listData,cartProducts:t.cartProducts},on:{productEvent:t.productEvent,addToCart:t.addToCart}}):t._e(),t._v(" "),s("div",{staticClass:"bottom-space"})],1)])],1),t._v(" "),t.isNoList&&""==t.pageType?s("div",{staticClass:"no-list"},[s("div",{staticClass:"img-div"},[s("img",{attrs:{src:"static/image/mall2/no-data-img.png"}})]),t._v(" "),s("div",{staticClass:"tip theme_font_gray"},[t._v("抱歉没有找到相应商品~")])]):t._e()]),t._v(" "),t.cateList.length>0?s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCategory,expression:"showCategory"}],staticClass:"category-div"},[s("Category",{attrs:{cateList:t.cateList},on:{closeEvent:function(e){t.showCategory=!1},cateEvent:t.cateEvent}})],1):t._e(),t._v(" "),s("div",{staticClass:"settle-div"},[s("div",{staticClass:"cart-icon",on:{click:function(e){e.stopPropagation(),t.showCartProducts=!0}}},[s("i",{staticClass:"iconfont mall-gouwuche btn-icon theme_font_red"}),t._v(" "),t.num>0?s("div",{staticClass:"num theme_bg_red"},[t._v(t._s(t.num))]):t._e()]),t._v(" "),s("div",{staticClass:"info"},[s("div",{staticClass:"price"},[s("span",[t._v("¥")]),t._v(" "),s("span",{staticClass:"big"},[t._v(t._s(t.occurData.payAmount||0))])]),t._v(" "),s("div",{staticClass:"yf"},[t._v("\n            另需配送费"+t._s(t.occurData.freightAmount||0)+"元\n          ")])]),t._v(" "),s("div",{staticClass:"btn theme_standard_bg",on:{click:function(e){return e.stopPropagation(),t.toPlaceOrder(e)}}},[t._v("去结算")])])])]),t._v(" "),s("transition",{attrs:{name:"bounce"},on:{afterEnter:t.productImgAfterEnter}},[t.showProductImg&&t.addToCartItem?s("img",{staticClass:"productImg",attrs:{src:this.addToCartItem.phMainUrl,alt:""}}):t._e()]),t._v(" "),s("transition",{on:{"after-enter":t.afterEnter,"before-enter":t.beforeEnter}},[t.showAddCartAn&&t.addToCartItem?s("div",{staticClass:"anProductImg"},[s("img",{attrs:{src:this.addToCartItem.phMainUrl,alt:""}})]):t._e()]),t._v(" "),s("AllCategory",{directives:[{name:"show",rawName:"v-show",value:t.showAllCategory,expression:"showAllCategory"}],ref:"All_Category",attrs:{barHeight:t.$store.state.barHeight},on:{closeEvent:function(e){t.showAllCategory=!1},cateEvent:t.cateEvent}}),t._v(" "),t.showCreated?s("Filtrate",{directives:[{name:"show",rawName:"v-show",value:t.showFiltrate,expression:"showFiltrate"}],attrs:{category:t.category},on:{filtrateEvent:t.filtrateEvent,closeEvent:t.filtrateCloseEvent}}):t._e(),t._v(" "),t.showCartProducts?s("pop-view",{staticClass:"mall2",on:{closeEvent:function(e){t.showCartProducts=!1}}},[s("div",{staticClass:"pop-body"},[s("div",{staticClass:"pop-title theme_font_common"},[t._v("已选商品")]),t._v(" "),s("div",{staticClass:"pop-scroll-div"},t._l(t.cartProducts,(function(e,a){return s("div",{staticClass:"pro-row"},[s("div",{staticClass:"img-div"},[s("img",{attrs:{src:e.phPictureUrl}})]),t._v(" "),s("div",{staticClass:"info-div"},[s("div",{staticClass:"title theme_font_black"},[t._v(t._s(e.productName))]),t._v(" "),s("div",{staticClass:"title theme_font_black"},[s("span",[t._v(t._s(e.specs))])]),t._v(" "),s("div",{staticClass:"price pop-mdps"},[s("PriceOrder",{attrs:{productData:e}}),t._v(" "),s("van-stepper",{staticClass:"wish-prod-stepper",attrs:{max:e.saleNumMax,min:0,step:e.saleNumStep,integer:""},on:{change:function(s){return t.onChange(e.skuId,e.number)}},model:{value:e.number,callback:function(s){t.$set(e,"number",s)},expression:"prodata.number"}})],1)])])})),0)])]):t._e()],1)}),[],!1,null,"7a29f7de",null);e.default=g.exports},AXlJ:function(t,e,s){},chc6:function(t,e,s){"use strict";var a=s("2nGb"),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,s,a){return s&&t(e.prototype,s),a&&t(e,a),e}}(),r=document.getElementsByTagName("head")[0],n=function(){function t(e,s){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e||"",this.funcName=s;var i=document.createElement("script");e+=(~e.indexOf("?")?"&":"?")+"callback="+s,i.src=e,i.type="text/javascript",this.myTimer=setTimeout((function(){a.callCallback({status:1,info:"网络加载较慢！"}),a.clearup()}),1e4),window[s]=function(t){a.callCallback({status:0,data:t,info:""}),a.clearup()},i.onerror=function(){a.callCallback({status:1,info:"网络加载较慢！"}),a.clearup()},this.scriptNode=i,r.appendChild(this.scriptNode)}return o(t,[{key:"then",value:function(t){this.callbackFunc=t}},{key:"callCallback",value:function(t){var e=this;setTimeout((function(){e.callbackFunc(t)}),0)}},{key:"clearup",value:function(){this.myTimer&&clearTimeout(this.myTimer),this.myTimer=null,this.scriptNode.src="",r.removeChild(this.scriptNode)}}]),t}(),c={request:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!t)throw new Error("url 不能为空");return 0!=t.indexOf("http")&&(t=a.a.baseURL+t),s.forEach((function(e){if("object"===(void 0===e?"undefined":i(e)))for(var s in e)t+=~t.indexOf("?")?"&":"?",t+=s+"="+e[s]})),new n(t,e)},cancelAll:function(){}};e.a=c},csf6:function(t,e,s){"use strict";var a=s("N4/4"),i=s("ZToj"),o=s("dRp0"),r=s("VQwz"),n=s("mfrH"),c=(s("ygAv"),{checkIsInitialLoad:function(t){"cnooc"!=i.a.state.globalConfig.app_home_special_flag?0==i.a.state.mall2.pickupAddressChecked?(i.a.state.mall2.pickupAddressChecked=!0,a.a.vuexStorage(),c.getLocation(t)):t(null):t()},getLocation:function(t){a.a.getLocation((function(e){e.city&&""!=e.city?(i.a.state.currentLocation.posx=e.longitude,i.a.state.currentLocation.posy=e.latitude,c.loadNeerPickupAddress(t)):t(null)}))},loadNeerPickupAddress:function(t){var e={posx:i.a.state.currentLocation.posx,posy:i.a.state.currentLocation.posy,page:{index:1,pageSize:1}};o.a.post("/app/json/user_address/searchSelfliftAddressList",e).then((function(e){var s=e.data;if(console.log("自提站点列表:",s),0==s.status)if(s.data&&s.data.length>0){var a=s.data[0];c.checkEqualAndDistance(a,t)}else t(null);else t(null)}),(function(e){t(null),console.log("自提站点",e)}))},checkEqualAndDistance:function(t,e){t.id!=i.a.state.mall2.zitiAddress.id&&t.distance<500?r.a.confirm("距离您最近的自提点是："+t.storeName+",是否切换到最近自提点","提示").then((function(s){console.log(s),c.reSelectPickupAddress(t,e)})).catch((function(t){e(null)})):e(null)},reSelectPickupAddress:function(t,e){i.a.state.mall2.zitiAddress=t,a.a.vuexStorage((function(){e(t)})),i.a.state.login.token&&""!=i.a.state.login.token&&(n.a._addToMyPickupAddress(t.id),n.a._setDefaultPickupAddress(t.id))}});e.a=c},g2bL:function(t,e,s){"use strict";var a=s("AXlJ");s.n(a).a},mAB0:function(t,e,s){},mbR2:function(t,e,s){"use strict";var a=s("chc6"),i={name:"adpage",components:{ImageAd:function(){return s.e(772).then(s.bind(null,"BAEh"))}},props:["pageAdKeywords","pgCode"],data:function(){return{pageData:null,show:!1}},computed:{showAdpage:function(){var t=this.show&&null!=this.pageData&&this.pageData.adData&&""!=this.pageData.adData;return t&&null==this.pageData.adData.rows.find((function(t){return 0!=t.canSee}))&&(t=!1),t}},methods:{adPageIsShow:function(t){var e=window.localStorage.getItem(this.pageAdKeywords+t);e?(new Date).getTime()>e&&(this.show=!0):this.show=!0},adPageHide:function(){this.show=!1},getMyPageData:function(){var t=this,e="vuePageData_",s=[];s.push({appType:1}),s.push({accessType:2}),this.pgCode&&""!=this.pgCode?(e+=this.pgCode,s.push({pgCode:this.pgCode})):(s.push({pageAdKeywords:this.pageAdKeywords}),e+=this.$util.md5String(this.pageAdKeywords)),a.a.request("/appcontent/js/app_vue_page/vuePageData.js",e,s).then((function(e){if(0==e.status){var s=e.data.pageData;if(!s.pageDataJson)return;t.pageData=JSON.parse(s.pageDataJson);var a=e.data.id||"",i=t.pageData.adData;if(t.adPageIsShow(a),i&&t.show)if("1"==i.showFrequency){var o=new Date;o=o.setDate(o.getDate()+1),o=new Date(o).setHours(2,0,0,0);var r=new Date(o).getTime();window.localStorage.setItem(t.pageAdKeywords+a,r)}else if("2"==i.showFrequency){var n=new Date;n=n.setDate(n.getDate()+999);var c=new Date(n).getTime();window.localStorage.setItem(t.pageAdKeywords+a,c)}else if("3"==i.showFrequency){var l=(new Date).getTime()+36e3;window.localStorage.setItem(t.pageAdKeywords+a,l)}else if("4"==i.showFrequency){var d=(new Date).getTime()+0;window.localStorage.setItem(t.pageAdKeywords+a,d)}else{var u=(new Date).getTime()+36e5;window.localStorage.setItem(t.pageAdKeywords+a,u)}}}))}},created:function(){this.getMyPageData()}},o=(s("g2bL"),s("KHd+")),r=Object(o.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showAdpage?s("div",{staticClass:"adpage",on:{click:function(e){return e.stopPropagation(),t.adPageHide(e)}}},[s("div",[s("ImageAd",{attrs:{usePorpData:!0,propData:t.pageData},on:{closeEvent:t.adPageHide}})],1)]):t._e()}),[],!1,null,"52850f74",null);e.a=r.exports},oxqz:function(t,e,s){"use strict";var a=s("mAB0");s.n(a).a}}]);