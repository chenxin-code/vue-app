(window.webpackJsonp=window.webpackJsonp||[]).push([[552,911],{"4Oc+":function(t,e,n){},Osj4:function(t,e,n){"use strict";var s=n("L2JU"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t};e.a={data:function(){return{isDisplay:null,turnNumber:{1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九",10:"十",11:"十一",12:"十二",13:"十三",14:"十四",15:"十五",16:"十六",17:"十七",18:"十八"},getNewsListUrl:"/app/json/news/getNewsList",checkTwoVMemmberUrl:"/app/json/app_jx_hui_buy/checkTwoVMemmber",checkBindOilCardUrl:"/app/json/app_jx_hui_buy/checkBindOilCard",cancelTwoVMemberUrl:"/app/json/app_jx_hui_buy/cancelTwoVMember",getPhoneInfoUrl:"/app/json/app_jx_hui_buy/getPhoneInfo",addTwoVMemberUrl:"/app/json/app_jx_hui_buy/addTwoVMember",getVVGetCouMktListUrl:"/app/json/app_market/getVVGetCouMktList",getCouScanUrl:"/app/json/app_market/getCouScanUrl",queryGetCouActivityAwardUrl:"/app/json/app_market/queryGetCouActivityAward",getUnusedCouponsWithColsUrl:"/app/json/coupon/getUnusedCouponsWithCols",getUsedCouponsUrl:"/app/json/coupon/getUsedCoupons",getMyCouInfoUrl:"/app/json/coupon/getMyCouInfo",useVVCouUrl:"/app/json/app_market/useVVCou",queryCanAttendActivityUrl:"/app/json/app_market/queryCanAttendActivity"}},computed:a({},Object(s.c)(["userInfo"])),methods:{checkTwoVMemmber:function(){var t=this;this.$request.post(this.checkTwoVMemmberUrl,{phone:this.userInfo.phone}).then((function(e){0==e.status?(Object.assign(t.statusObj,e.data||{}),t.isDisplay=Object.keys(e.data).length?2:1):t.$Toast(e.info)}))},replacePhone:function(t){return t.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},duplicateRemoval:function(t,e){var n={};return t.reduce((function(t,s){return!n[s[e]]&&(n[s[e]]=t.push(s)),t}),[])}}}},ggMg:function(t,e,n){"use strict";n.r(e);var s={name:"opening",mixins:[n("Osj4").a],data:function(){return{isOpening:!1,popupCard:!1,popupPhoneInfo:!1,isCanLoadMore:!1,cardPrompt:"",equityArr:[],openAccess:[]}},beforeRouteLeave:function(t,e,n){this.$keepaliveHelper.deleteCache(this),n()},mounted:function(){this.getNewsList(),this.getVVGetCouMktList(),this.queryCanAttendActivity()},methods:{queryCanAttendActivity:function(){var t=this;this.$request.post(this.queryCanAttendActivityUrl,{orderType:999001}).then((function(e){0==e.status?(console.log(11,e),t.openAccess=e.data||[]):t.$Toast(e.info)}))},getVVGetCouMktList:function(){var t=this;this.$request.post(this.getVVGetCouMktListUrl,{activityTag:"移动双V会员"}).then((function(e){var n=e.data;0==e.status?t.equityArr=n:t.$Toast(e.info)}))},getNewsList:function(){var t=this;this.$request.post(this.getNewsListUrl,{values:25}).then((function(e){0==e.status?t.cardPrompt=e.data[0]?e.data[0].content:"":t.$Toast(e.info)}))},openingBtn:function(){var t=this,e={phone:this.userInfo.phone};this.$request.post(this.getPhoneInfoUrl,e).then((function(n){if(0==n.status){var s=n.data.data;"1"!=JSON.parse(s.replace(/\s*/g,"")).code?t.popupPhoneInfo=!0:t.checkBindOilCard(e)}else t.$Toast(n.info)}))},checkBindOilCard:function(t){var e=this;this.$request.post(this.checkBindOilCardUrl,t).then((function(t){0==t.status?(e.popupCard=!t.data,e.isOpening=t.data):e.$Toast(t.info)}))},isOpeningTrue:function(){var t=this;this.$request.post(this.addTwoVMemberUrl,{phone:this.userInfo.phone}).then((function(e){0==e.status?(t.$Toast("开通成功"),t.isOpening=!1,t.$emit("checkTwo")):t.$Toast(e.info)}))},openingCard:function(){this.$router.push({path:"/addCard"})}},components:{Scroll:function(){return Promise.all([n.e(0),n.e(55)]).then(n.bind(null,"u6Q6"))}}},a=(n("uBxM"),n("KHd+")),o=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav-content",[n("div",{staticClass:"contentImg"},[n("div",{staticClass:"contentImgBottom"},[n("span"),t._v(" "),n("span",[t._v("会员特权")])])]),t._v(" "),n("div",{staticClass:"list"},[n("scroll",{attrs:{pullUpLoad:!0,listenScroll:!0,data:t.equityArr.concat(t.openAccess),hasMore:t.isCanLoadMore}},[t._l(t.openAccess,(function(e,s){return n("div",{key:s,staticClass:"equity"},[n("div",{staticClass:"mark"},[n("span",{staticClass:"text"},[t._v(t._s("特权"+t.turnNumber[s+1]))])]),t._v(" "),n("div",{staticClass:"equity-details"},[n("div",{staticClass:"equity-details-left"},[n("span",[t._v(t._s(e.activityTitle))])])])])})),t._v(" "),t._l(t.equityArr,(function(e,s){return n("div",{key:"equityArr"+s,staticClass:"equity"},[n("div",{staticClass:"mark"},[n("span",{staticClass:"text"},[t._v(t._s("特权"+t.turnNumber[s+1+t.openAccess.length]))])]),t._v(" "),n("div",{staticClass:"equity-details"},[n("div",{staticClass:"equity-details-left"},[n("span",[t._v(t._s(e.activityTitle))])])])])})),t._v(" "),n("div",{staticClass:"explain"},[n("p",[t._v("活动说明")]),t._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.cardPrompt)}})])],2)],1)]),t._v(" "),n("div",{staticClass:"bottom-btns"},[n("span",{on:{click:t.openingBtn}},[t._v("10元/月，确认开通")])]),t._v(" "),n("van-popup",{staticClass:"popupPhoneInfo",model:{value:t.popupPhoneInfo,callback:function(e){t.popupPhoneInfo=e},expression:"popupPhoneInfo"}},[t._v("该活动仅限江西移动用户参加！")]),t._v(" "),n("van-popup",{staticClass:"popupCard",attrs:{"close-on-click-overlay":!1},model:{value:t.isOpening,callback:function(e){t.isOpening=e},expression:"isOpening"}},[n("div",{staticClass:"popupCardText"},[n("span",[t._v("开通双V会员10元/月，")]),t._v(" "),n("span",[t._v("可享受更多特权，请确认是否开通！")])]),t._v(" "),n("div",{staticClass:"popupCardBtn"},[n("span",{on:{click:function(e){t.isOpening=!1}}},[t._v("取消")]),t._v(" "),n("span",{on:{click:t.isOpeningTrue}},[t._v("开通")])])]),t._v(" "),n("van-popup",{staticClass:"popupCard",attrs:{"close-on-click-overlay":!1},model:{value:t.popupCard,callback:function(e){t.popupCard=e},expression:"popupCard"}},[n("div",{staticClass:"popupCardText"},[n("span",[t._v("您尚未绑定加油卡，")]),t._v(" "),n("span",[t._v("需要绑定加油卡后方可参与活动！")])]),t._v(" "),n("div",{staticClass:"popupCardBtn"},[n("span",{on:{click:function(e){t.popupCard=!1}}},[t._v("取消")]),t._v(" "),n("span",{on:{click:t.openingCard}},[t._v("立即绑定")])])])],1)}),[],!1,null,"1e7b90f6",null);e.default=o.exports},uBxM:function(t,e,n){"use strict";var s=n("4Oc+");n.n(s).a}}]);