(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f6332b8"],{2180:function(e,t,s){"use strict";s("452ad")},"38d5":function(e,t,s){"use strict";s("68ef")},"452ad":function(e,t,s){},"772a":function(e,t,s){"use strict";var n=s("d282"),i=s("db85"),o=Object(n["a"])("form"),r=o[0],a=o[1];t["a"]=r({props:{colon:Boolean,disabled:Boolean,readonly:Boolean,labelWidth:[Number,String],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,errorMessageAlign:String,submitOnEnter:{type:Boolean,default:!0},validateTrigger:{type:String,default:"onBlur"},showError:{type:Boolean,default:!0},showErrorMessage:{type:Boolean,default:!0}},provide:function(){return{vanForm:this}},data:function(){return{fields:[]}},methods:{getFieldsByNames:function(e){return e?this.fields.filter((function(t){return-1!==e.indexOf(t.name)})):this.fields},validateSeq:function(e){var t=this;return new Promise((function(s,n){var i=[],o=t.getFieldsByNames(e);o.reduce((function(e,t){return e.then((function(){if(!i.length)return t.validate().then((function(e){e&&i.push(e)}))}))}),Promise.resolve()).then((function(){i.length?n(i):s()}))}))},validateFields:function(e){var t=this;return new Promise((function(s,n){var i=t.getFieldsByNames(e);Promise.all(i.map((function(e){return e.validate()}))).then((function(e){e=e.filter((function(e){return e})),e.length?n(e):s()}))}))},validate:function(e){return e&&!Array.isArray(e)?this.validateField(e):this.validateFirst?this.validateSeq(e):this.validateFields(e)},validateField:function(e){var t=this.fields.filter((function(t){return t.name===e}));return t.length?new Promise((function(e,s){t[0].validate().then((function(t){t?s(t):e()}))})):Promise.reject()},resetValidation:function(e){e&&!Array.isArray(e)&&(e=[e]);var t=this.getFieldsByNames(e);t.forEach((function(e){e.resetValidation()}))},scrollToField:function(e,t){this.fields.some((function(s){return s.name===e&&(s.$el.scrollIntoView(t),!0)}))},addField:function(e){this.fields.push(e),Object(i["a"])(this.fields,this)},removeField:function(e){this.fields=this.fields.filter((function(t){return t!==e}))},getValues:function(){return this.fields.reduce((function(e,t){return e[t.name]=t.formValue,e}),{})},onSubmit:function(e){e.preventDefault(),this.submit()},submit:function(){var e=this,t=this.getValues();this.validate().then((function(){e.$emit("submit",t)})).catch((function(s){e.$emit("failed",{values:t,errors:s}),e.scrollToError&&e.scrollToField(s[0].name)}))}},render:function(){var e=arguments[0];return e("form",{class:a(),on:{submit:this.onSubmit}},[this.slots()])}})},9830:function(e,t,s){e.exports=s.p+"static/images/0473e1ed5060c1541ae9dabb08281287.png"},d5a0:function(e,t,s){"use strict";s.r(t);var n,i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"content"},[n("img",{staticClass:"logo",attrs:{src:s("9830"),alt:""}}),n("van-form",{ref:"loginForm"},[n("div",{staticClass:"field-c"},[n("van-field",{attrs:{maxlength:"11",pattern:"[0-9]*",name:"手机号",placeholder:"请输入手机号",type:"tel",border:!1,clearable:""},on:{input:function(t){e.phone=/^\d+/.exec(e.phone)?/^\d+/.exec(e.phone)[0]:""}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),n("div",{staticClass:"field-c reset-margin-top"},[n("van-field",{attrs:{pattern:"[0-9]*",name:"验证码",type:"digit",border:!1,placeholder:"请输入验证码",clearable:""},on:{input:function(t){e.msgCode=e.$util.checkVerifyCodeLenght(e.msgCode)}},model:{value:e.msgCode,callback:function(t){e.msgCode=t},expression:"msgCode"}},[n("count-button",{ref:"countBtn",staticClass:"verif-code-btn",attrs:{slot:"button",phone:e.phone},on:{getSmsEvent:e.getMsgCode},slot:"button"})],1)],1),n("div",{staticClass:"agreement",on:{click:function(t){return t.stopPropagation(),e.viewsTerms.apply(null,arguments)}}},[n("van-checkbox",{staticClass:"agreement-label",attrs:{disabled:"","checked-color":"#c89f62",shape:"square"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),n("span",{staticClass:"agreement-name"},[e._v("服务条款及隐私政策")])],1),n("div",{staticClass:"submit-btn chum-public-btn"},[n("van-button",{attrs:{round:"",block:"",type:"info",color:"linear-gradient(270deg,rgba(49,49,49,1) 0%,rgba(84,84,84,1) 51%,rgba(49,49,49,1) 100%)"},nativeOn:{click:function(t){return e.registerFun.apply(null,arguments)}}},[e._v("绑定 ")])],1)])],1)])},o=[],r=s("ade3"),a=(s("38d5"),s("772a")),l=(s("b0c0"),s("19e7"),s("5b7e")),c=s("b90b"),d={components:(n={},Object(r["a"])(n,a["a"].name,a["a"]),Object(r["a"])(n,"CountButton",c["a"]),n),data:function(){return{msgCode:"",phone:"",checked:!1,isShowRegisterModal:!1}},created:function(){this.thirdUserId=this.$store.state.login.thirdUserId},activated:function(){this.checked=this.$store.state.isAgreement},methods:{getMsgCode:function(e,t){var s=this;if(this.thirdUserId)if(this.phone){this.$refs.countBtn.startTime(),this.$Loading.open();var n={phone:this.phone,smsType:"1020",imgVerifyCode:e,uuid:t};this.$http.post("/app/json/login/sendSms",n).then((function(e){s.$Loading.close();var t=e.data;0==t.status?s.$Toast("获取短信验证码成功"):(s.$Toast(t.info?t.info:"获取短信验证码失败"),s.$refs.countBtn.resetClock())}),(function(e){s.$Loading.close(),s.$Toast("系统运行过程中遇到问题，请稍候再试"),s.$refs.countBtn.resetClock()}))}else this.$Toast("手机号不能为空!");else this.$Toast("该账号无法登录，请联系客服!")},registerFun:function(){var e=this;if(this.checked)if(this.phone)if(this.msgCode){this.$store.state.isAgreement||(this.isShowRegisterModal=!0);var t={phone:this.phone,thirdUserId:this.thirdUserId,smsVerifyCode:this.msgCode,regChannel:5,bindType:4,loginChannel:6};this.$store.state.rfrCode&&(t.rfrCode=this.$store.state.rfrCode,t.rfrCodeType=1),this.$store.state.enterPriseOuCode&&(t.enterPriseOuCode=this.$store.state.enterPriseOuCode),2==this.$store.state.webtype?(this.$Loading.open(),l["a"].getWechatSignature((function(s){s?l["a"].wxGetLocation((function(s){e.$store.state.currentLocation.posx=s?s.longitude:"",e.$store.state.currentLocation.posy=s?s.latitude:"",e.$mallCommon.addressAnalysis((function(s){e.$Loading.close(),t.province=e.$store.state.mall2.selectAddress.provinceName,t.provinceCode=e.$store.state.mall2.selectAddress.provinceId,t.city=e.$store.state.mall2.selectAddress.cityName,t.cityCode=e.$store.state.mall2.selectAddress.cityId,t.longitude=e.$store.state.currentLocation.posx,t.latitude=e.$store.state.currentLocation.posy,e.apiEvent(t)}),s)})):e.apiEvent(t)}))):(t.province=this.$store.state.mall2.selectAddress.provinceName,t.provinceCode=this.$store.state.mall2.selectAddress.provinceId,t.city=this.$store.state.mall2.selectAddress.cityName,t.cityCode=this.$store.state.mall2.selectAddress.cityId,t.longitude=this.$store.state.currentLocation.posx,t.latitude=this.$store.state.currentLocation.posy,this.apiEvent(t))}else this.$Toast("验证码不能为空!");else this.$Toast("手机号不能为空!");else this.$Toast("请同意服务条款及隐私政策!")},apiEvent:function(e){var t=this;this.$Loading.open(),this.$http.post("/app/json/login/bindThirdUser",e).then((function(e){t.$Loading.close();var s=e.data;0==s.status?(t.$Toast("绑定成功"),t.$userCenter.retsetToIndex(s.data,1)):2002==s.errorCode?t.$Toast(s.info?s.info:"手机号已存在用户已注册"):t.$Toast(s.info?s.info:"注册失败")}),(function(e){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试")}))},viewsTerms:function(){this.$router.push("/terms_service")}}},u=d,h=(s("2180"),s("0c7c")),f=Object(h["a"])(u,i,o,!1,null,"4b0f77fc",null);t["default"]=f.exports}}]);