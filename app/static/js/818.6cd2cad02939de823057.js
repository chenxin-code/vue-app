(window.webpackJsonp=window.webpackJsonp||[]).push([[818],{"7TdU":function(e,s,t){},"Bwk+":function(e,s,t){"use strict";var o=t("7TdU");t.n(o).a},oQ3Z:function(e,s,t){"use strict";t.r(s);var o=t("W34l"),i=t("Gedb"),a={name:"login-binding-pw",components:{CountButton:t("uQt8").a},data:function(){return{phone:"",passwords:"",msgCode:"",city:"北京",isShowPwd:!1,isChecked:!1,regChannel:"",authcode:"",firstLevel:!1,referrer:"",scanCode:""}},watch:{msgCode:function(e){this.msgCode=this.$util.checkVerifyCodeLenght(this.msgCode)}},methods:{clickAgreement:function(){this.$router.push({path:"/usercenter/agreement"})},scanCodeFunc:function(){var e=this;this.$bridgefunc.scanCode((function(s){e.scanCode=s.code,e.referrer=s.code}))},backEvent:function(){this.$router.go(-1)},getMsgCode:function(e,s){var t=this;if(""!=this.phone){this.$refs.countBtn.startTime(),this.$Loading.open();var o={phone:this.phone,smsType:"1000",imgVerifyCode:e,uuid:s};this.$http.post("/app/json/login/sendSms",o).then((function(e){t.$Loading.close(),console.log(e.data);var s=e.data;0==s.status?t.$Toast("获取短信验证码成功"):(t.$Toast(s.info?s.info:"获取短信验证码失败"),t.$refs.countBtn.resetClock())}),(function(e){t.$Loading.close(),t.$Toast("系统运行过程中遇到问题，请稍候再试"),t.$refs.countBtn.resetClock()}))}else this.$Toast("手机号不能为空!")},checkOutFun:function(){""!=this.phone?/^1\d{10}$/.test(this.phone)?""!=this.passwords?this.$util.checkPassWord(this.passwords)&&(""!=this.msgCode?this.isChecked?this.registerFun():this.$Toast("请阅读用户协议"):this.$Toast("验证码不能为空")):this.$Toast("密码不能为空"):this.$Toast("手机号格式不对!"):this.$Toast("手机号不能为空!")},registerFun:function(){var e=this,s={phone:this.phone,thirdUserId:this.thirdUserId,userPwd:Object(i.a)(this.passwords),regChannel:this.regChannel,smsVerifyCode:this.msgCode,bindType:2};this.referrer&&this.referrer.length&&(s.rfrCode=this.referrer),this.referrer==this.scanCode?s.rfrCodeType=2:s.rfrCodeType=1,2==this.$store.state.webtype?o.a.getWechatSignature((function(t){t?o.a.wxGetLocation((function(t){e.$store.state.currentLocation.posx=t?t.longitude:"",e.$store.state.currentLocation.posy=t?t.latitude:"",e.$mallCommon.addressAnalysis((function(t){s.province=e.$store.state.mall2.selectAddress.provinceName,s.provinceCode=e.$store.state.mall2.selectAddress.provinceId,s.city=e.$store.state.mall2.selectAddress.cityName,s.cityCode=e.$store.state.mall2.selectAddress.cityId,s.longitude=e.$store.state.currentLocation.posx,s.latitude=e.$store.state.currentLocation.posy,e.apiEvent(s)}),t)})):e.apiEvent(s)})):(s.province=this.$store.state.mall2.selectAddress.provinceName,s.provinceCode=this.$store.state.mall2.selectAddress.provinceId,s.city=this.$store.state.mall2.selectAddress.cityName,s.cityCode=this.$store.state.mall2.selectAddress.cityId,s.longitude=this.$store.state.currentLocation.posx,s.latitude=this.$store.state.currentLocation.posy,this.apiEvent(s))},apiEvent:function(e){var s=this;this.$Loading.open(),this.$http.post("/app/json/login/bindThirdUser",e).then((function(e){s.$Loading.close(),console.log(e.data);var t=e.data;0==t.status?(s.$Toast("注册成功"),s.firstLevel?s.$userCenter.retsetToIndex(t.data,1):s.$userCenter.retsetToIndex(t.data,2)):2002==t.errorCode?s.$Toast(t.info?t.info:"手机号已存在用户已注册"):s.$Toast(t.info?t.info:"注册失败")}),(function(e){s.$Loading.close(),s.$Toast("系统运行过程中遇到问题，请稍候再试")}))}},beforeRouteLeave:function(e,s,t){"/usercenter/agreement"==e.path||this.$keepaliveHelper.deleteCache(this),t()},created:function(){this.regChannel=this.$route.query.regChannel,this.thirdUserId=this.$route.query.thirdUserId,this.authcode=this.$route.query.code,this.firstLevel=this.$route.query.firstLevel}},r=(t("Bwk+"),t("KHd+")),n=Object(r.a)(a,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login-binding-pw login2"},[t("nav-top",{on:{backEvent:e.backEvent}}),e._v(" "),t("nav-content",[t("div",{staticClass:"register"},[t("div",{staticClass:"text-input"},[t("div",{staticClass:"cell-phone"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{placeholder:"请输入手机号",type:"number"},domProps:{value:e.phone},on:{input:function(s){s.target.composing||(e.phone=s.target.value)}}})])]),e._v(" "),t("div",{staticClass:"passwords-input"},[t("div",{staticClass:"passwords"},["checkbox"==(e.isShowPwd?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.passwords,expression:"passwords"}],attrs:{placeholder:e.$util.pwdPlaceholder(),type:"checkbox"},domProps:{checked:Array.isArray(e.passwords)?e._i(e.passwords,null)>-1:e.passwords},on:{change:function(s){var t=e.passwords,o=s.target,i=!!o.checked;if(Array.isArray(t)){var a=e._i(t,null);o.checked?a<0&&(e.passwords=t.concat([null])):a>-1&&(e.passwords=t.slice(0,a).concat(t.slice(a+1)))}else e.passwords=i}}}):"radio"==(e.isShowPwd?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.passwords,expression:"passwords"}],attrs:{placeholder:e.$util.pwdPlaceholder(),type:"radio"},domProps:{checked:e._q(e.passwords,null)},on:{change:function(s){e.passwords=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.passwords,expression:"passwords"}],attrs:{placeholder:e.$util.pwdPlaceholder(),type:e.isShowPwd?"text":"password"},domProps:{value:e.passwords},on:{input:function(s){s.target.composing||(e.passwords=s.target.value)}}})]),e._v(" "),t("div",{staticClass:"show-passwords",on:{click:function(s){e.isShowPwd=!e.isShowPwd}}},[t("img",{staticClass:"see-icon",attrs:{src:e.isShowPwd?"static/image/login2/see-icon.png":"static/image/login2/icon-eye.png"}})])]),e._v(" "),t("div",{staticClass:"passwords-input"},[t("div",{staticClass:"passwords"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.msgCode,expression:"msgCode"}],attrs:{placeholder:"请输入验证码"},domProps:{value:e.msgCode},on:{input:function(s){s.target.composing||(e.msgCode=s.target.value)}}})]),e._v(" "),t("div",{staticClass:"forget-btn"},[t("count-button",{ref:"countBtn",staticClass:"theme_standard_font",attrs:{phone:e.phone},on:{getSmsEvent:e.getMsgCode}})],1)]),e._v(" "),"0"!=e.$store.state.globalConfig.user_register_referrer_input?t("div",{staticClass:"passwords-input"},[t("div",{staticClass:"passwords"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.referrer,expression:"referrer"}],attrs:{placeholder:"请输入推荐码"},domProps:{value:e.referrer},on:{input:function(s){s.target.composing||(e.referrer=s.target.value)}}})]),e._v(" "),t("div",{staticClass:"show-passwords",on:{click:e.scanCodeFunc}},[t("img",{staticClass:"see-icon",attrs:{src:"static/image/setting/icon-scan.png"}})])]):e._e(),e._v(" "),t("div",{staticClass:"agree"},[t("div",{staticClass:"ifselect",class:e.isChecked?"is-selected":"unselect",on:{click:function(s){e.isChecked=!e.isChecked}}},[t("i",{staticClass:"selected-icon"})]),e._v(" "),t("p",{staticClass:"text",on:{click:e.clickAgreement}},[e._v("我已看过并同意"),t("span",[e._v("《用户使用协议》")])])]),e._v(" "),t("div",{staticClass:"common-btn theme_standard_bg theme_font_white bind-btn",on:{click:function(s){return e.checkOutFun()}}},[e._v("绑定")])])])],1)}),[],!1,null,"eabcff7a",null);s.default=n.exports}}]);