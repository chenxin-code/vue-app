(window.webpackJsonp=window.webpackJsonp||[]).push([[681],{"+Urn":function(t,e,s){t.exports=s.p+"static/img/p1.24b66ca.png"},WBtm:function(t,e,s){},"l+X8":function(t,e,s){"use strict";var a=s("WBtm");s.n(a).a},nCuJ:function(t,e,s){"use strict";s.r(e);var a=s("ygAv"),i={data:function(){return{oilRecordList:[],oilId:"",myHomeInfo:"",complete:!1,rebate:[]}},mounted:function(){this.queryPackageOrderInfo()},methods:{queryPackageOrderInfo:function(){var t=this;this.$request.post("/app/json/app_package_refuel/queryPackageOrderInfo",{id:this.$route.query.id}).then((function(e){if(0===e.status){t.myHomeInfo=e.data;var s=JSON.parse(t.myHomeInfo.orderModel.ruleDesc)||{};t.dealRebate(s.sumRebate,t.myHomeInfo.orderModel.sumOilLiter||0);var a="";1==t.myHomeInfo.orderModel.packageType?a=t.myHomeInfo.orderDetailModelList[0].packageRefuelOrderId:t.myHomeInfo.orderDetailModelList.forEach((function(e){e.userId==t.$store.state.mall2.behalf.userId&&(a=e.packageRefuelOrderId)})),t.queryPackageRefuelOrderRecord(a),t.complete=!0}else t.$Toast(e.info?e.info:"获取详情失败")}))},dealRebate:function(t,e){for(var s=[].concat(t).sort((function(t,e){return t.oilLiter-e.oilLiter})),a=[],i=0;i<s.length-1;i++){var o=s[i],l=s[i+1];if(o.oilLiter<=e&&e<l.oilLiter){a.push(o),a.push(l);break}if(i===s.length-2&&e>=l.oilLiter){a.push(l);break}}this.rebate=a},dealDiffData:function(t){var e=this,s="";return 1!=this.myHomeInfo.orderModel.packageType?(this.myHomeInfo.orderDetailModelList.forEach((function(a){a.userId==e.$store.state.mall2.behalf.userId&&(1==t?s=a.sumOilLiter||"0":2==t?s=a.rebate||"0":3==t?s=a.sumAmount||"0.00":4==t&&(s=a.settledSumRebate||"0"))})),s):1==t?this.myHomeInfo.orderDetailModelList[0].sumOilLiter||"0":2==t?this.myHomeInfo.orderDetailModelList[0].rebate||"0":3==t?this.myHomeInfo.orderDetailModelList[0].sumAmount||"0.00":4==t?this.myHomeInfo.orderDetailModelList[0].settledSumRebate||"0":void 0},queryPackageRefuelOrderRecord:function(t){var e=this;this.oilId=t,this.$request.post("/app/json/app_package_refuel/queryPackageRefuelOrderRecord",{packageRefuelOrderId:t}).then((function(t){0===t.status?e.oilRecordList=t.data:e.$Toast(t.info?t.info:"获取列表失败")}))},openRecord:function(){this.$router.push({path:"/oil-record",query:{id:this.oilId,packageType:this.myHomeInfo.orderModel.packageType}})},dealTime:function(t){return t.split(" ")[0]},dealState:function(t,e,s){var i=a.a.getMyDate(new Date);if("WAIT_SIGN_UP"==t)return"待签约";if("SIGNED_UP"==t){var o=a.a.dateCompare(i,e.split(" ")[0]),l=a.a.dateCompare(i,s.split(" ")[0]);return 1==o?"未开始":0!=o&&-1!=o||1!=l&&0!=l?"已结束":"签约中"}return"SETTLED"==t?"已结算":"CANCELED"==t?"已取消":void 0}},components:{}},o=(s("l+X8"),s("KHd+")),l=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"history-details"},[a("nav-top",{attrs:{title:"签约详情"},on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),t.complete?a("nav-content",{staticClass:"history-details-container"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title-info"},[a("div",{staticClass:"info"},[a("div",{staticClass:"title-name"},[a("div",{staticClass:"left"},[t._v(t._s(t.myHomeInfo.orderModel.packageRefuelName)+"  "+t._s(t.myHomeInfo.orderModel.duration)+"天")]),t._v(" "),a("div",{staticClass:"right"},[t._v(t._s(t.dealState(t.myHomeInfo.orderModel.state,t.myHomeInfo.orderModel.startDate,t.myHomeInfo.orderModel.endDate)))])]),t._v(" "),a("div",{staticClass:"text"},[t._v("开通时间："+t._s(t.myHomeInfo.orderModel.startDate))]),t._v(" "),a("div",{staticClass:"text"},[t._v("到期时间："+t._s(t.myHomeInfo.orderModel.endDate))]),t._v(" "),t.rebate.length&&3!=t.myHomeInfo.orderModel.packageType?a("div",{staticClass:"special"},[t._v("当前加油累计返利比例为"+t._s(t.rebate[0].rebate)+"%")]):t._e(),t._v(" "),t.rebate.length&&3==t.myHomeInfo.orderModel.packageType?a("div",{staticClass:"special"},[t._v("您当前加油单笔即时返利为"+t._s(t.rebate[0].rebate)+"%")]):t._e()])]),t._v(" "),2==t.myHomeInfo.orderModel.packageType?a("div",{staticClass:"statistical"},[a("div",{staticClass:"title"},[t._v("套餐加油统计")]),t._v(" "),a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("实时返利金额")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.myHomeInfo.orderModel.rebate||"0"))])]),t._v(" "),a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("结算返回油滴")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.myHomeInfo.orderModel.settledSumRebate||"0"))])])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("加油升数")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.myHomeInfo.orderModel.sumOilLiter||"0"))])]),t._v(" "),a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("加油金额")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.myHomeInfo.orderModel.sumAmount||"0.00"))])])])])]):t._e(),t._v(" "),3==t.myHomeInfo.orderModel.packageType?a("div",{staticClass:"statistical"},[a("div",{staticClass:"title"},[t._v("个人加油统计")]),t._v(" "),a("ul",{staticClass:"list special"},[a("li",{staticClass:"item"},[a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("加油升数")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(1)))])]),t._v(" "),a("div",{staticClass:"oil-info middle"},[a("div",{staticClass:"name"},[t._v("实时返利金额")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(2)))])]),t._v(" "),a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("加油金额")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(3)))])])])])]):a("div",{staticClass:"statistical"},[a("div",{staticClass:"title"},[t._v("个人加油统计")]),t._v(" "),a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("实时返利金额")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(2)))])]),t._v(" "),a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("结算返回油滴")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(4)))])])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("加油升数")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(1)))])]),t._v(" "),a("div",{staticClass:"oil-info"},[a("div",{staticClass:"name"},[t._v("加油金额")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.dealDiffData(3)))])])])])]),t._v(" "),a("div",{staticClass:"title"},[3!=t.myHomeInfo.orderModel.packageType?a("span",[t._v("加油明细")]):t._e(),t._v(" "),3==t.myHomeInfo.orderModel.packageType?a("span",[t._v("个人返利明细")]):t._e()])]),t._v(" "),a("ul",{staticClass:"details-list"},[t._l(t.oilRecordList,(function(e,s){return s<5?a("li",{key:s,staticClass:"details-item"},[a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[t._v("订单号")]),t._v(" "),a("div",{staticClass:"details-text"},[t._v(t._s(e.orderNo))])]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[t._v("加油时间")]),t._v(" "),a("div",{staticClass:"details-text"},[t._v(t._s(e.tradeTime))])]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[t._v("加油升数")]),t._v(" "),a("div",{staticClass:"details-text"},[t._v(t._s(e.oilLiter||"0"))])]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[t._v("加油金额")]),t._v(" "),a("div",{staticClass:"details-text"},[t._v(t._s(e.amount||"0.00"))])]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[t._v("实时返利金额")]),t._v(" "),a("div",{staticClass:"details-text"},[t._v(t._s(e.rebate||"0"))])])]):t._e()})),t._v(" "),t.oilRecordList.length>5?a("div",{staticClass:"more-btn",on:{click:t.openRecord}},[t._v("查看更多加油记录")]):t._e(),t._v(" "),0==t.oilRecordList.length?a("div",{staticClass:"no-data"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:s("+Urn"),alt:""}})]),t._v(" "),a("div",{staticClass:"text"},[t._v("暂无数据")])]):t._e()],2)]):t._e()],1)}),[],!1,null,"1fb973a9",null);e.default=l.exports}}]);