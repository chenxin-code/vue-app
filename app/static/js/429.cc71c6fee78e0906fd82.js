(window.webpackJsonp=window.webpackJsonp||[]).push([[429],{CEw4:function(t,i,e){"use strict";i.a={methods:{exportinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/importUserInvoiceHead",t)},golddetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/detailsOfInvoiceInfo",t)},invoicetipData:function(t){return this.$http.post("/app/json/news/getNewsList",t)},refundData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceRushRed",t)},cardMoData:function(t){return this.$http.post("/app/json/card/getUserCardList",t)},mingxiData:function(t){return this.$http.post("/app/json/user_invoice_assistant/detailsOfInvoiceList",t)},malldetailData:function(t){return this.$http.post("/app/json/app_shopping_order/detail",t)},shopdetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/convenienceStoredetail",t)},oildetailData:function(t){return this.$http.post("/app/json/refuel_center/detail",t)},hisdetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceContentDetails",t)},hisData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceContentDetailsList",t)},mallData:function(t){return this.$http.post("/app/json/app_shopping_order/queryOrder",t)},storeData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryConvenienceStoreOrder",t)},appData:function(t){return this.$http.post("/app/json/refuel_center/queryOrder",t)},goldData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryCashIn",t)},walletData:function(t){return this.$http.post("/app/json/user_invoice_assistant/sinopecWalletInvoiceList",t)},cardData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserRefuelingCardInfoList",t)},commitselfinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/orderInvoicingInMall",t)},commitselfcardinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/gasCardInvoice",t)},commitselfgoldinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/cashInInvoicing",t)},emailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceModifyMailbox",t)},histroydetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoiceDetails",t)},histroyData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoicedList",t)},riseData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserInvoiceHeadList",t)},openedData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoicedList",t)},commitData:function(t){return this.$http.post("/app/json/user_invoice_assistant/addOrUpdateUserInvoiceHead",t)},delData:function(t){return this.$http.post("/app/json/user_invoice_assistant/deleteUserInvoiceHead",t)},morenData:function(t){return this.$http.post("/app/json/user_invoice_assistant/setDefaultUserInvoiceHead",t)},detailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoiceDetails",t)},souData:function(t){return this.$http.post("/app/json/user_invoice_assistant/searchInvoiceList",t)},soudetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserInvoiceHeadDetails",t)},tijiaoData:function(t){return this.$http.post("/app/json/user_invoice_assistant/addInvoicing",t)},saoData:function(t){return this.$http.post("/app/json/user_invoice_assistant/getResultFromQrcode",t)},morentitleData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryDefaultTittle",t)},daikaiData:function(t){return this.$http.post("/app/json/user_invoice_assistant/unInvoicingList",t)},chakanData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserInvoiceHeadDetails",t)}}}},Ello:function(t,i,e){},FG2N:function(t,i,e){"use strict";e.r(i);var s=e("CEw4"),a=(e("rRuW"),{name:"mallOrder",mixins:[s.a],data:function(){return{listData:[],show:!1,radio:"1",radioList:[],allRadio:!1,cardName:"",idArray:[],firstTime:"",lastTime:"",completeTime:"",totalMoney:0,orderList:[]}},created:function(){this.time()},mounted:function(){this.loadIndex(),console.log("月份",this.$store.state.globalConfig.timeLimitInvoicing)},methods:{loadIndex:function(){var t=this,i={token:this.$store.state.login.token,orderType:200017,invoiceUse:0,state:9,completeTime:t.completeTime,invoiceSupport:1,afterSaleHasReturn:0};t.mallData(i).then((function(i){console.log(i),i.data.result&&(t.listData=i.data.data.orderList||[])}))},selectData:function(){this.radioList.length==this.listData.length?this.allRadio=!0:this.radioList.length<this.listData.length&&(this.allRadio=!1);var t=this;t.totalMoney=0,t.radioList.forEach((function(i){console.log(i),t.totalMoney=Number((t.totalMoney+Number(i.payAmount)).toFixed(2))}))},allSelect:function(){var t=this;t.allRadio=!t.allRadio,1==t.allRadio?(t.radioList=[],t.listData.forEach((function(i){t.radioList.push(i)}))):t.radioList=[]},next:function(){var t=this;t.idArray=[],console.log(t.radioList),t.radioList.forEach((function(i){t.idArray.push(i.id),t.orderList.push(i)})),console.log(t.idArray),t.$router.push({path:"/openinvoiceDetail",query:{idArray:t.idArray,orderList:JSON.stringify(t.orderList),totalMoney:t.totalMoney,type:"mallOrder"}})},getPreMonthDay:function(t,i){var e=t.split("-"),s=e[0],a=e[1],n=e[2],o=new Date(s,a,0);o=o.getDate();var r=s,c=parseInt(a)-i;c<=0&&(r=parseInt(r)-parseInt(c/12==0?1:Math.abs(parseInt(c/12))+1),c=12-Math.abs(c)%12);var p=n,l=new Date(r,c,0);return p>(l=l.getDate())&&(p=l),c<10&&(c="0"+c),r+"-"+c+"-"+p},getCurrentMonthLast:function(){return new Date},format:function(t,i){var e={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t},time:function(){var t=this.getCurrentMonthLast(),i=this.format("yyyy-MM-dd",t),e=Number(this.$store.state.globalConfig.timeLimitInvoicing);console.log(e);var s=this.getPreMonthDay(i,e);console.log(s),this.firstTime=s.replace(/-/g,"")+"000000",this.lastTime=this.format("yyyyMMdd235959",t),14==this.firstTime.length?this.completeTime=this.firstTime+"-"+this.lastTime:this.completeTime="",console.log(this.completeTime)}}}),n=(e("u0Dk"),e("KHd+")),o=Object(n.a)(a,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"body"},[e("nav-top",{attrs:{title:"商品订单"},on:{backEvent:function(i){return t.$router.go(-1)}}}),t._v(" "),e("nav-content",[t.$store.state.globalConfig.invoicePromptStatement?e("van-notice-bar",{attrs:{scrollable:!0}},[t._v(t._s(t.$store.state.globalConfig.invoicePromptStatement))]):e("van-notice-bar",{attrs:{scrollable:!0}},[t._v("可开票订单请尽量在"+t._s(t.$store.state.globalConfig.timeLimitInvoicing)+"个月内自助开具发票！")]),t._v(" "),t._l(t.listData,(function(i,s){return t.listData.length>0?e("div",{key:s,staticClass:"publicInvoice"},[e("div",{staticClass:"operation"},[e("div",{staticClass:"div1"},[e("van-checkbox-group",{on:{change:t.selectData},model:{value:t.radioList,callback:function(i){t.radioList=i},expression:"radioList"}},[e("van-checkbox",{attrs:{name:i,"checked-color":"#F80F16"}})],1),t._v(" "),e("span",[t._v("订单号："+t._s(i.shoppingOrderId))])],1),t._v(" "),e("div",[t._l(i.itemAbstractList,(function(i,s){return e("div",{key:s,staticClass:"div2"},[e("div",{staticClass:"div2Img"},[e("img",{attrs:{src:i.phPictureUrl,alt:""}})]),t._v(" "),e("span",[t._v(t._s(i.skuName))])])})),t._v(" "),e("div",{staticClass:"div3"},[e("div",[t._v("合计："),e("span",[t._v(t._s(i.payAmount))]),t._v(" 元")])])],2)])]):t._e()})),t._v(" "),0==t.listData.length?e("div",{staticClass:"publicInvoice"},[e("div",{staticClass:"emptyDiv"},[e("img",{attrs:{src:"static/image/invoice/p4@2x.png",alt:""}}),t._v(" "),e("span",[t._v("暂无订单记录！")])])]):t._e()],2),t._v(" "),t.listData.length>0?e("div",{staticClass:"summary"},[t._v(t._s(t.radioList.length?t.radioList.length:0)+" 个商品订单，总计 "),e("span",[t._v(t._s(t.totalMoney))]),t._v(" 元，共"),e("span",[t._v(" "+t._s(t.radioList.length)+" ")]),t._v("张发票")]):t._e(),t._v(" "),t.listData.length>0?e("div",{staticClass:"bottomTab"},[e("div",{staticClass:"left left1"},[e("div",{staticClass:"img"},[e("van-checkbox",{attrs:{"checked-color":"#F80F16"},on:{click:t.allSelect},model:{value:t.allRadio,callback:function(i){t.allRadio=i},expression:"allRadio"}})],1),t._v(" "),t._m(0)]),t._v(" "),e("div",{staticClass:"left theme_bg_red right",on:{click:t.next}},[t._m(1)])]):t._e()],1)}),[function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("span",[this._v("全选")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("span",[this._v("下一步")])])}],!1,null,"68e448b0",null);i.default=o.exports},rRuW:function(t,i,e){"use strict";function s(t,i){/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var s in e)if(new RegExp("("+s+")").test(i)){var n=e[s]+"";i=i.replace(RegExp.$1,1===RegExp.$1.length?n:a(n))}return i}function a(t){return("00"+t).substr(t.length)}e.d(i,"a",(function(){return s}))},u0Dk:function(t,i,e){"use strict";var s=e("Ello");e.n(s).a}}]);