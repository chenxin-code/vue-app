(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a18755a"],{"0538":function(t,n,i){"use strict";var o=i("1c0b"),a=i("861d"),e=[].slice,s={},c=function(t,n,i){if(!(n in s)){for(var o=[],a=0;a<n;a++)o[a]="a["+a+"]";s[n]=Function("C,a","return new C("+o.join(",")+")")}return s[n](t,i)};t.exports=Function.bind||function(t){var n=o(this),i=e.call(arguments,1),s=function(){var o=i.concat(e.call(arguments));return this instanceof s?c(n,o.length,o):n.apply(t,o)};return a(n.prototype)&&(s.prototype=n.prototype),s}},"4eb4":function(t,n,i){"use strict";i.r(n);var o,a=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"bind-alipay login2"},[i("nav-top",{on:{backEvent:t.backEvent}}),i("nav-content",[i("div",{staticClass:"wechat"},[i("div",{staticClass:"warm-prompt mine-box-shodow"},[i("h2",{staticClass:"warm-title"},[t._v("温馨提示")]),i("p",{staticClass:"unorder"},[t._v("1.销售APP账号与支付宝号需互相唯一；")]),i("p",{staticClass:"unorder"},[t._v("2.当前账号绑定新支付宝需先解绑当前账号；")]),i("p",{staticClass:"unorder"},[t._v("3.如支付宝号已绑定另外账号，需回原账号解绑.。")])]),i("div",{staticClass:"bind-warp"},[i("div",{staticClass:"bind-logo"},[i("img",{attrs:{src:"static/image/setting/bind-alipay.png"}})])]),-1!=t.bindType?i("div",{staticClass:"common-btn theme_bg_red theme_font_white mt100",on:{click:t.wechatOp}},[t._v(t._s(2==t.bindType?"马上绑定支付宝":"解绑支付宝")+" ")]):t._e()])])],1)},e=[],s=i("ade3"),c=(i("c0b6"),{name:"bind-alipay",components:{},data:function(){return{aliInfo:{},bindType:-1}},methods:(o={backEvent:function(){this.$router.go(-1)},wechatOp:function(){2==this.bindType?this.getAliLoginCodeStr():1==this.bindType&&this.unBindWechat()},getAliLoginCodeStr:function(){var t=this;this.$Loading.open();var n="/app/json/login/getAliLoginCodeStr";this.$http.post(n,{}).then((function(n){t.$Loading.close();var i=n.data;0==i.status?t.$bridgefunc.aliAuth(i.data,(function(n){var i=JSON.parse(decodeURIComponent(n));""==i.user_id?t.$Toast("支付宝授权失败"):t.aliLogin(i.auth_code)})):t.$Toast(i.info?i.info:"支付宝授权登录失败")}),(function(n){t.$Loading.close(),t.$Toast("支付宝授权登录失败")}))},aliLogin:function(t){var n=this;this.$Loading.open();var i="/app/json/user/getAliOpenId",o={code:t,token:this.$store.state.login.token};this.$http.post(i,o).then((function(i){n.$Loading.close();var o=i.data;if(0==o.status){var a={};a.user_id=o.data,a.auth_code=t,n.bind(a)}else n.$Toast(o.info)}),(function(t){n.$Loading.close(),n.$Toast("系统运行过程中遇到问题，请稍候再试")}))},unBindWechat:function(){var t=this;this.$Loading.open();var n="/app/json/user/unBindThirdUser",i={token:this.$store.state.login.token,regChannel:4};this.$http.post(n,i).then((function(n){t.$Loading.close();var i=n.data;0==i.status?(t.$Toast("解绑成功"),t.bindType=2):t.$Toast(i.info)}),(function(n){t.$Loading.close(),t.$Toast("获取数据失败")}))}},Object(s["a"])(o,"aliLogin",(function(t){var n=this;this.$Loading.open();var i="/app/json/user/getAliOpenId",o={code:t,token:this.$store.state.login.token};this.$http.post(i,o).then((function(i){n.$Loading.close();var o=i.data;if(0==o.status){var a={};a.user_id=o.data,a.auth_code=t,n.bind(a)}else n.$Toast(o.info)}),(function(t){n.$Loading.close(),n.$Toast("系统运行过程中遇到问题，请稍候再试")}))})),Object(s["a"])(o,"bind",(function(t){this.$router.push({path:"/usercenter/bindphone",isnativetop:"1",query:{thirdUserId:t.user_id,code:t.auth_code,regChannel:"6",bindType:3}})})),Object(s["a"])(o,"getAliInfo",(function(){var t=this;this.$Loading.open();var n="/app/json/user/getAliUserInfo",i={token:this.$store.state.login.token};this.$http.post(n,i).then((function(n){t.$Loading.close();var i=n.data;0==i.status?(t.aliInfo=i.data,t.bindType=1):1034==i.errorCode?t.bindType=2:(t.$Toast(i.info),t.bindType=-1)}),(function(n){t.$Loading.close(),t.$Toast("获取数据失败")}))})),o),created:function(){this.getAliInfo()}}),r=c,d=(i("79b6"),i("0c7c")),u=Object(d["a"])(r,a,e,!1,null,"1cbb9022",null);n["default"]=u.exports},"79b6":function(t,n,i){"use strict";i("cd70")},c0b6:function(t,n,i){var o=i("23e7"),a=i("0538");o({target:"Function",proto:!0},{bind:a})},cd70:function(t,n,i){}}]);