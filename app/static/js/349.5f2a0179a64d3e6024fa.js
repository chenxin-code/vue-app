(window.webpackJsonp=window.webpackJsonp||[]).push([[349],{"4xpU":function(e,t,n){"use strict";var i=n("Qxyi");n.n(i).a},ONWt:function(e,t,n){"use strict";n("aO+S")},QcVE:function(e,t,n){"use strict";n.r(t),n("bXOk");var i,a=n("Rz0j"),r=(n("ONWt"),n("dyrN"));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={name:"customTravel",components:(i={},s(i,r.a.name,r.a),s(i,a.a.name,a.a),s(i,"CheckPaidMember",(function(){return n.e(11).then(n.bind(null,"b4vV"))})),i),data:function(){return{content:null,userMessage:"",useEmailAddress:null,userPhone:null,userName:null,averageAmount:null,useNumber:null,useEndTime:null,useBeginTime:null,useEndPlace:null,useStartPlace:null,serviceType:1,form:{},pattern:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,patternPhone:/^(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])\d{8}$/,showCalendar:!1,showCalendar2:!1,show:!1,minDate:new Date,maxDate:new Date("2100-12-30")}},methods:{failHandler:function(){this.$router.go(-1)},onFailed:function(e){console.log("failed",e)},onConfirm:function(e){this.useBeginTime=this.$util.getMyDate(e).replace(/-/g,"/"),this.showCalendar=!1,this.minDate=new Date(e)},onConfirm2:function(e){this.useEndTime=this.$util.getMyDate(e).replace(/-/g,"/"),this.showCalendar2=!1,this.maxDate=new Date(e)},instruction:function(){this.show=!0},save1:function(){this.$refs.form.submit()},cancel:function(){this.$router.go(-1)},save:function(e){var t=this;console.log(e);var n=Object.assign(e,{serviceType:this.serviceType,equityMemberId:this.$route.query.id,memberId:this.$route.query.memberId,memberName:this.$route.query.memberName});this.$http.post("/app/json/equity_use_travel/addTravel",n).then((function(e){var n=e.data;0==n.status?(console.log(n),t.$router.push({path:"/benefits/success",query:{id:n.data}})):t.$Toast(n.info)})).catch((function(e){t.$Toast(e)}))},getInfo:function(){var e=this;this.$http.post("/app/json/news/getNewsList?values=57",{}).then((function(t){var n=t.data;0==n.status?(console.log(t),e.content=t.data.data[0].content):e.$Toast(n.info)})).catch((function(t){e.$Toast(t)}))}},created:function(){this.userName=this.$route.query.memberName,this.userPhone=this.$route.query.memberPhone,this.getInfo()},mounted:function(){document.getElementsByName("useBeginTime")[0].addEventListener("focus",(function(){document.activeElement.blur()})),document.getElementsByName("useEndTime")[0].addEventListener("focus",(function(){document.activeElement.blur()}))},beforeDestroy:function(){document.getElementsByName("useBeginTime")[0].removeEventListener("focus",(function(){document.activeElement.blur()})),document.getElementsByName("useEndTime")[0].removeEventListener("focus",(function(){document.activeElement.blur()}))}},l=(n("4xpU"),n("KHd+")),u=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav-top",{on:{backEvent:function(t){return e.$router.go(-1)}}}),e._v(" "),n("nav-content",{staticClass:"travel"},[n("div",{staticClass:"info"},[n("div",{staticClass:"info-con",on:{click:e.instruction}},[n("span",{staticClass:"icon"},[e._v("?")]),e._v(" "),n("span",[e._v("说明")])])]),e._v(" "),n("div",{staticClass:"form"},[n("van-form",{ref:"form",attrs:{"validate-first":""},on:{failed:e.onFailed,submit:e.save}},[n("van-field",{attrs:{name:"serviceType",label:"产品类型"},scopedSlots:e._u([{key:"input",fn:function(){return[n("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.serviceType,callback:function(t){e.serviceType=t},expression:"serviceType"}},[n("van-radio",{attrs:{name:"1"},scopedSlots:e._u([{key:"icon",fn:function(t){return[n("img",{staticClass:"img-icon",class:{checked:1==e.serviceType}})]}}])},[e._v("\n                  出境游\n                  ")]),e._v(" "),n("van-radio",{attrs:{name:"2"},scopedSlots:e._u([{key:"icon",fn:function(t){return[n("img",{staticClass:"img-icon",class:{checked:2==e.serviceType}})]}}])},[e._v("\n                  国内游\n                  ")])],1)]},proxy:!0}])}),e._v(" "),n("van-field",{attrs:{name:"useStartPlace",label:"出发城市",required:"",placeholder:"请输入出发城市",rules:[{required:!0,message:"请输入出发城市"}]},model:{value:e.useStartPlace,callback:function(t){e.useStartPlace=t},expression:"useStartPlace"}}),e._v(" "),n("van-field",{attrs:{name:"useEndPlace",required:"",label:"目的地",placeholder:"请输入目的地",rules:[{required:!0,message:"请输入目的地"}]},model:{value:e.useEndPlace,callback:function(t){e.useEndPlace=t},expression:"useEndPlace"}}),e._v(" "),n("van-field",{attrs:{label:"出发日期",required:"",name:"useBeginTime",placeholder:"请选择出发日期",rules:[{required:!0,message:"请选择出发日期"}]},on:{click:function(t){e.showCalendar=!0}},model:{value:e.useBeginTime,callback:function(t){e.useBeginTime=t},expression:"useBeginTime"}}),e._v(" "),n("van-field",{attrs:{name:"useEndTime",label:"返回日期",required:"",placeholder:"请选择返回日期",rules:[{required:!0,message:"请选择返回日期"}]},on:{click:function(t){e.showCalendar2=!0}},model:{value:e.useEndTime,callback:function(t){e.useEndTime=t},expression:"useEndTime"}}),e._v(" "),n("van-field",{attrs:{name:"useNumber",label:"出游人数",required:"",placeholder:"请输入出游人数",rules:[{required:!0,message:"请输入出游人数"}]},model:{value:e.useNumber,callback:function(t){e.useNumber=t},expression:"useNumber"}}),e._v(" "),n("van-field",{attrs:{name:"averageAmount",label:"人均预算",required:"",placeholder:"请输入人均预算",rules:[{required:!0,message:"请输入人均预算"}]},model:{value:e.averageAmount,callback:function(t){e.averageAmount=t},expression:"averageAmount"}}),e._v(" "),n("van-field",{attrs:{name:"userName",label:"联系人姓名",placeholder:"请输入联系人姓名",disabled:"",required:"",rules:[{required:!0,message:"请输入联系人姓名"}]},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),e._v(" "),n("van-field",{attrs:{name:"userPhone",label:"手机号",placeholder:"请输入手机号",required:"",rules:[{required:!0,message:"请输入手机号"},{pattern:e.patternPhone,message:"请输入有效手机号"}]},model:{value:e.userPhone,callback:function(t){e.userPhone=t},expression:"userPhone"}}),e._v(" "),n("van-field",{attrs:{name:"useEmailAddress",label:"邮箱地址",placeholder:"请输入邮箱地址",required:"",rules:[{required:!0,message:"请输入邮箱地址"},{pattern:e.pattern,message:"邮箱不合法"}]},model:{value:e.useEmailAddress,callback:function(t){e.useEmailAddress=t},expression:"useEmailAddress"}}),e._v(" "),n("van-field",{staticClass:"gray",attrs:{name:"userMessage",label:"备注信息",type:"textarea",maxlength:"150",placeholder:"航班时间，酒店星级，特殊要求，最多不超过150字。","label-class":"spacial"},model:{value:e.userMessage,callback:function(t){e.userMessage=t},expression:"userMessage"}})],1),e._v(" "),n("van-calendar",{attrs:{"max-date":e.maxDate,"show-confirm":!1},on:{confirm:e.onConfirm},model:{value:e.showCalendar,callback:function(t){e.showCalendar=t},expression:"showCalendar"}}),e._v(" "),n("van-calendar",{attrs:{"min-date":e.minDate,"show-confirm":!1},on:{confirm:e.onConfirm2},model:{value:e.showCalendar2,callback:function(t){e.showCalendar2=t},expression:"showCalendar2"}})],1),e._v(" "),n("div",{staticClass:"tips"},[e._v("\n        *为必填项，出发日期为第三天及以后，截止日期不能早于出发日期，请您确认好订单\n      ")]),e._v(" "),n("div",{staticClass:"handle-con"},[n("van-button",{staticClass:"btn cancel",attrs:{round:"",type:"default"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("van-button",{staticClass:"btn save",attrs:{round:"",type:"info","native-type":"submit"},on:{click:e.save1}},[e._v("\n          提交需求\n        ")])],1),e._v(" "),n("van-action-sheet",{attrs:{title:"说明",round:!1},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"line"}),e._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.content)}},[e._v("\n          "+e._s(e.content)+"\n")]),e._v(" "),n("van-button",{staticClass:"sliver",attrs:{type:"info","native-type":"submit"},on:{click:function(t){e.show=!1}}},[e._v("\n          我知道了\n        ")])],1)],1),e._v(" "),n("CheckPaidMember",{on:{failHandler:e.failHandler}})],1)}),[],!1,null,"6b7732b6",null);t.default=u.exports},Qxyi:function(e,t,n){},Rz0j:function(e,t,n){"use strict";var i=n("RZg1"),a=n("utEe"),r=n("qMEG"),s=n("0oIA"),o=Object(s.a)("calendar"),l=o[0],u=o[1],c=o[2];function h(e,t){var n=e.getFullYear(),i=t.getFullYear(),a=e.getMonth(),r=t.getMonth();return n===i?a===r?0:a>r?1:-1:n>i?1:-1}function d(e,t){var n=h(e,t);if(0===n){var i=e.getDate(),a=t.getDate();return i===a?0:i>a?1:-1}return n}function f(e,t){return(e=new Date(e)).setDate(e.getDate()+t),e}function m(e){return f(e,1)}function v(e){return new Date(e)}function g(e){return Array.isArray(e)?e.map((function(e){return null===e?e:v(e)})):v(e)}var p=n("5B+z"),y=n("tlDm"),b=n("05lO"),D=n("6o6n"),w=n("lrA5"),k=(0,Object(s.a)("calendar-month")[0])({props:{date:Date,type:String,color:String,minDate:Date,maxDate:Date,showMark:Boolean,rowHeight:[Number,String],formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number},data:function(){return{visible:!1}},computed:{title:function(){return e=this.date,c("monthTitle",e.getFullYear(),e.getMonth()+1);var e},rowHeightWithUnit:function(){return Object(D.a)(this.rowHeight)},offset:function(){var e=this.firstDayOfWeek,t=this.date.getDay();return e?(t+7-this.firstDayOfWeek)%7:t},totalDay:function(){return Object(w.a)(this.date.getFullYear(),this.date.getMonth()+1)},shouldRender:function(){return this.visible||!this.lazyRender},placeholders:function(){for(var e=[],t=Math.ceil((this.totalDay+this.offset)/7),n=1;n<=t;n++)e.push({type:"placeholder"});return e},days:function(){for(var e=[],t=this.date.getFullYear(),n=this.date.getMonth(),i=1;i<=this.totalDay;i++){var a=new Date(t,n,i),r=this.getDayType(a),s={date:a,type:r,text:i,bottomInfo:this.getBottomInfo(r)};this.formatter&&(s=this.formatter(s)),e.push(s)}return e}},methods:{getHeight:function(){return this.height||(this.height=this.$el.getBoundingClientRect().height),this.height},scrollIntoView:function(e){var t=this.$refs,n=t.days,i=t.month,a=(this.showSubtitle?n:i).getBoundingClientRect().top-e.getBoundingClientRect().top+e.scrollTop;Object(r.h)(e,a)},getMultipleDayType:function(e){var t=this,n=function(e){return t.currentDate.some((function(t){return 0===d(t,e)}))};if(n(e)){var i=f(e,-1),a=m(e),r=n(i),s=n(a);return r&&s?"multiple-middle":r?"end":s?"start":"multiple-selected"}return""},getRangeDayType:function(e){var t=this.currentDate,n=t[0],i=t[1];if(!n)return"";var a=d(e,n);if(!i)return 0===a?"start":"";var r=d(e,i);return 0===a&&0===r&&this.allowSameDay?"start-end":0===a?"start":0===r?"end":a>0&&r<0?"middle":void 0},getDayType:function(e){var t=this.type,n=this.minDate,i=this.maxDate,a=this.currentDate;return d(e,n)<0||d(e,i)>0?"disabled":null!==a?"single"===t?0===d(e,a)?"selected":"":"multiple"===t?this.getMultipleDayType(e):"range"===t?this.getRangeDayType(e):void 0:void 0},getBottomInfo:function(e){if("range"===this.type){if("start"===e||"end"===e)return c(e);if("start-end"===e)return c("startEnd")}},getDayStyle:function(e,t){var n={height:this.rowHeightWithUnit};return"placeholder"===e?(n.width="100%",n):(0===t&&(n.marginLeft=100*this.offset/7+"%"),this.color&&("start"===e||"end"===e||"start-end"===e||"multiple-selected"===e||"multiple-middle"===e?n.background=this.color:"middle"===e&&(n.color=this.color)),n)},genTitle:function(){var e=this.$createElement;if(this.showMonthTitle)return e("div",{class:u("month-title")},[this.title])},genMark:function(){var e=this.$createElement;if(this.showMark&&this.shouldRender)return e("div",{class:u("month-mark")},[this.date.getMonth()+1])},genDays:function(){var e=this.$createElement,t=this.shouldRender?this.days:this.placeholders;return e("div",{ref:"days",attrs:{role:"grid"},class:u("days")},[this.genMark(),t.map(this.genDay)])},genDay:function(e,t){var n=this,i=this.$createElement,a=e.type,r=e.topInfo,s=e.bottomInfo,o=this.getDayStyle(a,t),l="disabled"===a,c=function(){l||n.$emit("click",e)},h=r&&i("div",{class:u("top-info")},[r]),d=s&&i("div",{class:u("bottom-info")},[s]);return"selected"===a?i("div",{attrs:{role:"gridcell",tabindex:-1},style:o,class:[u("day"),e.className],on:{click:c}},[i("div",{class:u("selected-day"),style:{width:this.rowHeightWithUnit,height:this.rowHeightWithUnit,background:this.color}},[h,e.text,d])]):i("div",{attrs:{role:"gridcell",tabindex:l?null:-1},style:o,class:[u("day",a),e.className],on:{click:c}},[h,e.text,d])}},render:function(){return(0,arguments[0])("div",{class:u("month"),ref:"month"},[this.genTitle(),this.genDays()])}}),T=(0,Object(s.a)("calendar-header")[0])({props:{title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number},methods:{genTitle:function(){var e=this.$createElement;if(this.showTitle){var t=this.slots("title")||this.title||c("title");return e("div",{class:u("header-title")},[t])}},genSubtitle:function(){var e=this.$createElement;if(this.showSubtitle)return e("div",{class:u("header-subtitle")},[this.subtitle])},genWeekDays:function(){var e=this.$createElement,t=c("weekdays"),n=this.firstDayOfWeek,i=[].concat(t.slice(n,7),t.slice(0,n));return e("div",{class:u("weekdays")},[i.map((function(t){return e("span",{class:u("weekday")},[t])}))])}},render:function(){return(0,arguments[0])("div",{class:u("header")},[this.genTitle(),this.genSubtitle(),this.genWeekDays()])}});t.a=l({props:{title:String,color:String,value:Boolean,readonly:Boolean,formatter:Function,rowHeight:[Number,String],confirmText:String,rangePrompt:String,defaultDate:[Date,Array],getContainer:[String,Function],allowSameDay:Boolean,confirmDisabledText:String,type:{type:String,default:"single"},round:{type:Boolean,default:!0},position:{type:String,default:"bottom"},poppable:{type:Boolean,default:!0},maxRange:{type:[Number,String],default:null},lazyRender:{type:Boolean,default:!0},showMark:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},showSubtitle:{type:Boolean,default:!0},closeOnPopstate:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0},minDate:{type:Date,validator:a.a,default:function(){return new Date}},maxDate:{type:Date,validator:a.a,default:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth()+6,e.getDate())}},firstDayOfWeek:{type:[Number,String],default:0,validator:function(e){return e>=0&&e<=6}}},data:function(){return{subtitle:"",currentDate:this.getInitialDate()}},computed:{months:function(){var e=[],t=new Date(this.minDate);t.setDate(1);do{e.push(new Date(t)),t.setMonth(t.getMonth()+1)}while(1!==h(t,this.maxDate));return e},buttonDisabled:function(){var e=this.type,t=this.currentDate;if(t){if("range"===e)return!t[0]||!t[1];if("multiple"===e)return!t.length}return!t},dayOffset:function(){return this.firstDayOfWeek?this.firstDayOfWeek%7:0}},watch:{type:"reset",value:"init",defaultDate:function(e){this.currentDate=e,this.scrollIntoView()}},mounted:function(){this.init()},activated:function(){this.init()},methods:{reset:function(){this.currentDate=this.getInitialDate(),this.scrollIntoView()},init:function(){var e=this;this.poppable&&!this.value||this.$nextTick((function(){e.bodyHeight=Math.floor(e.$refs.body.getBoundingClientRect().height),e.onScroll(),e.scrollIntoView()}))},scrollIntoView:function(){var e=this;Object(i.c)((function(){var t=e.currentDate;if(t){var n="single"===e.type?t:t[0],i=e.value||!e.poppable;n&&i&&e.months.some((function(t,i){if(0===h(t,n)){var a=e.$refs,r=a.body;return a.months[i].scrollIntoView(r),!0}return!1}))}}))},getInitialDate:function(){var e=this.type,t=this.minDate,n=this.maxDate,i=this.defaultDate;if(null===i)return i;var a=new Date;if(-1===d(a,t)?a=t:1===d(a,n)&&(a=n),"range"===e){var r=i||[];return[r[0]||a,r[1]||m(a)]}return"multiple"===e?i||[a]:i||a},onScroll:function(){var e=this.$refs,t=e.body,n=e.months,i=Object(r.c)(t),a=i+this.bodyHeight,s=n.map((function(e){return e.getHeight()}));if(!(a>s.reduce((function(e,t){return e+t}),0)&&i>0)){for(var o,l=0,u=[-1,-1],c=0;c<n.length;c++)l<=a&&l+s[c]>=i&&(u[1]=c,o||(o=n[c],u[0]=c),n[c].showed||(n[c].showed=!0,this.$emit("month-show",{date:n[c].date,title:n[c].title}))),l+=s[c];n.forEach((function(e,t){e.visible=t>=u[0]-1&&t<=u[1]+1})),o&&(this.subtitle=o.title)}},onClickDay:function(e){if(!this.readonly){var t=e.date,n=this.type,i=this.currentDate;if("range"===n){if(!i)return void this.select([t,null]);var a=i[0],r=i[1];if(a&&!r){var s=d(t,a);1===s?this.select([a,t],!0):-1===s?this.select([t,null]):this.allowSameDay&&this.select([t,t],!0)}else this.select([t,null])}else if("multiple"===n){if(!i)return void this.select([t]);var o;if(this.currentDate.some((function(e,n){var i=0===d(e,t);return i&&(o=n),i}))){var l=i.splice(o,1)[0];this.$emit("unselect",v(l))}else this.maxRange&&i.length>=this.maxRange?Object(b.a)(this.rangePrompt||c("rangePrompt",this.maxRange)):this.select([].concat(i,[t]))}else this.select(t,!0)}},togglePopup:function(e){this.$emit("input",e)},select:function(e,t){var n=this,i=function(e){n.currentDate=e,n.$emit("select",g(n.currentDate))};!t||"range"!==this.type||this.checkRange(e)?(i(e),t&&!this.showConfirm&&this.onConfirm()):this.showConfirm?i([e[0],f(e[0],this.maxRange-1)]):i(e)},checkRange:function(e){var t=this.maxRange,n=this.rangePrompt;return!(t&&function(e){var t=e[0].getTime();return(e[1].getTime()-t)/864e5+1}(e)>t&&(Object(b.a)(n||c("rangePrompt",t)),1))},onConfirm:function(){this.$emit("confirm",g(this.currentDate))},genMonth:function(e,t){var n=this.$createElement,i=0!==t||!this.showSubtitle;return n(k,{ref:"months",refInFor:!0,attrs:{date:e,type:this.type,color:this.color,minDate:this.minDate,maxDate:this.maxDate,showMark:this.showMark,formatter:this.formatter,rowHeight:this.rowHeight,lazyRender:this.lazyRender,currentDate:this.currentDate,showSubtitle:this.showSubtitle,allowSameDay:this.allowSameDay,showMonthTitle:i,firstDayOfWeek:this.dayOffset},on:{click:this.onClickDay}})},genFooterContent:function(){var e=this.$createElement,t=this.slots("footer");if(t)return t;if(this.showConfirm){var n=this.buttonDisabled?this.confirmDisabledText:this.confirmText;return e(y.a,{attrs:{round:!0,block:!0,type:"danger",color:this.color,disabled:this.buttonDisabled,nativeType:"button"},class:u("confirm"),on:{click:this.onConfirm}},[n||c("confirm")])}},genFooter:function(){return(0,this.$createElement)("div",{class:u("footer",{unfit:!this.safeAreaInsetBottom})},[this.genFooterContent()])},genCalendar:function(){var e=this,t=this.$createElement;return t("div",{class:u()},[t(T,{attrs:{title:this.title,showTitle:this.showTitle,subtitle:this.subtitle,showSubtitle:this.showSubtitle,firstDayOfWeek:this.dayOffset},scopedSlots:{title:function(){return e.slots("title")}}}),t("div",{ref:"body",class:u("body"),on:{scroll:this.onScroll}},[this.months.map(this.genMonth)]),this.genFooter()])}},render:function(){var e=this,t=arguments[0];if(this.poppable){var n,i=function(t){return function(){return e.$emit(t)}};return t(p.a,{attrs:(n={round:!0,value:this.value},n.round=this.round,n.position=this.position,n.closeable=this.showTitle||this.showSubtitle,n.getContainer=this.getContainer,n.closeOnPopstate=this.closeOnPopstate,n.closeOnClickOverlay=this.closeOnClickOverlay,n),class:u("popup"),on:{input:this.togglePopup,open:i("open"),opened:i("opened"),close:i("close"),closed:i("closed")}},[this.genCalendar()])}return this.genCalendar()}})},bXOk:function(e,t,n){"use strict";n("aO+S"),n("pxog"),n("nXDD"),n("N0PS"),n("TXUN"),n("47Mi"),n("vBum"),n("sljx"),n("gZup")},dyrN:function(e,t,n){"use strict";var i=n("0oIA"),a=n("24U3"),r=Object(i.a)("form"),s=r[0],o=r[1];t.a=s({props:{colon:Boolean,labelWidth:[Number,String],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,errorMessageAlign:String,submitOnEnter:{type:Boolean,default:!0},validateTrigger:{type:String,default:"onBlur"},showError:{type:Boolean,default:!0},showErrorMessage:{type:Boolean,default:!0}},provide:function(){return{vanForm:this}},data:function(){return{fields:[]}},methods:{validateSeq:function(){var e=this;return new Promise((function(t,n){var i=[];e.fields.reduce((function(e,t){return e.then((function(){if(!i.length)return t.validate().then((function(e){e&&i.push(e)}))}))}),Promise.resolve()).then((function(){i.length?n(i):t()}))}))},validateAll:function(){var e=this;return new Promise((function(t,n){Promise.all(e.fields.map((function(e){return e.validate()}))).then((function(e){(e=e.filter((function(e){return e}))).length?n(e):t()}))}))},validate:function(e){return e?this.validateField(e):this.validateFirst?this.validateSeq():this.validateAll()},validateField:function(e){var t=this.fields.filter((function(t){return t.name===e}));return t.length?new Promise((function(e,n){t[0].validate().then((function(t){t?n(t):e()}))})):Promise.reject()},resetValidation:function(e){this.fields.forEach((function(t){e&&t.name!==e||t.resetValidation()}))},scrollToField:function(e,t){this.fields.some((function(n){return n.name===e&&(n.$el.scrollIntoView(t),!0)}))},addField:function(e){this.fields.push(e),Object(a.a)(this.fields,this)},removeField:function(e){this.fields=this.fields.filter((function(t){return t!==e}))},getValues:function(){return this.fields.reduce((function(e,t){return e[t.name]=t.formValue,e}),{})},onSubmit:function(e){e.preventDefault(),this.submit()},submit:function(){var e=this,t=this.getValues();this.validate().then((function(){e.$emit("submit",t)})).catch((function(n){e.$emit("failed",{values:t,errors:n}),e.scrollToError&&e.scrollToField(n[0].name)}))}},render:function(){return(0,arguments[0])("form",{class:o(),on:{submit:this.onSubmit}},[this.slots()])}})}}]);