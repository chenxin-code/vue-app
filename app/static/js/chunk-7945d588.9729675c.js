(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7945d588","chunk-a8f2ea64"],{"00d6":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"scroll",staticClass:"scroll-wrapper",on:{touchstart:t.touchstart}},[a("div",{ref:"scrollContent",staticClass:"scroll-content"},[t._t("default")],2)])},i=[],r=(a("a9e3"),a("4795"),a("1fba"));a("4de4"),a("4160"),a("159b");function o(t,e){var a,s,i,r={absolute:!1,clone:!1,includeMargin:!1,display:"block"},o=[],c="";a=function(){var e=[];n(t,e),e.push(t),i=e.filter((function(t){return"none"===l(t,"display")})),c+="visibility: hidden !important; display: "+r.display+" !important; ",!0===r.absolute&&(c+="position: absolute !important; "),i.forEach((function(t,e){var a=t.getAttribute("style");o.push(a),t.setAttribute("style",a?a+";"+c:c)}))},s=function(){i.forEach((function(t,e){var a=o[e];void 0===a?t.removeAttribute("style"):t.setAttribute("style",a)}))},a();var d=0;return"width"==e?d=t.clientWidth:"height"==e&&(d=t.clientHeight),s(),d}function n(t,e){t&&t.parentElement&&(e.push(t.parentNode),n(t.parentElement,e))}function l(t,e){return t.style[e]?t.style[e]:t.currentStyle?t.currentStyle[e]:window.getComputedStyle(t,null)[e]}var c=o,d={name:"",props:{dataList:{type:Array,default:function(){return[]}},click:{type:Boolean,default:!0},percentWidth:{type:Number,default:0}},data:function(){return{}},mounted:function(){this._refresh()},methods:{touchstart:function(t){},disable:function(){this.scroll&&this.scroll.disable()},enable:function(){this.scroll&&this.scroll.enable()},_refresh:function(){var t=this;this.$nextTick((function(){setTimeout((function(){t._setWidth(),t._initScroll()}),200)}))},_setWidth:function(){if(this.$refs.scrollContent){for(var t=this.$refs.scrollContent.children,e=this.$refs.scroll.clientWidth,a=0,s=0;s<t.length;s++){var i=t[s];this.percentWidth&&(i.style.width=e*this.percentWidth/100+"px"),a+=c(i,"width")}this.$refs.scrollContent.style.width=a+10+"px"}},_initScroll:function(){this.$refs.scroll&&(this.scroll=new r["a"](this.$refs.scroll,{scrollX:!0,scrollY:!1,click:this.click,preventDefault:!1}))}},components:{},watch:{dataList:{handler:function(t){t&&t.length&&this._refresh()},immediate:!0}}},u=d,h=(a("297f"),a("0c7c")),m=Object(h["a"])(u,s,i,!1,null,"77eb9db6",null);e["a"]=m.exports},"0ed3":function(t,e,a){},"297f":function(t,e,a){"use strict";a("6438")},"333a":function(t,e,a){},6438:function(t,e,a){},"69f4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"countdown",class:{quan:"theme_bg_quan"==t.type}},[0==t.d||t.hiddenDay?t._e():a("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.d))]),0==t.d||t.hiddenDay?t._e():a("span",[t._v("天")]),a("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.h))]),t._v(" : "),a("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.m))]),t._v(" : "),a("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.s))])])},i=[],r=(a("4795"),a("e25e"),a("9d5d")),o={name:"countdown",props:["endTime","type","hiddenDay","callback"],components:{},data:function(){return{d:"0",h:"00",m:"00",s:"00",trigger:!0}},methods:{parsingTime:function(){var t=this;if(this.endTime){var e=this.$store.state.severTime.currentTime,a=this.endTime,s=a-e;this.d=0,this.h="0",this.m="0",this.s="0",s<0?this.trigger&&(this.trigger=!1,setTimeout((function(){t.$emit("timeOut")}),1e3)):(this.trigger=!0,s>59?(this.s=s%60,s=parseInt(s/60),s>59?(this.m=s%60,s=parseInt(s/60),s>23?(this.h=parseInt(s%24),s=parseInt(s/24),this.d=s):this.h=s):this.m=s):s>=0&&(this.s=s),this.h<10&&(this.h="0"+this.h),this.m<10&&(this.m="0"+this.m),this.s<10&&(this.s="0"+this.s))}}},created:function(){this.parsingTime(),r["a"].heartbeat()},destroyed:function(){r["a"].removeHeartbeat()},watch:{"$store.state.severTime.currentTime":function(){this.parsingTime()}}},n=o,l=(a("d49f"),a("0c7c")),c=Object(l["a"])(n,s,i,!1,null,"65b2d2d6",null);e["default"]=c.exports},"959f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-list"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"scroll"},[a("div",{staticClass:"layout-grid good-list",style:t.getSideMargin()},t._l(t.moduleData.rows,(function(e,s){return a("div",{staticClass:"goods",class:{"no-stock":"0"==e.stockNum&&"1"==t.$store.state.globalConfig.showNoStockCover,"row-three-pro":1==t.moduleData.rowThreeProduct},on:{click:function(a){return t.enterNav(e)}}},[a("div",{staticClass:"goods-picture"},[a("img",{staticClass:"full-img",attrs:{src:e.phMainUrl?e.phMainUrl+"?x-oss-process=image/format,jpg":"static/images/defaultImg_w.png"}}),e.cornerMark>0?a("div",{staticClass:"corner-mark"},[a("img",{attrs:{src:t._f("counerMarkUrl")(e)}})]):t._e()]),"1"==t.moduleData.layout.hasTitle?a("div",{staticClass:"goods-name double-line",domProps:{innerHTML:t._s(e.showTitle)}}):t._e(),e.activityTags.length>0?a("div",{staticClass:"activity-tags"},t._l(e.activityTags,(function(e){return a("div",{staticClass:"tag single-line"},[t._v(t._s(e))])})),0):t._e(),a("div",{staticClass:"goods-footer"},["1"==t.moduleData.layout.hasPrice?a("div",{staticClass:"price"},[a("PriceOrder",{attrs:{listitem:e,isRMBEnd:t.isRMBEnd}})],1):t._e(),"1"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[2!=e.productType&&-1==t.$store.state.webtype?a("img",{attrs:{src:"static/images/product-list/icon_gods_car01.png"}}):2!=e.productType?a("i",{staticClass:"iconfont mall-gouwuche theme_font_red car-size",class:{theme_font_gray_i:"0"==e.stockNum},on:{click:function(a){return a.stopPropagation(),t.addToCart(e)}}}):t._e()]):t._e(),"2"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[a("img",{attrs:{src:"static/images/product-list/icon_gods_car02.png"}})]):t._e(),"3"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[a("img",{attrs:{src:"static/images/product-list/icon_gods_car03.png"}})]):t._e(),"4"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[a("img",{attrs:{src:"static/images/product-list/icon_gods_car04.png"}})]):t._e(),"5"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[a("img",{attrs:{src:"static/images/product-list/icon_gods_car05.png"}})]):t._e()])])})),0)])])])},i=[],r=(a("4160"),a("159b"),a("590c")),o={name:"product-list-grid",components:{PriceOrder:r["a"]},props:["myIndex","usePorpData","propData","isRMBEnd"],computed:{pageData:function(){return 1==this.usePorpData?this.propData:this.$store.state.pageData},moduleData:function(){return-1==this.myIndex?this.pageData.productInfinite.data:this.pageData.moduleList[this.myIndex].data},dev:function(){return"-1"===this.$store.state.webtype}},data:function(){return{}},created:function(){this.testCorerMark()},filters:{counerMarkUrl:function(t){return t.cornerMark<6?"static/images/product-list/icon_gods_hot0".concat(t.cornerMark,".png"):t.selfCornerMarkUrl}},methods:{testCorerMark:function(){var t=this;this.moduleData.rows.forEach((function(e){!e.cornerMark&&t.$set(e,"cornerMark",0),!e.selfCornerMarkUrl&&t.$set(e,"selfCornerMarkUrl","")}))},getSideMargin:function(){var t=this.moduleData.sideMargin;if(t){var e="margin-left:"+t+"%;";return e+="margin-right:"+t+"%;",e}return""},enterNav:function(t){this.$market.productEvent(t,this.$route,this.moduleData.onlyDeliveryType)},addToCart:function(t){var e=this;this.$Loading.open();var a="/app/json/app_cart/addCart",s={token:this.$store.state.login.token,carts:[{skuId:t.skuId,storeOuCode:t.storeOuCode,activityId:"",selfActivityId:t.activityId,deliveryType:this.$store.state.mall2.staticDeliverType,number:1}],orderCategory:void 0,vipUnitUserCode:void 0,deliveryType:t.deliverType};this.$http.post(a,s).then((function(t){e.$Loading.close();var a=t.data;0==a.status?(e.$store.state.mall2.cartNum=a.data,e.$toast("添加购物车成功！")):e.$Toast(a.info)}),(function(t){e.$Loading.close(),e.$Toast("请求数据失败！")}))}}},n=o,l=(a("de15"),a("0c7c")),c=Object(l["a"])(n,s,i,!1,null,"330bef07",null);e["a"]=c.exports},"9d5d":function(t,e,a){"use strict";a("4795"),a("e25e"),a("0d03");var s,i=a("653a"),r=0,o={heartbeat:function(){r++,s||(s=window.setInterval((function(){var t=parseInt((new Date).getTime()/1e3);i["a"].state.severTime.currentTime=t+i["a"].state.severTime.jetlag}),1e3))},removeHeartbeat:function(){r>0&&r--,0==r&&(window.clearInterval(s),s=null)}};e["a"]=o},"9d84":function(t,e,a){"use strict";a("0ed3")},"9ffe":function(t,e,a){},ce34:function(t,e,a){"use strict";a("e219")},d49f:function(t,e,a){"use strict";a("333a")},de15:function(t,e,a){"use strict";a("9ffe")},e219:function(t,e,a){},e9c2:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.getModuleIsShow()&&t.moduleData.rows.length>0||1!=t.usePorpData?a("div",{staticClass:"product-list",class:{"min-height":1!=t.usePorpData},style:t.$market.getModuleBgStyle(t.moduleData)},[""!=t.moduleData.titleImg?a("div",{staticClass:"title-img"},[a("img",{attrs:{src:t.moduleData.titleImg}}),t.moduleData.showTime&&"3"==t.moduleData.type&&3==t.moduleData.useApi?a("div",{staticClass:"title-content"},[a("div",{staticClass:"remaining"},[t._v(t._s(t.timeText))]),t.showCountdown?a("Countdown",{attrs:{endTime:t.endTime,type:"theme_bg_quan"},on:{timeOut:t.myTimeOut}}):t._e()],1):t._e()]):t._e(),a("div",{staticClass:"tip"}),"4"==t.moduleData.useApi&&t.moduleData.channels&&t.moduleData.channels.length>1?a("div",{staticClass:"channels-div"},t._l(t.moduleData.channels,(function(e){return a("div",{staticClass:"channel",class:{selected:t.selectedChannel&&t.selectedChannel.id==e.id},on:{click:function(a){return t.selectChannel(e)}}},[t._v(t._s(e.name)+" ")])})),0):t._e(),"1"==t.moduleData.type?a("ProductLlistGrid",{attrs:{myIndex:t.myIndex,usePorpData:t.usePorpData,propData:t.propData}}):t._e(),"3"==t.moduleData.type?a("ProductLlistHScroll",{attrs:{myIndex:t.myIndex,usePorpData:t.usePorpData,propData:t.propData}}):t._e()],1):t._e()},i=[],r=(a("ac1f"),a("5319"),a("0d03"),a("d3b7"),a("4160"),a("7db0"),a("69f4")),o=a("959f"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$market.moduleIsShow(t.moduleData)?a("div",{staticClass:"product-list-hscroll",style:t.$market.getModuleBgStyle(t.moduleData)},[a("div",{staticClass:"content"},[a("div",{staticClass:"items-row"},[a("HScroll",{attrs:{dataList:t.moduleData.rows,click:!1}},t._l(t.moduleData.rows,(function(e,s){return a("div",{staticClass:"item"},[a("div",{staticClass:"content-div",style:t.getItemStyle(s),on:{click:function(a){return t.enterNav(e)}}},[a("img",{style:t.imgStyle,attrs:{src:e.phMainUrl}}),a("div",{staticClass:"h-price"},[a("PriceOrder",{attrs:{listitem_Double:e}})],1)])])})),0)],1)])]):t._e()},l=[],c=a("5530"),d=a("590c"),u=a("00d6"),h=a("2f62"),m={name:"product-list-hscroll",components:{PriceOrder:d["a"],HScroll:u["a"]},props:["myIndex","usePorpData","propData"],data:function(){return{imgStyle:""}},computed:Object(c["a"])(Object(c["a"])({},Object(h["c"])(["clientWidth"])),{},{pageData:function(){return 1==this.usePorpData?this.propData:this.$store.state.pageData},moduleData:function(){return this.pageData.moduleList[this.myIndex].data}}),mounted:function(){},methods:{enterNav:function(t){this.moduleData.showTime&&"3"==this.moduleData.type&&3==this.moduleData.useApi?this.$market.productEvent(t,this.$route,this.moduleData.onlyDeliveryType,"1"):this.$market.productEvent(t,this.$route,this.moduleData.onlyDeliveryType)},getItemStyle:function(t){var e="",a=this.moduleData.startMargin,s=this.moduleData.space,i=this.clientWidth;a>0&&(i=this.clientWidth*(100-a-a)/100);var r=this.moduleData.itemNumber,o=i;s>0&&(e+="margin-right: "+s+"px;",o-=(r-1)*s);var n=o/r,l=1*n;return e+="width: "+n+"px;",this.imgStyle="width: "+n+"px;height: "+l+"px;",0==t?a>0&&(e+="margin-left: "+a+"vw;"):t==this.moduleData.rows.length-1&&a>0&&(e+="margin-right: "+a+"vw;"),e}}},p=m,f=(a("9d84"),a("0c7c")),g=Object(f["a"])(p,n,l,!1,null,"3a34749c",null),v=g.exports,y=a("f094"),D={name:"product-list",components:{HScroll:u["a"],Countdown:r["default"],ProductLlistGrid:o["a"],ProductLlistHScroll:v},mixins:[y["a"]],props:["myIndex","usePorpData","propData","scrollSite"],data:function(){return{endTime:"",timeText:"还剩：",showCountdown:!0,beforeClear:!0,selectedChannel:null}},methods:{selectChannel:function(t){this.moduleData.selectedId=t.id,this.selectedChannel=t,this._getCurrentDatas(null,t)},getModuleIsShow:function(){return 0!=this.showCountdown},getEndTime:function(){if(this.moduleData.showTime&&"3"==this.moduleData.type&&3==this.moduleData.useApi&&this.moduleData.rows.length>0){var t=this.moduleData.rows[0],e=t.mktStartDate.replace(/-/g,"/"),a=new Date(e).getTime()/1e3,s=this.$store.state.severTime.currentTime;if(this.showCountdown=!0,a>s)this.endTime=a,this.timeText="距开始：";else{var i=t.mktEndDate.replace(/-/g,"/");this.endTime=new Date(i).getTime()/1e3,this.timeText="还剩：",this.endTime<=s&&(this.timeText="活动已结束",this.showCountdown=!1)}}},myTimeOut:function(){this.getProducts()},modeleReshow:function(){},getProducts:function(){if(2==this.moduleData.useApi)this._getCurrentDatas(null,null);else if(3==this.moduleData.useApi)this._getCurrentDatas(null,null);else if(4==this.moduleData.useApi)this._getCurrentDatas(null,null);else{for(var t=[],e=0;e<this.moduleData.rows.length;e++){var a=this.moduleData.rows[e];""!=a.skuId&&t.push(a.skuId)}t.length>0&&this._getCurrentDatas(t,null)}},queryMktActivityByIdList:function(){for(var t=this,e=this.$market.apiBaseURL()+"/app/json/app_market/queryMktActivityByIdList",a=[],s=0;s<this.moduleData.productFrom.activity.length;s++){var i=this.moduleData.productFrom.activity[s];a.push(i.activityId)}var r={idList:a.toString()};this.$store.state.login.token&&""!=this.$store.state.login.token&&(r.token=this.$store.state.login.token),this.$http.post(e,r).then((function(e){var a=e.data;if(0==a.status){var s=a.data;if(s.length>0){var i=s[0];t._getCurrentDatas(null,i)}}}),(function(t){}))},queryChannelList:function(){var t=this,e=this.$market.apiBaseURL()+"/app/json/product/getAppProChannelList",a={token:this.$store.state.login.token,channelGroupId:this.moduleData.productFrom.id};this.$http.post(e,a).then((function(e){var a=e.data;if(0==a.status){var s=a.data.list;if(s.length>0){var i=s[0];t.moduleData.channels=s,t.moduleData.selectedId=i.id,t.selectedChannel=i,t._getCurrentDatas(null,i)}}}),(function(t){}))},clearProductInfo:function(){for(var t=0;t<this.moduleData.rows.length;t++){var e=this.moduleData.rows[t];e.showTitle=" ",e.phMainUrl="",e.activityPrice=0,e.stockNum=0}},_getCurrentDatas:function(t,e){var a=this,s=this.moduleData.rows;this.beforeClear&&(this.moduleData.rows=[]);var i=this.$market.apiBaseURL()+"/app/json/product/getAppDesigneList",r={fromFrontPage:"1"};if("-1"==this.$store.state.webtype&&(r.fromFrontPage=""),this.$store.state.login.token&&""!=this.$store.state.login.token&&1==this.usePorpData&&(r.token=this.$store.state.login.token),t)r.skuIds=t,r.page=1,r.rows=300;else if(r.page=1,r.rows=this.moduleData.productFrom.number,2==this.moduleData.useApi){var o=this.moduleData.productFrom.backCates;if("2"==this.moduleData.productFrom.multiple&&o&&o.length>1){for(var n=[],l=0;l<o.length;l++){var c=o[l];n.push(c.id)}r.categoryIdList=JSON.stringify(n)}else{var d=this.moduleData.productFrom.cate;r.clsType=d.clsType,r.categoryId=d.id,r.cateLevel=d.cateLevel}}else if(3==this.moduleData.useApi){if(!e){if(this.moduleData.productFrom.activity.length>1)return void this.queryMktActivityByIdList();e=this.moduleData.productFrom.activity}r.activityId=e.activityId?e.activityId:e.id}else if(4==this.moduleData.useApi){if(!e)return void this.queryChannelList();r.categoryId=e.id,r.clsType="4"}r.deliverType=this.$store.state.mall2.staticDeliverType,r.pickUpId=this.$store.state.mall2.zitiAddress.id,r.pickupStoreOuCode=this.$store.state.mall2.zitiAddress.storeCode;var u=this.$store.state.mall2.selectAddress;r.area={provinceId:u.provinceId,cityId:u.cityId,countryId:u.countryId,countyId:u.countryId,townId:u.townId},this.$http.post(i,r).then((function(e){var i=e.data;if(0==i.status){a.moduleData.rows=[];var r=i.data.list,o=a.$store.state.globalConfig.hasStockAlways,n=[];if(t)for(var l=0;l<t.length;l++){for(var c=t[l],d=null,u=0;u<r.length;u++){var h=r[u];h.skuId==c&&(d=h)}if(d){var m=a.$market.dataProcessing(d);"1"==o&&(m.stockNum=m.stockNum||1),n.push(m)}}else for(var p=0;p<r.length;p++){var f=a.$market.dataProcessing(r[p]);"1"==o&&(f.stockNum=f.stockNum||1),n.push(f)}n.forEach((function(t){var e=s.find((function(e){return e.skuId==t.skuId}));a.$set(t,"cornerMark",e?e.cornerMark:0),a.$set(t,"selfCornerMarkUrl",e?e.selfCornerMarkUrl:"")})),a.moduleData.rows=n,a.getEndTime()}}),(function(t){}))},lazyLoadPageData:function(){this.getProducts()}},computed:{pageData:function(){return 1==this.usePorpData?this.propData:this.$store.state.pageData},moduleData:function(){return this.pageData.moduleList[this.myIndex].data}},mounted:function(){this.beforeClear=!1,this.clearProductInfo()}},_=D,C=(a("ce34"),Object(f["a"])(_,s,i,!1,null,"2bdbdd50",null));e["default"]=C.exports},f094:function(t,e,a){"use strict";e["a"]={data:function(){return{lazyLoadedData:!1}},props:["isScrollPage","scrollSite"],watch:{scrollSite:function(t,e){this.lazyLoadedData||t+1.3*document.documentElement.clientHeight>this.$el.offsetTop&&(this.lazyLoadedData=!0,this.lazyLoadPageData&&this.lazyLoadPageData())}},mounted:function(){if(this.isScrollPage){if(this.lazyLoadedData)return;1.3*document.documentElement.clientHeight>this.$el.offsetTop&&(this.lazyLoadedData=!0,this.lazyLoadPageData&&this.lazyLoadPageData())}else this.lazyLoadPageData&&this.lazyLoadPageData()}}}}]);