(window.webpackJsonp=window.webpackJsonp||[]).push([[385],{"9z00":function(t,e,n){"use strict";var s=n("z+9W");n.n(s).a},IzYk:function(t,e,n){"use strict";n.r(e);var s=n("L2JU"),o={name:"vercodebtn",props:{phone:[String,Number]},data:function(){return{buttonCode:"获取验证码",sec:60,btnStatus:!1}},methods:{loadVerCode:function(){("no"===this.phone||this.validatePhone())&&this.$emit("loadVerCode")},countDown:function(){var t=this,e=t.sec;0===e?t.reset():(e--,t.sec=e,t.btnStatus=!0,t.buttonCode=e+"s重新发送",clearTimeout(this.timer),this.timer=setTimeout((function(){t.countDown()}),1e3))},validatePhone:function(){return!(""===this.phone||!/^1(3|4|5|7|8|9)\d{9}$/.test(this.phone))||(this.$Toast("手机号不正确"),!1)},reset:function(){clearTimeout(this.timer),this.buttonCode="获取验证码",this.sec=60,this.btnStatus=!1}},mounted:function(){},watch:{countDownFlag:function(t){t&&(this.countDown(),this.btnStatus=!0)},codeBtnStatus:function(t){console.log(t),this.btnStatus=this.codeBtnStatus}}},i=(n("9z00"),n("KHd+")),a=(Object(i.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("button",{staticClass:"btn_vercode",attrs:{disabled:this.btnStatus,size:"small",type:"primary"},on:{click:this.loadVerCode}},[this._v("\n     | "+this._s(this.buttonCode)+"\n  ")])])}),[],!1,null,"40566f70",null).exports,n("uQt8")),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},u={name:"authentication",components:{CountButton:a.a},data:function(){return{isSuccess:!1,verifyCode:""}},computed:c({},Object(s.c)(["userInfo"])),methods:{phone:function(t){return t.replace(/(\d{3})\d*(\d{4})/,"$1****$2")},getMsgCode:function(t,e){var n=this;if(""!=this.phone)if(this.$util.checkMobile(this.userInfo.phone)){this.$refs.countBtn.startTime(),this.$Loading.open();var s={smsType:"1020",phone:this.userInfo.phone,imgVerifyCode:t,uuid:e};this.$http.post("/app/json/login/sendSms",s).then((function(t){n.$Loading.close();var e=t.data;0==e.status?n.$Toast("获取验证码成功"):(n.$refs.countBtn.resetClock(),n.$Toast(e.info?e.info:"获取短信验证码失败"))}),(function(t){n.$Loading.close(),n.$refs.countBtn.resetClock(),n.$Toast("系统运行过程中遇到问题，请稍候再试")}))}else this.$Toast("请输入正确的手机号码！");else this.$Toast("手机号不能为空!")},cancelRequest:function(){var t=this;if(this.verifyCode){this.$Loading.open();var e={verifyCode:this.verifyCode,token:this.$store.state.login.token};this.$http.post("/app/json/user/cancelUser",e).then((function(e){t.$Loading.close();var n=e.data;0==n.status?(t.$Toast("注销成功！"),t.isSuccess=!0):t.$Toast(n.info)}),(function(e){t.$Loading.close(),t.$Toast("获取数据失败")}))}else this.$Toast("请输入验证码")},backEvent:function(){this.isSuccess?this.$userCenter.loginOut(-3):this.$router.go(-1)},goHome:function(){this.$userCenter.loginOut(-3)}},created:function(){}},r=(n("sj9g"),Object(i.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cancel-user login2"},[n("nav-top",{on:{backEvent:t.backEvent}}),t._v(" "),n("nav-content",[n("div",{staticClass:"content"},[t.isSuccess?n("div",{staticClass:"success"},[n("div",{staticClass:"tip"},[n("van-icon",{attrs:{name:"checked",color:"#00c200",size:"50"}}),t._v(" "),n("span",[t._v("账号"),n("i",[t._v(t._s(t.phone(t.userInfo.phone)))]),t._v(" 已成功注销")])],1),t._v(" "),n("div",{staticClass:"common-btn theme_bg_red theme_font_white mt100",on:{click:t.goHome}},[t._v("前往APP首页")])]):n("div",{staticClass:"haveHand"},[n("span",[t._v("短信验证码将发送至 "),n("i",[t._v(t._s(t.phone(t.userInfo.phone)))])]),t._v(" "),n("van-field",{attrs:{"label-width":"60px",center:"",size:"large",label:"验证码",placeholder:"请输入验证码"},scopedSlots:t._u([{key:"button",fn:function(){return[n("count-button",{ref:"countBtn",staticClass:"theme_standard_font",attrs:{phone:t.userInfo.phone},on:{getSmsEvent:t.getMsgCode}})]},proxy:!0}],null,!1,2983719552),model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}}),t._v(" "),n("div",{staticClass:"common-btn theme_bg_red theme_font_white mt100",on:{click:t.cancelRequest}},[t._v("确定")])],1)])])],1)}),[],!1,null,"bea4a26a",null));e.default=r.exports},qn8u:function(t,e,n){},sj9g:function(t,e,n){"use strict";var s=n("qn8u");n.n(s).a},"z+9W":function(t,e,n){}}]);