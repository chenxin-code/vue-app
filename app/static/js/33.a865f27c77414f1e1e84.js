(window.webpackJsonp=window.webpackJsonp||[]).push([[33,52],{"4Lnq":function(t,e,a){"use strict";var s=a("dMxa");a.n(s).a},"54mj":function(t,e,a){},"6cKT":function(t,e,a){"use strict";a.r(e);var s=a("L2JU"),i=a("afTz"),r=a("lZ+2"),o=a("WQzh"),n=a("ANbv"),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},c={name:"product-list-hscroll",components:{PriceOrder:o.a,HScroll:n.a},props:["myIndex","usePorpData","propData"],data:function(){return{imgStyle:""}},computed:l({},Object(s.c)(["clientWidth"]),{pageData:function(){return 1==this.usePorpData?this.propData:this.$store.state.pageData},moduleData:function(){return this.pageData.moduleList[this.myIndex].data}}),mounted:function(){console.log("this.moduleData",this.moduleData)},methods:{enterNav:function(t){this.moduleData.showTime&&"3"==this.moduleData.type&&3==this.moduleData.useApi?this.$market.productEvent(t,this.$route,this.moduleData.onlyDeliveryType,"1"):this.$market.productEvent(t,this.$route,this.moduleData.onlyDeliveryType)},getItemStyle:function(t){var e="",a=this.moduleData.startMargin,s=this.moduleData.space,i=this.clientWidth;a>0&&(i=this.clientWidth*(100-a-a)/100);var r=this.moduleData.itemNumber,o=i;s>0&&(e+="margin-right: "+s+"px;",o-=(r-1)*s);var n=o/r,l=1*n;return e+="width: "+n+"px;",this.imgStyle="width: "+n+"px;height: "+l+"px;",0==t?a>0&&(e+="margin-left: "+a+"vw;"):t==this.moduleData.rows.length-1&&a>0&&(e+="margin-right: "+a+"vw;"),e}}},u=(a("tmVN"),a("KHd+")),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$market.moduleIsShow(t.moduleData)?a("div",{staticClass:"product-list-hscroll",style:t.$market.getModuleBgStyle(t.moduleData)},[a("div",{staticClass:"content"},[a("div",{staticClass:"items-row"},[a("HScroll",{attrs:{dataList:t.moduleData.rows,click:!1}},t._l(t.moduleData.rows,(function(e,s){return a("div",{staticClass:"item"},[a("div",{staticClass:"content-div",style:t.getItemStyle(s),on:{click:function(a){return t.enterNav(e)}}},[a("img",{style:t.imgStyle,attrs:{src:e.phMainUrl}}),t._v(" "),a("div",{staticClass:"h-price"},[a("PriceOrder",{attrs:{listitem_Double:e}})],1)])])})),0)],1)])]):t._e()}),[],!1,null,"604f7b98",null).exports,h=a("8JTH"),m={name:"product-list",components:{HScroll:n.a,Countdown:i.default,ProductLlistGrid:r.a,ProductLlistHScroll:d},mixins:[h.a],props:["myIndex","usePorpData","propData","scrollSite"],data:function(){return{endTime:"",timeText:"还剩：",showCountdown:!0,beforeClear:!0,selectedChannel:null}},methods:{selectChannel:function(t){this.moduleData.selectedId=t.id,this.selectedChannel=t,this._getCurrentDatas(null,t)},getModuleIsShow:function(){return 0!=this.showCountdown},getEndTime:function(){if(this.moduleData.showTime&&"3"==this.moduleData.type&&3==this.moduleData.useApi&&this.moduleData.rows.length>0){var t=this.moduleData.rows[0],e=t.mktStartDate.replace(/-/g,"/"),a=new Date(e).getTime()/1e3,s=this.$store.state.severTime.currentTime;if(this.showCountdown=!0,a>s)this.endTime=a,this.timeText="距开始：";else{var i=t.mktEndDate.replace(/-/g,"/");this.endTime=new Date(i).getTime()/1e3,this.timeText="还剩：",this.endTime<=s&&(this.timeText="活动已结束",this.showCountdown=!1)}}},myTimeOut:function(){this.getProducts()},modeleReshow:function(){},getProducts:function(){if(2==this.moduleData.useApi)this._getCurrentDatas(null,null);else if(3==this.moduleData.useApi)this._getCurrentDatas(null,null);else if(4==this.moduleData.useApi)this._getCurrentDatas(null,null);else{for(var t=[],e=0;e<this.moduleData.rows.length;e++){var a=this.moduleData.rows[e];""!=a.skuId&&t.push(a.skuId)}t.length>0&&this._getCurrentDatas(t,null)}},queryMktActivityByIdList:function(){for(var t=this,e=this.$market.apiBaseURL()+"/app/json/app_market/queryMktActivityByIdList",a=[],s=0;s<this.moduleData.productFrom.activity.length;s++){var i=this.moduleData.productFrom.activity[s];a.push(i.activityId)}var r={idList:a.toString()};this.$store.state.login.token&&""!=this.$store.state.login.token&&(r.token=this.$store.state.login.token),this.$http.post(e,r).then((function(e){var a=e.data;if(0==a.status){var s=a.data;if(s.length>0){var i=s[0];t._getCurrentDatas(null,i)}}}),(function(t){}))},queryChannelList:function(){var t=this,e=this.$market.apiBaseURL()+"/app/json/product/getAppProChannelList",a={token:this.$store.state.login.token,channelGroupId:this.moduleData.productFrom.id};this.$http.post(e,a).then((function(e){var a=e.data;if(0==a.status){var s=a.data.list;if(s.length>0){var i=s[0];t.moduleData.channels=s,t.moduleData.selectedId=i.id,t.selectedChannel=i,t._getCurrentDatas(null,i)}}}),(function(t){}))},clearProductInfo:function(){for(var t=0;t<this.moduleData.rows.length;t++){var e=this.moduleData.rows[t];e.showTitle=" ",e.phMainUrl="",e.activityPrice=0,e.stockNum=0}},_getCurrentDatas:function(t,e){var a=this,s=this.moduleData.rows;this.beforeClear&&(this.moduleData.rows=[]);var i=this.$market.apiBaseURL()+"/app/json/product/getAppDesigneList",r={fromFrontPage:"1"};if("-1"==this.$store.state.webtype&&(r.fromFrontPage=""),this.$store.state.login.token&&""!=this.$store.state.login.token&&1==this.usePorpData&&(r.token=this.$store.state.login.token),t)r.skuIds=t,r.page=1,r.rows=300;else if(r.page=1,r.rows=this.moduleData.productFrom.number,2==this.moduleData.useApi){var o=this.moduleData.productFrom.backCates;if("2"==this.moduleData.productFrom.multiple&&o&&o.length>1){for(var n=[],l=0;l<o.length;l++){var c=o[l];n.push(c.id)}r.categoryIdList=JSON.stringify(n)}else{var u=this.moduleData.productFrom.cate;r.clsType=u.clsType,r.categoryId=u.id,r.cateLevel=u.cateLevel}}else if(3==this.moduleData.useApi){if(!e){if(this.moduleData.productFrom.activity.length>1)return void this.queryMktActivityByIdList();e=this.moduleData.productFrom.activity}r.activityId=e.activityId?e.activityId:e.id}else if(4==this.moduleData.useApi){if(!e)return void this.queryChannelList();r.categoryId=e.id,r.clsType="4"}r.deliverType=this.$store.state.mall2.staticDeliverType,r.pickUpId=this.$store.state.mall2.zitiAddress.id,r.pickupStoreOuCode=this.$store.state.mall2.zitiAddress.storeCode;var d=this.$store.state.mall2.selectAddress;r.area={provinceId:d.provinceId,cityId:d.cityId,countryId:d.countryId,countyId:d.countryId,townId:d.townId},this.$http.post(i,r).then((function(e){var i=e.data;if(0==i.status){a.moduleData.rows=[];var r=i.data.list,o=a.$store.state.globalConfig.hasStockAlways,n=[];if(t)for(var l=0;l<t.length;l++){for(var c=t[l],u=null,d=0;d<r.length;d++){var h=r[d];h.skuId==c&&(u=h)}if(u){var m=a.$market.dataProcessing(u);"1"==o&&(m.stockNum=m.stockNum||1),n.push(m)}}else for(var p=0;p<r.length;p++){var f=a.$market.dataProcessing(r[p]);"1"==o&&(f.stockNum=f.stockNum||1),n.push(f)}n.forEach((function(t){var e=s.find((function(e){return e.skuId==t.skuId}));a.$set(t,"cornerMark",e?e.cornerMark:0),a.$set(t,"selfCornerMarkUrl",e?e.selfCornerMarkUrl:"")})),a.moduleData.rows=n,a.getEndTime()}}),(function(t){}))},lazyLoadPageData:function(){this.getProducts()}},computed:{pageData:function(){return 1==this.usePorpData?this.propData:this.$store.state.pageData},moduleData:function(){return this.pageData.moduleList[this.myIndex].data}},mounted:function(){this.beforeClear=!1,this.clearProductInfo()}},p=(a("4Lnq"),Object(u.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.getModuleIsShow()&&t.moduleData.rows.length>0||1!=t.usePorpData?a("div",{staticClass:"product-list",class:{"min-height":1!=t.usePorpData},style:t.$market.getModuleBgStyle(t.moduleData)},[""!=t.moduleData.titleImg?a("div",{staticClass:"title-img"},[a("img",{attrs:{src:t.moduleData.titleImg}}),t._v(" "),t.moduleData.showTime&&"3"==t.moduleData.type&&3==t.moduleData.useApi?a("div",{staticClass:"title-content"},[a("div",{staticClass:"remaining"},[t._v(t._s(t.timeText))]),t._v(" "),t.showCountdown?a("Countdown",{attrs:{endTime:t.endTime,type:"theme_bg_quan"},on:{timeOut:t.myTimeOut}}):t._e()],1):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"tip"}),t._v(" "),"4"==t.moduleData.useApi&&t.moduleData.channels&&t.moduleData.channels.length>1?a("div",{staticClass:"channels-div"},t._l(t.moduleData.channels,(function(e){return a("div",{staticClass:"channel",class:{selected:t.selectedChannel&&t.selectedChannel.id==e.id},on:{click:function(a){return t.selectChannel(e)}}},[t._v(t._s(e.name)+"\n    ")])})),0):t._e(),t._v(" "),"1"==t.moduleData.type?a("ProductLlistGrid",{attrs:{myIndex:t.myIndex,usePorpData:t.usePorpData,propData:t.propData}}):t._e(),t._v(" "),"3"==t.moduleData.type?a("ProductLlistHScroll",{attrs:{myIndex:t.myIndex,usePorpData:t.usePorpData,propData:t.propData}}):t._e()],1):t._e()}),[],!1,null,"ab385770",null));e.default=p.exports},"6vT7":function(t,e,a){},"8BuO":function(t,e,a){"use strict";var s=a("54mj");a.n(s).a},"8JTH":function(t,e,a){"use strict";e.a={data:function(){return{lazyLoadedData:!1}},props:["isScrollPage","scrollSite"],watch:{scrollSite:function(t,e){this.lazyLoadedData||t+1.3*document.documentElement.clientHeight>this.$el.offsetTop&&(this.lazyLoadedData=!0,this.lazyLoadPageData&&this.lazyLoadPageData())}},mounted:function(){if(this.isScrollPage){if(this.lazyLoadedData)return;1.3*document.documentElement.clientHeight>this.$el.offsetTop&&(this.lazyLoadedData=!0,this.lazyLoadPageData&&this.lazyLoadPageData())}else this.lazyLoadPageData&&this.lazyLoadPageData()}}},ANbv:function(t,e,a){"use strict";var s=a("H7qB"),i=function(t,e){var a,s,i,r=[],o="";a=function(){s.forEach((function(t,e){var a=r[e];void 0===a?t.removeAttribute("style"):t.setAttribute("style",a)}))},function t(e,a){e&&e.parentElement&&(a.push(e.parentNode),t(e.parentElement,a))}(t,i=[]),i.push(t),s=i.filter((function(t){return"none"===function(t,e){return t.style[e]?t.style[e]:t.currentStyle?t.currentStyle[e]:window.getComputedStyle(t,null)[e]}(t,"display")})),o+="visibility: hidden !important; display: block !important; ",s.forEach((function(t,e){var a=t.getAttribute("style");r.push(a),t.setAttribute("style",a?a+";"+o:o)}));var n=0;return"width"==e?n=t.clientWidth:"height"==e&&(n=t.clientHeight),a(),n},r={name:"",props:{dataList:{type:Array,default:function(){return[]}},click:{type:Boolean,default:!0},percentWidth:{type:Number,default:0}},data:function(){return{}},mounted:function(){this._refresh()},methods:{touchstart:function(t){},disable:function(){this.scroll&&this.scroll.disable()},enable:function(){this.scroll&&this.scroll.enable()},_refresh:function(){var t=this;this.$nextTick((function(){setTimeout((function(){t._setWidth(),t._initScroll()}),200)}))},_setWidth:function(){if(this.$refs.scrollContent){for(var t=this.$refs.scrollContent.children,e=this.$refs.scroll.clientWidth,a=0,s=0;s<t.length;s++){var r=t[s];this.percentWidth&&(r.style.width=e*this.percentWidth/100+"px"),a+=i(r,"width")}this.$refs.scrollContent.style.width=a+10+"px"}},_initScroll:function(){this.$refs.scroll&&(this.scroll=new s.a(this.$refs.scroll,{scrollX:!0,scrollY:!1,click:this.click,preventDefault:!1}))}},components:{},watch:{dataList:{handler:function(t){t&&t.length&&this._refresh()},immediate:!0}}},o=(a("JmlT"),a("KHd+")),n=Object(o.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"scroll",staticClass:"scroll-wrapper",on:{touchstart:this.touchstart}},[e("div",{ref:"scrollContent",staticClass:"scroll-content"},[this._t("default")],2)])}),[],!1,null,"43d437b2",null);e.a=n.exports},AbvJ:function(t,e,a){},JmlT:function(t,e,a){"use strict";var s=a("rGnI");a.n(s).a},Wr4Z:function(t,e,a){"use strict";var s=a("AbvJ");a.n(s).a},afTz:function(t,e,a){"use strict";a.r(e);var s=a("nV03"),i={name:"countdown",props:["endTime","type","hiddenDay","callback"],components:{},data:function(){return{d:"0",h:"00",m:"00",s:"00",trigger:!0}},methods:{parsingTime:function(){var t=this;if(this.endTime){var e=this.$store.state.severTime.currentTime,a=this.endTime-e;this.d=0,this.h="0",this.m="0",this.s="0",a<0?this.trigger&&(this.trigger=!1,setTimeout((function(){t.$emit("timeOut")}),1e3)):(this.trigger=!0,a>59?(this.s=a%60,(a=parseInt(a/60))>59?(this.m=a%60,(a=parseInt(a/60))>23?(this.h=parseInt(a%24),a=parseInt(a/24),this.d=a):this.h=a):this.m=a):a>=0&&(this.s=a),this.h<10&&(this.h="0"+this.h),this.m<10&&(this.m="0"+this.m),this.s<10&&(this.s="0"+this.s))}}},created:function(){this.parsingTime(),s.a.heartbeat()},destroyed:function(){s.a.removeHeartbeat()},watch:{"$store.state.severTime.currentTime":function(){this.parsingTime()}}},r=(a("Wr4Z"),a("KHd+")),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"countdown",class:{quan:"theme_bg_quan"==t.type}},[0==t.d||t.hiddenDay?t._e():a("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.d))]),t._v(" "),0==t.d||t.hiddenDay?t._e():a("span",[t._v("天")]),t._v(" "),a("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.h))]),t._v("\n  :\n  "),a("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.m))]),t._v("\n  :\n  "),a("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.s))])])}),[],!1,null,"403fc346",null);e.default=o.exports},dMxa:function(t,e,a){},"lZ+2":function(t,e,a){"use strict";a("L2JU");var s={name:"product-list-grid",components:{PriceOrder:a("WQzh").a},props:["myIndex","usePorpData","propData","isRMBEnd"],computed:{pageData:function(){return 1==this.usePorpData?this.propData:this.$store.state.pageData},moduleData:function(){return-1==this.myIndex?this.pageData.productInfinite.data:this.pageData.moduleList[this.myIndex].data},dev:function(){return"-1"===this.$store.state.webtype}},data:function(){return{}},created:function(){this.testCorerMark()},filters:{counerMarkUrl:function(t){return t.cornerMark<6?"static/images/product-list/icon_gods_hot0"+t.cornerMark+".png":t.selfCornerMarkUrl}},methods:{testCorerMark:function(){var t=this;this.moduleData.rows.forEach((function(e){!e.cornerMark&&t.$set(e,"cornerMark",0),!e.selfCornerMarkUrl&&t.$set(e,"selfCornerMarkUrl","")}))},getSideMargin:function(){var t=this.moduleData.sideMargin;return t?"margin-left:"+t+"%;"+"margin-right:"+t+"%;":""},enterNav:function(t){this.$market.productEvent(t,this.$route,this.moduleData.onlyDeliveryType)},addToCart:function(t){var e=this;this.$Loading.open();var a={token:this.$store.state.login.token,carts:[{skuId:t.skuId,storeOuCode:t.storeOuCode,activityId:"",selfActivityId:t.activityId,deliveryType:this.$store.state.mall2.staticDeliverType,number:1}],orderCategory:void 0,vipUnitUserCode:void 0,deliveryType:t.deliverType};this.$http.post("/app/json/app_cart/addCart",a).then((function(t){e.$Loading.close();var a=t.data;0==a.status?(e.$store.state.mall2.cartNum=a.data,e.$toast("添加购物车成功！")):e.$Toast(a.info)}),(function(t){e.$Loading.close(),e.$Toast("请求数据失败！")}))}}},i=(a("8BuO"),a("KHd+")),r=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-list"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"scroll"},[a("div",{staticClass:"layout-grid good-list",style:t.getSideMargin()},t._l(t.moduleData.rows,(function(e,s){return a("div",{staticClass:"goods",class:{"no-stock":"0"==e.stockNum&&"1"==t.$store.state.globalConfig.showNoStockCover,"row-three-pro":1==t.moduleData.rowThreeProduct},on:{click:function(a){return t.enterNav(e)}}},[a("div",{staticClass:"goods-picture"},[a("img",{staticClass:"full-img",attrs:{src:e.phMainUrl?e.phMainUrl+"?x-oss-process=image/format,jpg":"static/images/defaultImg_w.png"}}),t._v(" "),e.cornerMark>0?a("div",{staticClass:"corner-mark"},[a("img",{attrs:{src:t._f("counerMarkUrl")(e)}})]):t._e()]),t._v(" "),"1"==t.moduleData.layout.hasTitle?a("div",{staticClass:"goods-name double-line",domProps:{innerHTML:t._s(e.showTitle)}}):t._e(),t._v(" "),e.activityTags.length>0?a("div",{staticClass:"activity-tags"},t._l(e.activityTags,(function(e){return a("div",{staticClass:"tag single-line"},[t._v(t._s(e))])})),0):t._e(),t._v(" "),a("div",{staticClass:"goods-footer"},["1"==t.moduleData.layout.hasPrice?a("div",{staticClass:"price"},[a("PriceOrder",{attrs:{listitem:e,isRMBEnd:t.isRMBEnd}})],1):t._e(),t._v(" "),"1"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[2!=e.productType&&-1==t.$store.state.webtype?a("img",{attrs:{src:"static/images/product-list/icon_gods_car01.png"}}):2!=e.productType?a("i",{staticClass:"iconfont mall-gouwuche theme_font_red car-size",class:{theme_font_gray_i:"0"==e.stockNum},on:{click:function(a){return a.stopPropagation(),t.addToCart(e)}}}):t._e()]):t._e(),t._v(" "),"2"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[a("img",{attrs:{src:"static/images/product-list/icon_gods_car02.png"}})]):t._e(),t._v(" "),"3"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[a("img",{attrs:{src:"static/images/product-list/icon_gods_car03.png"}})]):t._e(),t._v(" "),"4"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[a("img",{attrs:{src:"static/images/product-list/icon_gods_car04.png"}})]):t._e(),t._v(" "),"5"==t.moduleData.layout.btnType?a("div",{staticClass:"icon"},[a("img",{attrs:{src:"static/images/product-list/icon_gods_car05.png"}})]):t._e()])])})),0)])])])}),[],!1,null,"329780dd",null);e.a=r.exports},nV03:function(t,e,a){"use strict";var s=a("ZToj"),i=void 0,r=0,o={heartbeat:function(){r++,i||(i=window.setInterval((function(){var t=parseInt((new Date).getTime()/1e3);s.a.state.severTime.currentTime=t+s.a.state.severTime.jetlag}),1e3))},removeHeartbeat:function(){r>0&&r--,0==r&&(window.clearInterval(i),i=null)}};e.a=o},rGnI:function(t,e,a){},tmVN:function(t,e,a){"use strict";var s=a("6vT7");a.n(s).a}}]);