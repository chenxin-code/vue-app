(window.webpackJsonp=window.webpackJsonp||[]).push([[15,725],{AuWQ:function(t,e,s){},RuEk:function(t,e,s){"use strict";var i=s("AuWQ");s.n(i).a},"T/eX":function(t,e,s){"use strict";s.r(e);var i=(s("dsmH"),s("KHd+")),a=Object(i.a)({name:"rule"},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"body"},[s("nav-top",{attrs:{title:"规则说明"},on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),s("nav-content",[s("div",{staticClass:"content"},[s("div",[s("p",{staticClass:"p1 theme_font_red"},[t._v("如何获取答题机会？")]),t._v(" "),s("p",{staticClass:"p2"},[t._v("1、每人都可免费获得一次游戏")])]),t._v(" "),s("div",[s("p",{staticClass:"p1 theme_font_red"},[t._v("答题都有啥奖励呢？")]),t._v(" "),s("p",{staticClass:"p2"},[t._v("1、积分、游戏机会")])]),t._v(" "),s("div",[s("p",{staticClass:"p1 theme_font_red"},[t._v("规则说明")]),t._v(" "),s("p",{staticClass:"p2"},[t._v("1、必须全部答完才可以获得奖励")])])])])],1)}),[],!1,null,"3fd2fb9a",null);e.default=a.exports},YQvM:function(t,e,s){"use strict";s.r(e),s("4X9F");var i=s("IkEG"),a=(s("5+UC"),s("05lO")),n=s("eX/C"),o=(s("L2JU"),s("T/eX"),s("2nGb")),r={name:"",mixins:[n.a],data:function(){return{answerList:[],optionsObj:[],radioname:"",paramsData:{},radio:"B",list:["a","b","c","d"],result:["a","b"],value:3,show:!1,commitModel:!1,actions:[],mktAwardList:[],id:"",url:"",shareTitle:"",shareContent:"",shareImgUrl:"",shareurl:"",shareUserid:"",shareView:!0,tip:"",details:""}},created:function(){this.paramsData=this.$route.query,this.$route.query?this.shareUserid=this.$route.query.shareUserid:this.shareUserid=""},mounted:function(){var t,e=this;t=this.$route.query.questionaireId?this.$route.query.questionaireId:this.paramsData.subId||this.paramsData.id,this.randomId=Math.random().toString(36).substr(2);var s={id:t,ouCode:this.$route.query.ouCode,orderId:this.randomId};this.participateData(s).then((function(t){e.$Loading.close(),console.log(t),"success"===t.data.result?e.loadData():Object(a.a)(t.data.info)})),this.Intercept(),this.getLetter()},methods:{changeResult:function(t){},evaluateData:function(t,e){var s=this.answerList[t];1==s.result?s.evaluate="非常差":2==s.result?s.evaluate="差":3==s.result?s.evaluate="一般":4==s.result?s.evaluate="好":5==s.result&&(s.evaluate="非常好")},generateBig_1:function(){for(var t=[],e=65;e<91;e++)t.push(String.fromCharCode(e));return t},getLetter:function(){this.optionsObj=this.generateBig_1(),console.log(this.optionsObj)},seeView:function(t){console.log(t);var e="";if("20030"==t)e="/mall2/win_record";else if("20010"==t)e="/usercenter/rebatebonus";else if("20020"==t)e="/mall2/integralinfo";else if("20001"==t&&-1!=(e=this.$store.state.globalConfig.questionaire_prize_coupon_list||"/coupon_list").indexOf("uhuitong.com"))return console.log(e,"path"),void this.$market.enterNav({link:{type:"3",url:e,useOldProtocal:!0}});this.$router.push({path:e,query:{type:"subject"}})},loadData:function(){var t=this,e=this,s={id:e.$route.query.questionaireId?e.$route.query.questionaireId:e.paramsData.subId,token:this.$store.state.login.token};e.questionData(s).then((function(s){if(console.log(s),"success"===s.data.result){t.details=s.data.data;var i=s.data.data.subjectList;e.userId=s.data.data.userId;var a=s.data.data.questionShare?JSON.parse(s.data.data.questionShare):"";console.log(a),0==a.length?e.shareView=!1:e.shareView=!0,i.forEach((function(t){if(t.show=!1,1===t.kindId||2===t.kindId||3===t.kindId||4===t.kindId){var e=JSON.parse(t.options);e.forEach((function(t){t.name=t.lable})),t.options=e}2===t.kindId?t.result=[]:6===t.kindId?t.result=0:(t.result="",4===t.kindId&&(t.show=!1))})),i.forEach((function(t){t.evaluate="",t.tips=""})),e.answerList=JSON.parse(JSON.stringify(i)),e.shareTitle=s.data.data.shareTitle,e.shareContent=s.data.data.shareContent,e.shareImgUrl=s.data.data.shareImgUrl}else console.log(s.data.info)}))},select1:function(t){t.show=!0},commit:function(){if(this.$route.query.questionaireId){for(var t=0;t<this.answerList.length;t++){if(this.answerList[t].result>100)return void this.$Toast(this.answerList[t].title+"不能超过100分");if(""==this.answerList[t].result)return void this.$Toast("请输入"+this.answerList[t].title)}this.submitEvaluateScore()}else this.sub()},submitEvaluateScore:function(){var t=this,e=[];this.answerList.forEach((function(t){e.push({subjectId:t.id,result:t.result.toString()})})),this.$request.post("/app/json/evaluation_center/submitEvaluateScore",{empEvaluationMessageId:this.$route.query.id,configId:this.details.id,surveyResultModels:e}).then((function(e){0===e.status?(t.$Toast("提交成功"),t.$router.go(-2)):t.$Toast(e.info?e.info:"提交失败")}))},sub:function(){var t=this,e=this,s=[];e.answerList.forEach((function(t){s.push({kindId:t.kindId,configId:t.configId,subjectId:t.id,kindName:t.kindName,options:t.options,title:t.title,styleType:t.styleType,orderNo:t.orderNo,result:t.result.toString()})}));var i=!0;if(e.answerList.forEach((function(t){1==t.mustAnswer&&""==t.result&&(i=!1)})),i){var n=!0;e.answerList.forEach((function(t,s){5==t.kindId&&(t.limitMin&&!t.limitMax&&t.result.length<t.limitMin&&(e.tip="第"+(s+1)+"题简答题最少输入"+t.limitMin+"个字",n=!1),t.limitMax&&!t.limitMin&&t.result.length>t.limitMax&&(e.tip="第"+(s+1)+"题简答题最多输入"+t.limitMax+"个字",n=!1),t.limitMin&&t.limitMax&&(t.result.length>=t.limitMin&&t.result.length<=t.limitMax?n=!0:(e.tip="第"+(s+1)+"题简答题字数限制在"+t.limitMin+"至"+t.limitMax+"之间",n=!1)))})),n?(e.$Loading.open(),e.commitData({resultJson:JSON.stringify(s),token:this.$store.state.login.token,id:e.paramsData.subId,orderId:e.paramsData.orderId}).then((function(s){if(e.$Loading.close(),"success"===s.data.result){Object(a.a)("提交成功");var i={id:e.paramsData.subId,token:t.$store.state.login.token,shareUserid:e.shareUserid,orderId:e.paramsData.orderId};e.$Loading.open(),e.prizeData(i).then((function(t){e.$Loading.close(),"success"===t.data.result?(e.mktAwardList=t.data.data.mktAwardList||[],e.mktAwardList.length>0?e.commitModel=!0:(e.commitModel=!1,e.$router.go(-1))):(e.commitModel=!1,e.$router.go(-1))}))}else Object(a.a)(s.data.info)}))):Object(a.a)(e.tip)}else Object(a.a)("您还有必答题尚未答完，请先答完必答题！")},sharegoods:function(){var t={title:this.shareTitle,sharetext:this.shareContent,imageurl:this.shareImgUrl,detailurl:""+this.$store.state.globalConfig.wxBaseUrl+o.a.shareUrl+"/subject?shareUserid="+this.$store.state.userInfo.userId+"&id="+this.paramsData.subId+"&orderId="+this.paramsData.orderId};this.$bridgefunc.wechatShare(t)},closeBtn:function(){this.commitModel=!1,this.$router.go(-1)},backEvent:function(){var t=this;i.a.confirm({message:"问卷尚未答完，确定要离开吗？",cancelButtonText:"现在离开",confirmButtonText:"继续答题"}).then((function(){})).catch((function(){t.$router.go(-1)}))},onSelect:function(t,e){e.result=t.name,e.show=!1},Intercept:function(){var t=this.url||window.location.href,e=t.substr(t.indexOf("?")).slice(1).split("=");this.id=e[1]}},computed:{},components:{},watch:{}},l=(s("RuEk"),s("KHd+")),u=Object(l.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"body"}},[s("nav-top",{attrs:{title:"问卷调查"},on:{backEvent:t.backEvent}},[t.shareView?s("div",{staticClass:"shareBox",on:{click:t.sharegoods}},[s("div",[s("i",{staticClass:"icon iconfont mall-fenxiang"})])]):t._e()]),t._v(" "),s("nav-content",[s("div",{staticClass:"content"},[t._l(t.answerList,(function(e,i){return s("div",{key:i,staticClass:"top"},[1===e.kindId?s("div",{staticClass:"singleList"},[s("span",{staticClass:"theme_bg_red"},[t._v("单选")]),t._v(" "),s("div",{staticClass:"divObj"},[s("span",[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),s("van-radio-group",{on:{change:t.changeResult},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}},t._l(e.options,(function(e,i){return s("van-radio",{key:i,attrs:{"checked-color":"#25aff8",name:t.optionsObj[i]}},[t._v(t._s(t.optionsObj[i])+" 、"+t._s(e.lable)+"\n              ")])})),1)],1)]):t._e(),t._v(" "),2===e.kindId?s("div",{staticClass:"singleList multipleList"},[s("span",{staticClass:"theme_bg_red"},[t._v("多选")]),t._v(" "),s("div",{staticClass:"divObj"},[s("span",[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),s("van-checkbox-group",{model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}},t._l(e.options,(function(e,i){return s("van-checkbox",{key:i,attrs:{"checked-color":"#25aff8",name:t.optionsObj[i]}},[t._v(t._s(t.optionsObj[i])+" 、"+t._s(e.lable)+"\n              ")])})),1)],1)]):t._e(),t._v(" "),5===e.kindId?s("div",{staticClass:"singleList"},[s("span",{staticClass:"theme_bg_red"},[t._v("问答")]),t._v(" "),s("div",{staticClass:"divObj"},[s("span",[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),e.limitMin&&!e.limitMax?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:"请输入最少"+e.limitMin+"个字"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}}):t._e(),t._v(" "),e.limitMax&&!e.limitMin?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:"请输入最多"+e.limitMax+"个字"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}}):t._e(),t._v(" "),e.limitMin&&e.limitMax?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:"请输入"+e.limitMin+"到"+e.limitMax+"个字"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}}):t._e(),t._v(" "),e.limitMin||e.limitMax?t._e():s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}})])]):t._e(),t._v(" "),7===e.kindId?s("div",{staticClass:"singleList"},[s("span",{staticClass:"theme_bg_red"},[t._v("文本")]),t._v(" "),s("div",{staticClass:"divObj"},[s("span",[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),e.limitMin&&!e.limitMax?s("input",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",attrs:{type:"text",placeholder:"请输入最少"+e.limitMin+"个字"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}}):t._e(),t._v(" "),e.limitMax&&!e.limitMin?s("input",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",attrs:{type:"text",placeholder:"请输入最多"+e.limitMax+"个字"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}}):t._e(),t._v(" "),e.limitMin&&e.limitMax?s("input",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",attrs:{type:"text",placeholder:"请输入"+e.limitMin+"到"+e.limitMax+"个字"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}}):t._e(),t._v(" "),e.limitMin||e.limitMax?t._e():s("input",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",attrs:{type:"text"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}})])]):t._e(),t._v(" "),6===e.kindId?s("div",{staticClass:"singleList score"},[s("span",{staticClass:"theme_bg_red"},[t._v("打分")]),t._v(" "),s("div",{staticClass:"divObj"},[s("span",[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),s("div",{staticClass:"evaluteBox"},[1===e.styleType?s("van-rate",{attrs:{color:"#25aff8","void-color":"#25aff8"},on:{change:function(e){return t.evaluateData(i,e)}},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):t._e(),t._v(" "),2===e.styleType?s("van-rate",{attrs:{color:"#25aff8",icon:"like","void-color":"#25aff8","void-icon":"like-o"},on:{change:function(e){return t.evaluateData(i,e)}},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):t._e(),t._v(" "),3===e.styleType?s("van-rate",{attrs:{color:"#25aff8",icon:"static/image/microShop/xiaoicon.png","void-color":"#25aff8","void-icon":"smile-o"},on:{change:function(e){return t.evaluateData(i,e)}},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):t._e(),t._v(" "),s("p",[t._v(t._s(e.evaluate))])],1)])]):t._e(),t._v(" "),4===e.kindId?s("div",{staticClass:"singleList"},[s("span",{staticClass:"theme_bg_red"},[t._v("下拉")]),t._v(" "),s("div",{staticClass:"divObj"},[s("span",[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),s("div",{staticClass:"xiala",on:{click:function(s){return t.select1(e)}}},[s("span",[t._v(t._s(e.result||"请选择"))]),t._v(" "),s("span",{staticClass:"icon iconfont mall-xiala"})]),t._v(" "),s("van-action-sheet",{attrs:{id:"xialaView",actions:e.options},on:{select:function(s){return t.onSelect(s,e)}},model:{value:e.show,callback:function(s){t.$set(e,"show",s)},expression:"item.show"}})],1)]):t._e(),t._v(" "),3===e.kindId?s("div",{staticClass:"singleList"},[s("span",{staticClass:"theme_bg_red"},[t._v("图片")]),t._v(" "),s("div",{staticClass:"divObj"},[s("span",[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),t._l(e.options,(function(i,a){return s("div",{key:a,staticClass:"pics"},[s("div",[s("span",[t._v(t._s(t.optionsObj[a])+"、")]),t._v(" "),s("img",{attrs:{src:i.imgUrl,alt:""}})]),t._v(" "),s("div",[s("van-radio-group",{model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}},[s("van-radio",{attrs:{"checked-color":"#25aff8",name:t.optionsObj[a]}},[t._v(t._s(i.lable)+"\n                  ")])],1)],1)])}))],2)]):t._e()])})),t._v(" "),s("div",{staticClass:"bottom theme_bg_red",class:{gray:0==t.answerList.length},on:{click:t.commit}},[t._v("提交问卷")])],2)]),t._v(" "),s("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.commitModel,callback:function(e){t.commitModel=e},expression:"commitModel"}},[s("div",{staticClass:"modal"},[s("p",{staticClass:"title-p"},[s("span",[t._v("成功提交问券")]),s("span",[t._v("恭喜您获得以下奖品")])]),t._v(" "),s("ul",t._l(t.mktAwardList,(function(e,i){return s("li",{key:i},[s("img",{attrs:{src:e.prizeImgUrl?e.prizeImgUrl:"static/image/microShop/icon52x.png",alt:""}}),t._v(" "),s("span",[t._v(t._s(e.prizeName)+t._s(e.prizeNum))]),t._v(" "),s("span",{on:{click:function(s){return t.seeView(e.prizeType)}}},[t._v("查看")])])})),0)]),t._v(" "),s("div",{staticClass:"btns"},[s("span",{staticClass:"theme_bg_red",on:{click:t.closeBtn}},[t._v("确定")])])])],1)}),[],!1,null,"9a921714",null);e.default=u.exports},dsmH:function(t,e,s){"use strict";var i=s("xq1S");s.n(i).a},"eX/C":function(t,e,s){"use strict";e.a={methods:{participateData:function(t){return this.$http.post("/app/json/questionaire/startAnswer",t)},questionData:function(t){return this.$http.post("/app/json/questionaire/appUserConfig",t)},commitData:function(t){return this.$http.post("/app/json/questionaire/submit",t)},prizeData:function(t){return this.$http.post("/app/json/questionaire/completeAct",t)},listData:function(t){return this.$http.post("/app/json/questionaire/findQuestionaireByuserId",t)},historyData:function(t){return this.$http.post("/app/json/questionaire/historyQuestionaireList",t)},historydetailData:function(t){return this.$http.post("/app/json/questionaire/questionaireDetail",t)}}}},xq1S:function(t,e,s){}}]);