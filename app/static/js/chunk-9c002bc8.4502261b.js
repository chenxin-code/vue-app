(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c002bc8"],{"18eb":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAABjUlEQVRoBe2XMU/CQBiGr9XZwbLpb3BwdtNEFoEf4G6MC3EqDDBCjAkJQ2M7u8kfMMDSycGFsJAQBxZXlzYlBKy8LUfCGR3wuIv69RnIkbv7vvfhKJQxusgAGSADZIAMKDfgHoBymb8qb2BR0FBd2A1Bo8HuQbG4Wr9ev0iuUmn1/c2NlAn4PrgYUJ0IUywte/wp+COb0+mwGzAasSMwHLIT0O2m9W17uU52Q8J+GxOwDMCP+iJ4+ApyOeMNjMfsFETR1AaFAjsGvs+/Im5y1WpC39KG0gW4h6Ba5QGMW9Bu8+DXTyCKxARXDyAIwnOQzeKcJCclmTg/EXxfceEPx9IFGHvAsgwXtFqBBfL5r4KL/fN5XBjfh+2ATEac/2vH3i4YDNx90OvpCiL9BOgKsm5dErCuub+ybltXkPcX4PvGFphM0pucrm6oLhlQbsC7BJWK7qdBbb8CsQNMM74DprY+lH/yVJAMpAbSpzzH8c5As6nLi7b/AWngfj9+BrOZLgFUlwyQATJABv6zgQ8/ndpWDmvmtwAAAABJRU5ErkJggg=="},"1b5e":function(t,e,i){"use strict";i("62ad")},"3c36":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail mall2"},[i("div",{ref:"detailTop2",staticClass:"detail-top",style:{height:t.$store.state.barHeight+t.$market.getNavHeight(!0)+"px"}},[i("div",{staticClass:"navcontent",style:{top:t.$store.state.barHeight+"px",height:t.$market.getNavHeight(!0)+"px","line-height":t.$market.getNavHeight(!0)+"px"}},[2!=t.$store.state.webtype?i("div",{staticClass:"nav-back-btn",staticStyle:{left:"10px",top:"5px",width:"34px",height:"34px",padding:"5px"},on:{click:t.backEvent}},[i("img",{staticStyle:{display:"block",width:"100%",height:"100%"},attrs:{src:"static/image/mall2/back.png"}})]):t._e()])]),t.detailShow?i("div",{ref:"scrollView",staticClass:"scroll-div theme_bg_white",style:t.getScrollTop()},[i("swiper",{ref:"mySwiper",staticClass:"main-swiper",attrs:{options:t.mainSwiper}},[i("swiper-slide",[i("div",{staticClass:"main-swiper",staticStyle:{position:"relative"}},[i("transition",{attrs:{name:"transition1"}},[i("div",{staticClass:"main-swiper theme_bg_white_f5",staticStyle:{position:"absolute"}},[i("pull-to",{ref:"pullTo1",attrs:{bottomConfig:{pullText:"",triggerText:"释放显示商品详情",loadingText:"加载中...",doneText:"加载完成",failText:"加载失败",loadedStayTime:400,stayDistance:40,triggerDistance:50},"is-bottom-bounce":!0,"is-top-bounce":!1,doSiteCallback:!0}},[i("div",[i("div",{staticClass:"swiper-div theme_bg_white"},[i("swiper",{attrs:{options:t.swiperOption}},t._l(t.detailData.picUrls,(function(t,e){return i("swiper-slide",{key:e},[i("div",{staticClass:"swiper-img-div"},[i("img",{attrs:{src:t}})])])})),1),i("div",{staticClass:"swiper-index"},t._l(t.detailData.picUrls,(function(e,s){return i("div",{key:s,staticClass:"si-item theme_bg_white_ef",class:{"cus-index":t.proImgIndex==s,theme_bg_red_i:t.proImgIndex==s}})})),0)],1),i("div",{staticClass:"base-info theme_bg_white"},[i("div",{staticClass:"price"},[i("span",{staticClass:"font-small price-z theme_font_red",staticStyle:{"font-weight":"700"}},[t._v("￥")]),i("span",{staticClass:"price-z theme_font_red",staticStyle:{"margin-left":"-4px"}},[t._v(t._s(t.getInteger(t.detailData.activityPrice)))]),i("span",{staticClass:"font-small price-z theme_font_red",staticStyle:{"margin-left":"-4px","font-weight":"700"}},[t._v("."+t._s(t.getDecimals(t.detailData.activityPrice)))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"title theme_font_black"},[t._v(t._s(t.detailData.showTitle||t.detailData.skuName))])])]),i("div",{staticClass:"block-div theme_bg_white fullType"},[i("div",{staticClass:"label-middle theme_font_gray"},[t._v("配送方式")]),i("div",{staticClass:"theme_font_black full"},[t._v(t._s("1"==t.detailData.deliveryType?"自提":"配送"))])]),i("div",{staticClass:"block-div theme_bg_white fullType"},[i("div",{staticClass:"label-middle theme_font_gray"},[t._v("运费")]),i("div",{staticClass:"theme_font_black full"},[t._v(t._s("1"==t.detailData.deliveryType?"配送":"卖家包邮"))]),i("div",{staticClass:"label-middle theme_font_gray saleNum"},[t._v("累计销售")]),i("div",{staticClass:"theme_font_black full"},[t._v(t._s(t.detailData.saleNum||0))]),t._v("  "),i("div",{staticClass:"label-middle theme_font_gray"},[t._v("件")])]),"1"==t.detailData.deliveryType?i("div",{staticClass:"block-div theme_bg_white fullTypeZ",on:{click:t.selectPickUpAddress}},[i("div",{staticClass:"label-middle theme_font_gray"},[t._v("自提点")]),i("div",{staticClass:"theme_font_black"},[t._v(t._s(t.$store.state.mall2.zitiAddress.storeName))]),i("div",[i("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])]):t._e(),i("div",{staticClass:"btns-div theme_bg_white"},[i("div",{staticClass:"btn-item theme_font_gray",class:{theme_standard_font_i:1==t.introductionIndex},on:{click:function(e){return t.introductionSelected(1)}}},[t._v("商品介绍")]),i("div",{staticClass:"btn-item theme_font_gray",class:{theme_standard_font_i:2==t.introductionIndex},on:{click:function(e){return t.introductionSelected(2)}}},[t._v("规格参数")]),i("div",{staticClass:"btn-item theme_font_gray",class:{theme_standard_font_i:3==t.introductionIndex},on:{click:function(e){return t.introductionSelected(3)}}},[t._v("售后包装")])]),i("div",{staticClass:"detail-div detail-div-1"},[i("div",{staticClass:"detail-content detail-bottom"},[1==t.introductionIndex?i("div",{staticClass:"tip"},[i("span",{staticClass:"line"}),i("span",{staticClass:"text"},[t._v("商品信息")]),i("span",{staticClass:"line"})]):t._e(),1==t.introductionIndex?i("div",{staticClass:"introduction-div",domProps:{innerHTML:t._s(t.introduction1)}}):t._e(),2==t.introductionIndex?i("div",{staticClass:"introduction-div",domProps:{innerHTML:t._s(t.introduction2)}}):t._e(),3==t.introductionIndex?i("div",{staticClass:"introduction-div",domProps:{innerHTML:t._s(t.introduction3)}}):t._e()])])])])],1)])],1)])],1)],1):t._e(),t.detailShow?i("div",{staticClass:"bottom-btns"},[Object.keys(t.objStype).length?i("div",{staticClass:"bottom-box upDown"},[t.isRecommend?t._e():i("div",{staticClass:"btn",class:1==t.objStype.queryType?"theme_standard_font_i":"theme_standard_bg theme_font_white",on:{click:t.upDownMethod}},[i("span",{staticClass:"iconfont"},[t._v(t._s(1==t.objStype.queryType?"下架":"上架"))])]),1==t.objStype.queryType?i("div",{staticClass:"btn theme_font_white theme_standard_bg",on:{click:t.upDownShareMethod}},[i("p",{staticClass:"title"},[t._v("分享推广")])]):t._e()]):i("div",{staticClass:"bottom-box add"},[0==t.listData.hidden?i("div",{staticClass:"addText theme_font_white theme_standard_bg",on:{click:t.addMethod}},[i("p",{staticClass:"title"},[t._v(t._s("添加"))])]):i("div",{staticClass:"addText theme_font_white theme_standard_bg"},[i("p",{staticClass:"title"},[t._v(t._s("已添加"))])])])]):t._e(),t.popupShow?i("Share",{attrs:{shareObj:t.shareObj},on:{setshareData:t.setshareData}}):t._e()],1)},a=[],o=i("5530"),n=(i("ac1f"),i("1276"),i("a9e3"),i("d3b7"),i("f648")),r=i("03e7"),l=i("7aab"),c=i("2f62"),d=i("986e"),h=i("590c"),u={name:"detail",components:{PullTo:n["a"],PickupAddress:r["a"],Share:l["a"],PriceOrder:h["a"]},computed:Object(o["a"])({},Object(c["c"])(["getPutaggregate"])),data:function(){var t=this;return{id:"",skuId:"",productType:"",proImgIndex:1,deliveryType:2,showActivities:["团购","领券","积分兑换"],mainSwiper:{autoHeight:!1,spaceBetween:0,speed:200,autoplay:!1,loop:!1,paginationShow:!0,initialSlide:0,observer:!0,observeParents:!0,scrollbarDraggable:!0,scrollbarSnapOnRelease:!0,scrollbarHide:!1},swiperOption:{autoHeight:!1,spaceBetween:0,speed:500,autoplay:{delay:3e3,clickable:!0,disableOnInteraction:!1},loop:!0,paginationShow:!0,initialSlide:0,observer:!0,observeParents:!0,scrollbarDraggable:!0,scrollbarSnapOnRelease:!0,scrollbarHide:!1,on:{slideChange:function(){t.proImgIndex=this.realIndex}}},introductionIndex:1,selectedNum:1,stepNum:1,maxNum:1,minNum:1,stockNum:1,detailData:{},detailShow:!1,detailComment:{},commentListShow:!1,selectedAddress:"",showSelect:!1,regionText:"请选择配送区域",region:[],initData:{title:"请选择地区"},recommendListShow:!1,myFeatures:[],introduction1:"",introduction2:"",introduction3:"",backLoadStock:!1,picUrls:[],lastPath:"",mktStockNum:-1,activityId:"",popupShow:!1,shareObj:{groupFlag:0,popupShow:!1},objStype:{},profit:"",listData:{},storeOuCode:"",isRecommend:1,proSkuDistributionId:""}},methods:{getInteger:function(t){var e=this.$util.toDecimal2(t),i=e.split(".");return i[0]},getDecimals:function(t){var e=this.$util.toDecimal2(t),i=e.split(".");return i[1]},text:function(t){var e="";return 3==t?e="积分":8==t?e="油滴":9==t?e="豌豆":0==t&&(e="元"),e},getScrollTop:function(){return"top: "+this.$store.state.barHeight+"px;"},backEvent:function(){this.$router.go(-1)},setshareData:function(t){this.popupShow=!1,this.shareObj=Object.assign({},t)},introductionSelected:function(t){this.introductionIndex=t},addMethod:function(){var t=this;this.$messagebox.confirm("确定要添加该商品到店铺吗!","提示").then((function(e){t.$Loading.open(),t.$http.post("/app/json/app_distribution_order/addProToMicroStore",{skuId:t.skuId,storeId:t.getPutaggregate.id}).then((function(e){if(t.$Loading.close(),0==e.data.status){t.$Toast("添加成功!"),t.listData.hidden=1,d["a"].$emit("setlistData",t.skuId);var i=JSON.parse(sessionStorage.getItem("microShoListData"));i&&(i.hidden=1,sessionStorage.setItem("microShoListData",JSON.stringify(i)))}else t.$Toast(e.data.info)}))}))["catch"]((function(){}))},shareMethod:function(){var t=this;"1"!=this.listData.hidden?(this.$Loading.open(),this.$http.post("/app/json/app_distribution_order/addProToMicroStore",{skuId:this.skuId,storeId:this.getPutaggregate.id}).then((function(e){t.$Loading.close(),0==e.data.status?(t.$Toast("添加成功!"),t.listData.hidden=1,d["a"].$emit("setlistData",t.skuId),t.shareObj=Object.assign({},t.shareObj,t.detailData),t.popupShow=!0,t.shareObj.popupShow=!0):t.$Toast(e.data.info)}))):(this.shareObj=Object.assign({},this.shareObj,this.detailData),this.popupShow=!0,this.shareObj.popupShow=!0)},upDownMethod:function(){var t=this;this.$messagebox.confirm("确定要".concat(1==this.objStype.queryType?"下架":"上架","该商品吗!"),"提示").then((function(e){var i=1==t.objStype.queryType?"0":"1";t.$Loading.open(),t.$http.post("/app/json/app_distribution_order/updateProFromMicroStore",{skuId:t.skuId,storeId:t.getPutaggregate.id,status:i}).then((function(e){if(t.$Loading.close(),0==e.data.status){t.$Toast("".concat(1==t.objStype.queryType?"下架":"上架","成功!")),t.objStype.queryType=1==t.objStype.queryType?"0":"1";var i=JSON.parse(sessionStorage.getItem("objStype"));i&&(i.queryType=t.objStype.queryType,sessionStorage.setItem("objStype",JSON.stringify(i)))}else t.$Toast(e.data.info)}))}))["catch"]((function(){}))},upDownShareMethod:function(){this.shareObj=Object.assign({},{proSkuDistributionId:this.proSkuDistributionId},this.shareObj,this.detailData,{deliverType:this.detailData.deliveryType,salePrice:this.detailData.activityPrice}),this.popupShow=!0,this.shareObj.groupFlag=this.$route.query.groupFlag,this.shareObj.popupShow=!0},selectPickUpAddress:function(){var t=this;r["a"].open({initData:{selectedId:this.$store.state.mall2.zitiAddress.id,token:this.$store.state.login.token,posx:this.$store.state.currentLocation.posx,posy:this.$store.state.currentLocation.posy,skuIds:[this.detailData.id]},addressEvent:function(e){r["a"].close(),e&&(t.$store.state.mall2.zitiAddress=e,t.$bridgefunc.vuexStorage(),t._getProductDetail())},otherAddressEvent:function(){t.backLoadStock=!0;var e="/mall2/selfliftingsite",i=[t.detailData.id];t.$router.push({path:e,query:{skuIds:JSON.stringify(i)}}),r["a"].close()}})},_getProductDetail:function(){var t=this;this.$Loading.open();var e="/app/json/product/getAppProDetail",i={token:this.$store.state.login.token,productType:this.productType,skuId:this.id,storeOuCode:this.storeOuCode,featureValueIds:this.myFeatures,lng:this.$store.state.currentLocation.posx,lat:this.$store.state.currentLocation.posy,deliverType:this.deliveryType};this.id&&""!=this.id||(i.storeOuCode=this.$route.query.storeOuCode?this.$route.query.storeOuCode:"",i.pickupStoreOuCode=this.$route.query.storeOuCode?this.$route.query.storeOuCode:""),""!=this.activityId&&(i.activityId=this.activityId),1==this.deliveryType&&(i.pickUpId=this.$store.state.mall2.zitiAddress.id,i.pickupStoreOuCode=this.$store.state.mall2.zitiAddress.storeCode?this.$store.state.mall2.zitiAddress.storeCode:this.$route.query.storeOuCode?this.$route.query.storeOuCode:""),this.$http.post(e,i).then((function(e){t.$Loading.close();var i=e.data;if(0==i.status){t.detailData=i.data,0===t.detailData.remainNum&&t.$Toast("活动商品库存已售空，需原价购买！");var s=t.detailData.skuId,a=t.$store.state.mall2.staticDeliverType;1!=t.detailData.deliveryType&&2!=t.detailData.deliveryType||(a=t.detailData.deliveryType),t.deliveryType=a,s&&a&&t.$mallCommon.pushBrowsingHistory(s,a),t.selectedNum<t.detailData.saleNumBegin&&(t.selectedNum=""!=t.detailData.saleNumBegin?t.detailData.saleNumBegin:1),t.stepNum=""!=t.detailData.saleNumStep?t.detailData.saleNumStep:1,t.minNum=""!=t.detailData.saleNumBegin?t.detailData.saleNumBegin:1,t.maxNum=""!=t.detailData.saleNumMax?t.detailData.saleNumMax:-1,void 0!=t.detailData.discountGoodsCntPerOrder&&""!=t.detailData.discountGoodsCntPerOrder&&t.maxNum>t.detailData.discountGoodsCntPerOrder&&(t.maxNum=t.detailData.discountGoodsCntPerOrder),t.mktStockNum=""!=t.detailData.mktStockNum?t.detailData.mktStockNum:-1;for(var o=0;o<t.detailData.featureList.length;o++)for(var n=t.detailData.featureList[o],r=0;r<n.featureValueList.length;r++)for(var l=n.featureValueList[r],c=0;c<t.detailData.myFeatureValueList.length;c++){var d=t.detailData.myFeatureValueList[c];if(l.featureValueId==d.featureValueId){l.selected=!0;break}}for(var h=t.detailData.skuActivityList,u=0;u<h.length;u++){var p=h[u];p.activityId,cActivity.activityId}var m=t.$mallCommon.priceFromItem(t.detailData);t.detailData.dpedData=m,t.introduction1=t.detailData.proSkuMediaModel.mobileDetail,t.introduction2=t.detailData.proSkuMediaModel.mobileParam,t.introduction3=t.detailData.afterHelp,t.id=t.detailData.id,t.skuId!=t.detailData.skuId&&(t.load3=!1),t.detailShow=!0}else t.$Toast(i.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},getDatas:function(){this._getProductDetail(),""!=this.$store.state.login.token&&this.$userCenter._getCartCount()},getSysStoreById:function(){var t=this;this.$Loading.open();var e="/app/json/user_address/getSysStoreById",i=this.$route.query.storeID,s={id:i};this.$http.post(e,s).then((function(e){t.$Loading.close();var i=e.data;0==i.status?(t.$store.state.mall2.zitiAddress=i.data,t.getDatas()):t.$Toast(i.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},getWechatSignature:function(){var t=this;wxfunc.getWechatSignature((function(e){e?wxfunc.wxGetLocation((function(e){t.$mallCommon.addressAnalysis((function(e){t.getDatas()}),e)})):t.getDatas()}))},bindWechat:function(t){t&&(this.$store.state.pushData.pushData=t,this.$store.state.pushData.pushType=0,this.$store.state.indexData.selectedIndex="",this.$bridgefunc.vuexStorage((function(){}))),this.$router.push({path:"/usercenter/loginbinding",query:{thirdUserId:this.$store.state.login.thirdUserId,code:this.$store.state.login.code,regChannel:4,firstLevel:!0,bindType:4}})},_getCustomStock:function(){var t=this;if((2!=this.deliveryType||""!=this.$store.state.mall2.selectAddress.id&&void 0!=this.$store.state.mall2.selectAddress.id)&&(1!=this.deliveryType||""!=this.$store.state.mall2.zitiAddress.id&&void 0!=this.$store.state.mall2.zitiAddress.id)){var e="/app/json/app_stock/querySkuStockByApp",i={token:this.$store.state.login.token,productList:[{skuId:this.detailData.skuId}],areaAddress:{province:this.$store.state.mall2.selectAddress.provinceId,city:this.$store.state.mall2.selectAddress.cityId,area:this.$store.state.mall2.selectAddress.countryId,town:this.$store.state.mall2.selectAddress.townId},deliverType:this.deliveryType,selfPickStore:this.$store.state.mall2.zitiAddress.id};this.$Loading.open(),this.$http.post(e,i).then((function(e){t.$Loading.close();var i=e.data;if(0==i.status){t.canSale=!0;var s=i.data.productList;s.length>0&&(t.stockNum=s[0].stockCurrentNumber,-1!=t.mktStockNum&&(t.stockNum=t.mktStockNum<t.stockNum?t.mktStockNum:t.stockNum),t.maxNum=""!=t.detailData.saleNumMax?t.detailData.saleNumMax:-1,void 0!=t.detailData.discountGoodsCntPerOrder&&""!=t.detailData.discountGoodsCntPerOrder&&t.maxNum>t.detailData.discountGoodsCntPerOrder&&(t.maxNum=t.detailData.discountGoodsCntPerOrder),t.maxNum=t.maxNum>t.stockNum?t.stockNum:t.maxNum)}else 2201==i.errorCode?t.canSale=!1:t.$Toast(i.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))}}},created:function(){this.isRecommend=Number(this.$route.query.isRecommend),this.profit=this.$route.query.profit?this.$route.query.profit:"",this.storeOuCode=this.$route.query.storeOuCode?this.$route.query.storeOuCode:"",this.$route.query.obj?"[object String]"==Object.prototype.toString.call(this.$route.query.obj)||"[object object]"==Object.prototype.toString.call(this.$route.query.obj)?this.objStype=JSON.parse(sessionStorage.getItem("microShoStype")):(this.objStype=this.$route.query.obj,sessionStorage.setItem("microShoStype",JSON.stringify(this.objStype))):this.objStype={},this.$route.query.listData?"[object String]"==Object.prototype.toString.call(this.$route.query.listData)?this.listData=JSON.parse(sessionStorage.getItem("microShoListData")):(this.listData=this.$route.query.listData,sessionStorage.setItem("microShoListData",JSON.stringify(this.listData))):this.listData={},this.lastPath=this.$route.query.lastPath?this.$route.query.lastPath:"",this.id=this.$route.query.id?this.$route.query.id:"",this.skuId=this.$route.query.skuId?this.$route.query.skuId:"",this.deliveryType=this.$route.query.deliveryType,this.proSkuDistributionId=this.$route.query.proSkuDistributionId||"",this.productType=this.$route.query.productType?this.$route.query.productType:"",this.activityId=this.$route.query.activityId?this.$route.query.activityId:"",""==this.id&&""==this.skuId||this.getDatas()},activated:function(){this.backLoadStock&&this._getCustomStock()}},p=u,m=(i("7d81"),i("0c7c")),g=Object(m["a"])(p,s,a,!1,null,"32b2466d",null);e["default"]=g.exports},"54a4":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAAb1JREFUaN7t1zFLw0AYBuD3SkiR5geEDI4diqUIHTpUOtTSQejkVnBM6iJtpyAObm5V0CGfo9AfoHR1EUL7HzoXF1Noe3BQSs9B6yCIDiGneM8Sslze7+W4I4CmaZqmJY5sssl2XSIiouNjVTkMVR9mRVZkxZ0dCQkJQ1kOTVMkCIMwCM/OSJIkeX6uKoe6M6DFWqy1XrMyK7Pyeq0qh6YpQjOa0ezmJpgG02B6e6sqh7r7N4cccnt7KZESKZFOq4qRUlbAL6ELUB1AtdjPAKpQhSrX12zBFmxh29zkJjePjrqj7qg7EuKn6/RKvVKvtLVlLa2ltby7gwMHzvOzO3AH7uDkJK688e+AOeaYv7xIT3rSOzzMOBkn4zw8bAb68eCRFVnR/f1mHTmREzmJorjjstgLePf2m3tx8fbm+6iiiurT08pf+Sv/4MAYGkNjGIZMMMFEOs2zPMuzu7ubwlBHHfX9fTTRRPPqyrM8y7M6nT9TwEcRnDjxy0v00Ue/3UYNNdQeHyEgILa30UADDdNEAQUUxuOkBk+sgI8iPu+IryQ0eOIFfFtEwoMrR3nKU/70dPNUnUfTNE37j14By5+5+mkAilEAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDYtMTNUMTU6NDk6NTIrMDg6MDAmrzDiAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA2LTEzVDE1OjQ5OjUyKzA4OjAwV/KIXgAAAFV0RVh0c3ZnOmJhc2UtdXJpAGZpbGU6Ly8vaG9tZS9hZG1pbi9pY29uLWZvbnQvdG1wL2ljb25fdWV0emFxMnJsYy8lRTclQUUlQUQlRTUlQTQlQjQzLnN2ZwIn7fgAAAAASUVORK5CYII="},"62ad":function(t,e,i){},"6df3":function(t,e,i){},"7aab":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("van-popup",{attrs:{position:"bottom"},on:{"click-overlay":t.clickOverlay},model:{value:t.detailData.popupShow,callback:function(e){t.$set(t.detailData,"popupShow",e)},expression:"detailData.popupShow"}},[i("div",{staticClass:"popup"},[i("div",{staticClass:"popup-content",on:{click:t.sharewx}},[i("img",{attrs:{src:"static/image/mall2/weixin.png",alt:""}}),i("span",[t._v("微信")])]),i("div",{staticClass:"popup-content",on:{click:t.QRcode}},[i("img",{attrs:{src:"static/image/microShop/code@2x.png",alt:""}}),i("span",[t._v("二维码")])])])]),t.codeShow?i("div",{staticClass:"code-div",on:{click:function(e){return e.target!==e.currentTarget?null:t.btnbox.apply(null,arguments)}}},[i("div",{ref:"imageWrapper",staticClass:"code-content"},[i("div",{staticClass:"code-content-img"},[i("div",{staticClass:"code-content-img-top"},[i("img",{attrs:{src:t.imgUrl,alt:"",crossOrigin:"anonymous"}})]),t.detailData.groupFlag?i("div",{staticClass:"code-content-img-buttom"},[i("div",{staticClass:"price theme_font_red"},t._l(t.getPrices(),(function(e,s){return i("div",{staticClass:"price-item"},[0!=s?i("p",{staticClass:"xian"},[t._v(" ~ ")]):t._e(),i("p",[t._v("¥")]),i("p",{staticClass:"big"},[t._v(t._s(e.iNum)+".")]),i("p",[t._v(t._s(e.dNum))])])})),0),i("div",{staticClass:"text theme_font_black"},[t._v(t._s(t.detailData.showTitle))])]):i("div",{staticClass:"code-content-img-buttom"},[i("div",{staticClass:"text theme_font_red"},[i("span",{staticClass:"font-small price-z theme_font_red",staticStyle:{"font-weight":"700"}},[t._v("￥")]),i("span",{staticClass:"price-z theme_font_red",staticStyle:{"margin-left":"-4px"}},[t._v(t._s(t.getInteger(t.detailData.salePrice)))]),i("span",{staticClass:"font-small price-z theme_font_red",staticStyle:{"margin-left":"-4px","font-weight":"700"}},[t._v("."+t._s(t.getDecimals(t.detailData.salePrice)))])]),i("div",{staticClass:"text theme_font_black"},[t._v(t._s(t.detailData.dpedData.featureName||t.detailData.skuName))])])]),i("div",{staticClass:"code-content-line"}),t._m(0),i("div",{staticClass:"code-content-zanwei"})]),i("div",{staticClass:"code-btn"},[i("div",{staticClass:"btn theme_bg_red",on:{click:function(e){return e.stopPropagation(),t.preservation.apply(null,arguments)}}},[t._v("保存图片到本地")]),i("div",{staticClass:"text"},[t._v("记得发送给朋友或发布到朋友圈呦！")])])]):t._e()],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"code-content-code"},[i("canvas",{staticClass:"qrcode",attrs:{id:"qrcode"}}),i("p",[t._v("微信扫码或长按识别二维码")])])}],o=i("5530"),n=(i("ac1f"),i("1276"),i("99af"),i("e25e"),i("c0e9")),r=i.n(n),l=i("da71"),c=i("d055"),d=i.n(c),h=i("2f62"),u=i("ae5c"),p={name:"share",props:["shareObj"],computed:Object(o["a"])({},Object(h["c"])(["getPutaggregate"])),data:function(){return{imgUrl:"",timeOutEvent:0,popupShow:!0,codeShow:this.shareObj.codeShow,detailData:this.$util.deepClone(this.shareObj)}},mounted:function(){this.setOssImg(this.detailData.phMainUrl||this.detailData.picMainUrl||this.detailData.picUrls[0])},methods:{getPrices:function(){return u["a"].getPriceShow(this.detailData.purPriceRules)},setOssImg:function(t){var e=this;this.imgUrl="",this.$request.post("/app/json/home/getFileBase64",{filePath:t}).then((function(t){0==t.status?t.data?e.imgUrl="data:image/png;base64,".concat(t.data||""):e.$Toast("getFileBase64 返回为空"):e.$Toast(t.info)}))},getInteger:function(t){var e=this.$util.toDecimal2(t),i=e.split(".");return i[0]},getDecimals:function(t){var e=this.$util.toDecimal2(t),i=e.split(".");return i[1]},clickOverlay:function(){this.detailData.popupShow=!1,this.$emit("setshareData",this.detailData.storeCode)},sharewx:function(){var t="/micro_sho/shareDetail/";this.detailData.groupFlag&&(t="/micro_sho/sharebuyingDetail/");var e={};e={},e.title=this.detailData.showTitle||this.detailData.skuName,e.sharetext=this.detailData.skuName,e.imageurl=this.detailData.phMainUrl,e.detailurl=this.$store.state.globalConfig.wxBaseUrl+l["a"].shareUrl+"".concat(t).concat(this.$util.getDataString()),e.detailurl=e.detailurl+"?id="+(this.detailData.id||this.detailData.skuId)+"&skuId="+(this.detailData.skuId||this.detailData.id)+"&microStoreCode="+this.getPutaggregate.storeCode+"&storeName="+this.getPutaggregate.storeName+"&productType="+this.detailData.productType+"&deliveryType="+this.$store.state.mall2.staticDeliverType+"&storeOuCodeNew="+this.$store.state.mall2.zitiAddress.id+"&proSkuDistributionId="+this.detailData.proSkuDistributionId,this.$store.state.login.token&&""!=this.$store.state.login.token&&(e.detailurl=e.detailurl+"&recommend="+this.$store.state.userInfo.userId,e.detailurl=e.detailurl+"&recommendPhone="+this.$store.state.login.phone),this.$bridgefunc.wechatShare(e)},QRcode:function(){var t=this,e="/micro_sho/shareDetail";this.detailData.groupFlag&&(e="/micro_sho/sharebuyingDetail"),this.codeShow=!0,this.$emit("qRcodeStstus",this.codeShow),this.$nextTick((function(i){var s="".concat(t.$store.state.globalConfig.wxBaseUrl).concat(l["a"].shareUrl).concat(e),a="".concat(s,"/").concat(t.$util.getDataString(),"?id=").concat(t.detailData.id||t.detailData.skuId,"&skuId=").concat(t.detailData.skuId||t.detailData.id,"&microStoreCode=").concat(t.getPutaggregate.storeCode,"&storeName=").concat(t.getPutaggregate.storeName,"&productType=").concat(t.detailData.productType,"&deliveryType=").concat(t.$store.state.mall2.staticDeliverType,"&storeOuCodeNew=").concat(t.$store.state.mall2.zitiAddress.id,"&proSkuDistributionId=").concat(t.detailData.proSkuDistributionId);d.a.toCanvas(document.getElementById("qrcode"),a,{width:140})}))},btnbox:function(){this.codeShow=!1,this.$emit("qRcodeStstus",this.codeShow)},preservation:function(){var t=this,e=document.querySelector(".code-content"),i=parseInt(window.getComputedStyle(e).width),s=parseInt(window.getComputedStyle(e).height),a=document.createElement("canvas"),o=2;a.width=i*o,a.height=s*o,a.getContext("2d").scale(o,o);var n={useCORS:!0,scale:o,canvas:a,backgroundColor:"#000"};r()(this.$refs.imageWrapper,n).then((function(e){var i=e.toDataURL("image/png");t.codeShow=!1;var s=i.split("base64,");t.$bridgefunc.savePhoto(s[1],(function(e){"1"==e?(t.detailData.popupShow=!1,t.$emit("setshareData",t.detailData),t.$Toast("保存成功！")):t.$Toast("保存失败！")}))}))}}},m=p,g=(i("1b5e"),i("0c7c")),A=Object(g["a"])(m,s,a,!1,null,"06153066",null);e["a"]=A.exports},"7d81":function(t,e,i){"use strict";i("ee8f")},"986e":function(t,e,i){"use strict";var s=i("a026");e["a"]=new s["default"]},a7ac:function(t,e){t.exports="data:image/png;base64,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"},ae5c:function(t,e,i){"use strict";i("ac1f"),i("1276");var s=i("ca00"),a={getPriceShow:function(t){if(0==t.length)return"";for(var e=t[0].price,i=t[0].price,s=1;s<t.length;s++){var a=t[s].price;e>a&&(e=a),i<a&&(i=a)}if(e==i){var o=this.getINumDNum(e);return[o]}var n=this.getINumDNum(e),r=this.getINumDNum(i);return[n,r]},getINumDNum:function(t){var e=s["a"].toDecimal2(t),i=e.split("."),a=i[0],o=i[1];return{iNum:a,dNum:o}}};e["a"]=a},cf52:function(t,e,i){"use strict";i("6df3")},ee8f:function(t,e,i){},f18e:function(t,e){t.exports="data:image/png;base64,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"},f648:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-pull-to-wrapper",style:{height:t.wrapperHeight,transform:"translate3d(0, "+t.diff+"px, 0)"}},[t.topLoadMethod?i("div",{staticClass:"action-block",style:{height:t.topBlockHeight+"px",marginTop:-t.topBlockHeight+"px"}},[i("div",{staticClass:"top-load-wrapper"},[t.topIconSrc&&"undefined"!=t.topIconSrc?i("img",{staticClass:"refresh-icon",class:{"icon-loading":"loading"===t.state},attrs:{src:t.topIconSrc,alt:""}}):t._e(),i("span",{staticClass:"refresh-span"},[t._v(t._s(t.topText))])])]):t._e(),i("div",{staticClass:"scroll-container",style:{paddingBottom:t.bottomBlockHeight+"px"}},[t._t("default"),"/mall2/detail/:id"!=t.$route.matched[0].path?i("div",{staticClass:"action-block",style:{height:t.bottomBlockHeight+"px"}},[i("div",{staticClass:"bottom-load-wrapper"},[t.bottomIconSrc&&"undefined"!=t.bottomIconSrc?i("img",{staticClass:"refresh-icon",class:{"icon-loading":"loading"===t.state},attrs:{src:t.bottomIconSrc,alt:""}}):t._e(),i("span",{staticClass:"refresh-span"},[t._v(t._s(t.bottomText))])])]):t._e()],2),"/mall2/detail/:id"!=t.$route.matched[0].path?i("div",{staticClass:"action-block",style:{height:t.bottomBlockHeight+"px"}},[i("div",{staticClass:"bottom-load-wrapper"},[t.bottomIconSrc&&"undefined"!=t.bottomIconSrc?i("img",{staticClass:"refresh-icon",class:{"icon-loading":"loading"===t.state},attrs:{src:t.bottomIconSrc,alt:""}}):t._e(),i("span",{staticClass:"refresh-span"},[t._v(t._s(t.bottomText))])])]):t._e()])},a=[];i("a9e3"),i("4795"),i("fb6a"),i("0d03");function o(t,e){var i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=null;return function(){var o=this,n=arguments,r=+new Date;clearTimeout(a),i||(i=r),0!==s&&r-i>=s?(t.apply(o,n),i=r):a=setTimeout((function(){t.apply(o,n)}),e)}}var n={pullText:"下拉刷新",triggerText:"释放更新",loadingText:"加载中...",doneText:"加载完成",failText:"加载失败",loadedStayTime:400,stayDistance:50,triggerDistance:70},r={pullText:"上拉加载",triggerText:"释放更新",loadingText:"加载中...",doneText:"加载完成",failText:"加载失败",loadedStayTime:400,stayDistance:50,triggerDistance:70},l={name:"vue-pull-to",props:{doSiteCallback:{type:Boolean,default:!1},distanceIndex:{type:Number,default:2},topBlockHeight:{type:Number,default:50},bottomBlockHeight:{type:Number,default:50},wrapperHeight:{type:String,default:"100%"},topLoadMethod:{type:Function},bottomLoadMethod:{type:Function},isThrottleTopPull:{type:Boolean,default:!0},isThrottleBottomPull:{type:Boolean,default:!0},isThrottleScroll:{type:Boolean,default:!1},isTopBounce:{type:Boolean,default:!0},isBottomBounce:{type:Boolean,default:!0},isBottomAutoS:{type:Boolean,default:!1},bothEventForce:{type:Boolean,default:!1},topConfig:{type:Object,default:function(){return{}}},bottomConfig:{type:Object,default:function(){return{}}}},data:function(){return{topIconSrc:"",bottomIconSrc:"",scrollEl:null,startScrollTop:0,startY:0,currentY:0,distance:0,direction:0,diff:0,beforeDiff:0,topText:"",bottomText:"",state:"",bottomReached:!1,throttleEmitTopPull:null,throttleEmitBottomPull:null,throttleEmitScroll:null,throttleOnInfiniteScroll:null,myTimer:null,lastSite:0,speed:0}},computed:{_topConfig:function(){return this.$assign({},n,this.topConfig)},_bottomConfig:function(){return this.$assign({},r,this.bottomConfig)}},watch:{state:function(t){"pull"===t?"down"===this.direction?this.topIconSrc=i("54a4"):this.bottomIconSrc=i("18eb"):"trigger"===t?"down"===this.direction?this.topIconSrc=i("18eb"):this.bottomIconSrc=i("54a4"):"loading"===t?(this.topIconSrc=i("f18e"),this.bottomIconSrc=i("f18e")):"loaded-done"===t&&(this.topIconSrc=i("a7ac"),this.bottomIconSrc=i("a7ac")),"down"===this.direction?this.$emit("top-state-change",t):this.$emit("bottom-state-change",t)}},methods:{siteCallBack:function(){var t=this;this.myTimer&&(clearInterval(this.myTimer),this.myTimer=null);var e=20,i=this.speed;if(!(i<5)){var s=this.scrollEl.scrollTop,a=this.scrollEl.scrollHeight-this.scrollEl.offsetHeight,o=-i/e;this.myTimer=window.setInterval((function(){if(i+=o,s+=i,s>=220&&i>0||s>=a||s<=0)return s<0&&t.$emit("pageSite",0),void(t.myTimer&&(clearInterval(t.myTimer),t.myTimer=null));t.$emit("pageSite",s),e--,e<0&&t.myTimer&&(clearInterval(t.myTimer),t.myTimer=null)}),50)}},actionPull:function(){this.state="pull","down"===this.direction?this.topText=this._topConfig.pullText:this.bottomText=this._bottomConfig.pullText},actionTrigger:function(){this.state="trigger","down"===this.direction?this.topText=this._topConfig.triggerText:this.bottomText=this._bottomConfig.triggerText},actionLoading:function(){this.state="loading","down"===this.direction?(this.topText=this._topConfig.loadingText,this.topLoadMethod.call(this,this.actionLoaded),this.scrollTo(this._topConfig.stayDistance)):(this.bottomText=this._bottomConfig.loadingText,this.isBottomAutoS||this.scrollTo(-this._bottomConfig.stayDistance),this.bottomLoadMethod.call(this,this.actionLoaded))},actionLoaded:function(){var t,e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"done";this.state="loaded-".concat(i),"down"===this.direction?(this.topText="done"===i?this._topConfig.doneText:this._topConfig.failText,t=this._topConfig.loadedStayTime,this._topConfig.stayDistance):(this.isBottomAutoS?(t=0,this.bottomText="done"===i?this._bottomConfig.doneText:this._bottomConfig.failText):(this.bottomText="done"===i?this._bottomConfig.doneText:this._bottomConfig.failText,t=this._bottomConfig.loadedStayTime),this._bottomConfig.stayDistance),setTimeout((function(){e.scrollTo(0),setTimeout((function(){e.state=""}),200)}),t)},scrollTo:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;this.$el.style.transition="".concat(i,"ms"),this.diff=t,setTimeout((function(){e.$el.style.transition=""}),i)},checkBottomReached:function(){return this.scrollEl.scrollTop+this.scrollEl.offsetHeight+1>=this.scrollEl.scrollHeight},handleTouchStart:function(t){this.myTimer&&(clearInterval(this.myTimer),this.myTimer=null),this.startY=t.touches[0].clientY,this.beforeDiff=this.diff,this.startScrollTop=this.scrollEl.scrollTop,this.bottomReached=this.checkBottomReached()},handleTouchMove:function(t){if(this.currentY=t.touches[0].clientY,this.distance=(this.currentY-this.startY)/this.distanceIndex+this.beforeDiff,this.direction=this.distance>0?"down":"up",0===this.startScrollTop&&"down"===this.direction&&this.isTopBounce){if(t.preventDefault(),t.stopPropagation(),this.diff=this.distance,this.isThrottleTopPull?this.throttleEmitTopPull(this.diff):this.$emit("top-pull",this.diff),"function"!==typeof this.topLoadMethod)return;this.distance<this._topConfig.triggerDistance&&"pull"!==this.state&&"loading"!==this.state?this.actionPull():this.distance>=this._topConfig.triggerDistance&&"trigger"!==this.state&&"loading"!==this.state&&this.actionTrigger()}else if(this.bottomReached&&"up"===this.direction&&this.isBottomBounce){if(t.preventDefault(),t.stopPropagation(),this.diff=this.distance,this.isThrottleBottomPull?this.throttleEmitBottomPull(this.diff):this.$emit("bottom-pull",this.diff),"function"!==typeof this.bottomLoadMethod)return;Math.abs(this.distance)<this._bottomConfig.triggerDistance&&"pull"!==this.state&&"loading"!==this.state?this.actionPull():Math.abs(this.distance)>=this._bottomConfig.triggerDistance&&"trigger"!==this.state&&"loading"!==this.state&&this.actionTrigger()}},handleTouchEnd:function(){if(0!==this.diff){if("trigger"===this.state)return void this.actionLoading();this.scrollTo(0)}},setScrollTopValue:function(t){this.scrollEl.scrollTop=t},getScrollTopValue:function(){return this.scrollEl.scrollTop},handleScroll:function(t){this.$emit("pageSite",this.scrollEl.scrollTop),"loading"!=this.state&&this.isBottomBounce&&this.isBottomAutoS&&t.target.scrollTop+t.target.offsetHeight>t.target.scrollHeight-this.bottomBlockHeight&&(this.direction="up",this.actionLoading()),this.isThrottleScroll?this.throttleEmitScroll(t):this.$emit("scroll",t)},onInfiniteScroll:function(){this.checkBottomReached()&&this.$emit("infinite-scroll")},throttleEmit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,s=function(){var t=Array.prototype.slice.call(arguments);t.unshift(i),this.$emit.apply(this,t)};return o(s,t,e)},bindEvents:function(){this.isBottomAutoS?1==this.bothEventForce&&(this.scrollEl.addEventListener("touchstart",this.handleTouchStart),this.scrollEl.addEventListener("touchmove",this.handleTouchMove),this.scrollEl.addEventListener("touchend",this.handleTouchEnd)):(this.scrollEl.addEventListener("touchstart",this.handleTouchStart),this.scrollEl.addEventListener("touchmove",this.handleTouchMove),this.scrollEl.addEventListener("touchend",this.handleTouchEnd)),this.scrollEl.addEventListener("scroll",this.handleScroll)},createThrottleMethods:function(){this.throttleEmitTopPull=this.throttleEmit(200,300,"top-pull"),this.throttleEmitBottomPull=this.throttleEmit(200,300,"bottom-pull"),this.throttleEmitScroll=this.throttleEmit(100,150,"scroll"),this.throttleOnInfiniteScroll=o(this.onInfiniteScroll,400)},init:function(){this.createThrottleMethods(),this.scrollEl=this.$el.querySelector(".scroll-container"),this.bindEvents()}},mounted:function(){this.init()}},c=l,d=(i("cf52"),i("0c7c")),h=Object(d["a"])(c,s,a,!1,null,null,null);e["a"]=h.exports}}]);