(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef53bbb2"],{3759:function(t,e,a){},"524f":function(t,e,a){"use strict";a("3759")},b729e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payorder"},[a("nav-top",{attrs:{title:"加油支付凭证"},on:{backEvent:t.backEvent}}),a("nav-content",{staticClass:"firm-order-content"},[a("div",{staticClass:"time-change"},[a("div",{staticClass:"filter-btn",on:{click:function(e){t.showTime=!0}}},[a("div",{staticClass:"time"},[t._v(t._s(t.currentYear)+"年"+t._s(t.currentMonth)+"月")]),a("i",{staticClass:"icon iconfont mall-arrow-down",class:{active:t.showTime}})]),a("div",{staticClass:"num"},[t._v("累计加油：123元")])]),a("van-tabs",{staticClass:"tabs",on:{change:t.changeTab},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[a("van-tab",{attrs:{title:"全部"}}),a("van-tab",{attrs:{title:"待支付"}}),a("van-tab",{attrs:{title:"已完成"}}),a("van-tab",{attrs:{title:"已取消"}})],1),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getPayBill,expression:"getPayBill"}],staticClass:"order-list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-immediate-check":!0,"infinite-scroll-distance":"20"}},[t._l(t.orderList,(function(e,i){return a("div",{key:i,staticClass:"order-item",on:{click:function(a){return t.repayDetail(e)}}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("贵阳南明体育馆加油站")]),a("span",{staticClass:"con"},[t._v("2020年10月13日11:07:45")])]),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("支付金额")]),""!==e.payAmount||void 0!==e.payAmount?a("span",{staticClass:"con theme_font_red money-special"},[t._v("￥23")]):t._e()]),a("div",{staticClass:"item pay-btn"},["0"==t.tabActive?a("div",[a("div",{staticClass:"con wait-pay again",on:{click:function(a){return a.stopPropagation(),t.repayment(e)}}},[t._v("重新支付")]),a("div",{staticClass:"con wait-pay",staticStyle:{"margin-right":"15px"},on:{click:function(a){return a.stopPropagation(),t.cancelOrderHandler(e)}}},[t._v("取消订单")])]):a("div",{staticClass:"con"},[a("div",{staticClass:"con wait-pay",on:{click:function(a){return a.stopPropagation(),t.toDetail(e)}}},[t._v("查看订单")])])])])})),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasMore,expression:"!hasMore"}],staticClass:"no-data theme_font_tint"},[t._v("没有更多数据了~")])],2)],1),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showTime,callback:function(e){t.showTime=e},expression:"showTime"}},[a("van-datetime-picker",{attrs:{type:"year-month","min-date":t.minDate,"max-date":t.maxDate,formatter:t.formatter},on:{confirm:t.confirmDate,cancel:function(e){t.showTime=!1}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)},s=[],n=(a("0d03"),a("4160"),a("159b"),a("a9e3"),a("ca00")),r={components:{},data:function(){return{currentYear:(new Date).getFullYear(),currentMonth:(new Date).getMonth()+1,minDate:new Date(2020,0,1),maxDate:new Date(2025,10,1),currentDate:new Date,dateFrom:"",oilNum:0,showTime:!1,orderList:[1,2,3,4,5],page:0,hasMore:!0,loading:!1,successView:!1,awardActivity:{},tabActive:0,source:0}},mounted:function(){this.source=this.$route.query.source,this.dateFrom=n["a"].getDealMonthFrom(this.currentYear,this.currentMonth),this.getPayBill()},computed:{isScan:function(){return"/firmScanOrder"===this.$route.path}},methods:{changeTab:function(t,e){this.page=0,this.tabActive=t,this.orderList=[],this.getPayBill()},cancelOrderHandler:function(t){var e=this;this.$dialog.confirm({message:"确定取消当前订单吗？"}).then((function(){e.cancelOrder(t)}))},queryOrder:function(){this.page=0,this.orderList=[],this.getPayBill()},cancelOrder:function(t){var e=this,a={token:this.$store.state.login.token,orderType:t.orderType,orderId:t.id},i="/app/json/refuel_center/cancelOrder";100002002==t.orderType&&(i="/app/json/refuel_scan_code/cancelOrder"),this.$http.post(i,a).then((function(t){var a=t.data;0==a.status?(e.$Toast("支付已取消"),e.queryOrder()):e.$Toast(a.info)}))},repayment:function(t){this.$router.push({path:"/offline_payment/confirm_bill",query:{source:this.source}})},shareView:function(){this.successView=!0},sharePage:function(){this.$router.push({path:"/share-gift/share",query:{awardActivity:JSON.stringify(this.awardActivity)}})},invoiceUse:function(t){var e="";return 0===t?e="未开票":1===t?e="已开票":2===t&&(e="开票中"),e},changeTime:function(){this.showTime=!0},confirmDate:function(t){this.currentYear=new Date(this.currentDate).getFullYear(),this.currentMonth=new Date(this.currentDate).getMonth()+1,this.dateFrom=n["a"].getDealMonthFrom(this.currentYear,this.currentMonth),this.showTime=!1,this.orderList=[],this.getPayBill()},formatter:function(t,e){return"year"===t?"".concat(e,"年"):"month"===t?"".concat(e,"月"):e},backEvent:function(){this.$router.go(-1)},getPayBill:function(){var t=this;this.page++,this.loading=!0,this.$Loading.open();var e="/app/json/refuel_center/queryOrder";this.isScan&&(e="/app/json/refuel_scan_code/queryOrder");var a={token:this.$store.state.login.token,orderTypeList:["100011","100002002","100027002"],rows:12,page:this.page};1==this.tabActive?(a.state=1,a.submitTime=this.dateFrom.start+"TO"+this.dateFrom.end):2==this.tabActive?(a.state=3,a.payTime=this.dateFrom.start+"TO"+this.dateFrom.end):3==this.tabActive?(a.stateList=[7,8,12],a.submitTime=this.dateFrom.start+"TO"+this.dateFrom.end):a.submitTime=this.dateFrom.start+"TO"+this.dateFrom.end,this.$http.post(e,a).then((function(e){var a=e.data;if(0==a.status){a.data.orderList;t.orderList=[1,2,3,4,5],t.page<a.data.page.totalPages?t.loading=!1:t.hasMore=!1;var i=0;t.orderList.forEach((function(t){i+=Number(t.payAmount)})),t.oilNum=i}else t.$Toast(a.info);t.$Loading.close()}))},repayDetail:function(t){"1"==this.tabActive&&this.toDetail(t)},toDetail:function(t){this.$router.push({path:"/offline_payment/bill_details",query:{orderType:t.orderType,orderId:t.id,source:this.source}})}}},o=r,c=(a("524f"),a("0c7c")),l=Object(c["a"])(o,i,s,!1,null,"4c4229c2",null);e["default"]=l.exports}}]);