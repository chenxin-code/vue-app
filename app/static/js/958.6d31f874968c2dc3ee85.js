(window.webpackJsonp=window.webpackJsonp||[]).push([[958],{"2lQY":function(t,e,i){"use strict";i.r(e);var l={name:"live-stream",components:{},data:function(){return{lbId:"",detail:{}}},methods:{overlayEvent:function(){this.player.volume(1)},getDetailInfo:function(){var t=this;if(""!=this.lbId){this.$Loading.open();var e={lbId:this.lbId};this.$http.post("/app/json/live_broadcast/detail",e).then((function(e){t.$Loading.close();var i=e.data;0==i.status?(t.detail=i.data,t.initPlayer()):t.$Toast(i.info)}),(function(e){t.$Loading.close(),t.$Toast("获取数据失败")}))}else this.$Toast("没有获取到直播ID！")},getVideoStyle:function(t){var e=document.documentElement.clientWidth,i=document.documentElement.clientHeight,l=t.resolution,o=[];if(l&&""!=l&&(o=l.split("*")),o&&2==o.length){var a=parseFloat(o[0]),n=parseFloat(o[1]);a>0&&n>0&&(e/a>i/n?(t.fullVideoWidth=e,t.fullVideoHeight="auto"):(t.fullVideoWidth="auto",t.fullVideoHeight=i))}else t.fullVideoWidth=e,t.fullVideoHeight=i},initPlayer:function(){this.getVideoStyle(this.detail);var t=this.detail.fullVideoWidth,e=this.detail.fullVideoHeight;this.player=new TcPlayer("stream_div",{m3u8:this.detail.pullHlsUrl,flv:this.detail.pullFlvUrl,autoplay:!0,flash:!1,controls:"none",poster:this.detail.lbImg,width:t,height:e,listener:function(t){"error"==t.type?console.error(t):"loadeddata"==t.type||t.type}}),this.player.volume(0)}},created:function(){},mounted:function(){this.lbId=this.$route.query.lbId||"",this.getDetailInfo()}},o=(i("3dHR"),i("KHd+")),a=Object(o.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"live-stream"},[i("div",{staticClass:"my-overlay",on:{click:function(e){return e.stopPropagation(),t.overlayEvent(e)}}}),t._v(" "),i("div",{attrs:{id:"stream_div"}})])}),[],!1,null,"d7a97db4",null);e.default=a.exports},"3dHR":function(t,e,i){"use strict";var l=i("pY8i");i.n(l).a},pY8i:function(t,e,i){}}]);