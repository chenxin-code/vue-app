(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e422f16"],{2786:function(t,i,a){},2869:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("nav-top",{attrs:{title:"我的先享卡"},on:{backEvent:t.goback}}),a("nav-content",[a("div",{staticClass:"header"},[a("h2",[t._v("累计为我节省")]),a("div",[a("span",{staticClass:"price"},[t._v(t._s(t.totalAmount))]),t._v("元 ")])]),a("h2",{staticClass:"title"},[t._v("我的先享卡")]),a("div",{staticClass:"content"},[a("van-list",{staticClass:"search-list",attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},[t.list.length?t._l(t.list,(function(t,i){return a("couponCard",{key:i,staticStyle:{"margin-bottom":"8px"},attrs:{item:t}})})):t._e()],2)],1)])],1)},s=[],n=(a("99af"),function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"card"},[a("div",{staticClass:"left"},[a("div",{staticClass:"name"},[t._v(" 加油山西小程序 ")]),a("div",{staticClass:"title"},[t._v(" "+t._s(t.item.cardTemplateName)+" ")]),a("div",{staticClass:"time"},[a("p",{domProps:{innerHTML:t._s(t.stateText)}})])]),a("div",{staticClass:"right"},[a("van-button",{attrs:{round:"",type:"info",color:"rgba(240, 44, 45, 1)",size:"small"},on:{click:function(i){return t.toDetail(t.item.id)}}},[t._v("查看详情")])],1)])}),o=[],c={props:{item:{type:Object,default:function(){}}},data:function(){return{}},methods:{toDetail:function(t){var i={path:"/enjoy_card_detail",query:{id:t}};this.$router.push(i)}},computed:{stateText:function(){return"APPLY"==this.item.state?"先享卡申请中":"ONGOING"==this.item.state?"".concat(this.item.actEffEndTime,"前，").concat(this.item.totalObjective):"CHECKING"==this.item.state?"约定到期核对中":"FINISHED"==this.item.state?"".concat(this.item.totalObjective,"<span style='color:#F02C2D'>(已完成约定)</span>"):"UNFINISHED"==this.item.state?"".concat(this.item.totalObjective,"<span style='color:#F02C2D'>(未完成约定)</span>"):void 0}}},l=c,r=(a("531e"),a("0c7c")),d=Object(r["a"])(l,n,o,!1,null,"23bab33a",null),u=d.exports,f={data:function(){return{list:[],page:0,rows:10,totalAmount:0,loading:!1,finished:!1}},created:function(){this.getCardInfo()},methods:{getCardInfo:function(){var t=this;this.$http.post("/app/json/wx_discount_card/getTotalDiscount").then((function(i){var a=i.data;0==a.status?t.totalAmount=a.data||0:t.$toast(a.info)}))},goback:function(){this.$router.go(-1)},onLoad:function(){var t=this;this.$Loading.open(),this.page++;var i={page:this.page,rows:this.rows};this.$http.post("/app/json/wx_discount_card/getDiscountCardListSelf",i).then((function(i){var a=i.data;if(0==a.status){var e=a.data||[];t.list=t.list.concat(e),t.list.length>=a.totalRecords&&(t.finished=!0)}else t.finished=!0,t.$Toast(i.info?i.info:"获取列表失败");t.Loading=!1,t.$Loading.close()}))["catch"]((function(i){t.$Loading.close()}))}},components:{couponCard:u}},h=f,p=(a("e72f"),Object(r["a"])(h,e,s,!1,null,"4ef0eba3",null));i["default"]=p.exports},"531e":function(t,i,a){"use strict";a("2786")},e3fe:function(t,i,a){},e72f:function(t,i,a){"use strict";a("e3fe")}}]);