(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-672921fd"],{"08d4":function(t,e,o){"use strict";o("3f67")},"3f67":function(t,e,o){},4576:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("nav-top",{attrs:{title:"我推荐码"},on:{backEvent:t.backEvent}}),o("nav-content",[o("div",{ref:"imageWrapper",staticClass:"myShop",attrs:{id:"myShop"}},[o("div",{staticClass:"qrcode"},[o("canvas",{staticClass:"qrcode",attrs:{id:"qrcode"}}),o("p",[t._v("商品推荐码")])])]),o("div",{staticClass:"answer theme_bg_red",on:{click:t.downloadImg}},[t._v("保存二维码")])])],1)},n=[],c=o("5530"),s=(o("99af"),o("e25e"),o("ac1f"),o("1276"),o("d055")),r=o.n(s),i=o("da71"),d=o("2f62"),u=o("c0e9"),m=o.n(u),l={name:"microshopQrcode",components:{QRCode:r.a},data:function(){return{detailData:{}}},computed:Object(c["a"])({},Object(d["c"])(["getPutaggregate"])),mounted:function(){var t=this;this.$nextTick((function(){var e="";if("all"==t.$route.query.type)e="".concat(t.$store.state.globalConfig.wxBaseUrl).concat(i["a"].shareUrl,"/mall2/categories?userNo=").concat(t.$route.query.qrcode),r.a.toCanvas(document.getElementById("qrcode"),e,{margin:0,width:160});else{t.$Loading.open();var o={token:t.$store.state.login.token};t.$http.post("/app/json/user/getUserRfrCode",o).then((function(o){t.$Loading.close();var a=o.data;0==a.status?(e="".concat(t.$store.state.globalConfig.wxBaseUrl).concat(i["a"].shareUrl,"/recommend-commodity/recomendlist?shareCode=").concat(t.$route.query.qrcode,"&userNo=").concat(a.data.userNo),r.a.toCanvas(document.getElementById("qrcode"),e,{margin:0,width:160})):t.$Toast(a.info)}),(function(e){t.$Loading.close()}))}}))},methods:Object(c["a"])(Object(c["a"])({},Object(d["d"])(["setRecommendationSku"])),{},{backEvent:function(){this.setRecommendationSku({skuList:[]}),"/recommend-commodity/qrcode"==this.$route.lastPath?this.$router.go(-1):this.$router.push({path:"/recommend-commodity/home",query:{lastPath:"qrcode"}})},downloadImg:function(){var t=this,e=document.querySelector(".myShop"),o=parseInt(window.getComputedStyle(e).width),a=parseInt(window.getComputedStyle(e).height),n=document.createElement("canvas"),c=2;n.width=o*c,n.height=a*c,n.getContext("2d").scale(c,c);var s={useCORS:!0,scale:c,canvas:n,backgroundColor:"#000"};m()(this.$refs.imageWrapper,s).then((function(e){var o=e.toDataURL("image/png"),a=o.split("base64,");t.$bridgefunc.savePhoto(a[1],(function(e){"1"==e?t.$Toast("保存成功！"):t.$Toast("保存失败！")}))}))}})},h=l,g=(o("08d4"),o("0c7c")),p=Object(g["a"])(h,a,n,!1,null,"0243213f",null);e["default"]=p.exports}}]);