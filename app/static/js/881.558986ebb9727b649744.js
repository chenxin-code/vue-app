(window.webpackJsonp=window.webpackJsonp||[]).push([[881],{"/DLo":function(t,o,n){"use strict";var s=n("1mBF");n.n(s).a},"1mBF":function(t,o,n){},klOB:function(t,o,n){"use strict";n.r(o),n("2jwP");var s=n("CzMu"),a=(n("vacd"),n("XkYy")),i=(n("ilju"),n("5B+z")),e=n("0FX9"),p=n.n(e),u={components:{CouponDetail:n("E3kW").a,VanPopup:i.a,VanTabs:a.a,VanTab:s.a},data:function(){return{hasMechan:!1,stationCode:"",couponList:[],popupVisible:!1,stationinfo:{},userType:"",hasMore:!0,pageInfo:{page:0,rows:10},loading:!1,finished:!1}},mounted:function(){this.stationCode=this.$route.query.stationCode,this.userType=this.$route.query.userType},methods:{tocouponDetail:function(t){var o=this;this.popupVisible=!0,this.$http.post("/app/json/user_coupon/getCouDistUsedUserInfo",{couNo:t.couNo}).then((function(t){if(o.stationinfo=t.data.data,!t.data.data.couCheckCode)return o.$Toast("编码为空，无法展示二维码"),!1;p.a.toCanvas(document.getElementById("coupon-qrcode"),t.data.data.couCheckCode,{margin:1,width:170})})).catch((function(t){o.$Toast(t)}))},dofindUsedCoupons:function(){var t=this;this.$http.post("/app/json/user_coupon/findUsedCoupons",this.pageInfo).then((function(o){t.loading=!1;var n=o.data;0==n.status?n.data instanceof Array&&n.data.length>0?(t.couponList.push.apply(t.couponList,n.data),t.couponList.length>=n.totalRecords&&(t.finished=!0)):t.finished=!0:(t.finished=!0,t.$Toast(n.info))})).catch((function(o){t.finished=!0,t.$Toast(o)}))},getContainer:function(){return document.getElementsByTagName("body")[0]},loadMore:function(){this.pageInfo.page++,this.dofindUsedCoupons()}}},c=(n("/DLo"),n("KHd+")),l=Object(c.a)(u,(function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"container"},[n("nav-top",{on:{backEvent:function(o){return t.$router.go(-1)}}}),t._v(" "),n("nav-content",[n("van-list",{staticClass:"coupon-list",attrs:{finished:t.finished,offset:200,"finished-text":"没有更多了"},on:{load:t.loadMore},model:{value:t.loading,callback:function(o){t.loading=o},expression:"loading"}},t._l(t.couponList,(function(o,s){return n("div",{key:s,staticClass:"coupon-item",on:{click:function(n){return t.tocouponDetail(o)}}},[1===o.userType?n("div",{staticClass:"userType"},[t._v("个人")]):2===o.userType?n("div",{staticClass:"userType"},[t._v("机构")]):t._e(),t._v(" "),n("coupon-detail",{attrs:{item:o}})],1)})),0)],1),t._v(" "),n("van-popup",{staticClass:"used-coupon-modal",attrs:{"get-container":t.getContainer},model:{value:t.popupVisible,callback:function(o){t.popupVisible=o},expression:"popupVisible"}},[n("p",{staticClass:"pop_top"},[t._v("已使用电子券详情")]),t._v(" "),n("p",{staticClass:"pop_you"},[n("span",{staticClass:"label"},[t._v("核销网点：")]),t._v("\n      "+t._s(t.stationinfo.usedStationName)+"\n    ")]),t._v(" "),n("p",{staticClass:"pop_time"},[n("span",{staticClass:"label"},[t._v("使用时间：")]),t._v("\n      "+t._s(t.stationinfo.usedTime)+"\n    ")]),t._v(" "),n("p",{staticClass:"pop_num"},[n("span",{staticClass:"label"},[t._v("交易流水号：")]),t._v("\n      "+t._s(t.stationinfo.orderNo)+"\n    ")]),t._v(" "),n("p",{staticClass:"pop_num"},[n("span",{staticClass:"label"},[t._v("券号：")]),t._v("\n      "+t._s(t.stationinfo.couNo)+"\n    ")]),t._v(" "),n("p",{staticClass:"pop_num"},[n("span",{staticClass:"label"},[t._v("券动态码：")]),t._v("\n      "+t._s(t.stationinfo.couCheckCode)+"\n    ")]),t._v(" "),n("canvas",{staticClass:"qrcode-content",attrs:{id:"coupon-qrcode"}})])],1)}),[],!1,null,"6aa13f9b",null);o.default=l.exports}}]);