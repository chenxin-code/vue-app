(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12cb0a0c"],{"00dd":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"body"},[s("p",{staticClass:"titer"},[t._v("热卖推荐")]),s("div",{ref:"personWrap",staticClass:"person-wrap"},[s("ul",{ref:"personTab",staticClass:"person-list",staticStyle:{width:"20rem"}},[t._l(t.array,(function(e,i){return s("li",{key:"card"+i,staticClass:"card",on:{click:function(s){return t.productEvent(e)}}},[s("div",{staticClass:"card-content theme_bg_white"},[s("div",{staticClass:"img-div"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.mainMobilePicUrl,expression:"item.mainMobilePicUrl"}]})]),s("div",{staticClass:"title theme_font_black single-line"},[t._v(t._s(e.skuName))]),e.groupFlag?t._e():s("div",{staticClass:"row-dianpu"},[s("div",{staticClass:"info-row"},[s("div",{staticClass:"price-content"},[s("span",{staticClass:"font-small theme_font_tint left-m-2 line-through"},[t._v(" ￥"+t._s(e.activityPrice)+" ")])])]),s("div",{staticClass:"info-row activity"},[s("div",{staticClass:"activity-left"},[s("span",{staticClass:"profitstyle"},[s("span",{staticClass:"price-x theme_font_red"},[t._v("￥")]),t._v(" "),s("span",{staticClass:"price-z theme_font_red"},[t._v(t._s(t.getInteger(e.activityPrice)))]),s("span",{staticClass:"price-x theme_font_red"},[t._v("."+t._s(t.getDecimals(e.activityPrice)))])])]),s("div",{staticClass:"activity-right theme_standard_font_i",on:{click:function(s){return s.stopPropagation(),t.addShopping(e)}}},[s("i",{staticClass:"iconfont mall-gouwuche theme_font_red car-size"})])])]),e.groupFlag?s("div",{staticClass:"row-dianpu"},[s("div",{staticClass:"info-row"},[s("div",{staticClass:"price-content"},[s("span",[s("span",{staticClass:"price-x theme_font_red"},[t._v("￥")]),s("span",{staticClass:"price-z theme_font_red"},[t._v(t._s(t.getInteger(e.salePriceMin)))]),s("span",{staticClass:"price-x theme_font_red"},[t._v("."+t._s(t.getDecimals(e.salePriceMin)))]),s("span",{staticClass:"price-x theme_font_red"},[t._v("~")]),t._v("  "),s("span",{staticClass:"price-x theme_font_red"},[t._v("￥")]),s("span",{staticClass:"price-z theme_font_red"},[t._v(t._s(t.getInteger(e.salePriceMax)))]),s("span",{staticClass:"price-x theme_font_red"},[t._v("."+t._s(t.getDecimals(e.salePriceMax)))])])])]),s("div",{staticClass:"info-row activity"},[s("div",{staticClass:"activity-left"},[s("div",{staticClass:"font-small theme_font_tint"},[t._v(" 起购数量："+t._s(e.minPurNumber||0)+" ")])]),s("div",{staticClass:"activity-right theme_standard_font_i",on:{click:function(s){return s.stopPropagation(),t.addShopping(e)}}},[s("i",{staticClass:"iconfont mall-gouwuche theme_font_red car-size"})])])]):t._e()])])})),s("li",{staticClass:"liText"},[s("span",{staticClass:"text"},[t._v(t._s(t.recommendNums>6?"加载更多数据~":"没有更多数据了~"))])])],2)])])},a=[],r=(s("a9e3"),s("ac1f"),s("1276"),s("4795"),s("1fba")),o={name:"best-sellers",props:{params:{type:Object,required:!1,default:function(){return{groupFlag:0,storeCode:"",arr:[],recommendNums:""}}},startX:{type:Number,required:!1,default:0}},data:function(){return{scroll:null,array:[],recommendNums:""}},watch:{params:{handler:function(t){var e=this;t&&(this.array=t.arr,this.$nextTick((function(){e.personScroll()})),this.recommendNums=t.recommendNums)},immediate:!0,deep:!0}},destroyed:function(){this.destroy()},methods:{getInteger:function(t){var e=this.$util.toDecimal2(t),s=e.split(".");return s[0]},getDecimals:function(t){var e=this.$util.toDecimal2(t),s=e.split(".");return s[1]},personScroll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.$nextTick((function(){t.scroll?(t.scroll=new r["a"](t.$refs.personWrap,{startX:e,scrollX:!0,scrollY:!1,pullUpLoad:!0,eventPassthrough:"vertical"}),t.scroll.refresh()):(t.scroll=new r["a"](t.$refs.personWrap,{startX:e,scrollX:!0,scrollY:!1,pullUpLoad:!0,eventPassthrough:"vertical"}),t.scroll.on("scrollEnd",(function(e){e.x<=-354&&setTimeout((function(e){t.$router.push({path:"/micro_sho/best_sellers_list",query:{storeCode:t.params.storeCode,groupFlag:t.params.groupFlag}})}),100)})))}))},destroy:function(){this.scroll.destroy()},productEvent:function(t){this.$emit("productEvent",t)},addShopping:function(t){var e=t;e.picMainUrl=e.mainMobilePicUrl,this.$emit("addShopping",e)}}},n=o,l=(s("6c74"),s("0c7c")),c=Object(l["a"])(n,i,a,!1,null,"435ee87c",null);e["a"]=c.exports},"20b7":function(t,e,s){},"556d":function(t,e,s){"use strict";s("20b7")},"6c74":function(t,e,s){"use strict";s("dd64")},dd64:function(t,e,s){},f729:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],ref:"allContent",staticClass:"all-content",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-immediate-check":!0,"infinite-scroll-distance":"100"}},[2!=t.$store.state.webtype?s("div",{staticClass:"shop-background",staticStyle:{height:"80px"},attrs:{id:"shop-background"}},[s("div",{ref:"newSearch",staticClass:"newSearch",staticStyle:{backgroundColor:"#fff"},attrs:{id:"newSearch"}},[s("i",{staticClass:"iconfont mall-fanhui theme_font_black fanhui",style:{top:"32px"},on:{click:t.backEvent}}),s("div",{staticClass:"search-div theme_bg_white_f5",class:{"search-divA":2!=t.$store.state.webtype,"search-divB":2==t.$store.state.webtype},style:{top:"32px"},on:{click:t.toSearchEvent}},[s("i",{staticClass:"iconfont mall-sousuo theme_font_tint",staticStyle:{"font-size":"16px"}}),s("span",{staticClass:"theme_font_tint",staticStyle:{"font-size":"14px","margin-left":"10px"}},[t._v(t._s(t.searchKey?t.searchKey:"搜你想要的商品"))])])])]):t._e(),2==t.$store.state.webtype?s("div",{staticClass:"shop-background",staticStyle:{height:"50px"},attrs:{id:"shop-background"}},[s("div",{ref:"search",staticClass:"search",staticStyle:{backgroundColor:"#fff"},attrs:{id:"search"}},[2!=t.$store.state.webtype?s("i",{staticClass:"iconfont mall-fanhui theme_font_black fanhui",style:{top:"2px"},on:{click:t.backEvent}}):t._e(),s("div",{staticClass:"search-div theme_bg_white_f5",class:{"search-divA":2!=t.$store.state.webtype,"search-divB":2==t.$store.state.webtype},style:{top:"2px"},on:{click:t.toSearchEvent}},[s("i",{staticClass:"iconfont mall-sousuo theme_font_tint",staticStyle:{"font-size":"16px"}}),s("span",{staticClass:"theme_font_tint",staticStyle:{"font-size":"14px","margin-left":"10px"}},[t._v(t._s(t.searchKey?t.searchKey:"搜你想要的商品"))])])])]):t._e(),s("div",{staticClass:"delivery",class:{locationTop:t.isLocationTop,locationTopweb:t.isLocationTopweb},attrs:{id:"delivery"}},[t._l(t.deliveryTypes,(function(e,i){return s("div",{key:i,staticClass:"type-btn",class:{theme_light_bg:t.selectedType==e.tag,theme_standard_bdr_i:t.selectedType==e.tag},on:{click:function(s){return t.selectedTypeEvent(e.tag)}}},[s("i",{staticClass:"iconfont theme_font_common icon-size",class:[e.fontclass,{theme_standard_font_i:t.selectedType==e.tag}]}),s("span",{staticClass:"theme_font_common",class:{theme_standard_font_i:t.selectedType==e.tag}},[t._v(t._s(e.text))])])})),s("div",{staticClass:"space"}),s("div",{staticClass:"local-div",on:{click:function(e){return t.selectAddressClick()}}},[2==t.selectedType?s("span",{staticClass:"theme_font_gray single-line"},[t._v(t._s(t.$store.state.mall2.selectAddress.addressFull))]):t._e(),1==t.selectedType?s("span",{staticClass:"theme_font_gray single-line"},[t._v(t._s(t.$store.state.mall2.zitiAddress.storeName))]):t._e(),s("i",{staticClass:"iconfont mall-dingwei icon-size theme_font_gray"})])],2),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLocationTop||t.isLocationTopweb,expression:"isLocationTop || isLocationTopweb"}],staticClass:"seizeSeat"}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.bestSellersObj.arr.length,expression:"bestSellersObj.arr.length"}],staticClass:"bestSellers",attrs:{id:"bestSellers"}},[s("bestSellers",{ref:"bestSellers",attrs:{params:t.bestSellersObj},on:{addShopping:t.addShopping,productEvent:t.productEvent}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.screenArr.length,expression:"screenArr.length"}],staticClass:"row-botton",class:{isFitrateRow:t.isFitrateRow,fitrateRowweb:t.isFitrateRowweb}},[s("fitrateRow",{attrs:{screenArr:t.screenArr},on:{setData:t.setData}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isFitrateRow||t.isFitrateRowweb,expression:"isFitrateRow || isFitrateRowweb"}],staticClass:"seizeSeat"}),s("list",{ref:"listFun",attrs:{params:t.params,styleObj:t.styleObj,screenArr:t.screenArr},on:{productEvent:t.productEvent,addShopping:t.addShopping,listData:t.listData,listStatus:t.listStatus,refresh:t.refresh}}),s("div",{ref:"gouwuche",staticClass:"cart-div theme_bg_dark_d",class:{gouwucheani:t.addCartBtnAn},on:{click:function(e){return e.stopPropagation(),t.goCart.apply(null,arguments)}}},[t.$store.state.microSho.carts.length+t.$store.state.microSho.groupbuyingCarts.length>0?s("p",{staticClass:"cart-num theme_bg_red theme_font_white"},[t._v(t._s(t.$store.state.microSho.carts.length+t.$store.state.microSho.groupbuyingCarts.length))]):t._e(),s("i",{staticClass:"iconfont mall-gouwuche theme_font_white"})]),s("transition",{attrs:{name:"bounce"},on:{afterEnter:t.productImgAfterEnter}},[t.showProductImg&&t.addToCartItem?s("img",{staticClass:"productImg",attrs:{src:this.addToCartItem.picMainUrl||this.addToCartItem.mainMobilePicUrl,alt:""}}):t._e()]),s("transition",{on:{"after-enter":t.afterEnter,"before-enter":t.beforeEnter}},[t.showAddCartAn&&t.addToCartItem?s("div",{staticClass:"anProductImg"},[s("img",{attrs:{src:this.addToCartItem.picMainUrl||this.addToCartItem.mainMobilePicUrl,alt:""}})]):t._e()])],1)])},a=[],r=s("2909"),o=s("5530"),n=(s("4160"),s("159b"),s("bba4")),l=s("2f9a"),c=s("00dd"),d=s("39eb"),h=s("0ae6"),p=s("2f62"),u={components:{list:h["a"],Scroll:n["default"],bestSellers:c["a"],fitrateRow:d["a"]},computed:Object(o["a"])({},Object(p["c"])(["getPutaggregate"])),data:function(){return{deliveryTypes:[{text:"配送",fontclass:"mall-peisong",tag:"2"},{text:"自提",fontclass:"mall-ziti",tag:"1"}],screenArr:[{name:"综合",type:0,default:0,allScreen:!0,typeText:"sortType",sort:"sortProp",classStaId:"classStaId",classStaLevel:"classStaLevel",priceLow:"priceLow",priceHigh:"priceHigh"},{name:"销量",type:2},{name:"价格",type:1}],params:{skuName:"",storeCode:"",groupFlag:1,deliverType:this.$store.state.mall2.staticDeliverType,sortType:"asc",sortProp:"0",priceLow:"",priceHigh:"",classStaId:"",classStaLevel:""},styleObj:{listStyle:!1,rowStyle:2,isObject:2,isHeight:"",url:"/app/json/app_distribution_order/getMicroStorePros"},id:"",bestSellersH:0,backgroundColorNumber:0,isLocationTopweb:!1,isFitrateRowweb:!1,isLocationTop:!1,isFitrateRow:!1,loading:!1,isCollect:!1,scrollEl:null,scrollTopH:0,searchKey:"",selectedType:"",objData:{backgroundImgUrl:"",pictureUrl:""},bestSellersObj:{groupFlag:1,storeCode:"",arr:[],recommendNums:""},addToCartItem:void 0,showProductImg:!1,showAddCartAn:!1,addCartBtnAn:!1,statusOne:!1,microStoreCode:""}},beforeRouteLeave:function(t,e,s){"/mall2/mypickupaddress"==t.path?this.statusOne=!0:this.statusOne=!1,this.$keepaliveHelper.deleteCache(this),s()},activated:function(){this.isLocationTop=!1,this.isFitrateRow=!1,this.isLocationTopweb=!1,this.isFitrateRowweb=!1,this.scrollEl.scrollTop=this.scrollTopH,this.$refs.bestSellers.personScroll(0),this.statusOne&&1==this.selectedType&&(1==this.params.page?this.$refs.listFun.setData():this.params.page=1)},created:function(){this.id=this.$util.getUrlParam(window.location.href,"id")||"",this.microStoreCode=this.$route.query.storeID,this.params.storeCode=this.microStoreCode,this.bestSellersObj.storeCode=this.microStoreCode,this.$store.state.microSho.storeCoe=this.microStoreCode,this.selectedType=this.$store.state.mall2.staticDeliverType,"1"==this.$store.state.globalConfig.delivertype_default?this.deliveryTypes=[{text:"自提",fontclass:"mall-ziti",tag:"1"}]:"2"==this.$store.state.globalConfig.delivertype_default&&(this.deliveryTypes=[{text:"配送",fontclass:"mall-peisong",tag:"2"}])},mounted:function(){var t=this,e=document.getElementById("newSearch")||document.getElementById("search"),s=e?e.getBoundingClientRect().height:0,i=document.getElementById("shop-background"),a=i?i.getBoundingClientRect().height:0,r=document.getElementById("delivery");r&&r.getBoundingClientRect().height;this.scrollEl=this.$refs.allContent,this.scrollEl.addEventListener("scroll",(function(e){t.scrollTopH=e.target.scrollTop,2!=t.$store.state.webtype?(t.isLocationTopweb=t.scrollTopH>a-s,t.isFitrateRowweb=t.scrollTopH>a+t.bestSellersH-s):(t.isLocationTop=t.scrollTopH>a-s,t.isFitrateRow=t.scrollTopH>a+t.bestSellersH-s)}))},methods:{backEvent:function(){this.$router.go(-1),this.$keepaliveHelper.deleteCache(this)},refresh:function(){var t=this;this.$nextTick((function(e){var s=document.getElementById("bestSellers");t.bestSellersH=s?s.getBoundingClientRect().height:0}))},listStatus:function(t){this.loading=!1},loadMore:function(){this.loading=!0},setData:function(t){this.$refs.listFun.setData(t)},toSearchEvent:function(){var t=this;l["a"].open({initData:{barHeight:this.$store.state.barHeight,searchHistory:this.$store.state.mall2.searchHistory},clearSearchHistory:function(){t.$store.state.mall2.searchHistory=[]},searchEvent:function(e){l["a"].close(),t.$mallCommon.pushSearchHistory(e),t.searchKey=e,t.params.page=0,t.params.skuName=e}}),this.setScrollTop()},selectedTypeEvent:function(t){this.selectedType=t,this.$store.state.mall2.staticDeliverType=t,2==this.selectedType?this.showView=!0:this.showView=!1,this.params.deliverType=t},selectAddressClick:function(){this.lastPath="mall2";var t="";t=2==this.selectedType?"/mall2/addresslist":"/mall2/mypickupaddress",0!=this.$userCenter.checkLogined({path:t},0)&&this.$router.push({path:t})},listData:function(t){this.objData=Object.assign({},t.data[0]),this.bestSellersObj.arr=Object(r["a"])(t.data[0].retDatasRecommend),this.bestSellersObj.recommendNums=t.data[0].recommendNums},productEvent:function(t){this.lastPath="";var e="/micro_sho/sharebuyingDetail/"+this.$util.getDataString();this.$router.push({path:e,query:{id:t.skuId,skuId:t.skuId,lastPath:this.$route.path,deliveryType:this.$store.state.mall2.staticDeliverType,productType:t.productType,profit:t.profit,listData:t,microStoreCode:this.microStoreCode,proSkuDistributionId:t.proSkuDistributionId}})},addShopping:function(t){var e=this,s=this.$store.state.microSho.groupbuyingCarts;if(0==s.length)this.$store.state.microSho.groupbuyingCarts.push({skuId:t.skuId,storeOuCode:t.storeOuCode,deliverType:t.deliverType,proSkuDistributionId:t.proSkuDistributionId,number:t.minPurNumber,checked:1,selfActivityId:-2});else{var i=null,a=this.$store.state.microSho.groupbuyingCarts;a.forEach((function(s,a){if(t.skuId==s.skuId)return e.$store.state.microSho.groupbuyingCarts[a].number+=1,void(i=!0)})),i||this.$store.state.microSho.groupbuyingCarts.push({skuId:t.skuId,storeOuCode:t.storeOuCode,deliverType:t.deliverType,proSkuDistributionId:t.proSkuDistributionId,number:t.minPurNumber,checked:1,selfActivityId:-2})}this.addToCartItem=t,this.$nextTick((function(){})),this.showProductImg=!0},productImgAfterEnter:function(t){this.showProductImg=!1,this.showAddCartAn=!0},beforeEnter:function(t){t.style.transform="translate3d(0,0,0)",t.children[0].style.opacity=0},afterEnter:function(t){var e=this,s=t.getBoundingClientRect().bottom,i=t.children[0].getBoundingClientRect().left,a=this.$refs.gouwuche.getBoundingClientRect().left,r=this.$refs.gouwuche.getBoundingClientRect().top;t.style.transform="translate3d(0,".concat(r-s,"px,0)"),t.style.transition="transform .55s cubic-bezier(0.3, -0.25, 0.7, -0.15)",t.children[0].style.transform="translate3d(".concat(a-i,"px,0,0)"),t.children[0].style.transition="transform .55s linear",t.children[0].style.opacity=1,this.showAddCartAn=!1,t.addEventListener("transitionend",(function(){e.addCartBtnAn=!0,e.$refs.gouwuche.addEventListener("webkitAnimationEnd",(function(){e.addCartBtnAn=!1}))}))},collection:function(){var t=this;this.$Loading.open(),this.$http.post("/app/json/micro_store_front_end/addOrCancelMicroStoreCollect",{storeId:this.id}).then((function(e){t.$Loading.close(),0==e.data.status?(t.isCollect=!t.isCollect,t.$Toast(t.isCollect?"收藏成功":"已取消收藏")):t.$Toast(e.data.info)}))},goCart:function(){var t="/micro_sho/cart";1==this.$store.state.globalConfig.microshop_groupbuying_exhibition&&(t="/micro_sho/buyingCart"),this.$router.push({path:t,query:{microStoreCode:this.microStoreCode}})}},beforeDestroy:function(){}},m=u,f=(s("556d"),s("0c7c")),g=Object(f["a"])(m,i,a,!1,null,"00c1098e",null);e["default"]=g.exports}}]);