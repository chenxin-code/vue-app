(window.webpackJsonp=window.webpackJsonp||[]).push([[983],{"+3A6":function(t,e,o){"use strict";var a=o("bpUP");o.n(a).a},RXYH:function(t,e,o){"use strict";o.r(e);var a=o("0FX9"),n=o.n(a),s=o("2nGb"),r=o("L2JU"),i=o("lR8Q"),c=o.n(i),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},u={name:"microshopQrcode",components:{QRCode:n.a},data:function(){return{detailData:{}}},computed:d({},Object(r.c)(["getPutaggregate"])),mounted:function(){var t=this;this.$nextTick((function(){var e="";if("all"==t.$route.query.type)e=""+t.$store.state.globalConfig.wxBaseUrl+s.a.shareUrl+"/mall2/categories?userNo="+t.$route.query.qrcode,n.a.toCanvas(document.getElementById("qrcode"),e,{margin:0,width:160}),console.log(1,e);else{t.$Loading.open();var o={token:t.$store.state.login.token};t.$http.post("/app/json/user/getUserRfrCode",o).then((function(o){t.$Loading.close();var a=o.data;0==a.status?(e=""+t.$store.state.globalConfig.wxBaseUrl+s.a.shareUrl+"/recommend-commodity/recomendlist?shareCode="+t.$route.query.qrcode+"&userNo="+a.data.userNo,n.a.toCanvas(document.getElementById("qrcode"),e,{margin:0,width:160}),console.log(2,e)):t.$Toast(a.info)}),(function(e){t.$Loading.close()}))}}))},methods:d({},Object(r.d)(["setRecommendationSku"]),{backEvent:function(){this.setRecommendationSku({skuList:[]}),"/recommend-commodity/qrcode"==this.$route.lastPath?this.$router.go(-1):this.$router.push({path:"/recommend-commodity/home",query:{lastPath:"qrcode"}})},downloadImg:function(){var t=this,e=document.querySelector(".myShop"),o=parseInt(window.getComputedStyle(e).width),a=parseInt(window.getComputedStyle(e).height),n=document.createElement("canvas");n.width=2*o,n.height=2*a,n.getContext("2d").scale(2,2);var s={useCORS:!0,scale:2,canvas:n,backgroundColor:"#000"};c()(this.$refs.imageWrapper,s).then((function(e){var o=e.toDataURL("image/png").split("base64,");t.$bridgefunc.savePhoto(o[1],(function(e){"1"==e?t.$Toast("保存成功！"):t.$Toast("保存失败！")}))}))}})},l=(o("+3A6"),o("KHd+")),h=Object(l.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("nav-top",{attrs:{title:"我推荐码"},on:{backEvent:this.backEvent}}),this._v(" "),e("nav-content",[e("div",{ref:"imageWrapper",staticClass:"myShop",attrs:{id:"myShop"}},[e("div",{staticClass:"qrcode"},[e("canvas",{staticClass:"qrcode",attrs:{id:"qrcode"}}),this._v(" "),e("p",[this._v("商品推荐码")])])]),this._v(" "),e("div",{staticClass:"answer theme_bg_red",on:{click:this.downloadImg}},[this._v("保存二维码")])])],1)}),[],!1,null,"b610ca68",null);e.default=h.exports},bpUP:function(t,e,o){}}]);