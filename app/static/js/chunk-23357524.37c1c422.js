(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23357524"],{2010:function(t,e,s){"use strict";s("9f39")},9939:function(t,e,s){"use strict";var i=s("d4ec"),n=s("bee2"),a=(s("e7e5"),s("d399")),c=(s("a15b"),s("c975"),s("d3b7"),s("ac1f"),s("466d"),s("1276"),s("a026")),o=(s("ca00"),s("a18c"),s("751a")),r=s("653a");c["default"].use(a["a"]);var u=function(){function t(e){Object(i["a"])(this,t),this.jsApiList=e}return Object(n["a"])(t,[{key:"hideAllBaseMenu",value:function(){this._init(["hideAllNonBaseMenuItem"]).then((function(){wx.hideAllNonBaseMenuItem()}))}},{key:"getEtpLocation",value:function(t){this._init(["getLocation"]).then((function(){wx.getLocation({type:"gcj02",success:function(e){t&&t(e)}})}))}},{key:"createEnterpriseChat",value:function(t,e,s){t&&e&&this._init(["openEnterpriseChat"]).then((function(){wx.openEnterpriseChat({userIds:t.join(";"),externalUserIds:e.join(";"),groupName:"群聊",success:function(t){s&&s(t)},fail:function(t){t.errMsg.indexOf("function not exist")>-1&&alert("版本过低请升级")}})}))}},{key:"getExternalContact",value:function(t){var e=this;this._init(["getCurExternalContact"]).then((function(){e._initAgent(["getCurExternalContact"]).then((function(e){wx.invoke("getCurExternalContact",{},(function(e){"getCurExternalContact:ok"==e.err_msg&&t&&t(e.userId)}))}))}))}},{key:"_init",value:function(t){var e=this;return new Promise((function(s,i){e._getConfig().then((function(e){wx.config({beta:!0,debug:!1,appId:e.corpId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:t}),wx.ready((function(){s(e)})),wx.error((function(t){i(t)}))}))["catch"]((function(t){}))}))}},{key:"_getConfig",value:function(){return new Promise((function(t,e){var s=navigator.userAgent,i=(s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),window.location.href.split("#")[0]),n={url:i,agentId:r["a"].state.etpAgentId,appId:r["a"].state.etpAppId,hbsy_web_tag_type:1};o["a"].post("/app/json/wechat_qy/signature",n).then((function(s){var i=s.data;0===i.status?t(i.data):e("获取签名信息失败!")}))["catch"]((function(t){e(t)}))}))}},{key:"_initAgent",value:function(t){var e=this;return new Promise((function(s,i){e._getAgentConfig().then((function(e){wx.agentConfig({corpid:e.corpId,agentid:e.agentId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:t,success:function(t){s(t)},fail:function(t){t.errMsg.indexOf("function not exist")>-1&&alert("版本过低请升级")},complete:function(t){}})}))["catch"]((function(t){}))}))}},{key:"_getAgentConfig",value:function(){return new Promise((function(t,e){var s=navigator.userAgent,i=(s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),window.location.href.split("#")[0]),n={url:i,agentId:r["a"].state.etpAgentId,appId:r["a"].state.etpAppId,hbsy_web_tag_type:1};o["a"].post("/app/json/wechat_qy/agentSignature",n).then((function(s){var i=s.data;0===i.status?t(i.data):e("获取签名信息失败!")}))["catch"]((function(t){e(t)}))}))}}]),t}();e["a"]=new u},"9f39":function(t,e,s){},c9ce:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("van-tabs",{staticClass:"reset-tabs",attrs:{ellipsis:!1,swipeable:"",color:"#517BB5","title-active-color":"#517BB5"},on:{change:t.changeTabs},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.tabList,(function(e,i){return s("van-tab",{key:i,attrs:{title:e.title,name:e.customerType}},[t.userList.length>0?s("ul",{staticClass:"user-list"},t._l(t.userList,(function(e,i){return s("li",{key:i,staticClass:"item"},[t.isSelecting?s("div",{staticClass:"check-c"},[s("van-checkbox",{attrs:{shape:"square","checked-color":"#73D659"},on:{click:function(s){return t.changeSel(e)}},model:{value:e.isChose,callback:function(s){t.$set(e,"isChose",s)},expression:"item.isChose"}})],1):t._e(),s("div",{staticClass:"avatar-c"},[s("img",{staticClass:"avatar",attrs:{src:e.avtUrl,alt:""}})]),s("div",{staticClass:"user-c",on:{click:function(s){return t.toUserDetail(e)}}},[s("p",{staticClass:"name"},[t._v(t._s(e.nickName)+t._s(e.remark?"/"+e.remark:""))]),s("p",{staticClass:"phone"},[t._v(t._s(e.userPhone))])]),s("van-icon",{staticClass:"icon-c",attrs:{name:"arrow"}})],1)})),0):s("p",{staticClass:"no-result"},[t._v("暂无数据~")])])})),1),s("van-button",{staticClass:"group-chat-btn",attrs:{type:"primary",color:"#517BB5",icon:t.isSelecting?"":"plus"},on:{click:t.changeListStatus}},[t._v(t._s(t.isSelecting?"取消":""))]),t.choseList.length>0?s("div",{staticClass:"statistics-area"},[s("div",{staticClass:"chose-c"},[s("ul",{staticClass:"chose-list"},t._l(t.choseList,(function(e,i){return s("li",{key:i,staticClass:"item",on:{click:function(s){return t.cancelSel(e)}}},[s("img",{staticClass:"avatar",attrs:{src:e.avtUrl,alt:""}})])})),0)]),s("div",{staticClass:"confirm-btn",on:{click:t.startGroupChat}},[t._v("确定("+t._s(t.choseList.length)+")")])]):t._e()],1)},n=[],a=s("2909"),c=(s("4160"),s("159b"),s("a434"),s("9939")),o={data:function(){return{activeTab:0,tabList:[{title:"全部用户",customerType:0},{title:"未注册会员",customerType:-1},{title:"油滴会员",customerType:2},{title:"活跃用户",customerType:4},{title:"非活跃用户",customerType:5}],userList:[],isSelecting:!1,choseList:[]}},mounted:function(){this.activeTab=this.$route.query.customerType,this.getCustomerList()},methods:{changeListStatus:function(){this.isSelecting?(this.isSelecting=!1,this.choseList=[],this.userList.forEach((function(t){t.isChose=!1}))):this.isSelecting=!0},changeSel:function(t){if(t.isChose)this.choseList.push(t);else{var e=void 0;this.choseList.forEach((function(s,i){s.id==t.id&&(e=i)})),this.choseList.splice(e,1)}},cancelSel:function(t){var e=void 0;this.choseList.forEach((function(s,i){s.id==t.id&&(e=i)})),this.choseList.splice(e,1),this.userList.forEach((function(e,s){e.id==t.id&&(e.isChose=!1)}))},getCustomerList:function(t){var e=this;this.$Loading.open(),this.userList=[],this.$http.post("/app/json/wechat_qy/queryCustomerList",{customerType:this.activeTab}).then((function(t){e.$Loading.close();var s,i=t.data;0==i.status?i.data instanceof Array&&i.data.length>0&&(e.choseList instanceof Array&&e.choseList.length>0?i.data.forEach((function(t){for(var s=0;s<e.choseList.length;s++){if(e.choseList[s].qyUserId==t.qyUserId){t.isChose=!0;break}t.isChose=!1}})):i.data.forEach((function(t){t.isChose=!1})),(s=e.userList).push.apply(s,Object(a["a"])(i.data))):e.$Toast(i.info)}))["catch"]((function(t){e.$Loading.close(),e.$Toast("queryCustomerList err ".concat(t))}))},changeTabs:function(){this.getCustomerList()},startGroupChat:function(){var t=[this.choseList[0].empQyUserId],e=[];this.choseList.forEach((function(t){e.push(t.qyUserId)})),c["a"].createEnterpriseChat(t,e,(function(t){}))},toUserDetail:function(t){this.$router.push({path:"/performance-per-info",query:{qyUserId:t.qyUserId}})}}},r=o,u=(s("2010"),s("0c7c")),h=Object(u["a"])(r,i,n,!1,null,"15e75d42",null);e["default"]=h.exports}}]);