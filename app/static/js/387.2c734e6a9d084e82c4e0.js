(window.webpackJsonp=window.webpackJsonp||[]).push([[387],{"J/3M":function(t,e,s){},cUg9:function(t,e,s){"use strict";var o=s("tPE1");s.n(o).a},cqFT:function(t,e,s){"use strict";s.r(e);var o={name:"ecoupon",props:["isShowTip","couponlist","otherData"],components:{},data:function(){return{tipStr:"所结算商品中没有该店铺的商品",receivedCoupon:[],canReceiveCoupon:[]}},methods:{selectClick:function(t){console.log(t),this.$emit("selectcoupon",t)},couponProducts:function(t){this.$emit("couponProducts",t)},getCouponEvent:function(t){var e=this;this.$Loading.open();var s={token:this.otherData.token,mktActivityId:t.mktActivityId,proCode:this.otherData.proCode,categoryCode:this.otherData.categoryCode,storeOuCode:this.otherData.storeOuCode};console.log(s),this.$http.post("/app/json/app_market/getCouScanUrl",s).then((function(s){e.$Loading.close();var o=s.data;0==o.status?t.isReceived=1:e.$Toast(o.info)}),(function(t){e.$Loading.close(),e.$Toast("请求数据失败！")}))}},created:function(){this.receivedCoupon=[],this.canReceiveCoupon=[];for(var t=0;t<this.couponlist.length;t++){var e=this.couponlist[t];0==e.isReceived?this.canReceiveCoupon.push(e):this.receivedCoupon.push(e)}}},i=(s("cUg9"),s("KHd+")),n={name:"couponlist",components:{Ecoupon:Object(i.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ecoupon"},[t.canReceiveCoupon.length>0?s("div",[s("div",{staticClass:"title theme_font_gray"},[t._v("可领取优惠券")]),t._v(" "),t._l(t.canReceiveCoupon,(function(e,o){return s("div",{staticClass:"eccell"},[s("div",{staticClass:"ecinfo shadow-cell"},[s("div",{staticClass:"left-info theme_font_white theme_bg_light_blue"},[40==e.couCategory?s("div",{staticClass:"left-con"},[e.couDiscountValue?s("P",{staticClass:"faceamt "},[t._v(t._s(1e3*e.couDiscountValue/100)+"折")]):s("P",{staticClass:"faceamt "},[t._v("折扣券")]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.couThresholdAmount>0,expression:"item.couThresholdAmount>0"}],staticClass:"limmony"},[t._v("满"+t._s(e.couThresholdAmount)+"元可用")])],1):s("div",{staticClass:"left-con"},[s("P",{staticClass:"faceamt "},[t._v("￥"),s("span",[t._v(t._s(e.couFaceValue))])]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.couThresholdAmount>0,expression:"item.couThresholdAmount>0"}],staticClass:"limmony"},[t._v("满"+t._s(e.couThresholdAmount)+"元可用")])],1)]),t._v(" "),s("div",{staticClass:"right-info"},[s("div",{staticClass:"right-con"},[s("div",{staticClass:"top-type"},[s("div",{staticClass:"top-con"},["100"==e.couOriginCode?s("p",{staticClass:"ectype-con theme_bg_light_blue theme_font_white"},[t._v("平台券")]):t._e(),t._v(" "),s("p",{staticClass:"title-con"},[t._v(t._s(e.couTypeTitle))])])]),t._v(" "),s("div",{staticClass:"date-con"},[s("div",{staticStyle:{flex:"1"}},[t._v(t._s(e.startDate)+"-"+t._s(e.endDate))]),t._v(" "),0==e.isReceived?s("div",{staticClass:"btn get-coupon theme_bg_light_blue theme_font_white",on:{click:function(s){return t.getCouponEvent(e)}}},[t._v("点击领取\n              ")]):t._e(),t._v(" "),1==e.isReceived?s("div",{staticClass:"btn to-product theme_font_light_blue",on:{click:function(s){return t.couponProducts(e)}}},[t._v("可用商品")]):t._e()])])])]),t._v(" "),t.isShowTip?s("div",{staticClass:"tip-con theme_font_gray"},[t._v(t._s(t.tipStr))]):t._e()])}))],2):t._e(),t._v(" "),t.receivedCoupon.length>0?s("div",[s("div",{staticClass:"title theme_font_gray"},[t._v("已领取优惠券")]),t._v(" "),t._l(t.receivedCoupon,(function(e,o){return s("div",{staticClass:"eccell"},[s("div",{staticClass:"ecinfo shadow-cell"},[s("div",{staticClass:"left-info theme_font_white theme_bg_light_blue"},[40==e.couCategory?s("div",{staticClass:"left-con"},[e.couDiscountValue?s("P",{staticClass:"faceamt "},[t._v(t._s(1e3*e.couDiscountValue/100)+"折")]):s("P",{staticClass:"faceamt "},[t._v("折扣券")]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.couThresholdAmount>0,expression:"item.couThresholdAmount>0"}],staticClass:"limmony"},[t._v("满"+t._s(e.couThresholdAmount)+"元可用")])],1):s("div",{staticClass:"left-con"},[s("P",{staticClass:"faceamt "},[t._v("￥"),s("span",[t._v(t._s(e.couFaceValue))])]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.couThresholdAmount>0,expression:"item.couThresholdAmount>0"}],staticClass:"limmony"},[t._v("满"+t._s(e.couThresholdAmount)+"元可用")])],1)]),t._v(" "),s("div",{staticClass:"right-info"},[s("div",{staticClass:"right-con"},[s("div",{staticClass:"top-type"},[s("div",{staticClass:"top-con"},["100"==e.couOriginCode?s("p",{staticClass:"ectype-con theme_bg_light_blue theme_font_white"},[t._v("平台券")]):t._e(),t._v(" "),s("p",{staticClass:"title-con"},[t._v(t._s(e.couTypeTitle))])])]),t._v(" "),s("div",{staticClass:"date-con"},[s("div",{staticStyle:{flex:"1"}},[t._v(t._s(e.startDate)+"-"+t._s(e.endDate))]),t._v(" "),0==e.isReceived?s("div",{staticClass:"btn get-coupon theme_bg_light_blue theme_font_white",on:{click:function(s){return t.getCouponEvent(e)}}},[t._v("点击领取\n              ")]):t._e(),t._v(" "),1==e.isReceived?s("div",{staticClass:"btn to-product theme_font_light_blue"},[t._v("可用商品")]):t._e()])])])]),t._v(" "),t.isShowTip?s("div",{staticClass:"tip-con theme_font_gray"},[t._v(t._s(t.tipStr))]):t._e()])}))],2):t._e()])}),[],!1,null,"4dcb2958",null).exports},data:function(){return{availablecount:"2",unavailablecout:"10",selectType:0,usablecouponlist:[{faceamt:"70",limmony:"1000",title:"仅可购买平台非油品商品平台非油品商品",startdate:"2018-10-01",enddate:"2018-10-31",ectype:"平台券"},{faceamt:"70",limmony:"1000",title:"仅可购买平台非油品商品",startdate:"2018-10-01",enddate:"2018-10-31",ectype:"平台券"},{faceamt:"70",limmony:"1000",title:"仅可购买平台非油品商品",startdate:"2018-10-01",enddate:"2018-10-31",ectype:"平台券"}],unusablecoupons:[{faceamt:"70",limmony:"1000",title:"仅可购买平台非油品商品",startdate:"2018-10-01",enddate:"2018-10-31",ectype:"平台券"},{faceamt:"100",limmony:"2000",title:"仅可购买平台非油品商品",startdate:"2018-10-01",enddate:"2018-10-31",ectype:"平台券"}]}},methods:{filterClick:function(t){console.log(t),"usable"==t?this.selectType=0:"unusable"==t&&(this.selectType=1)},chooseCoupon:function(t){console.log("choose")},_getCouponList:function(){var t=this;this.$Loading.open();var e={token:this.$store.state.login.token};console.log(e),this.$http.post("/app/json/user_address/searchSelfliftAddressList",e).then((function(e){t.$Loading.close();var s=e.data;console.log("电子券列表:",s),0==s.status?t.siteList=s.data:t.$Toast(s.info)}),(function(e){t.$Loading.close(),console.log("电子券",e),t.$Toast("获取电子券失败")}))},_getcount:function(){var t=this;this.$Loading.open();var e={token:this.$store.state.login.token};console.log(e),this.$http.post("/app/json/coupon/getcount",e).then((function(e){t.$Loading.close();var s=e.data;console.log("电子券列表:",s),0==s.status?t.siteList=s.data:t.$Toast(s.info)}),(function(e){t.$Loading.close(),console.log("电子券",e),t.$Toast("获取电子券失败")}))}},created:function(){}},a=(s("fLle"),Object(i.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"couponlist"},[s("nav-top",{on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),s("nav-content",[s("div",{staticClass:"condition"},[s("div",{staticClass:"btns-con"},[s("div",{staticClass:"left-btn",class:{theme_font_red:0==t.selectType},on:{click:function(e){return t.filterClick("usable")}}},[t._v("\n          可用"),s("span",{class:{"under-line":0==t.selectType}},[t._v("优惠券")]),s("span",{},[t._v("  ("+t._s(t.availablecount)+")")])]),t._v(" "),s("div",{staticClass:"right-btn",class:{theme_font_red:1==t.selectType},on:{click:function(e){return t.filterClick("unusable")}}},[t._v("\n          不可用"),s("span",{class:{"under-line":1==t.selectType}},[t._v("优惠券")]),s("span",{},[t._v("  ("+t._s(t.unavailablecout)+")")])])])]),t._v(" "),s("div",{staticClass:"scrol"},[s("ecoupon",{attrs:{isShowTip:0==t.selectType,couponlist:0==t.selectType?t.usablecouponlist:t.unusablecoupons},on:{selectcoupon:t.chooseCoupon}})],1)])],1)}),[],!1,null,"304b96e5",null));e.default=a.exports},fLle:function(t,e,s){"use strict";var o=s("J/3M");s.n(o).a},tPE1:function(t,e,s){}}]);