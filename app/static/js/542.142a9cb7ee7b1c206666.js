(window.webpackJsonp=window.webpackJsonp||[]).push([[542],{"3GpU":function(t,e,a){},CEw4:function(t,e,a){"use strict";e.a={methods:{exportinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/importUserInvoiceHead",t)},golddetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/detailsOfInvoiceInfo",t)},invoicetipData:function(t){return this.$http.post("/app/json/news/getNewsList",t)},refundData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceRushRed",t)},cardMoData:function(t){return this.$http.post("/app/json/card/getUserCardList",t)},mingxiData:function(t){return this.$http.post("/app/json/user_invoice_assistant/detailsOfInvoiceList",t)},malldetailData:function(t){return this.$http.post("/app/json/app_shopping_order/detail",t)},shopdetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/convenienceStoredetail",t)},oildetailData:function(t){return this.$http.post("/app/json/refuel_center/detail",t)},hisdetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceContentDetails",t)},hisData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceContentDetailsList",t)},mallData:function(t){return this.$http.post("/app/json/app_shopping_order/queryOrder",t)},storeData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryConvenienceStoreOrder",t)},appData:function(t){return this.$http.post("/app/json/refuel_center/queryOrder",t)},goldData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryCashIn",t)},walletData:function(t){return this.$http.post("/app/json/user_invoice_assistant/sinopecWalletInvoiceList",t)},cardData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserRefuelingCardInfoList",t)},commitselfinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/orderInvoicingInMall",t)},commitselfcardinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/gasCardInvoice",t)},commitselfgoldinvoiceData:function(t){return this.$http.post("/app/json/user_invoice_assistant/cashInInvoicing",t)},emailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/invoiceModifyMailbox",t)},histroydetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoiceDetails",t)},histroyData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoicedList",t)},riseData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserInvoiceHeadList",t)},openedData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoicedList",t)},commitData:function(t){return this.$http.post("/app/json/user_invoice_assistant/addOrUpdateUserInvoiceHead",t)},delData:function(t){return this.$http.post("/app/json/user_invoice_assistant/deleteUserInvoiceHead",t)},morenData:function(t){return this.$http.post("/app/json/user_invoice_assistant/setDefaultUserInvoiceHead",t)},detailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryInvoiceDetails",t)},souData:function(t){return this.$http.post("/app/json/user_invoice_assistant/searchInvoiceList",t)},soudetailData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserInvoiceHeadDetails",t)},tijiaoData:function(t){return this.$http.post("/app/json/user_invoice_assistant/addInvoicing",t)},saoData:function(t){return this.$http.post("/app/json/user_invoice_assistant/getResultFromQrcode",t)},morentitleData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryDefaultTittle",t)},daikaiData:function(t){return this.$http.post("/app/json/user_invoice_assistant/unInvoicingList",t)},chakanData:function(t){return this.$http.post("/app/json/user_invoice_assistant/queryUserInvoiceHeadDetails",t)}}}},cHSr:function(t,e,a){"use strict";a.r(e),a("5+UC");var s=a("05lO"),i=(a("2nGb"),a("W34l")),n=a("CEw4"),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r={name:"",mixins:[n.a],data:function(){return{result:[],list:[],radio:"",checked:!1,companyAddress:"",userEmail:"",orgTaxNo:"",idDetail:"",title:"",openView:!0,openingBank:"",userPhone:"",bankAccount:"",people:"",opentext:"展开",typeObj:{titleType:5},paramsPersonData:{titleType:4},paramsData:{titleType:5},open:"",dropDown:!1,detailObj:{},isText:[],titleId:"",type:"",userInvoiceHeadModels:[],userId:""}},created:function(){this.titleId=this.$route.query.id?this.$route.query.id:this.$route.params.userInvoiceHeadId,this.type=this.$route.query.type?this.$route.query.type:this.$route.params.type,this.userId=this.$store.state.userInfo.userId,console.log(this.userId),1==this.type?(this.typeObj.titleType=4,this.loadData()):this.typeObj.titleType=5,/Android/gi.test(navigator.userAgent)&&window.addEventListener("resize",(function(){"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName||window.setTimeout((function(){document.activeElement.scrollIntoViewIfNeeded()}),0)}))},mounted:function(){},methods:{exportInvoice:function(){var t=this;i.a.getWechatSignature((function(e){e?i.a.wxinvoice((function(e){var a=JSON.parse(e.choose_invoice_title_info)||{};console.log(o(a.type)),t.typeObj.titleType=Number(a.type),1==t.typeObj.titleType?(t.typeObj.titleType=4,t.paramsPersonData.titleType=4,t.paramsPersonData.title=a.title,t.paramsPersonData.orgTaxNo=a.taxNumber):0==t.typeObj.titleType&&(t.typeObj.titleType=5,t.paramsData.titleType=5,t.paramsData.title=a.title,t.paramsData.orgTaxNo=a.taxNumber,t.paramsData.companyAddress=a.companyAddress,t.paramsData.telephone=a.telephone,t.paramsData.openingBank=a.bankName,t.paramsData.bankAccount=a.bankAccount)})):console.log("签名失败")}))},loadData:function(){var t=this,e={token:this.$store.state.login.token,id:this.titleId};t.soudetailData(e).then((function(e){e.data.result&&(e.data.data.defaults=1==e.data.data.defaults,console.log(o(e.data.data.titleType)),t.typeObj.titleType=e.data.data.titleType,4==t.typeObj.titleType?t.paramsPersonData=e.data.data:5==t.typeObj.titleType&&(t.paramsData=e.data.data))}))},close:function(){this.dropDown=!1},monitor:function(t){console.log(t);var e=this,a={token:this.$store.state.login.token,title:t};e.souData(a).then((function(t){t.data.data.length>0?(e.isText=t.data.data,e.dropDown=!0):e.dropDown=!1})),t||(4==e.typeObj.titleType?e.paramsPersonData={}:5==e.typeObj.titleType&&(e.paramsData={}))},detailData:function(t){4==t.titleType?(this.typeObj.titleType=4,this.paramsData={},this.paramsPersonData=t):5==t.titleType&&(this.typeObj.titleType=5,this.paramsPersonData={},this.paramsData=t)},commit:function(){var t=this,e=this,a={token:this.$store.state.login.token};if(4==e.typeObj.titleType?(e.paramsPersonData.titleType=4,Object.assign(a,e.paramsPersonData)):5==e.typeObj.titleType&&(e.paramsData.titleType=5,Object.assign(a,e.paramsData)),a.defaults=a.defaults?1:0,a.title)if(5!=a.titleType||a.orgTaxNo)if(a.userEmail||a.userPhone)if(!a.userPhone||/^1(3|4|5|6|7|8|9)\d{9}$/.test(a.userPhone))if(!a.userEmail||/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a.userEmail)){if(5==a.titleType&&a.telephone&&!/^0\d{2,3}-\d{7,8}$/.test(a.telephone)&&!/^1(3|4|5|7|8|9)\d{9}$/.test(a.telephone))return void Object(s.a)({message:"请输入正确的电话号",duration:2e3});if("history"==this.$route.params.fromPage){var i=this;console.log(a),console.log(this.$route.params);var n=Object.assign({title:a.title,orgTaxNo:a.orgTaxNo,companyAddress:a.companyAddress,openingBank:a.openingBank,bankAccount:a.bankAccount,phone:a.userPhone,titleEmail:a.userEmail,mobile:a.telephone,titleType:a.titleType,token:this.$store.state.login.token},this.$route.params);delete n.type,delete n.fromPage,console.log(n),this.$Loading.open(),i.refundData(n).then((function(e){t.$Loading.close(),"success"===e.data.result?(i.userInvoiceHeadId={},s.a.success("退票成功"),i.loadData()):Object(s.a)(e.data.info)})),i.$router.go(-1)}else this.$Loading.open(),e.commitData(a).then((function(a){t.$Loading.close(),"success"===a.data.result?(s.a.success("保存成功"),"recharge"===t.$route.query.fromPage?0==e.type?e.$router.go(-1):e.$router.go(-2):0==e.type?e.$router.go(-1):e.$router.go(-3)):Object(s.a)(a.data.info)}))}else Object(s.a)({message:"请输入正确的邮箱",duration:2e3});else Object(s.a)({message:"请输入正确的手机号",duration:2e3});else Object(s.a)({message:"请输入邮箱或者手机号",duration:2e3});else Object(s.a)({message:"请输入税号",duration:2e3});else Object(s.a)({message:"请输入发票抬头",duration:2e3})},back:function(){console.log(this.type),this.$router.go(-1)}}},p=(a("e6jV"),a("KHd+")),l=Object(p.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body"},[a("nav-top",{attrs:{title:"发票抬头"},on:{backEvent:function(e){return t.$router.go(-1)}}}),t._v(" "),a("nav-content",[a("div",{attrs:{id:"apply"},on:{click:t.close}},[a("div",{staticClass:"publicInvoice"},[a("van-radio-group",{staticClass:"radioBtn",model:{value:t.typeObj.titleType,callback:function(e){t.$set(t.typeObj,"titleType",e)},expression:"typeObj.titleType"}},[a("div",{staticClass:"radioBtnDiv"},[a("van-radio",{attrs:{name:4,"checked-color":"#f44"}},[t._v("个人/非企业单位")]),t._v(" "),a("van-radio",{attrs:{name:5,"checked-color":"#f44"}},[t._v("企业")])],1)])],1),t._v(" "),4==t.typeObj.titleType?a("div",{staticClass:"publicInvoice"},[a("van-cell-group",{staticStyle:{position:"relative"}},[a("van-field",{staticClass:"paragraph",attrs:{label:"发票抬头",placeholder:"请输入发票抬头"},on:{input:t.monitor},model:{value:t.paramsPersonData.title,callback:function(e){t.$set(t.paramsPersonData,"title","string"==typeof e?e.trim():e)},expression:"paramsPersonData.title"}}),t._v(" "),a("div",{class:{divPut:1==t.dropDown,nothing:0==t.dropDown}},[a("div",{staticClass:"divPut1"}),t._v(" "),a("div",{staticClass:"divPut2"},[a("ul",t._l(t.isText,(function(e,s){return t.dropDown?a("li",{on:{click:function(a){return t.detailData(e)}}},[t._v(t._s(e.title))]):t._e()})),0)])])],1),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{label:"邮箱",placeholder:"输入邮箱"},model:{value:t.paramsPersonData.userEmail,callback:function(e){t.$set(t.paramsPersonData,"userEmail","string"==typeof e?e.trim():e)},expression:"paramsPersonData.userEmail"}}),t._v(" "),a("van-field",{attrs:{label:"手机号",placeholder:"输入手机号",type:"number"},model:{value:t.paramsPersonData.userPhone,callback:function(e){t.$set(t.paramsPersonData,"userPhone","string"==typeof e?e.trim():e)},expression:"paramsPersonData.userPhone"}})],1),t._v(" "),"history"!=this.$route.params.fromPage?a("van-cell-group",[a("div",{staticClass:"taiBtn"},[a("span",[t._v("设置默认抬头")]),t._v(" "),a("van-switch",{attrs:{"active-color":"#f44",size:"24px"},model:{value:t.paramsPersonData.defaults,callback:function(e){t.$set(t.paramsPersonData,"defaults",e)},expression:"paramsPersonData.defaults"}})],1)]):t._e()],1):t._e(),t._v(" "),5==t.typeObj.titleType?a("div",{staticClass:"publicInvoice"},[a("van-cell-group",{staticStyle:{position:"relative"}},[a("van-field",{staticClass:"paragraph",attrs:{label:"发票抬头",placeholder:"请输入发票抬头"},on:{input:t.monitor},model:{value:t.paramsData.title,callback:function(e){t.$set(t.paramsData,"title","string"==typeof e?e.trim():e)},expression:"paramsData.title"}}),t._v(" "),a("div",{class:{divPut:1==t.dropDown,nothing:0==t.dropDown}},[a("div",{staticClass:"divPut1"}),t._v(" "),a("div",{staticClass:"divPut2"},[a("ul",t._l(t.isText,(function(e,s){return t.dropDown?a("li",{on:{click:function(a){return t.detailData(e)}}},[t._v(t._s(e.title))]):t._e()})),0)])]),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{label:"税号",placeholder:"请输入税号"},model:{value:t.paramsData.orgTaxNo,callback:function(e){t.$set(t.paramsData,"orgTaxNo",e)},expression:"paramsData.orgTaxNo"}}),t._v(" "),a("van-field",{attrs:{label:"邮箱",placeholder:"输入邮箱"},model:{value:t.paramsData.userEmail,callback:function(e){t.$set(t.paramsData,"userEmail","string"==typeof e?e.trim():e)},expression:"paramsData.userEmail"}}),t._v(" "),a("van-field",{attrs:{label:"手机号",placeholder:"输入手机号",type:"tel"},model:{value:t.paramsData.userPhone,callback:function(e){t.$set(t.paramsData,"userPhone","string"==typeof e?e.trim():e)},expression:"paramsData.userPhone"}})],1)],1)],1):t._e(),t._v(" "),5==t.typeObj.titleType?a("div",{staticClass:"publicInvoice"},[a("van-cell-group",[a("div",{staticClass:"openBox"},[a("div",{staticClass:"openBox1"},[a("span",[t._v("更多信息")]),t._v(" "),a("span",[t._v("开户行和账号等（非必填）")])]),t._v(" "),a("div",{on:{click:function(e){t.openView=!t.openView}}},[a("span",{staticClass:"span"},[t._v(t._s(t.openView?"展开":"收起"))])])]),t._v(" "),t.openView?t._e():a("div",[a("van-field",{attrs:{label:"地址",placeholder:"请输入地址"},model:{value:t.paramsData.companyAddress,callback:function(e){t.$set(t.paramsData,"companyAddress",e)},expression:"paramsData.companyAddress"}}),t._v(" "),a("van-field",{attrs:{label:"电话"},model:{value:t.paramsData.telephone,callback:function(e){t.$set(t.paramsData,"telephone","string"==typeof e?e.trim():e)},expression:"paramsData.telephone"}}),t._v(" "),a("van-field",{attrs:{label:"开户行",placeholder:"请输入开户行"},model:{value:t.paramsData.openingBank,callback:function(e){t.$set(t.paramsData,"openingBank",e)},expression:"paramsData.openingBank"}}),t._v(" "),a("van-field",{attrs:{label:"账户",placeholder:"请输入账户"},model:{value:t.paramsData.bankAccount,callback:function(e){t.$set(t.paramsData,"bankAccount",e)},expression:"paramsData.bankAccount"}})],1)])],1):t._e(),t._v(" "),5==t.typeObj.titleType&&"history"!=this.$route.params.fromPage?a("div",{staticClass:"publicInvoice"},[a("van-cell-group",[a("div",{staticClass:"taiBtn"},[a("span",[t._v("设置默认抬头")]),t._v(" "),a("van-switch",{attrs:{"active-color":"#f44",size:"24px"},model:{value:t.paramsData.defaults,callback:function(e){t.$set(t.paramsData,"defaults",e)},expression:"paramsData.defaults"}})],1)])],1):t._e(),t._v(" "),2==t.$store.state.webtype?a("div",{staticClass:"publicInvoice",on:{click:t.exportInvoice}},[a("van-cell-group",[a("div",{staticClass:"taiBtn"},[a("span",[t._v("选择微信发票抬头")]),t._v(" "),a("span",{staticClass:"img iconfont mall-gengduojiantou"})])])],1):t._e(),t._v(" "),a("div",{staticClass:"answer theme_bg_red",on:{click:t.commit}},[t._v(t._s("history"!=this.$route.params.fromPage?"保存":"提交"))])])])],1)}),[],!1,null,"c78749e8",null);e.default=l.exports},e6jV:function(t,e,a){"use strict";var s=a("3GpU");a.n(s).a}}]);