(window.webpackJsonp=window.webpackJsonp||[]).push([[548],{"EmR+":function(t,a,e){"use strict";a.a={methods:{dealWithPrice:function(t){if(!(t=Number(t)))return[0,0,"0.00"];var a=(t=String(t.toFixed(2))).split(".")[1],e=t.split(".")[0];return[e,a,e+"."+a]}}}},RzSR:function(t,a,e){"use strict";e.r(a);var i=e("EmR+"),s=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},n={mixins:[i.a],components:{},data:function(){return{searchValue:"",activeTab:0,isLoading:!0,finished:!1,pageInfo:{page:0,rows:10},prodList:[]}},mounted:function(){this.$route.query.coupon?this.loadMore():this.$Toast("未传入券信息")},computed:{},methods:{searchHandler:function(){this.pageInfo={page:0,rows:10},this.prodList=[],this.isLoading=!0,this.finished=!1,this.loadMore()},clearSearch:function(){this.pageInfo={page:0,rows:10},this.prodList=[],this.isLoading=!0,this.finished=!1,this.searchValue="",this.loadMore()},loadMore:function(){var t=this;this.isLoading=!0,this.pageInfo.page++,this.$Loading.open();var a=s({deliverType:2,couTypeCode:this.$route.query.coupon},this.pageInfo);this.searchValue&&(a.proName=this.searchValue),0==this.activeTab?a.productType=5:(a.productType=550,a.spuSubType=550003),this.$http.post("/app/json/product/getAppProSearchList",a).then((function(a){var e,i=a.data;0==i.status?(t.isLoading=!1,t.$Loading.close(),i.data.list instanceof Array&&i.data.list.length>0?((e=t.prodList).push.apply(e,function(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return Array.from(t)}(i.data.list)),t.prodList.length>=i.data.page.count&&(t.finished=!0)):(t.$Toast(i.info),t.finished=!0)):(t.finished=!0,t.$Toast(i.info),t.$Loading.close())})).catch((function(a){t.finished=!0,t.$Toast("getAppProSearchList err "+a),t.$Loading.close()}))},changeTab:function(t,a){this.pageInfo={page:0,rows:10},this.prodList=[],this.isLoading=!0,this.finished=!1,this.searchValue="",this.loadMore()},prodClick:function(t){this.$router.push({path:"/service_detail",query:{skuId:t.skuId,price:t.couFaceValue,salePrice:t.salePrice,entryType:this.activeTab}})}}},r=(e("tn3p"),e("KHd+")),o=Object(r.a)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav-top",{on:{backEvent:function(a){return t.$router.go(-1)}}}),t._v(" "),e("nav-content",{staticClass:"container"},[e("div",{staticClass:"top-info"},[e("div",{staticClass:"exchange-container"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"enter-input",attrs:{type:"text",placeholder:"搜你想要的商品"},domProps:{value:t.searchValue},on:{input:function(a){a.target.composing||(t.searchValue=a.target.value)}}}),t._v(" "),t.searchValue?e("van-icon",{staticClass:"clear-btn",attrs:{name:"clear"},on:{click:t.clearSearch}}):t._e(),t._v(" "),e("van-button",{staticClass:"exchange-btn",attrs:{type:"primary",color:"linear-gradient(270deg,rgba(49,49,49,1) 0%,rgba(84,84,84,1) 51%,rgba(49,49,49,1) 100%)"},on:{click:t.searchHandler}},[t._v("搜索")])],1),t._v(" "),e("van-tabs",{staticClass:"reset-tab",attrs:{border:!1,"line-width":46,"line-height":2,color:"#E0C28A","title-active-color":"#E0C28A"},on:{change:t.changeTab},model:{value:t.activeTab,callback:function(a){t.activeTab=a},expression:"activeTab"}},[e("van-tab",{attrs:{title:"服务券"}}),t._v(" "),e("van-tab",{attrs:{title:"会员卡"}})],1)],1),t._v(" "),e("van-list",{staticClass:"prod-list",attrs:{finished:t.finished,"finished-text":"没有更多了",offset:200},on:{load:t.loadMore},model:{value:t.isLoading,callback:function(a){t.isLoading=a},expression:"isLoading"}},[e("div",{staticClass:"prod-c"},t._l(t.prodList,(function(a,i){return e("div",{key:i,staticClass:"item",on:{click:function(e){return t.prodClick(a)}}},[e("div",{staticClass:"top-img",style:{"background-image":"url("+a.phMainUrl+")"}}),t._v(" "),e("div",{staticClass:"btm-prod"},[e("p",{staticClass:"prod-name"},[t._v(t._s(a.skuName))]),t._v(" "),e("div",{staticClass:"price-c"},[e("span",{staticClass:"current-price"},[t._v("￥"+t._s(t.dealWithPrice(a.activityPrice)[2]))]),t._v(" "),e("span",{staticClass:"old-price"},[t._v("￥"+t._s(t.dealWithPrice(a.couFaceValue)[2]))])])])])})),0)])],1)],1)}),[],!1,null,"3abfc40c",null);a.default=o.exports},tn3p:function(t,a,e){"use strict";var i=e("zwW7");e.n(i).a},zwW7:function(t,a,e){}}]);