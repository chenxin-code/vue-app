(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6771"],{7354:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div")},a=[],i=(o("9911"),o("ac1f"),o("5319"),o("c975"),o("1276"),{data:function(){return{cusToken:"",type:"",link:{}}},mounted:function(){this.type=this.$route.query.type||"",this.link=this.$route.query.link?JSON.parse(decodeURIComponent(this.$route.query.link)):{},4==this.type&&(this.link={type:"2",url:"/common"}),this.$route.query.token?this.getUserToken():this.getRedUrl()},methods:{getUserToken:function(){var t=this;this.$http.post("/app/json/login/palmtopUserAutoLogin",{code:this.$route.query.token}).then((function(e){var o=e.data;0==o.status?(t.cusToken=o.data.token||"",t.$store.state.userInfo=o.data,t.$store.state.login.bindCardState=o.data.bindCardState,t.$store.state.login.phone=o.data.phone,t.$store.state.login.token=o.data.token,t.$bridgefunc.vuexStorage((function(){"3"==t.type||"4"==t.type?t.redirectToPage():t.getRedUrl()}),!0)):t.$Toast(o.info)}))["catch"]((function(e){t.$Toast("palmtopUserAutoLogin err ".concat(e))}))},getUserInfo:function(t){var e=this;this.$Loading.open();var o="/app/json/user/getUserInfo",n={token:this.cusToken,hbsy_web_tag_type:"0"};this.$http.post(o,n).then((function(o){e.$Loading.close();var n=o.data;0==n.status?(n.data.token=e.cusToken,e.$store.state.userInfo=n.data,e.$store.state.login.bindCardState=n.data.bindCardState,e.$store.state.login.phone=n.data.phone,e.$store.state.login.token=e.cusToken,"3"==e.type||"4"==e.type?e.$bridgefunc.vuexStorage((function(){e.link.isztRedirect=!0,e.$market.enterNav({link:e.link})}),!0):(t+="&phone="+e.$store.state.userInfo.phone+"&userId="+e.$store.state.userInfo.userId,window.location.replace(t))):e.$Toast(n.info)}),(function(t){e.$Loading.close(),e.$Toast("请求数据失败！")}))},redirectToPage:function(t){"3"==this.type||"4"==this.type?(this.link.isztRedirect=!0,this.$market.enterNav({link:this.link})):(t+="&phone="+this.$store.state.userInfo.phone+"&userId="+this.$store.state.userInfo.userId,window.location.replace(t))},getRedUrl:function(){var t=this;this.$http.post("/app/json/app_vue_page/getRedirectUrl",{channelUrl:"link-configuration",funcCode:this.$route.query.funcCode}).then((function(e){var o=e.data;if(0==o.status){if(o.data)if(o.data.indexOf("hasPgCodeType")>-1)t.$util.isZTAPP()&&""==t.type?window.location.replace(window.location.origin+"/app-vue/app/index.html#/blockindex?pgCode="+o.data.split("=")[1]+"&token="+t.cusToken):window.location.replace(window.location.origin+"/app-vue/app/index.html#/common?pgCode="+o.data.split("=")[1]+"&token="+t.cusToken);else if(o.data.indexOf("http")>-1)window.location.replace(o.data);else if(o.data.indexOf("/app-vue/game/index.html")>-1){var n=window.location.origin+o.data+"&token="+t.cusToken;t.redirectToPage(n)}else t.$router.replace({path:o.data,query:{token:t.cusToken}})}else t.$Toast(o.info)}))["catch"]((function(e){t.$Toast("getRedirectUrl err ".concat(e))}))}}}),s=i,r=o("0c7c"),c=Object(r["a"])(s,n,a,!1,null,"cd3cfc92",null);e["default"]=c.exports}}]);