(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2aedc14e"],{"0e93":function(t,o,e){},"3e7a":function(t,o,e){"use strict";e("0e93")},da3f:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"my-coupon mall2"},[e("nav-top",{on:{backEvent:function(o){return t.$router.go(-1)}}}),e("nav-content",[e("div",{staticClass:"tabs"},t._l(t.tabs,(function(o){return e("div",{staticClass:"tab-item",on:{click:function(e){return t.tabEvent(o.tag)}}},[e("div",{staticClass:"text theme_font_black",class:{"selected-btn":t.tabSelected==o.tag}},[t._v(" "+t._s(o.text)+" ")])])})),0),e("div",{staticClass:"scroll-div theme_bg_ml_red"},[t.isShowTipView?t._e():e("coupon-list",{attrs:{coupons:t.couponList,listType:t.couponType},on:{getCouponEvent:t.getCouponEvent,couponProducts:t.couponProducts,itemEvent:t.itemEvent}}),t.isShowTipView?e("div",{staticClass:"tipbg"},[e("div",{staticClass:"tipcont"},[e("i",{staticClass:"iconfont mall-youhuiquan-xianxing theme_font_tint"}),e("div",{staticClass:"tiptitle theme_font_gray"},[t._v("没有券？"),e("br"),e("span",{staticClass:"theme_font_tint"},[t._v("去领券中心看看吧")])]),e("div",{staticClass:"look theme_font_gray theme_border_light_i",on:{click:t.moreCoupon}},[t._v("去看看")])])]):t._e()],1)])],1)},i=[],s=(e("e25e"),e("ee0c")),c={name:"my-coupon",components:{CouponList:s["a"]},data:function(){return{tabSelected:"1",tabs:[{text:"未使用",tag:"1",count:0},{text:"使用记录",tag:"2",count:0},{text:"已过期",tag:"3",count:0}],couponList:[],selectedItem:{},isShowTipView:!0,couponType:3}},methods:{tabEvent:function(t){t!=this.tabSelected&&this._getCouponList(t),1==t?this.couponType=3:2==t?this.couponType=4:3==t&&(this.couponType=5),this.tabSelected=t},moreCoupon:function(){},couponCenter:function(){},_getCouponList:function(t){var o,e=this;this.$Loading.open(),"1"==t?o="/app/json/coupon/unusedcoupons":"2"==t?o="/app/json/coupon/usedcoupons":"3"==t&&(o="/app/json/coupon/overduecoupons");var n={token:this.$store.state.login.token};this.$http.post(o,n).then((function(t){e.$Loading.close();var o=t.data;0==o.status?o.data.length?(e.isShowTipView=!1,e.dealwithData(o.data)):e.isShowTipView=!0:e.$Toast(o.info)}),(function(t){e.$Loading.close(),e.$Toast("获取电子券失败！")}))},dealwithData:function(t){var o=[];for(var e in t){var n=t[e],i={consumptionDesc:"",couAmount:"",couCategory:"",couDesc:""};i.couFaceValue=parseInt(n.facevalue),i.couNeedActive="",i.couNo=n.coucode,i.couOriginCode="",i.couOriginType="",i.consumptionDesc=n.consumptionDesc,i.couPic=n.imgurl,i.couThresholdAmount=n.couThresholdAmount,i.couTypeAlias="",i.couTypeCode=n.biztype,i.couTypeCodeThird="",i.couTypeSubTitle=n.typename,i.couTypeTitle=n.typetitle,i.isReceived="",i.mktActivityId="",i.validEndDate=n.couenddate.substr(0,10),i.validStartDate=n.coustartdate.substr(0,10),o.push(i)}this.couponList=o},getCouponEvent:function(t){},couponProducts:function(){},itemEvent:function(t){this.selectedItem=t},_getCouponCount:function(){var t=this,o="/app/json/coupon/getcount",e={token:this.$store.state.login.token};this.$http.post(o,e).then((function(o){var e=o.data;0==e.status?(t.tabs[0].count=e.usednum?e.usednum:0,t.tabs[1].count=e.unnusednum?e.unnusednum:0,t.tabs[2].count=e.expnum?e.expnum:0):t.$Toast(e.info)}),(function(t){}))}},created:function(){this._getCouponList(this.tabSelected),this._getCouponCount()},beforeRouteLeave:function(t,o,e){this.$keepaliveHelper.deleteCache(this),e()}},u=c,a=(e("3e7a"),e("0c7c")),p=Object(a["a"])(u,n,i,!1,null,"49384cfd",null);o["default"]=p.exports}}]);