(window.webpackJsonp=window.webpackJsonp||[]).push([[280,61],{"22sX":function(e,t,s){"use strict";var i=s("oYWQ");s.n(i).a},EEED:function(e,t,s){e.exports=s.p+"static/img/banner@2x.dce45b3.jpg"},"EdR+":function(e,t,s){},PIwE:function(e,t,s){"use strict";s.r(t);var i={data:function(){return{checkedNewCar:!1,showMyCar:!1,showSelect:!1,radio:"1",carList:[],initData:{title:"请选择地区"},region:[],selectedItems:[],regionText:"",skuId:"",detailData:{},carNumber:"",isNewCarNotLicense:0,carOwnerName:"",carOwnerPhone:"",engineNo:"",referCode:"",province:"",showCarPop:!1,downloadTips:!1}},mounted:function(){this.province=this.$store.state.globalConfig.peace_vehicle_province},methods:{changeCar:function(e){this.showCarPop=!1,e&&(this.carNumber=e.plateNum,this.carOwnerName=e.ownerName,this.carOwnerPhone=e.phone,this.engineNo=e.engineNum)},carInput:function(){this.regionText||(this.carNumber="",this.$Toast("请选择车辆地址")),this.carNumber&&this.getValidVehicleListByUserId(this.carNumber)},checkedMyCarClick:function(){0==this.checkedMyCar&&(this.carNumber="",this.carOwnerName="",this.carOwnerPhone="",this.engineNo="")},changeMyCar:function(){this.regionText?this.getValidVehicleListByUserId():this.$Toast("请选择车辆地址")},getValidVehicleListByUserId:function(e){var t=this;this.$request.post("/app/json/car_insure/getValidVehicleListByUserId",{licenseNo:e}).then((function(e){0===e.status?(t.showCarPop=!0,t.carList=e.data):t.$Toast(e.info)}))},savePeaceInfo:function(){var e=this;this.regionText?0!=this.checkedNewCar||this.carNumber?this.carOwnerName?/^(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])\d{8}$/.test(this.carOwnerPhone)?(0==this.checkedNewCar?this.isNewCarNotLicense=0:(this.isNewCarNotLicense=1,this.carNumber=""),this.$request.post("/app/json/car_insure/savePeaceInfo",{areaId:this.$store.state.mall2.selectAddress.provinceId,isNewCarNotLicense:this.isNewCarNotLicense,licenseNo:this.carNumber,carOwnerName:this.carOwnerName,carOwnerPhone:this.carOwnerPhone,engineNo:this.engineNo,referCode:this.referCode}).then((function(t){0===t.status?e.$bridgefunc.customPush({path:t.data,isnativetop:1,query:{}}):e.$Toast(t.info)}))):(this.carOwnerPhone="",this.$Toast("请输入有效手机号！")):this.$Toast("请输入车主姓名"):this.$Toast("请输入车牌号"):this.$Toast("请选择车辆地址")},selectedItemsEvent:function(e){var t=e.item;if(this.selectedItems=e.selecteds,4==this.selectedItems.length)return this.showSelect=!1,this.region=this.selectedItems,void this.getRegionText();t.level<=2&&this._getRegionData(t.id,t.level)},getRegionText:function(){for(var e="",t={provinceId:"",provinceName:"",cityId:"",cityName:"",countryId:"",countryName:"",townId:"",townName:"",id:"-1"},s=0;s<this.region.length;s++){var i=this.region[s];e+=i.name,0==s?(t.provinceId=i.id,t.provinceName=i.name):1==s?(t.cityId=i.id,t.cityName=i.name):2==s?(t.countryId=i.id,t.countryName=i.name):3==s&&(t.townId=i.id,t.townName=i.name)}t.addressFull=t.provinceName+t.cityName+t.countryName+t.townName,this.$store.state.mall2.selectAddress=t,this.$bridgefunc.vuexStorage(),this.regionText=e,this.$refs.regionselect.reset(null)},_getRegionData:function(e,t){var s=this;this.$Loading.open();var i={token:this.$store.state.login.token,parentId:e};this.$http.post("/app/json/area/loadAreaList",i).then((function(e){s.$Loading.close();var i=e.data;if(0==i.status){var a=i.data;if(2==t)return s.showSelect=!1,s.region=s.selectedItems,void s.getRegionText();a.length>0?s.$nextTick((function(){this.$refs.regionselect.pushCustomOptions(a)})):(s.showSelect=!1,s.region=s.selectedItems,s.getRegionText())}else s.$Toast(i.info)}),(function(e){s.$Loading.close(),s.$Toast("获取数据失败")}))},regionCloseEvent:function(){this.showSelect=!1},changeAddress:function(){this.showSelect=!0;var e=this.$store.state.globalConfig.peace_vehicle_address;e?this._getRegionData(e):this._getRegionData(0)}},components:{RegionSelect:s("hDEW").default}},a=(s("Ta8L"),s("KHd+")),n=Object(a.a)(i,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vehicle-insurance"},[i("nav-top",{attrs:{title:"车辆保险"},on:{backEvent:function(t){return e.$router.go(-1)}}}),e._v(" "),i("nav-content",{staticClass:"vehicle-insurance-container"},[i("div",{staticClass:"title-img"},[i("img",{attrs:{src:s("EEED"),alt:""}})]),e._v(" "),i("div",{staticClass:"car-info-inp"},[i("div",{staticClass:"table-view"},[i("div",{staticClass:"table-view-cell set-height",on:{click:e.changeAddress}},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[e._v("车辆地址")])]),e._v(" "),i("div",{staticClass:"table-view-cell-arrow special"},[e._v("\n              "+e._s(e.province)),i("input",{directives:[{name:"model",rawName:"v-model",value:e.regionText,expression:"regionText"}],attrs:{type:"text",disabled:"",placeholder:"请选择市"},domProps:{value:e.regionText},on:{input:function(t){t.target.composing||(e.regionText=t.target.value)}}})])]),e._v(" "),i("div",{staticClass:"table-view-cell set-height"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[e._v("新车未上牌")]),e._v(" "),i("div",{staticClass:"right"},[i("van-switch",{attrs:{size:"18px","active-color":"#F80F16","inactive-color":"#ddd"},model:{value:e.checkedNewCar,callback:function(t){e.checkedNewCar=t},expression:"checkedNewCar"}})],1)])]),e._v(" "),i("div",{staticClass:"table-view-cell set-height"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[e._v("车牌号")]),e._v(" "),i("div",{staticClass:"right car-num"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.carNumber,expression:"carNumber"}],staticClass:"car-input",attrs:{type:"text",disabled:1==e.checkedNewCar,placeholder:"请输入车牌"},domProps:{value:e.carNumber},on:{input:[function(t){t.target.composing||(e.carNumber=t.target.value)},e.carInput]}})])])]),e._v(" "),e.showCarPop?i("div",{staticClass:"change-car-pop"},e._l(e.carList,(function(t,s){return i("div",{key:s,staticClass:"car",on:{click:function(s){return e.changeCar(t)}}},[e._v(e._s(t.plateNum))])})),0):e._e(),e._v(" "),i("div",{staticClass:"table-view-cell set-height"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[e._v("车主姓名")]),e._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.carOwnerName,expression:"carOwnerName"}],attrs:{type:"text",placeholder:"请输入车主姓名"},domProps:{value:e.carOwnerName},on:{input:function(t){t.target.composing||(e.carOwnerName=t.target.value)}}})])])]),e._v(" "),i("div",{staticClass:"table-view-cell set-height"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[e._v("车主手机号")]),e._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.carOwnerPhone,expression:"carOwnerPhone"}],attrs:{maxlength:"11",type:"tel",onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode)))",placeholder:"请输入11位手机号码",autosize:"",pattern:"[0-9]*"},domProps:{value:e.carOwnerPhone},on:{input:[function(t){t.target.composing||(e.carOwnerPhone=t.target.value)},function(t){/^\d+/.exec(e.carOwnerPhone)&&/^\d+/.exec(e.carOwnerPhone)[0]}]}})])])]),e._v(" "),i("div",{staticClass:"table-view-cell set-height"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[e._v("发动机号")]),e._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.engineNo,expression:"engineNo"}],attrs:{type:"text",placeholder:"非必填"},domProps:{value:e.engineNo},on:{input:function(t){t.target.composing||(e.engineNo=t.target.value)}}})])])]),e._v(" "),i("div",{staticClass:"table-view-cell set-height"},[i("div",{staticClass:"table-view-cell-text"},[i("div",{staticClass:"left"},[e._v("员工推荐码")]),e._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.referCode,expression:"referCode"}],attrs:{type:"text",placeholder:"非必填"},domProps:{value:e.referCode},on:{input:function(t){t.target.composing||(e.referCode=t.target.value)}}})])])])])]),e._v(" "),i("div",{staticClass:"insyrance-tips"},[i("span",{staticClass:"icon"},[e._v("* ")]),e._v("您的信息将被严格保密\n      ")]),e._v(" "),i("div",{staticClass:"re-btn",on:{click:e.savePeaceInfo}},[e._v("前往报价")]),e._v(" "),i("van-dialog",{attrs:{confirmButtonText:"取消",title:"提示"},on:{confirm:function(t){e.downloadTips=!1}},model:{value:e.downloadTips,callback:function(t){e.downloadTips=t},expression:"downloadTips"}},[i("div",{staticClass:"download-tips"},[e._v("该车主手机号未注册加油湖北APP, 无法进行投保")])]),e._v(" "),e.showSelect?i("RegionSelect",{ref:"regionselect",attrs:{initData:e.initData},on:{selectedItemsEvent:e.selectedItemsEvent,closeEvent:e.regionCloseEvent}}):e._e()],1)],1)}),[],!1,null,"3ec87f22",null);t.default=n.exports},Ta8L:function(e,t,s){"use strict";var i=s("EdR+");s.n(i).a},hDEW:function(e,t,s){"use strict";s.r(t);var i={name:"",props:{initData:{type:Object,default:{}}},data:function(){return{popShow:!1,selectedIndexs:[],selectedItems:[],dataCache:[],cusOptions:[],cusIndex:0,initAreas:[],myTimeout:null}},methods:{close:function(){var e=this;this.popShow=!1,this.myTimeout&&(clearTimeout(this.myTimeout),this.myTimeout=null),this.myTimeout=setTimeout((function(){e.$emit("closeEvent","")}),240)},reSelect:function(e){if(1!=this.initData.canNotReselect){var t=this.selectedItems.length-e;console.log(t),this.selectedItems.splice(e,t),this.selectedIndexs.splice(e,t);var s=this.dataCache[e];this.dataCache.splice(e+1,t),this.cusOptions=s}},selectOption:function(e,t){this.cusIndex=t,this.selectedItems.push(e),this.selectedIndexs.push(t),this.cusOptions=[];var s={item:e,selecteds:this.selectedItems};this.$emit("selectedItemsEvent",s)},pushCustomOptions:function(e){if(0==this.selectedIndexs.length&&(this.selectedIndexs=[],this.selectedItems=[],this.dataCache=[],this.cusIndex=0),this.dataCache.push(e),this.cusOptions=e,this.initAreas&&this.initAreas.length>0){for(var t=this.initAreas.shift(),s=!1,i=0;i<e.length;i++){var a=e[i];if(this.$util.areaEqual(t,a.name)){s=!0,this.selectOption(a,i);break}}0==s&&(this.initAreas=[])}},reset:function(e){this.selectedIndexs=[],this.selectedItems=[],this.cusIndex=0,e?(this.dataCache=[],this.dataCache.push(e),this.cusOptions=e):(this.cusOptions=this.dataCache[0],this.dataCache=[],this.dataCache.push(this.cusOptions))}},created:function(){try{this.initAreas=JSON.parse(JSON.stringify(this.initData.initAreas))}catch(e){this.initAreas=[]}},mounted:function(){this.popShow=!0}},a=(s("22sX"),s("KHd+")),n=Object(a.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"region-select"},[s("div",{staticClass:"other-div",on:{click:e.close}}),e._v(" "),s("transition",{attrs:{name:"pop_transiton"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.popShow,expression:"popShow"}],staticClass:"select-content"},[s("div",{staticClass:"close-btn",on:{click:e.close}},[s("img",{attrs:{src:"static/image/mall/close.png"}})]),e._v(" "),s("div",{staticClass:"font-medium-l-x title"},[e._v(e._s(e.initData.title?e.initData.title:"请选择区域"))]),e._v(" "),s("div",{staticClass:"selected-item font-medium"},[e._l(e.selectedItems,(function(t,i){return s("div",{staticClass:"item-div",on:{click:function(t){return e.reSelect(i)}}},[s("div",{staticClass:"item-text"},[e._v(e._s(t.name))])])})),e._v(" "),e.cusOptions.length>0?s("div",{staticClass:"item-div"},[s("div",{staticClass:"item-text item-selected theme_font_red"},[e._v("请选择")])]):e._e()],2),e._v(" "),s("div",{staticClass:"options-div"},e._l(e.cusOptions,(function(t,i){return s("div",{staticClass:"option",on:{click:function(s){return e.selectOption(t,i)}}},[e._v(e._s(t.name))])})),0)])])],1)}),[],!1,null,"60a4d13e",null);t.default=n.exports},oYWQ:function(e,t,s){}}]);