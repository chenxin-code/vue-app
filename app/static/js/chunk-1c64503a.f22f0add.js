(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c64503a","chunk-a8f2ea64"],{"2dd5":function(t,e,s){"use strict";var i,a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"group"},[0!=t.currentIndex&&t.type?t._e():s("div",{staticClass:"time-show"},[s("div",{staticClass:"left"},[t._v("参团倒计时")]),s("div",{staticClass:"right"},[t._v(" 还剩："),s("countdown",{attrs:{endTime:t.$util.getDateFromString(t.details.endTime),type:"theme_bg_black"}})],1)]),s("div",{staticClass:"group-details"},[s("div",{staticClass:"img-text"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.details.image,alt:""}})]),s("div",{staticClass:"text"},[s("div",{staticClass:"name"},[t._v(t._s(t.details.assembleName))]),s("div",{staticClass:"tips"},[1==t.type?s("div",{staticClass:"left"},[0==t.currentIndex?s("span",[t._v("拼团中("+t._s(1==t.details.assembleState?"未成团":"已成团")+")")]):t._e(),1==t.currentIndex?s("span",[t._v("拼团成功("+t._s(t.state)+")")]):t._e(),2==t.currentIndex?s("span",[t._v("拼团失败")]):t._e()]):s("div",{staticClass:"left"},[t._v("拼团中("+t._s(1==t.details.assembleState?"未成团":"已成团")+")")]),1==t.currentIndex?s("div",{staticClass:"btn",on:{click:t.openDetails}},[t._v("查看详情")]):t._e()])])]),s("div",{staticClass:"details"},[1!=t.currentIndex?s("div",{staticClass:"main"},[s("div",{staticClass:"info"},[s("div",{staticClass:"progress",class:{active:2==t.currentIndex}},[s("van-progress",{attrs:{percentage:t.calculateProgress(),color:t.details.joinNumber<t.details.groupNumber?"#F80F16":"#009800","show-pivot":t.showPivot}})],1),t.details.joinNumber<t.details.groupNumber?s("div",{staticClass:"tips"},[t._v("当前参团人数为"),s("span",{staticClass:"num"},[t._v(t._s(t.details.joinNumber))]),t._v("人，再有"),s("span",{staticClass:"num"},[t._v(t._s((t.details.groupNumber-t.details.joinNumber).toFixed(0)))]),t._v("人参加才可拼团成功")]):s("div",{staticClass:"tips"},[t._v("当前参团人数为"),s("span",{staticClass:"num"},[t._v(t._s(t.details.joinNumber))]),t._v("人，只剩"),s("span",{staticClass:"num"},[t._v(t._s((t.details.groupUpLimit-t.details.joinNumber).toFixed(0)>0?(t.details.groupUpLimit-t.details.joinNumber).toFixed(0):0))]),t._v("个参团名额")])]),2!=t.currentIndex?s("div",{staticClass:"btn",class:{active:t.details.joinNumber==t.details.groupUpLimit},on:{click:t.oilGroupBtn}},[t._v(t._s(1==t.type?"邀请好友":"点击参团"))]):t._e()]):t._e(),1==t.currentIndex?s("div",{staticClass:"special"},[s("div",{staticClass:"oil"},[s("div",{staticClass:"title"},[t._v("已返利油点")]),s("div",{staticClass:"oil-info num"},[t._v(t._s(t.details.oilPointNumber||0))])]),s("div",{staticClass:"oil"},[s("div",{staticClass:"title"},[t._v("返利活动开始时间")]),s("div",{staticClass:"oil-info"},[t._v(t._s(t.details.rebateStartTime))])]),s("div",{staticClass:"oil"},[s("div",{staticClass:"title"},[t._v("返利活动结束时间")]),s("div",{staticClass:"oil-info"},[t._v(t._s(t.details.rebateEndTime))])])]):t._e()]),s("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[s("van-collapse-item",{attrs:{title:"参团优惠规则"}},[s("div",{domProps:{innerHTML:t._s(t.details.activityDesc)}})])],1)],1)])},n=[],r=s("ade3"),c=(s("1075"),s("f600")),l=(s("e25e"),s("0d03"),s("ac1f"),s("5319"),s("99af"),s("b0c0"),s("da71")),d=s("69f4"),o={data:function(){return{showPivot:!1,activeNames:[],state:""}},props:{type:"",currentIndex:"",details:{}},mounted:function(){this.details&&(this.state=this.dealState())},methods:{calculateProgress:function(){if(this.details.groupUpLimit){var t=this.details.joinNumber/this.details.groupUpLimit*100;return parseInt(t)>100?100:parseInt(t)||0}},dealState:function(){if(this.details){var t=new Date,e=new Date(this.details.rebateStartTime.replace(/-/g,"/")),s=new Date(this.details.rebateEndTime.replace(/-/g,"/"));return t<e?"未开始":t<=s?"进行中":t>s?"已结束":"--"}},addAssembleUser:function(){var t=this;this.$request.post("/app/json/app_assemble_activity/addAssembleUser",{assembleId:this.details.id}).then((function(e){0==e.status?(t.$toast("参团成功"),t.$emit("updateData")):t.$Toast(e.info?e.info:"参团失败")}))},shareBtn:function(){var t={title:this.details.assembleName,sharetext:this.details.activityDesc,imageurl:this.details.image,detailurl:"".concat(this.$store.state.globalConfig.wxBaseUrl).concat(l["a"].shareUrl,"/oil-group-share?id=").concat(this.details.groupActivityId)};this.$bridgefunc.wechatShare(t)},oilGroupBtn:function(){this.details.joinNumber==this.details.groupUpLimit?this.$Toast("该活动已达到最大上限人数"):1==this.type?this.shareBtn():this.addAssembleUser()},openDetails:function(){this.$router.push({path:"/oil-group-details",query:{id:this.details.id}})}},components:(i={},Object(r["a"])(i,c["a"].name,c["a"]),Object(r["a"])(i,"countdown",d["default"]),i)},u=o,v=(s("ac73"),s("0c7c")),m=Object(v["a"])(u,a,n,!1,null,"7d592978",null);e["a"]=m.exports},"333a":function(t,e,s){},"3e7e":function(t,e,s){},"69f4":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"countdown",class:{quan:"theme_bg_quan"==t.type}},[0==t.d||t.hiddenDay?t._e():s("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.d))]),0==t.d||t.hiddenDay?t._e():s("span",[t._v("天")]),s("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.h))]),t._v(" : "),s("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.m))]),t._v(" : "),s("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.s))])])},a=[],n=(s("4795"),s("e25e"),s("9d5d")),r={name:"countdown",props:["endTime","type","hiddenDay","callback"],components:{},data:function(){return{d:"0",h:"00",m:"00",s:"00",trigger:!0}},methods:{parsingTime:function(){var t=this;if(this.endTime){var e=this.$store.state.severTime.currentTime,s=this.endTime,i=s-e;this.d=0,this.h="0",this.m="0",this.s="0",i<0?this.trigger&&(this.trigger=!1,setTimeout((function(){t.$emit("timeOut")}),1e3)):(this.trigger=!0,i>59?(this.s=i%60,i=parseInt(i/60),i>59?(this.m=i%60,i=parseInt(i/60),i>23?(this.h=parseInt(i%24),i=parseInt(i/24),this.d=i):this.h=i):this.m=i):i>=0&&(this.s=i),this.h<10&&(this.h="0"+this.h),this.m<10&&(this.m="0"+this.m),this.s<10&&(this.s="0"+this.s))}}},created:function(){this.parsingTime(),n["a"].heartbeat()},destroyed:function(){n["a"].removeHeartbeat()},watch:{"$store.state.severTime.currentTime":function(){this.parsingTime()}}},c=r,l=(s("d49f"),s("0c7c")),d=Object(l["a"])(c,i,a,!1,null,"65b2d2d6",null);e["default"]=d.exports},7431:function(t,e,s){"use strict";s("3e7e")},"9d5d":function(t,e,s){"use strict";s("4795"),s("e25e"),s("0d03");var i,a=s("653a"),n=0,r={heartbeat:function(){n++,i||(i=window.setInterval((function(){var t=parseInt((new Date).getTime()/1e3);a["a"].state.severTime.currentTime=t+a["a"].state.severTime.jetlag}),1e3))},removeHeartbeat:function(){n>0&&n--,0==n&&(window.clearInterval(i),i=null)}};e["a"]=r},ac73:function(t,e,s){"use strict";s("bc69")},bc69:function(t,e,s){},d49f:function(t,e,s){"use strict";s("333a")},ef84:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-oil-group"},[i("nav-top",{on:{backEvent:function(e){return t.$router.go(-1)}}}),i("nav-content",{staticClass:"my-oil-group-container"},[i("div",{staticClass:"nav-bar"},t._l(t.goldMenu,(function(e,s){return i("div",{staticClass:"nav-bar-item",class:{active:t.currentIndex===s},on:{click:function(e){return t.tabChange(s)}}},[i("span",{staticClass:"text"},[t._v(t._s(e.text))])])})),0),i("div",{staticClass:"list"},[t._l(t.groupList,(function(e,s){return i("div",{key:s,staticClass:"group-list"},[i("Group",{attrs:{type:t.type,currentIndex:t.currentIndex,details:e}})],1)})),t.groupList.length?t._e():i("div",{staticClass:"no-data"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:s("f226"),alt:""}})]),i("div",{staticClass:"tips"},[t._v("暂无数据")])])],2)])],1)},a=[],n=s("2dd5"),r={data:function(){return{groupList:[],currentIndex:0,goldMenu:[{text:"拼团中"},{text:"拼团成功"},{text:"拼团失败"}],type:"1"}},mounted:function(){this.queryMyAssemble()},methods:{queryMyAssemble:function(){var t=this;this.$request.post("/app/json/app_assemble_activity/queryMyAssemble",{assembleState:this.currentIndex+1}).then((function(e){0==e.status?t.groupList=e.data:t.$Toast(e.info?e.info:"获取我的拼团失败")}))},tabChange:function(t){this.currentIndex=t,this.groupList=[],this.queryMyAssemble()}},components:{Group:n["a"]}},c=r,l=(s("7431"),s("0c7c")),d=Object(l["a"])(c,i,a,!1,null,"1ecb3e66",null);e["default"]=d.exports},f226:function(t,e,s){t.exports=s.p+"static/images/c41c44a38816df3f516c451d82a7256f.png"}}]);