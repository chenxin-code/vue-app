(window.webpackJsonp=window.webpackJsonp||[]).push([[836],{Cxhc:function(t,n,a){"use strict";a.r(n);var e={name:"setting",components:{},data:function(){return{wechatInfo:null,bindType:-1}},methods:{backEvent:function(){this.$router.go(-1)},wechatOp:function(){var t=this;2==this.bindType?this.$bridgefunc.wxAuth((function(n){""==n?t.$Toast("微信授权失败"):t.wxLogin(n)})):1==this.bindType&&this.unBindWechat()},unBindWechat:function(){var t=this;this.$Loading.open();var n={token:this.$store.state.login.token,regChannel:5};this.$http.post("/app/json/user/unBindThirdUser",n).then((function(n){t.$Loading.close();var a=n.data;0==a.status?(t.$Toast("解绑成功"),t.bindType=2):t.$Toast(a.info)}),(function(n){t.$Loading.close(),t.$Toast("获取数据失败")}))},wxLogin:function(t){var n=this;this.$Loading.open();var a={code:t,token:this.$store.state.login.token};this.$http.post("/app/json/user/getWechatThirdId",a).then((function(a){n.$Loading.close(),console.log(a.data);var e=a.data;if(0==e.status){var s={};s.user_id=e.data,s.auth_code=t,n.bind(s)}else n.$Toast(e.info)}),(function(t){n.$Loading.close(),n.$Toast("系统运行过程中遇到问题，请稍候再试")}))},bind:function(t){this.$router.push({path:"/usercenter/bindphone",isnativetop:"1",query:{thirdUserId:t.user_id,code:t.auth_code,regChannel:"3",bindType:3}})},getWechatInfo:function(){var t=this;this.$Loading.open();var n={token:this.$store.state.login.token};this.$http.post("/app/json/user/getWechatUserInfo",n).then((function(n){t.$Loading.close();var a=n.data;0==a.status?(t.wechatInfo=a.data,t.bindType=1):1037==a.errorCode?t.bindType=2:(t.$Toast(a.info),t.bindType=-1)}),(function(n){t.$Loading.close(),t.$Toast("获取数据失败")}))}},created:function(){this.getWechatInfo()}},s=(a("t26y"),a("KHd+")),i=Object(s.a)(e,(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"bind-wechat login2"},[a("nav-top",{on:{backEvent:t.backEvent}}),t._v(" "),a("nav-content",[a("div",{staticClass:"wechat"},[a("div",{staticClass:"warm-prompt mine-box-shodow"},[a("h2",{staticClass:"warm-title"},[t._v("温馨提示")]),t._v(" "),a("p",{staticClass:"unorder"},[t._v("1.销售APP账号与微信号需互相唯一；")]),t._v(" "),a("p",{staticClass:"unorder"},[t._v("2.当前账号绑定新微信需先解绑当前账号；")]),t._v(" "),a("p",{staticClass:"unorder"},[t._v("3.如微信号已绑定另外账号，需回原账号解绑.。")])]),t._v(" "),a("div",{staticClass:"bind-warp"},[a("div",{staticClass:"bind-logo"},[a("img",{attrs:{src:"static/image/setting/bindwechat.png"}})]),t._v(" "),1==t.bindType?a("p",{staticClass:"bound"},[t._v("已绑定账号:"),a("span",{staticClass:"chart-name"},[t._v(t._s(t.wechatInfo.wxNickName))])]):t._e()]),t._v(" "),-1!=t.bindType?a("div",{staticClass:"common-btn theme_bg_red theme_font_white mt100",on:{click:t.wechatOp}},[t._v(t._s(2==t.bindType?"马上绑定微信":"解绑微信")+"\n      ")]):t._e()])])],1)}),[],!1,null,"08a70f73",null);n.default=i.exports},cGaj:function(t,n,a){},t26y:function(t,n,a){"use strict";var e=a("cGaj");a.n(e).a}}]);