(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ab149b40"],{"406c":function(t,e,s){"use strict";s("5a0b")},"5a0b":function(t,e,s){},"68ca":function(t,e,s){"use strict";s("d323")},a7e8:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"member-levels",class:{"div-zm":5==t.deployType},style:t.getBgStyle()},[5==t.deployType?[s("div",{staticClass:"member-level-div",style:t.getFloatUp(),on:{click:t.toMemberLevel}},[t.$store.state.mall2.myAssets.levelEndDate&&"0001"!=t.$store.state.mall2.myAssets.levelNo?s("div",{staticClass:"tip"},[s("span",[t._v(t._s(t.$t("loginRegisterLang.levalEffectDate")))]),s("span",[t._v(t._s(t.$store.state.mall2.myAssets.levelEndDate))])]):t._e(),s("MemberLevel",{attrs:{type:"zm"}}),"en_US"==t.$store.state.language&&t.nextLevelName?s("div",{staticClass:"tip1"},[t._v(t._s(t.$t("loginRegisterLang.nextLevelTip1"))+" "+t._s(t.nextLevelName)+" "+t._s(t.$t("loginRegisterLang.nextLevelTip2"))+" "+t._s(t.nextLevelValue)+" RMB")]):t.nextLevelName?s("div",{staticClass:"tip1"},[t._v(t._s(t.$t("loginRegisterLang.nextLevelTip1"))+" "+t._s(t.nextLevelValue)+" "+t._s(t.$t("loginRegisterLang.nextLevelTip2"))+" "+t._s(t.nextLevelName))]):t._e()],1)]:[s("div",{staticClass:"member-level-div",class:t.hotareaClass({idCode:t.moduleData.idCode}),style:t.getFloatUp(),on:{click:function(e){t.hotEvent(),t.toMemberLevel()}}},[s("MemberLevel",{attrs:{type:"zm"}}),s("div",{staticClass:"tip"},[t._v("距离下一级别还有"),s("span",{staticClass:"point"},[t._v(t._s(t.getNextDistance()))]),t._v("元距离")])],1)]],2)},i=[],n=s("5530"),r=(s("b0c0"),s("f3d2")),l=s("03c6"),o=s("2f62"),u={name:"member-levels",components:{MemberLevel:r["a"]},props:["myIndex","usePorpData","propData","barHeight"],computed:Object(n["a"])(Object(n["a"])({},Object(o["e"])(["deployType"])),{},{pageData:function(){return 1==this.usePorpData?this.propData:this.$store.state.pageData},moduleData:function(){return this.pageData.moduleList[this.myIndex].data}}),watch:{"$store.state.mall2.myAssets":function(t,e){this.getNextDistance()}},mixins:[l["a"]],data:function(){return{nextLevelValue:0,nextLevelName:""}},methods:{toMemberLevel:function(){5==this.deployType&&this.$market.customPush({path:"/memberlevel"})},getNextDistance:function(){var t=this.$store.state.mall2.myAssets.levSurplusPoints,e=this.$store.state.memberLevel||[],s=this.$store.state.mall2.myAssets.levelNo;this.nextLevelValue=0;for(var a=0;a<e.length;a++)if(s==e[a].rankCode){if(a==e.length-1)return"";var i=e[a+1].pointAmount;return 5==this.deployType?(this.nextLevelValue=Math.floor(i-t),void(this.nextLevelName=e[a+1].name)):i-t}return"0"},getBgStyle:function(){var t="",e=this.moduleData.bgImgUrl;""!=e&&(t+="background: url('"+e+"') no-repeat center center / 100% 100%;");var s=this.moduleData.bgColor;return""!=s&&(t+="background-color: "+s+";"),t},getFloatUp:function(){var t="",e=this.moduleData.floatUp;e>0&&(t+="margin-top: -"+e+"%;");var s=this.moduleData.upMargin,a=this.moduleData.downMargin;s>0&&(t+="margin-top: "+s+"%;"),a>0&&(t+="margin-bottom: "+a+"%;");var i=this.moduleData.sidesMargin;return i>0&&(t+="margin-left: "+i+"%; margin-right: "+i+"%;"),t},getMyAssets:function(){var t=this,e=this.$market.apiBaseURL()+"/app/json/user/getUserWallet",s={token:this.$store.state.login.token};this.$http.post(e,s).then((function(e){var s=e.data;0==s.status&&(t.$store.state.mall2.myAssets=s.data,t.getNextDistance())}),(function(t){}))},getUserRank:function(){var t=this,e="/app/json/user_rights/getUserRank";this.$http.post(e,{}).then((function(e){var s=e.data;0==s.status&&""!=s.data&&s.data.length>0&&(t.$store.state.memberLevel=s.data)}),(function(t){}))}},created:function(){5==this.deployType&&(this.getUserRank(),""!=this.$store.state.login.token&&this.getMyAssets())}},m=u,c=(s("68ca"),s("0c7c")),p=Object(c["a"])(m,a,i,!1,null,"0c721540",null);e["default"]=p.exports},d323:function(t,e,s){},f3d2:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.refresh?s("div",{ref:"theComponent",staticClass:"member-level"},[t._l(t.$store.state.memberLevel,(function(e,a){return s("div",{staticClass:"item",class:{own:e.pointAmount<=t.$store.state.mall2.myAssets.levSurplusPoints}},[s("div",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"img-div"},[s("img",{attrs:{src:t.getLevelImg(e.pointAmount,a+1)},on:{click:function(s){return t.showEquity(e)}}})]),s("div",{staticClass:"points"},[t._v(t._s(e.pointAmount))]),0!=a?s("div",{staticClass:"line-div"},[s("div",{staticClass:"line-w",style:t.getWlineStyle(e.pointAmount,a)},[t.hasDian(e.pointAmount,a)?s("div",{staticClass:"show-value"}):t._e(),t.hasDian(e.pointAmount,a)?s("img",{staticClass:"dian",attrs:{src:"static/images/mycenter/dian.png"}}):t._e()])]):t._e()])})),s("van-popup",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("p",{staticClass:"p1"},[t._v(t._s(t.equityName)+"会员权益")]),s("div",{staticClass:"ulBox"},[s("div",{staticClass:"ul"},[s("ul",t._l(t.equityList,(function(e){return s("li",{on:{click:function(s){return t.checkEquity(e)}}},[s("img",{attrs:{src:e.equityPic,alt:""}}),s("div",[s("p",{staticClass:"ul_p"},[t._v(t._s(e.equityName.substr(0,4)))])])])})),0)])]),s("span",{staticClass:"fill",on:{click:function(e){t.show=!1}}},[t._v("关闭")])])],2):t._e()},i=[],n=(s("b0c0"),{name:"member-level",components:{},data:function(){return{refresh:!0,value_style:"",show:!1,equityName:"",equityList:[]}},methods:{showEquity:function(t){var e=this;if("/mall2/membershipinterests"==this.$route.path){this.show=!0,this.equityName=t.name;var s={token:this.$store.state.login.token,levelNo:t.id};this.$http.post("/app/equity_member/queryLevelEquity",s).then((function(t){var s=t.data;0==s.status?e.equityList=s.data:e.$Toast("获取会员权益失败")}))}},checkEquity:function(t){var e=this;if(1==t.type){var s={token:this.$store.state.login.token,equityType:t.equityType,equityId:t.equityId};this.$http.post("/app/equity_member/queryMyEquityRecord",s).then((function(t){var s=t.data;if(0==s.status){var a=String(s.data.equityType).substr(0,1),i=s.data.equityType;"1"==a||"2"==a||"4"==a?e.$router.push({path:"/equity/have_equity",query:{detail:JSON.stringify(s.data)}}):"31"==i?e.$router.push({path:"/equity/question",query:{detail:JSON.stringify(s.data)}}):"32"==i?e.$router.push({path:"/equity/game_equity",query:{detail:JSON.stringify(s.data)}}):"33"==i?e.$router.push({path:"/equity/couponList",query:{detail:JSON.stringify(s.data)}}):"5"==a&&e.$router.push({path:"/equity/third_services",query:{detail:JSON.stringify(s.data)}})}else e.$Toast("获取我的权益失败")}))}else this.$router.push({path:"/equity/magnification",query:{equityType:t.equityType}})},hasDian:function(t,e){if(this.$store.state.mall2.myAssets.levSurplusPoints>=t)return!1;var s=this.$store.state.memberLevel,a=s[e-1];return a?this.$store.state.mall2.myAssets.levSurplusPoints>=a.pointAmount:void 0},getWlineStyle:function(t,e){if(this.$store.state.mall2.myAssets.levSurplusPoints>=t)return"width: 100%";var s=this.$store.state.memberLevel,a=s[e-1];if(a){var i=t-a.pointAmount,n=this.$store.state.mall2.myAssets.levSurplusPoints-a.pointAmount;if(i>0){var r=n/i*100;return"width: "+r+"%"}}},getLevelImg:function(t,e){return this.$store.state.mall2.myAssets.levSurplusPoints>=t?"static/images/mycenter/m_"+e+"_1.png":"static/images/mycenter/m_"+e+"_0.png"},refreshStyle:function(){var t=this.$refs.bubbleDiv;if(t){var e=t[0];if(e){var s=-e.offsetWidth/2;this.value_style="margin-left: "+s+"px;"}}}},watch:{"$store.state.mall2.myAssets.levSurplusPoints":function(){var t=this;this.refresh=!1,this.$nextTick((function(){t.refresh=!0}))}},mounted:function(){}}),r=n,l=(s("406c"),s("0c7c")),o=Object(l["a"])(r,a,i,!1,null,"d9331d72",null);e["a"]=o.exports}}]);