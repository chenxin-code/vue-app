(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bb42b2c"],{1148:function(t,e,a){"use strict";var n=a("a691"),s=a("1d80");t.exports=function(t){var e=String(s(this)),a="",i=n(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(a+=e);return a}},3024:function(t,e,a){"use strict";a("621b")},3268:function(t,e){var a=864e5;function n(t,e){return new Date(t,e+1,0).getDate()}function s(t,e,a){return 0===e&&a>50?t-1:11===e&&a<10?t+1:t}function i(t,e,n,s){e>11&&(e=0,t++);var i=new Date(t,e,n);s&&i.setDate(i.getDate()+4-(i.getDay()||7));var r=s?i.getFullYear():t,o=new Date(r,0,1),c=1+Math.round((i-o)/a);s||(c+=o.getDay());var l=Math.ceil(c/7);if(!s){var h=new Date(t,e,n),u=new Date(t+1,0,1),d=u.getDay();h.getTime()>=u.getTime()-a*d&&(l=1)}return l}function r(t,e,a){for(var r,o,c,l=this.lang||"en",h=this.onlyDays,u="undefined"===typeof this.weekStart?1:this.weekStart,d=1===u,p=[],f=new Date(t,e,1),g=f.getDay()||(d?7:0),m=u-g,v=i(t,e,1,d),b=n(t,e),y=n(t,e-1),D=s(t,e,v),w={month:e,year:t,daysInMonth:b},_=0;_<7;_++){c=m;for(var M=0;M<8;M++){_>0&&M>0&&m++,m>b||m<1?(o=m>b?m-b:y+m,r=m>b?e+1:e-1):(o=m,r=e);var k=function(){return 0===M?"weekLabel":0===_?"dayLabel":m<1?"prevMonth":m>b?"nextMonth":"monthDay"}(),C=c!==m&&_>0,x={desc:C?o:v,week:v,type:k,format:d?"ISO 8601":"US",date:!!C&&new Date(Date.UTC(t,r,o)),year:D,index:p.length};a&&("function"===typeof a?x=a.call(w,x,l):a.forEach((function(t){x=t.call(w,x,l)}))),h&&C?p.push(x):h||p.push(x)}_>0&&(v=i(t,r,o+1,d)),D=s(t,e,v)}return w.cells=p,w}t.exports=function(t){return r.bind(t)}},"408a":function(t,e,a){var n=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"571b":function(t,e,a){t.exports={Generator:a("3268"),addLabels:a("67c8")}},"5c96":function(t,e){t.exports={weekPlaceholder:"",columnNames:{en:{0:"w",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",7:"sunday"},sv:{0:"v",1:"måndag",2:"tisdag",3:"onsdag",4:"torsdag",5:"fredag",6:"lördag",7:"söndag"},pt:{0:"s",1:"segunda",2:"terça",3:"quarta",4:"quinta",5:"sexta",6:"sábado",7:"domingo"}},monthNames:{en:["January","February","March","April","May","June","July","August","September","October","November","December"],sv:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},classes:{dayLabel:"day-of-week",weekLabel:"week-number",prevMonth:"inactive",nextMonth:"inactive",monthDay:"day-in-month"}}},"621b":function(t,e,a){},"67a3":function(t,e,a){"use strict";var n="/app/json/app_travel/queryTicketList",s="/app/json/app_travel/queryTicketList",i="/app/json/app_travel/detail",r="/app/json/app_shopping_order/detail",o="/app/json/app_travel/placeAnOrder",c="/app/json/app_travel/cancelOrder",l="/app/json/app_travel/placingOrder",h="/app/json/app_travel/queryAfterSaleList",u="/app/json/app_travel/queryAfterSaleList",d="/app/json/app_travel/submitAfterSale";e["a"]={methods:{ticketListData:function(t){return this.$http.post(n,t)},orderData:function(t){return this.$http.post(s,t)},orderdetailData:function(t){return this.$http.post(i,t)},orderdetail1Data:function(t){return this.$http.post(r,t)},placeorderData:function(t){return this.$http.post(o,t)},cancelorderData:function(t){return this.$http.post(c,t)},payorderData:function(t){return this.$http.post(l,t)},afterData:function(t){return this.$http.post(h,t)},afterdetailData:function(t){return this.$http.post(u,t)},afterapplyData:function(t){return this.$http.post(d,t)}}}},"67c8":function(t,e,a){var n=a("5c96");function s(t){return null!=t&&(t.constructor===Array||t.constructor===Object)}function i(t,e){for(var a in t)e[a]?s(t[a])&&i(t[a],e[a]):e[a]=t[a]}function r(t,e){var a=[n.classes[t.type]];return t.class?t.class=("string"==typeof t.class?[t.class]:t.class).concat(a):t.class=a,t.type.indexOf("Label")>0&&(0==t.index&&n.weekPlaceholder?t.desc=n.weekPlaceholder:t.index<8?t.desc=n.columnNames[e][t.index]:t.index%8==0&&(t.desc=t.week)),t.date&&(t.monthName=n.monthNames[e][t.date.getMonth()]),this.monthName||(this.monthName=n.monthNames[e][this.month]),this.labels||(this.labels={monthNames:n.monthNames[e],columnNames:n.columnNames[e],classes:n.classes}),t}r.setLabels=function(t){i(t,n)},t.exports=r},b680:function(t,e,a){"use strict";var n=a("23e7"),s=a("a691"),i=a("408a"),r=a("1148"),o=a("d039"),c=1..toFixed,l=Math.floor,h=function(t,e,a){return 0===e?a:e%2===1?h(t,e-1,a*t):h(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},d=function(t,e,a){var n=-1,s=a;while(++n<6)s+=e*t[n],t[n]=s%1e7,s=l(s/1e7)},p=function(t,e){var a=6,n=0;while(--a>=0)n+=t[a],t[a]=l(n/e),n=n%e*1e7},f=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var n=String(t[e]);a=""===a?n:a+r.call("0",7-n.length)+n}return a},g=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){c.call({})}));n({target:"Number",proto:!0,forced:g},{toFixed:function(t){var e,a,n,o,c=i(this),l=s(t),g=[0,0,0,0,0,0],m="",v="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(e=u(c*h(2,69,1))-69,a=e<0?c*h(2,-e,1):c/h(2,e,1),a*=4503599627370496,e=52-e,e>0){d(g,0,a),n=l;while(n>=7)d(g,1e7,0),n-=7;d(g,h(10,n,1),0),n=e-1;while(n>=23)p(g,1<<23),n-=23;p(g,1<<n),d(g,1,1),p(g,2),v=f(g)}else d(g,0,a),d(g,1<<-e,0),v=f(g)+r.call("0",l);return l>0?(o=v.length,v=m+(o<=l?"0."+r.call("0",l-o)+v:v.slice(0,o-l)+"."+v.slice(o-l))):v=m+v,v}})},f0cc:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sign-in-container"},[a("nav-top",{attrs:{title:"日期选择"},on:{backEvent:function(e){return t.$router.go(-1)}}}),a("nav-content",[a("div",{staticClass:"calendar-container"},[a("div",{staticClass:"calendar-wrapper"},[a("div",{staticClass:"calendar-content"},[a("div",{staticClass:"line"}),a("div",{staticClass:"month-choose-wrapper"},[a("div",{staticClass:"btn left-btn",on:{click:t.prevMonth}}),a("div",{staticClass:"month"},[t._v(t._s(t.monthFormat)+"月")]),a("div",{staticClass:"btn right-btn",on:{click:t.nextMonth}})]),a("ul",{staticClass:"calendar-list"},[t._l(7,(function(e,n){return a("li",{key:n,staticClass:"calendar-item other"},[a("span",{staticClass:"text"},[t._v(t._s(t.weeks[n]))])])})),t._l(t.calendar,(function(e,n){return a("li",{key:n+10,staticClass:"calendar-item",class:{colour:1==e.selectData,red:1==e.redData},on:{click:function(a){return t.signHandler(e,n)}}},[a("span",{staticClass:"text"},[t._v(t._s(e.desc))]),e.obj?[e.obj.price?a("span",{staticClass:"money",class:{colour:1==e.selectData,red:1==e.redData}},[t._v("￥"+t._s(e.obj.suggest_price))]):t._e(),a("span",{staticStyle:{display:"none"}},[t._v(t._s(e.obj.price))]),a("span",{staticStyle:{display:"none"}},[t._v(t._s(e.obj.price))])]:[e.price&&e.price>0?a("span",{staticClass:"money",class:{colour:1==e.selectData,red:1==e.redData}},[t._v("￥"+t._s(e.price))]):t._e()]],2)}))],2)])])]),a("div",{staticClass:"box"},[a("p",[t._v("可用时间")]),a("p",[t._v(t._s(t.obj.startTime)+"~"+t._s(t.obj.expireTime))]),a("span",[t._v("（限"+t._s(t.obj.week)+"可用）")])]),a("div",{staticClass:"box box1"},[a("div",[a("p",[t._v("购票数量")]),a("span",[t._v("￥"+t._s(t.price)+"元")])]),a("div",{staticClass:"div divs"},[a("div",{staticClass:"num"},[a("span",{class:{gray:1==t.grayDate},on:{click:t.less}},[t._v("-")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nums,expression:"nums"}],attrs:{type:"number",disabled:t.grayDate},domProps:{value:t.nums},on:{input:[function(e){e.target.composing||(t.nums=e.target.value)},t.inputs]}}),a("span",{class:{gray:1==t.grayDate},on:{click:t.add}},[t._v("+")])])])])]),a("div",{staticClass:"box div4"},[a("p",[t._v("总额："),a("span",{staticClass:"span1"},[t._v("￥"+t._s(t.allMoney))])]),a("span",{staticClass:"span2",class:{gray:1==t.grayDate},on:{click:t.toOrder}},[t._v("下一步")])])],1)},s=[],i=(a("0d03"),a("b64b"),a("4160"),a("159b"),a("a9e3"),a("ac1f"),a("5319"),a("b680"),a("571b")),r=a.n(i),o=a("67a3"),c=a("653a"),l={name:"calendar",mixins:[o["a"]],data:function(){return{title:"",initPage:!1,showRecord:!1,tableMonth:-1,calendar:[],stationList:[],sideFiltrateModalShow:!1,price:"0",loading:!1,allMoney:0,finished:!1,danjia:"",grayDate:!0,obj:{},page:0,station:{stationCode:"",stationName:""},stationModel:"",signInData:{},searchName:"",areaShowName:"附近",winPrize:[],searchType:"",cityId:"",channel:"",weeks:["一","二","三","四","五","六","日"],itemId:"",lastPath:"",today:"",calendarDay:"",priceA:"",priceB:"",priceC:"",datePrice:[],shareInfo:{isShare:0},nums:0}},created:function(){this.lastPath=this.$route.query.lastPath},beforeRouteLeave:function(t,e,a){t.path==this.lastPath&&this.$keepaliveHelper.deleteCache(this),a()},mounted:function(){this.nowDate=new Date,this.tableYear=this.nowDate.getFullYear(),this.tableMonth=this.nowDate.getMonth(),this.itemId=this.$route.query.itemId,this.messageData(),this.today=this.getNowFormatDate()},computed:{monthFormat:function(){var t=["一","二","三","四","五","六","七","八","九","十","十一","十二"];return t[this.tableMonth]},numberOfDaysTotal:function(){var t=0;return this.signInData&&this.signInData.gameSigninRecordModelList&&this.signInData.gameSigninRecordModelList.length>0&&(t=this.signInData.gameSigninRecordModelList[this.signInData.gameSigninRecordModelList.length-1].daysTotal),t}},methods:{messageData:function(){var t=this,e=this;e.page=e.page+1;var a={token:this.$store.state.login.token,itemId:e.$route.query.itemId,pageThis:e.page,pageSize:10,keyWord:""};this.$Loading.open(),e.ticketListData(a).then((function(a){if(t.$Loading.close(),a.data.result)if(e.obj=a.data.data[0]||{},0==Object.keys(a.data.data[0].datePrices).length)t.getCalendar(),e.calendar.forEach((function(t,n){t.redData=!1;var s=new Date(t.date),i=s.getFullYear()+""+(s.getMonth()+1)+s.getDate();Number(i)==Number(e.today.replace(/-/g,""))?(t.price=a.data.data[0].original_price,t.priceA=a.data.data[0].nett_price,t.priceB=a.data.data[0].back_cash,t.priceC=a.data.data[0].market_price):(t.price=a.data.data[0].sku_suggest_price,t.priceA=a.data.data[0].sku_user_price,t.priceB=a.data.data[0].sku_back_cash,t.priceC=a.data.data[0].sku_suggest_price),t.price>0?t.selectData=!0:t.selectData=!1}));else{var n=[],s=a.data.data[0].datePrices;for(var i in s)n.push(Object.assign({},s[i],{date:i}));e.datePrice=n,e.getCalendar(),e.selectCalendar()}}))},selectCalendar:function(){var t=this;0!=t.datePrice.length&&t.calendar.forEach((function(e){t.datePrice.forEach((function(a){a.date===t.$util.formatDate(e.date,"yyyy-MM-dd")&&(e.selectData=!0)}))}))},getNowFormatDate:function(){var t=new Date,e="-",a=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();n>=1&&n<=9&&(n="0"+n),s>=0&&s<=9&&(s="0"+s);var i=a+e+n+e+s;return i},getCalendar:function(){var t=this,e=[],a=new r.a.Generator({onlyDays:!0,weekStart:1,lang:"zh"}),n=this._clearHours(new Date),s=a(this.tableYear,this.tableMonth);s.cells.forEach((function(a,s){if("prevMonth"===a.type||"monthDay"===a.type||"nextMonth"===a.type){var i=a.date&&t._clearHours(a.date);a.type=i===n?"today":a.type,0==Object.keys(t.obj.datePrices).length||t.datePrice.forEach((function(e){t._clearHours(e.date)===i&&(a.obj=e)})),a.redData=!1,a.selectData=!1,e.push(a)}})),this.calendar=e},signHandler:function(t,e){if(0==Object.keys(this.obj.datePrices).length){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();this.calendar.forEach((function(t){t.redData=!1})),this.calendar[e].redData=!0,this.grayDate=!1,this.nums=1,this.calendarDay=n,this.price=t.price,this.priceA=t.market_price,this.priceC=t.suggest_price,this.allMoney=(Number(this.price)*this.nums).toFixed(2)}else if(1==this.calendar[e].selectData){a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();this.calendar.forEach((function(t){t.redData=!1})),this.calendar[e].redData=!0,this.grayDate=!1,this.nums=1,this.calendarDay=n,this.price=t.obj.price,this.priceA=t.obj.market_price,this.priceC=t.obj.suggest_price,this.allMoney=(Number(this.price)*this.nums).toFixed(2)}else this.$Toast("当前日期不可购买")},signIn:function(){this.signHandler({date:new Date})},_clearHours:function(t){var e=new Date(t);return e.setHours(0,0,0,0),e.getTime()},toOrder:function(){if(1==this.grayDate)this.$Toast("请先选择日期");else{c["a"].commit("putpeople",[]);var t=this;t.$router.push({path:"/carefree_trave/writingOrder",query:{itemId:t.$route.query.itemId,nums:t.nums,allMoney:t.allMoney,price:t.price,priceA:t.priceA,priceB:t.priceB,priceC:t.priceC}})}},less:function(){1==this.grayDate?this.$Toast("请先选择日期"):(this.nums>0?(this.nums--,this.allMoney=(this.allMoney-this.price).toFixed(2)):(this.nums=0,this.allMoney=0),0==this.nums&&(this.grayDate=!0))},inputs:function(t){0==t.srcElement.value&&(this.grayDate=!0)},add:function(){1==this.grayDate?this.$Toast("请先选择日期"):(this.nums++,this.allMoney=(Number(this.price)*this.nums).toFixed(2))},prevMonth:function(){this.tableMonth--,this.tableMonth<0&&(this.tableMonth=11,this.tableYear--),this.nowDate=new Date,this.nowDate.setMonth(this.tableMonth),this.nowDate.setFullYear(this.tableYear),this.getCalendar(),this.messageData(),this.selectCalendar()},nextMonth:function(){this.tableMonth++,this.tableMonth>11&&(this.tableMonth=0,this.tableYear++),this.nowDate.setMonth(this.tableMonth),this.nowDate.setFullYear(this.tableYear),this.getCalendar(),this.messageData(),this.selectCalendar()}}},h=l,u=(a("3024"),a("0c7c")),d=Object(u["a"])(h,n,s,!1,null,"16a7a892",null);e["default"]=d.exports}}]);