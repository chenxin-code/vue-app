(window.webpackJsonp=window.webpackJsonp||[]).push([[566],{Xv8D:function(t,a,e){"use strict";var i=e("Z+tx");e.n(i).a},"Z+tx":function(t,a,e){},Z6Mb:function(t,a,e){"use strict";a.a={methods:{ticketListData:function(t){return this.$http.post("/app/json/app_travel/queryTicketList",t)},orderData:function(t){return this.$http.post("/app/json/app_travel/queryTicketList",t)},orderdetailData:function(t){return this.$http.post("/app/json/app_travel/detail",t)},orderdetail1Data:function(t){return this.$http.post("/app/json/app_shopping_order/detail",t)},placeorderData:function(t){return this.$http.post("/app/json/app_travel/placeAnOrder",t)},cancelorderData:function(t){return this.$http.post("/app/json/app_travel/cancelOrder",t)},payorderData:function(t){return this.$http.post("/app/json/app_travel/placingOrder",t)},afterData:function(t){return this.$http.post("/app/json/app_travel/queryAfterSaleList",t)},afterdetailData:function(t){return this.$http.post("/app/json/app_travel/queryAfterSaleList",t)},afterapplyData:function(t){return this.$http.post("/app/json/app_travel/submitAfterSale",t)}}}},w4lq:function(t,a,e){"use strict";e.r(a);var i={name:"index",mixins:[e("Z6Mb").a],data:function(){return{listData:[],viewShow:!0,diqu:"北京",sideFiltrateModalShow:!1,dropDown:!1,loadStart:!1,buy:!1,id:"",loading:!1,finished:!1,heightMoney:"",lowMoney:"",titleView:!1,statusList:[{state:"待处理",redData:!1,stateNum:3},{state:"已开票",redData:!1,stateNum:1},{state:"开票失败",redData:!1,stateNum:2}],typeList:[{ordertype:"加油订单开票",redData:!1,orderNum:100},{ordertype:"商品订单开票",redData:!1,orderNum:200}],invoiceStatus:"",orderType:"",minAmount:"",maxAmount:"",searchStr:"",page:0,keyWord:"",isText:[],isData:!0}},created:function(){},mounted:function(){},methods:{detailData:function(t){console.log(t),this.searchStr=t.goods_name,this.dropDown=!1,this.keyWord=t.goods_name,this.page=0,this.listData=[],this.loadData(),this.listData.length>0?this.isData=!0:this.isData=!1},monitor:function(t){var a=this;console.log(t);var e=this;if(e.page=0,e.keyWord=t.srcElement.value,console.log(e.keyWord),t.srcElement.value){var i={token:this.$store.state.login.token,pageThis:e.page,pageSize:10,keyWord:e.keyWord};console.log(i),this.$Loading.open(),e.ticketListData(i).then((function(t){a.$Loading.close(),e.isText=t.data.data||[],e.dropDown=!0}))}else this.keyWord="",this.page=0,this.listData=[],this.loadData(),e.dropDown=!1},searchgoods:function(t){console.log(t),this.keyWord="",this.page=0,this.listData=[],this.loadData()},regionSelect:function(t){console.log(1),this.viewShow=!0,this.diqu=t},loadData:function(){var t=this;t.page=t.page+1;var a={token:this.$store.state.login.token,pageThis:t.page,pageSize:10,keyWord:t.keyWord,cateId:this.$route.query.cateId};console.log("列表入参",a),t.ticketListData(a).then((function(a){if(a.data.result){t.loadStart=!0;var e=a.data.data||[];t.listData=t.listData.concat(e)||[],t.listData.length>0?(t.isData=!0,t.listData.forEach((function(a){a.startTime.substring(0,10)==t.getNowFormatDate()&&(t.buy=!0)}))):t.isData=!1,t.page>=a.data.totalPages?t.finished=!0:t.finished=!1}else t.finished=!0;t.loading=!1}))},toDetail:function(t){console.log(1),this.$router.push({path:"/carefree_trave/detail",query:{id:t}})},reset:function(){this.typeList.forEach((function(t){t.redData=!1})),this.statusList.forEach((function(t){t.redData=!1})),this.invoiceStatus="",this.orderType="",this.minAmount="",this.maxAmount=""},sure:function(){this.page=0,this.loadData(),this.sideFiltrateModalShow=!1,this.invoiceStatus="",this.orderType="",this.minAmount="",this.maxAmount="",this.statusList.forEach((function(t){t.redData=!1})),this.typeList.forEach((function(t){t.redData=!1}))},statusData:function(t){this.statusList.forEach((function(t){t.redData=!1})),t.redData=!0,this.invoiceStatus=t.stateNum},typeData:function(t){this.typeList.forEach((function(t){t.redData=!1})),t.redData=!0,this.orderType=t.orderNum},getNowFormatDate:function(){var t=new Date,a=t.getFullYear(),e=t.getMonth()+1,i=t.getDate();return e>=1&&e<=9&&(e="0"+e),i>=0&&i<=9&&(i="0"+i),a+"-"+e+"-"+i}}},s=(e("Xv8D"),e("KHd+")),o=Object(s.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"body"},[e("nav-top",{on:{backEvent:function(a){return t.$router.go(-1)}}},[e("div",{staticClass:"search-div theme_bg_white_f5",staticStyle:{left:"50px",right:"55px",height:"30px",top:"7px",padding:"0 15px","border-radius":"15px"}},[e("i",{staticClass:"iconfont mall-sousuo theme_font_tint",staticStyle:{"font-size":"16px"}}),t._v(" "),e("form",{staticClass:"search-input",attrs:{action:"",id:"form"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStr,expression:"searchStr"}],attrs:{id:"searchInput",type:"search",placeholder:"景点/门票"},domProps:{value:t.searchStr},on:{input:[function(a){a.target.composing||(t.searchStr=a.target.value)},t.monitor],keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.searchgoods(a)}}})])])]),t._v(" "),e("nav-content",[t.viewShow?e("div",{staticClass:"divBox"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.loadData},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.listData,(function(a){return e("div",{staticClass:"publicInvoice",on:{click:function(e){return t.toDetail(a.id)}}},[e("div",{staticClass:"publicbox"},[e("div",{staticClass:"div1"},[e("img",{attrs:{src:a.image?a.image:"static/image/microShop/lvyou.png",alt:""}})]),t._v(" "),e("div",{staticClass:"div2"},[e("div",{staticClass:"div"},[t._v(t._s(a.title))]),t._v(" "),e("div",{staticClass:"div"},[2==a.type?e("span",[t._v("套票")]):t._e(),1==a.type?e("span",[t._v("普通票")]):t._e(),3==a.type?e("span",[t._v("线路")]):t._e(),1==a.refund_type?e("span",[t._v("可退票")]):t._e(),t.buy?e("span",[t._v("随买随用")]):t._e()]),t._v(" "),e("div",[e("div",[t._v("￥"+t._s(a.market_price)),e("span",[t._v("起")])]),t._v(" "),e("div",[t._v("立即预定")])])])])])})),0),t._v(" "),0===t.listData.length&&t.loadStart?e("div",[e("p",{staticClass:"nullData"},[t._v("暂无可查询数据")])]):t._e()],1):t._e(),t._v(" "),t.viewShow?t._e():e("div",[e("div",{staticClass:"regionBox"},[e("p",[t._v("当前区域")]),t._v(" "),e("ul",[e("li",{on:{click:function(a){return t.regionSelect("北京")}}},[t._v("分类01")])])]),t._v(" "),e("div",{staticClass:"regionBox"},[e("p",[t._v("区域切换")]),t._v(" "),e("ul",[e("li",{on:{click:function(a){return t.regionSelect("上海")}}},[t._v("城市01")]),t._v(" "),e("li",[t._v("城市02")]),t._v(" "),e("li",[t._v("城市03")]),t._v(" "),e("li",[t._v("城市04")]),t._v(" "),e("li",[t._v("城市05")]),t._v(" "),e("li",[t._v("城市06")])])])])]),t._v(" "),e("div",{class:{divPut:1==t.dropDown,nothing:0==t.dropDown}},[e("div",{staticClass:"divPut2"},[e("ul",[t._l(t.isText,(function(a,i){return e("li",{key:i,on:{click:function(e){return t.detailData(a)}}},[t._v(t._s(a.goods_name))])})),t._v(" "),0===t.isText.length?e("li",{staticStyle:{"text-align":"center"}},[t._v("暂无搜索结果")]):t._e()],2)])]),t._v(" "),e("transition",{attrs:{name:"filtrate-mask"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.sideFiltrateModalShow,expression:"sideFiltrateModalShow"}],staticClass:"filtrate-modal-mask",on:{click:function(a){t.sideFiltrateModalShow=!1}}})]),t._v(" "),e("transition",{attrs:{name:"filtrate"}},[t.sideFiltrateModalShow?e("div",{ref:"sideFiltrateModal",staticClass:"filtrate-modal-wrapper"},[e("div",{staticClass:"box"},[e("h2",[t._v("分类")]),t._v(" "),e("ul",[e("li",[t._v("分类01")]),t._v(" "),e("li",[t._v("分类02")]),t._v(" "),e("li",[t._v("分类03")]),t._v(" "),e("li",[t._v("分类04")]),t._v(" "),e("li",[t._v("分类05")]),t._v(" "),e("li",[t._v("分类06")])])]),t._v(" "),e("div",{staticClass:"filtrate-btn"},[e("div",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),e("div",{on:{click:t.sure}},[t._v("确定")])])]):t._e()])],1)}),[],!1,null,"555552f9",null);a.default=o.exports}}]);