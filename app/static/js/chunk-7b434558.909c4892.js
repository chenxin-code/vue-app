(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b434558"],{"29c5":function(t,s,e){},6185:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"yj-coupon"},[a("nav-top",{attrs:{bgImg:e("db04")},on:{backEvent:function(s){return t.$router.go(-1)}}}),a("nav-content",[a("div",{staticClass:"coupon-box"},[a("div",{staticClass:"coupon-container"},[a("ul",{staticClass:"coupon-group"},t._l(t.couponList,(function(s,e){return a("li",{staticClass:"coupon-list",on:{click:function(s){return t.selectCoupon(e)}}},[a("div",{staticClass:"row-top"},[a("div",{staticClass:"price"},[a("span",{staticClass:"icon"},[t._v("￥")]),a("span",{staticClass:"num"},[t._v(t._s(s.skuFeatures[0]?s.skuFeatures[0].featureValue:""))])]),s.skuFeatures[1]&&s.skuFeatures[1].featureValue?a("div",{staticClass:"text"},[a("div",[t._v(t._s(s.skuFeatures[1]?s.skuFeatures[1].featureValue:0))])]):t._e()]),a("div",{staticClass:"row-bottom"},[a("div",{staticClass:"text"},[t._v(t._s(s.spuName))]),a("div",{staticClass:"price-box"},[a("PriceOrder",{attrs:{listitem:s}}),a("div",{staticClass:"select-icon"},[a("i",{staticClass:"icon iconfont",class:e==t.couponIdx?"mall-xuanzhong":"mall-weixuanzhong"})])],1)])])})),0)]),a("div",{staticClass:"flex-div"},[a("div",{staticClass:"label"},[t._v("购买数量")]),a("div",{staticClass:"content"},[a("SbxAdder",{attrs:{disabled:""},on:{"on-change":t._reSettleCart},model:{value:t.selectedNum,callback:function(s){t.selectedNum=s},expression:"selectedNum"}})],1)])]),a("div",{staticClass:"price-info"},[a("div",{staticClass:"flex-div"},[a("div",{staticClass:"label"},[t._v("商品金额")]),a("div",{staticClass:"content"},[t._v("￥"+t._s(t.occurData.amount))])]),a("div",{staticClass:"flex-div"},[a("div",{staticClass:"label"},[t._v("选择优惠券")]),a("div",{staticClass:"content"},[t.chooseCouponList.length?a("van-icon",{staticStyle:{"font-weight":"bold"},attrs:{name:"ellipsis",size:"25"}}):a("span",{staticClass:"empty"},[t._v("暂无优惠券")])],1)]),a("div",{staticClass:"flex-div"},[a("div",{staticClass:"label"},[t._v("应付金额")]),a("div",{staticClass:"content red"},[t._v("￥"+t._s(t.occurData.payAmount))])])]),t.mobileDetail?a("div",{staticClass:"terms"},[a("div",{staticClass:"terms-title"},[t._v("使用说明")]),a("div",{staticClass:"terms-content",domProps:{innerHTML:t._s(t.mobileDetail)}})]):t._e(),a("div",{staticClass:"terms"},[a("div",{staticClass:"terms-title"},[t._v("使用方式")]),a("div",{staticClass:"terms-content"},[a("img",{attrs:{src:e("fa10"),alt:""}})])]),a("div",{staticClass:"buy-now",on:{click:t.submit}},[t._v("立即购买")])])],1)},i=[],n=e("1da1"),c=(e("96cf"),e("4160"),e("159b"),e("590c")),o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"sbx-adder",class:{disabled:t.disabled}},[e("div",{staticClass:"btn-add",on:{click:function(s){return t.testNumber(t.value+1)}}},[e("van-icon",{attrs:{name:"plus"}})],1),e("div",{staticClass:"num"},[e("input",{ref:"inp",attrs:{disabled:t.disabled,type:"text"},domProps:{value:t.value},on:{input:function(s){return t.changeNumber(s.target.value)},blur:function(s){return t.testNumber(s.target.value)}}})]),e("div",{staticClass:"btn-minus",on:{click:function(s){return t.testNumber(t.value-1)}}},[e("i",{staticClass:"icon iconfont mall-jianhao"})])])},l=[],u=(e("a9e3"),e("ac1f"),e("5319"),{name:"sbx-adder",components:{},props:{value:{default:1},max:{type:Number,default:999},disabled:{type:Boolean,default:!1}},model:{prop:"value",event:"change"},methods:{changeNumber:function(t){this.$emit("change",t)},fetchChange:function(t){this.$emit("on-change",t)},testNumber:function(t){this.disabled||(t=Number((t+"").replace(/[^\d]/g,"")),t<1&&(t=1),t>this.max&&(t=this.max),this.changeNumber(t),this.fetchChange(t))}}}),r=u,d=(e("8f51"),e("0c7c")),p=Object(d["a"])(r,o,l,!1,null,"33f10f0b",null),v=p.exports,f={name:"yj-coupon",components:{SbxAdder:v,PriceOrder:c["a"]},data:function(){return{selectedNum:1,couponIdx:0,couponList:[],spuModels:[],chooseCouponList:[],occurData:{}}},computed:{detailData:function(){return this.couponList[this.couponIdx]},detailSpuModels:function(){return this.spuModels[this.couponIdx]},mobileDetail:function(){return this.detailSpuModels?this.detailSpuModels.mobileDetail:""}},methods:{getTabOrders:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(s){var e,a,i,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$Loading.open(),e={token:this.$store.state.login.token,productType:"515"},t.next=4,this.$http.post("/app/json/product_recharge/getRechargeProList",e);case 4:a=t.sent,i=a.data,0==i.status?(i.data.list.forEach((function(t){t.salePrice+="a";var s=n.$mallCommon.priceFromItem(t);t.dpedData=s})),this.couponList=i.data.list,this.spuModels=i.data.spuModels,i.data.list.length&&this._reSettleCart()):this.$Toast(i.info),this.$Loading.close();case 8:case"end":return t.stop()}}),t,this)})));function s(s){return t.apply(this,arguments)}return s}(),selectCoupon:function(t){this.couponIdx=t,this._reSettleCart()},_reSettleCart:function(){var t=this;this.$Loading.open();var s="/app/json/fee_life_order/settle",e={deliveryType:2};e.carts=[{number:this.selectedNum,skuId:this.detailData.skuId,storeOuCode:this.detailData.storeOuCode,selfActivityId:this.detailData.activityId,checked:1}],e.couNo=["-1"],this.$http.post(s,e).then((function(s){t.$Loading.close();var e=s.data;0==e.status?t.occurData=e.data.occur[0]:t.$Toast(e.info)}),(function(s){Loading.close(),t.$Toast("请求数据失败！")}))},submit:function(){var t=this;this.$Loading.open();var s={deliveryType:2};s.carts=[{number:this.selectedNum,skuId:this.detailData.skuId,storeOuCode:this.detailData.storeOuCode,selfActivityId:this.detailData.activityId,checked:1}],this.$http.post("/app/json/fee_life_order/submit",s).then((function(s){var e=s.data;0==e.status?t.$Toast("兑换成功"):t.$Toast(e.info),t.$Loading.close()}))}},created:function(){this.getTabOrders()}},h=f,m=(e("6df3d"),Object(d["a"])(h,a,i,!1,null,"05cfc2ac",null));s["default"]=m.exports},"6df3d":function(t,s,e){"use strict";e("86c1")},"86c1":function(t,s,e){},"8f51":function(t,s,e){"use strict";e("29c5")},db04:function(t,s,e){t.exports=e.p+"static/images/99721781406ba21e46405216d8c0c0e9.png"},fa10:function(t,s,e){t.exports=e.p+"static/images/8460c2c69df8896c5a1e9b3f3f0ecc67.jpg"}}]);