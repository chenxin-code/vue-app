(window.webpackJsonp=window.webpackJsonp||[]).push([[981],{"jF+5":function(t,i,e){"use strict";e.r(i);var a=e("L2JU"),s=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},n={data:function(){return{showInfo:!0,complete:!1,identifyInfo:"",driverInfo:"",isValid:"",checkStatus:""}},mounted:function(){this.__init()},methods:s({__init:function(){var t=this,i=this.checkIdentify(),e=this.checkDriverInfo(),a=this.getVehicleListByUserId(),s=this.checkcertificate();Promise.all([e,i,a,s]).then((function(){t.complete=!0}))},checkcertificate:function(){var t=this;this.$request.post("/app/json/user/checkcertificate").then((function(i){0===i.status?(t.checkStatus=i.data,t.setIdentifyState(t.$assign({},t.identifyState,{blackCheckVehicle:t.checkStatus.blackCheckVehicle,blackCheckDriving:t.checkStatus.blackCheckDriving})),t.$bridgefunc.vuexStorage(),console.log(t.checkStatus)):t.$Toast(i.info?i.info:"获取信息失败")}))},checkIdentify:function(){var t=this;this.$request.post("/app/json/user/checkIdentify").then((function(i){0===i.status?(t.identifyInfo=i.data,t.setIdentifyState(t.$assign({},t.identifyState,{idState:t.identifyInfo.isValid})),t.$bridgefunc.vuexStorage()):t.$Toast(i.info?i.info:"获取身份信息失败")}))},checkDriverInfo:function(){var t=this;this.$request.post("/app/json/user/checkDriverInfo").then((function(i){0===i.status?t.driverInfo=i.data:t.$Toast(i.info?i.info:"获取驾驶证信息失败")}))},getVehicleListByUserId:function(){var t=this;this.$request.post("/app/json/user/getVehicleListByUserId").then((function(i){if(0===i.status){var e=i.data?i.data:[];t.isValid="";for(var a=0;a<e.length;a++){var s=e[a];if(1==s.isValid){t.isValid=s.isValid;break}if(2==s.examineState){t.isValid=s.examineState;break}3==s.examineState&&(t.isValid=s.examineState)}}else t.$Toast(i.info?i.info:"获取车辆信息失败")}))},dealNum:function(t){return 18==t.length?((t=t.split("")).splice(2,14,"**************"),t.join("")):15==t.length?((t=t.split("")).splice(2,11,"***********"),t.join("")):void 0},openRealName:function(){3==this.identifyInfo.examineState?this.$router.push({path:"/audit-results",query:{examineMsg:this.identifyInfo.examineMsg,id:this.identifyInfo.id,source:"identify",num:this.driverInfo.driveCode,name:this.driverInfo.name}}):(""==this.identifyInfo||""==this.identifyInfo.isValid&&""==this.identifyInfo.examineState)&&this.$router.push({path:"/real-name-authentication",query:{num:this.driverInfo.driveCode}})},openDriving:function(){1==this.checkStatus.blackCheckDriving&&1!=this.identifyInfo.isValid?this.$Toast("请先完成实名认证！"):3==this.driverInfo.examineState?this.$router.push({path:"/audit-results",query:{examineMsg:this.driverInfo.examineMsg,id:this.driverInfo.id,source:"driver",num:this.identifyInfo.idcardNum,name:this.identifyInfo.name}}):""==this.driverInfo&&this.$router.push({path:"/driving-certification",query:{num:this.identifyInfo.idcardNum}})},openVehicle:function(){this.$router.push({path:"/vehicle-certification"})}},Object(a.d)(["setIdentifyState"])),computed:s({},Object(a.c)(["identifyState"])),components:{}},c=(e("jNTP"),e("KHd+")),o=Object(c.a)(n,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"certification"},[e("nav-top",{attrs:{title:"认证"},on:{backEvent:function(i){return t.$router.go(-1)}}}),t._v(" "),e("nav-content",{staticClass:"certification-container"},[t.complete?e("div",{staticClass:"table-view"},[1==t.checkStatus.checkIdentify?e("div",{staticClass:"table-view-cell item",on:{click:t.openRealName}},[e("div",{staticClass:"table-view-cell-text info"},[e("div",{staticClass:"left"},[t._v("实名认证")]),t._v(" "),""!=t.identifyInfo&&1==t.identifyInfo.isValid&&1==t.identifyInfo.examineState?e("div",{staticClass:"right"},[e("div",{staticClass:"name"},[t._v(t._s(t.identifyInfo.name))]),t._v(" "),e("div",{staticClass:"id-card"},[t._v(t._s(t.dealNum(t.identifyInfo.idcardNum)))])]):t._e(),t._v(" "),2==t.identifyInfo.examineState?e("div",{staticClass:"state-tips"},[t._v("审核中")]):t._e()]),t._v(" "),""==t.identifyInfo||""==t.identifyInfo.isValid&&""==t.identifyInfo.examineState?e("div",{staticClass:"table-view-cell-arrow status"},[t._v("未认证\n        ")]):t._e(),t._v(" "),3==t.identifyInfo.examineState?e("div",{staticClass:"table-view-cell-arrow status"},[t._v("审核未通过")]):t._e()]):t._e(),t._v(" "),1==t.checkStatus.checkDriving?e("div",{staticClass:"table-view-cell item",on:{click:t.openDriving}},[e("div",{staticClass:"table-view-cell-text info"},[e("div",{staticClass:"left"},[t._v("驾驶认证")]),t._v(" "),""!=t.driverInfo&&1==t.driverInfo.status&&1==t.driverInfo.examineState?e("div",{staticClass:"state-tips"},[t._v("\n            已认证\n          ")]):2==t.driverInfo.examineState?e("div",{staticClass:"state-tips"},[t._v("审核中")]):t._e()]),t._v(" "),""==t.driverInfo?e("div",{staticClass:"table-view-cell-arrow status"},[t._v("未认证")]):t._e(),t._v(" "),3==t.driverInfo.examineState?e("div",{staticClass:"table-view-cell-arrow status"},[t._v("审核未通过")]):t._e()]):t._e(),t._v(" "),1==t.checkStatus.checkVehicle?e("div",{staticClass:"table-view-cell item",on:{click:t.openVehicle}},[e("div",{staticClass:"table-view-cell-text info"},[t._v("车辆认证")]),t._v(" "),1==t.isValid?e("div",{staticClass:"table-view-cell-arrow status"},[t._v("已认证")]):2==t.isValid?e("div",{staticClass:"table-view-cell-arrow status"},[t._v("审核中")]):3==t.isValid?e("div",{staticClass:"table-view-cell-arrow status"},[t._v("审核未通过")]):e("div",{staticClass:"table-view-cell-arrow status"},[t._v("未认证")])]):t._e()]):t._e()])],1)}),[],!1,null,"6b3122e4",null);i.default=o.exports},jNTP:function(t,i,e){"use strict";var a=e("jTbu");e.n(a).a},jTbu:function(t,i,e){}}]);