(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"0Mx4":function(t,e,i){t.exports=i.p+"static/img/gps.9ced833.png"},"4roG":function(t,e){!function(){function t(e,i,n,s){this.c=e,this.d=i,this.h=n,this.g=s,this.b=t.b++,this.c.a=this.c.a||{},this.c.a[this.b]=this}window.EventWrapper=window.EventWrapper||{};var e=window.EventWrapper;e.addDomListener=function(e,i,n){return e.addEventListener?e.addEventListener(i,n,!1):e.attachEvent?e.attachEvent("on"+i,n):e["on"+i]=n,new t(e,i,n,t.e)},e.addDomListenerOnce=function(t,i,n){return e.j(t,i,(function(){return e.i(t,i,n),n.apply(this,arguments)}))},e.addListener=function(e,i,n){return e.addEventListener(i,n),new t(e,i,n,t.f)},e.addListenerOnce=function(t,i,n){var s=e.k(t,i,(function(){return e.i(s),n.apply(this,arguments)}));return s},e.clearInstanceListeners=function(t){var i,n=t.a||{};for(i in n)e.removeListener(n[i]);t.a={}},e.clearListeners=function(t,i){var n,s=t.a||{};for(n in s)s[n].d==i&&e.removeListener(s[n])},e.removeListener=function(e){var i,n=e.c,s=e.d,o=e.h,a=n.a||{};for(i in a)a[i].b==e.b&&(e.g==t.e?n.removeEventListener?n.removeEventListener(s,o,!1):n.detachEvent?n.detachEvent("on"+s,o):n["on"+s]=null:e.g==t.f&&n.removeEventListener(s,o),delete a[i])},e.trigger=function(t,e){var i,n=t.a||{};for(i in n)if(n[i].d==e){var s=Array.prototype.slice.call(arguments,2);n[i].h.apply(t,s)}},t.b=1,t.e=1,t.f=2}()},DL1S:function(t,e,i){"use strict";e.a={getServiceImgUrls:function(t){var e=[];return 1==t.cheerless&&e.push("static/image/station/service/cheerless.png"),1==t.recharge&&e.push("static/image/station/service/recharge.png"),1==t.cvs&&e.push("static/image/station/service/cvs.png"),1==t.cardService&&e.push("static/image/station/service/carservice.png"),1==t.water&&e.push("static/image/station/service/water.png"),1==t.cleaning&&e.push("static/image/station/service/cleaning.png"),1==t.carWash&&e.push("static/image/station/service/cleaning-careful.png"),2==t.carWash&&e.push("static/image/station/service/cleaning-normal.png"),1==t.manualCardSell&&e.push("static/image/station/service/normal-send.png"),1==t.selfHelpCardSell&&e.push("static/image/station/service/auto-normal.png"),1==t.toilet&&e.push("static/image/station/service/toilet.png"),1==t.maintain&&e.push("static/image/station/service/maintain.png"),1==t.food&&e.push("static/image/station/service/food.png"),1==t.hotWater&&e.push("static/image/station/service/hotwater.png"),1==t.selfService&&e.push("static/image/station/service/selfservice.png"),1==t.bacco&&e.push("static/image/station/service/bacco.png"),1==t.drinks&&e.push("static/image/station/service/drinks.png"),1==t.chargingPile&&e.push("static/image/station/service/chargingPile.png"),1==t.lpg&&e.push("static/image/station/service/LPG.png"),1==t.yehqgp&&e.push("static/image/station/service/yehqgp.png"),1==t.truck&&e.push("static/image/station/service/truck.png"),e}}},F9re:function(t,e,i){},FJhL:function(t,e){var i=window.BMapLib=i||{};!function(){var t,e,n=t=n||{version:"1.5.0"};n.guid="$BAIDU$",window[n.guid]=window[n.guid]||{},n.lang=n.lang||{},n.lang.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},n.lang.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},n.lang.Event=function(t,e){this.type=t,this.returnValue=!0,this.target=e||null,this.currentTarget=null},n.object=n.object||{},n.extend=n.object.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},n.event=n.event||{},n.event._listeners=n.event._listeners||[],n.dom=n.dom||{},n.dom._g=function(t){return n.lang.isString(t)?document.getElementById(t):t},n._g=n.dom._g,n.event.on=function(t,e,i){e=e.replace(/^on/i,""),t=n.dom._g(t);var s,o=function(e){i.call(t,e)},a=n.event._listeners,r=n.event._eventFilter,c=e;return e=e.toLowerCase(),r&&r[e]&&(c=(s=r[e](t,e,o)).type,o=s.listener),t.addEventListener?t.addEventListener(c,o,!1):t.attachEvent&&t.attachEvent("on"+c,o),a[a.length]=[t,e,i,o,c],t},n.on=n.event.on,n.event.un=function(t,e,i){t=n.dom._g(t),e=e.replace(/^on/i,"").toLowerCase();for(var s,o,a,r=n.event._listeners,c=r.length,l=!i;c--;)(s=r[c])[1]!==e||s[0]!==t||!l&&s[2]!==i||(o=s[4],a=s[3],t.removeEventListener?t.removeEventListener(o,a,!1):t.detachEvent&&t.detachEvent("on"+o,a),r.splice(c,1));return t},n.un=n.event.un,n.dom.g=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):t&&t.nodeName&&(1==t.nodeType||9==t.nodeType)?t:null},n.g=n.G=n.dom.g,n.dom._styleFixer=n.dom._styleFixer||{},n.dom._styleFilter=n.dom._styleFilter||[],n.dom._styleFilter.filter=function(t,e,i){for(var s,o=0,a=n.dom._styleFilter;s=a[o];o++)(s=s[i])&&(e=s(t,e));return e},n.string=n.string||{},n.string.toCamelCase=function(t){return t.indexOf("-")<0&&t.indexOf("_")<0?t:t.replace(/[-_][^-_]/g,(function(t){return t.charAt(1).toUpperCase()}))},n.dom.setStyle=function(t,e,i){var s,o=n.dom;return t=o.g(t),e=n.string.toCamelCase(e),(s=o._styleFilter)&&(i=s.filter(e,i,"set")),(s=o._styleFixer[e])&&s.set?s.set(t,i):t.style[s||e]=i,t},n.setStyle=n.dom.setStyle,n.dom.setStyles=function(t,e){for(var i in t=n.dom.g(t),e)n.dom.setStyle(t,i,e[i]);return t},n.setStyles=n.dom.setStyles,n.browser=n.browser||{},n.browser.ie=n.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,n.dom._NAME_ATTRS=(e={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"},n.browser.ie<8?(e.for="htmlFor",e.class="className"):(e.htmlFor="for",e.className="class"),e),n.dom.setAttr=function(t,e,i){return t=n.dom.g(t),"style"==e?t.style.cssText=i:(e=n.dom._NAME_ATTRS[e]||e,t.setAttribute(e,i)),t},n.setAttr=n.dom.setAttr,n.dom.setAttrs=function(t,e){for(var i in t=n.dom.g(t),e)n.dom.setAttr(t,i,e[i]);return t},n.setAttrs=n.dom.setAttrs,n.dom.create=function(t,e){var i=document.createElement(t),s=e||{};return n.dom.setAttrs(i,s)},t.undope=!0;var s=i.InfoBox=function(t,e,i){this._content=e||"",this._isOpen=!1,this._map=t,this._opts=i=i||{},this._opts.offset=i.offset||new BMap.Size(0,0),this._opts.boxClass=i.boxClass||"infoBox",this._opts.boxStyle=i.boxStyle||{},this._opts.closeIconMargin=i.closeIconMargin||"2px",this._opts.closeIconUrl=i.closeIconUrl||"close.png",this._opts.enableAutoPan=!!i.enableAutoPan,this._opts.align=i.align||1};s.prototype=new BMap.Overlay,s.prototype.initialize=function(t){var e=this,i=this._div=n.dom.create("div",{class:this._opts.boxClass});n.dom.setStyles(i,this._opts.boxStyle),i.style.position="absolute",this._setContent(this._content);var s=t.getPanes().floatPane;return s.style.width="auto",s.appendChild(i),this._getInfoBoxSize(),n.event.on(i,"onmousedown",(function(t){e._stopBubble(t)})),n.event.on(i,"onmouseover",(function(t){e._stopBubble(t)})),n.event.on(i,"click",(function(t){e._stopBubble(t)})),n.event.on(i,"dblclick",(function(t){e._stopBubble(t)})),i},s.prototype.draw=function(){this._isOpen&&this._adjustPosition(this._point)},s.prototype.open=function(t){var e,i=this;this._isOpen||(this._map.addOverlay(this),this._isOpen=!0,setTimeout((function(){i._dispatchEvent(i,"open",{point:i._point})}),10)),t instanceof BMap.Point?(e=t,this._removeMarkerEvt()):t instanceof BMap.Marker&&(this._marker&&this._removeMarkerEvt(),e=t.getPosition(),this._marker=t,!this._markerDragend&&this._marker.addEventListener("dragend",this._markerDragend=function(t){i._point=t.point,i._adjustPosition(i._point),i._panBox(),i.show()}),!this._markerDragging&&this._marker.addEventListener("dragging",this._markerDragging=function(){i.hide(),i._point=i._marker.getPosition(),i._adjustPosition(i._point)})),this.show(),this._point=e,this._panBox(),this._adjustPosition(this._point)},s.prototype.close=function(){this._isOpen&&(this._map.removeOverlay(this),this._remove(),this._isOpen=!1,this._dispatchEvent(this,"close",{point:this._point}))},s.prototype.enableAutoPan=function(){this._opts.enableAutoPan=!0},s.prototype.disableAutoPan=function(){this._opts.enableAutoPan=!1},s.prototype.setContent=function(t){this._setContent(t),this._getInfoBoxSize(),this._adjustPosition(this._point)},s.prototype.setPosition=function(t){this._point=t,this._adjustPosition(t),this._removeMarkerEvt()},s.prototype.getPosition=function(){return this._point},s.prototype.getOffset=function(){return this._opts.offset},s.prototype._remove=function(){this.domElement&&this.domElement.parentNode&&(n.event.un(this._div.firstChild,"click",this._closeHandler()),this.domElement.parentNode.removeChild(this.domElement)),this.domElement=null,this._isOpen=!1,this.dispatchEvent("onremove")},n.object.extend(s.prototype,{_getCloseIcon:function(){return"<img src='"+this._opts.closeIconUrl+"' align='right' style='position:absolute;right:0px;cursor:pointer;margin:"+this._opts.closeIconMargin+"'/>"},_setContent:function(t){if(this._div){var e=this._getCloseIcon();void 0===t.nodeType?this._div.innerHTML=e+t:(this._div.innerHTML=e,this._div.appendChild(t)),this._content=t,this._addEventToClose()}},_adjustPosition:function(t){var e=this._getPointPosition(t),i=this._marker&&this._marker.getIcon();switch(this._opts.align){case 1:this._marker?this._div.style.bottom=-(e.y-this._opts.offset.height-i.anchor.height+i.infoWindowAnchor.height)-this._marker.getOffset().height+2+"px":this._div.style.bottom=-(e.y-this._opts.offset.height)+"px";break;case 3:this._marker?this._div.style.top=e.y+this._opts.offset.height-i.anchor.height+i.infoWindowAnchor.height+this._marker.getOffset().height+"px":this._div.style.top=e.y+this._opts.offset.height+"px"}this._marker?this._div.style.left=e.x-i.anchor.width+this._marker.getOffset().width+i.infoWindowAnchor.width-this._boxWidth/2+"px":this._div.style.left=e.x-this._boxWidth/2+"px"},_getPointPosition:function(t){return this._pointPosition=this._map.pointToOverlayPixel(t),this._pointPosition},_getInfoBoxSize:function(){this._boxWidth=parseInt(this._div.offsetWidth,10),this._boxHeight=parseInt(this._div.offsetHeight,10)},_addEventToClose:function(){n.event.on(this._div.firstChild,"click",this._closeHandler()),this._hasBindEventClose=!0},_closeHandler:function(){var t=this;return function(e){t.close()}},_stopBubble:function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0},_panBox:function(){if(this._opts.enableAutoPan){var t=parseInt(this._map.getContainer().offsetHeight,10),e=parseInt(this._map.getContainer().offsetWidth,10),i=this._boxHeight,n=this._boxWidth;if(!(i>=t||n>=e)){this._map.getBounds().containsPoint(this._point)||this._map.setCenter(this._point);var s,o,a,r=this._map.pointToPixel(this._point),c=n/2-r.x,l=n/2+r.x-e;if(this._marker)var h=this._marker.getIcon();switch(this._opts.align){case 1:var p=this._marker?h.anchor.height+this._marker.getOffset().height-h.infoWindowAnchor.height:0;s=i-r.y+this._opts.offset.height+p+2;break;case 3:p=this._marker?-h.anchor.height+h.infoWindowAnchor.height+this._marker.getOffset().height+this._opts.offset.height:0,o=i+r.y-t+p+4}panX=c>0?c:l>0?-l:0,a=s>0?s:o>0?-o:0,this._map.panBy(panX,a)}}},_removeMarkerEvt:function(){this._markerDragend&&this._marker.removeEventListener("dragend",this._markerDragend),this._markerDragging&&this._marker.removeEventListener("dragging",this._markerDragging),this._markerDragend=this._markerDragging=null},_dispatchEvent:function(t,e,i){0!=e.indexOf("on")&&(e="on"+e);var s=new n.lang.Event(e);if(i)for(var o in i)s[o]=i[o];t.dispatchEvent(s)}})}()},FhgC:function(t,e,i){"use strict";var n=i("NaRj");i.n(n).a},M8O0:function(t,e,i){"use strict";i.r(e);var n=i("dqDD"),s=i("Wz/m"),o=i("CctC"),a=(i("4roG"),i("tfLl")),r=i("DL1S"),c=i("2nGb"),l=i("8ujH"),h=i.n(l),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d={dictValue:"all",alias:"全部",_type:0},g={name:"home-stationto",components:{Toast:n.Toast,oilStationList:s.default,Navigation:a.a},props:{hasBack:{type:Boolean,default:!0}},data:function(){return{bdMap:null,stations:[],nowmk:null,openListener:null,pageOn:0,isBottomBounce:!0,isShowSearch:!1,searchText:null,isActive:!1,dataList:[],searchHistoryArr:[],isOpenLocation:-1,mode:[d],tags:[],loadedTimes:0,randomId:"",mapslogo:"static/image/station/mapslogo.png",mapslogo1:"static/image/station/mapslogo1.png",mapslogoTruck:"static/image/station/maplogo_truck.png"}},created:function(){this.randomId=this.randomString(),this.$store.state.globalConfig.mapslogo&&this.$store.state.globalConfig.mapslogo.length&&(this.mapslogo=this.$store.state.globalConfig.mapslogo),this.$store.state.globalConfig.mapslogo1&&this.$store.state.globalConfig.mapslogo1.length&&(this.mapslogo1=this.$store.state.globalConfig.mapslogo1)},mounted:function(){var t=this;this.initHistory(),this.$nextTick((function(){t.pageInit()})),this.queryMarks(),this.debounceQueryLocation=this.$util.debounce(this.queryLocation,500)},watch:{searchText:function(t,e){this.initHistory(),this.debounceQueryLocation(t)}},beforeRouteLeave:function(t,e,i){this.$keepaliveHelper.deleteCache(this),i()},methods:{searchEntery:function(){this.searchText&&this.debounceQueryLocation(curVal)},randomString:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(new Date).getTime()+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},pageInit:function(){var t=this;this.$bridgefunc.checkLocationAuth(t.pageInit).then((function(e){Object(o.a)().then((function(n){t.loadBd(n),t.getLocation(n,e),i("FJhL"),t.loadedTimes++,1==t.loadedTimes&&setTimeout((function(){""==window.document.getElementById(t.randomId).innerHTML&&(console.log("地图空白，重新初始化！"),t.pageInit())}),200)})),t.isOpenLocation=1}),(function(){t.isOpenLocation=0,t.$Toast("请您开启GPS定位附近中国石化加油站")}))},settingLocation:function(){this.$bridgefunc.requestPermissions()},cancelEvent:function(){this.searchText?this.searchText=null:this.isShowSearch=!1},searchBackEvent:function(){this.isShowSearch=!1},_moveFunc:function(t){this.searchText="",this.isActive=!0},focusFunc:function(){this.isActive=!1},backMap:function(t){this.stations=[],this.setHistoryItems(t.name),this.$store.state.selectp.lat=t.location.lat,this.$store.state.selectp.lng=t.location.lng;var e=this;this.$bridgefunc.vuexStorage((function(){e.searchBackEvent()})),this.newGet()},setHistoryItems:function(t){t=t.trim();var e=localStorage.searchHistory;if(e){var i=e.split("|").filter((function(e){return e!=t}));i.length>=6&&i.pop(),i.length>0&&(e=t+"|"+i.join("|")),localStorage.searchHistory=e}else localStorage.searchHistory=t},initHistory:function(){var t=window.localStorage.getItem("searchHistory");this.searchHistoryArr=t?t.split("|"):[]},historyClick:function(t){this.searchText=t},clearHistory:function(){this.searchHistoryArr=[],window.localStorage.searchHistory=""},backEvent:function(){this.$router.go(-1)},newGet:function(){if(this.$store.state.selectp.lng&&""!=this.$store.state.selectp.lng){var t=new BMap.Point(this.$store.state.selectp.lng,this.$store.state.selectp.lat);this.getNearStations(t)}},loadBd:function(t){this.bdMap=new t.Map(this.randomId),this.bdMap.centerAndZoom(new t.Point(116.404,39.915),10),console.log("map.getZoom()"),console.log(this.bdMap.getZoom()),this.bdMap.addControl(new t.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),this.bdMap.addEventListener("click",(function(){})),this.bdMap.enableScrollWheelZoom(!0)},getLocation:function(t,e){console.log("getLocation"),e.city&&""!=e.city||(e.province=this.$store.state.globalConfig.province,e.city=this.$store.state.globalConfig.city,e.district=this.$store.state.globalConfig.district,e.longitude=this.$store.state.globalConfig.longitude,e.latitude=this.$store.state.globalConfig.latitude),console.log("locationinfo",e),this.locationinfo=e;var i=new t.Point(e.longitude,e.latitude);this.getNearStations(i)},addNewLocations:function(){for(var t=this.bdMap.getOverlays(),e=0;e<t.length;e++){var n=t[e];n!=this.nowmk&&this.bdMap.removeOverlay(n)}if(this.stations){for(var s=0;s<this.stations.length;s++){var o=this.stations[s];o.startlong=this.nowmk.point.lng,o.startlat=this.nowmk.point.lat;var a,r=new BMap.Point(o.lng,o.lat);a=1==o.truck?new BMap.Icon(this.mapslogoTruck,new BMap.Size(23,30)):o.stationStatus&&"02"!=o.stationStatus?new BMap.Icon(this.mapslogo1,new BMap.Size(23,30)):new BMap.Icon(this.mapslogo,new BMap.Size(23,30));var c=new BMap.Marker(r,{icon:a});this.bdMap.addOverlay(c),h(o,c)}var l=this}function h(t,e){e.addEventListener("click",(function(){!function(t){var e=new BMap.Point(t.lng,t.lat),n=t.mktActivityList||[],s=i("SnK/"),o="";o+="<div class='info-box'>",o+="<span class='info-box-btn' id='closeBtn'></span>",o+="<span class='arrow'></span>",o+="<div class='title'>",o+="<p class='name'>"+t.stationName+"</p>",o+='<div class="distance"><img class="img" src="'+s+'"> '+(Number(t.distance)/1e3).toFixed(2)+" km</div>",o+='<div class="service-icon">';for(var a=0;a<t.serviceUrls.length;a++)o+='<img class="img" src="'+t.serviceUrls[a]+'" alt="">';o+="</div>",t.closingTime&&t.opningTime&&(o+="<p class='time'>"+t.opningTime+"-"+t.closingTime+"</p>"),o+="</div>",o+="<ul class='discount-list'>";for(var r=0;r<n.length;r++)o+="<li class='discount-item'>",o+="<span class='icon theme_bg_red'>"+n[r].activityType+"</span>",o+="<span class='text'>"+n[r].activityTitle+"</span>",o+="</li>";0===n.length&&(o+="<li class='no-data'>暂无优惠活动~</li>"),o+="</ul>",o+="</div>",l.infoBox&&(l.infoBox.close(),l.infoBox=null),l.infoBox=new BMapLib.InfoBox(l.bdMap,o,{enableAutoPan:!0}),l.infoBox.open(e),l.openListener&&EventWrapper.removeListener(l.openListener),l.openListener=EventWrapper.addListener(l.infoBox,"open",(function(t){l.$nextTick((function(){EventWrapper.addDomListener(document.getElementById("closeBtn"),"touchstart",(function(){l.infoBox.close()}))}))}))}(t)}))}},searchMore:function(){this.searchText=null,this.isShowSearch=!0},getNearStations:function(t){console.log("nowpoint",t),this.resetCondition(),this.nowmk&&this.bdMap.removeOverlay(this.nowmk),this.nowmk=new BMap.Marker(t),this.bdMap.addOverlay(this.nowmk),this.bdMap.centerAndZoom(t,14),this.requestStations()},requestStations:function(t){var e=this;this.$Loading.open(),this.pageOn++;var i="/app/json/station/getStationMoreInfoList",n=this.$util.bd_decrypt(this.nowmk.point.lng,this.nowmk.point.lat),s={posx:n.gg_lon,posy:n.gg_lat,tags:"youzhan",page:{index:this.pageOn,pageSize:12},token:this.$store.state.login.token,getType:"1"},o=this.$route.query,a=o.stationType,c=o.RefuelGsOuCode,l=o.RefuelGsOuCodeOp;"coupon"===a&&(i="/app/json/station/getStationList",s.RefuelGsOuCode=c,s.RefuelGsOuCodeOp=l),this.mode.length&&this.mode.forEach((function(t){"all"!=t.dictValue&&(1===t._type?s.selfOil=t.dictValue:2===t._type&&(s[t.dictValue]=1))})),s.distLess=this.$store.state.refuelStation.distLess,console.log("params1",s),this.$http.post(i,s).then((function(i){e.$Loading.close();var n=i.data,s=n.data||[];if(0==n.status){for(var o=0;o<s.length;o++){var a=s[o];a.serviceUrls=r.a.getServiceImgUrls(a),a.lng=a.posx,a.lat=a.posy}e.stations=e.stations.concat(s.map((function(t){return t.visible=!1,t}))||[]),e.stations.length>=n.totalRecords&&(e.isBottomBounce=!1),e.addNewLocations()}else e.$Toast(n.info);t&&t("done")}),(function(i){t&&t("done"),e.$Loading.close(),e.$Toast("请求错误")}))},gotoStation:function(t){this.$bridgefunc.baiduNav({startlong:this.locationinfo.longitude,startlat:this.locationinfo.latitude,endlong:t.posx,endlat:t.posy,txlong:t.txPosx,txlat:t.txPosy,type:"nav"})},locationStation:function(t){this.bdMap.centerAndZoom(new BMap.Point(t.posx,t.posy),15)},pushToDetail:function(t){this.$router.push({path:"/oilstationdetail",query:{startlong:this.nowmk.point.lng,startlat:this.nowmk.point.lat}})},searchMode:function(t){var e=this._findIndex(this.mode,t);e>-1?"all"!==t.dictValue&&this.mode.length>1&&this.mode.splice(e,1):"all"===t.dictValue?this.mode=[d]:(this._findIndex(this.mode,d)>-1&&(this.mode=[]),this.mode.push(t)),this.resetCondition(),this.requestStations()},downFilter:function(){this.resetCondition(),this.requestStations()},_findIndex:function(t,e){return t.findIndex((function(t){return t.dictValue===e.dictValue}))},resetCondition:function(){this.pageOn=0,this.isBottomBounce=!0,this.stations=[]},queryLocation:function(t){if(t){var e="https://api.map.baidu.com/place/v2/suggestion?query="+t+"&region="+(this.$store.state.indexData.province||131)+"&output=json&ak="+c.a.mapak,i=this;h()(e,null,(function(t,e){t?console.error(t.message):i.dataList=e.result}))}else this.dataList=[]},queryMarks:function(){var t=this;this.$request.post("/app/json/station/queryOilMarks").then((function(e){0===e.status&&(e.data&&e.data.forEach((function(e){"object"===(void 0===e?"undefined":p(e))&&(e._type=1,t.tags.push(e))})),t.$request.post("/app/json/station/queryServMarks").then((function(e){0===e.status&&e.data&&e.data.forEach((function(e){"object"===(void 0===e?"undefined":p(e))&&(e._type=2,t.tags.push(e))})),t.tags.length&&t.tags.unshift(d)})))}))}}},u=(i("FhgC"),i("KHd+")),m=Object(u.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mapbot"},[n("nav-top",{attrs:{noBack:!t.hasBack,title:"油站导航"},on:{backEvent:t.backEvent}}),t._v(" "),n("nav-content",[1===t.isOpenLocation?[n("div",{ref:"mapBxo",staticClass:"map-box"},[n("div",{staticClass:"allmap",attrs:{id:t.randomId}}),t._v(" "),n("div",{staticClass:"mapmore"},[n("div",{staticClass:"searchdiv"},[n("div",{staticClass:"getlocation"},[n("img",{staticClass:"locationimg",attrs:{src:i("k3Ka"),alt:""},on:{click:t.pageInit}})]),t._v(" "),n("div",{staticClass:"getmore",on:{click:t.searchMore}},[n("img",{staticClass:"search",attrs:{src:"static/image/station/search.png",alt:""}}),t._v(" "),t.searchText?n("span",{staticClass:"black-text"},[t._v(t._s(t.searchText))]):n("span",[t._v("输入地点或商区名称")])])])])]),t._v(" "),n("oil-station-list",{ref:"stationList",attrs:{searchText:t.searchText,mode:t.mode,tags:t.tags,stations:t.stations,stationType:t.$route.query.stationType,isBottomBounce:t.isBottomBounce},on:{requestStations:t.requestStations,gotoStation:t.gotoStation,locationStation:t.locationStation,searchMode:t.searchMode,downFilter:t.downFilter,pushToDetail:t.pushToDetail}})]:t._e(),t._v(" "),0===t.isOpenLocation?[n("div",{staticClass:"no-gps-container"},[n("img",{staticClass:"img",attrs:{src:i("0Mx4"),alt:""}}),t._v(" "),n("p",{staticClass:"msg"},[t._v("【请您开启GPS定位附近中国石化加油站】")]),t._v(" "),n("div",{staticClass:"refresh",on:{click:t.settingLocation}},[n("span",{staticClass:"btn"},[t._v("去设置")])])])]:t._e()],2),t._v(" "),t.isShowSearch?n("div",{staticClass:"search-container"},[n("div",{staticClass:"searchmorebot"},[n("div",{staticClass:"qrcode-top ",style:{height:this.$store.state.barHeight+44+"px"},on:{backEvent:t.searchBackEvent}},[n("div",{staticClass:"navcontent",style:{top:this.$store.state.barHeight+"px",height:"44px"}},[n("div",{on:{click:t.searchBackEvent}},[n("i",{staticClass:"iconfont mall-fanhui theme_font_black"})]),t._v(" "),n("div",{staticClass:"search-div"},[n("img",{staticClass:"searchimg",attrs:{src:"static/image/station/search.png",alt:""}}),t._v(" "),n("div",{staticClass:"form-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"input-none",attrs:{type:"search",placeholder:"输入地点或商区名称"},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchEntery(e)},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"cancel",on:{click:t.cancelEvent}},[t._v("取消")])])]),t._v(" "),n("div",{staticClass:"history-wrapper",style:{top:this.$store.state.barHeight+44+"px"}},[!t.searchText&&t.searchHistoryArr[0]?n("div",{staticClass:"history-container"},[n("p",{staticClass:"his-title"},[t._v("搜索历史"),n("i",{staticClass:"clear-btn iconfont mall-shanchu theme_font_gray_i",on:{click:t.clearHistory}})]),t._v(" "),n("ul",{staticClass:"his-item-container clearfix"},t._l(t.searchHistoryArr,(function(e,i){return n("li",{key:i,on:{click:function(i){return t.historyClick(e)}}},[t._v(t._s(e)+"\n            ")])})),0)]):n("div",{staticClass:"listcontent"},t._l(t.dataList,(function(e){return n("div",{staticClass:"list-item",on:{click:function(i){return t.backMap(e)}}},[n("div",{staticClass:"list_name theme_font_black"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"list_location theme_font_tint"},[t._v(t._s(e.province+e.city+e.district)+"\n            ")])])})),0)])])]):t._e()],1)}),[],!1,null,null,null);e.default=m.exports},NaRj:function(t,e,i){},cnNK:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABTUlEQVRIS73Uvy5FQRDH8e+v0SoRCYlKo9GJF7ghCpVKxSNolZ5ColPphAKJCCFqjdpTiJCMTLI32dzYe87+ObY/+zkzv9kRjY+ZzQALkj6mXa2WrpmtA1fAPHAs6SR1fzM4oPfAbMBeJW0MCv+BGrAn6WIwOIHuSzofLONS1H+oOOMatBiuRYvgFmg23ArNghPooaSzkiXUa7hao70qNrM14CnaSL4ciisdd2dqxQF9i1rZBO2s2Mwcis9BaaaTc9BV8SS8KemlZJhy4VXgPfroE9iS9FCLd061ma0Aj8BiwL6AUS3eCTtmZsvAc0u8FzwE3htujWfBEe6ZL0WZ70i6yxm4bDjgPmj+rMb4N7CdgxfBLfBiOMK97f7k/PSuvAoO+Fxoe4zvSrqelnk1nMB/Qua3KbwJnMBvJI0GhyP8FPAdfyTp8l/gnHf8C8iaph82lunDAAAAAElFTkSuQmCC"},k3Ka:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI5QjNDMjY4RkY0RjExRTg5MDQ5RUY3N0QzQzAzMUQzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM3REJCQjQ4RkY0RjExRTg5MDQ5RUY3N0QzQzAzMUQzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjlCM0MyNjZGRjRGMTFFODkwNDlFRjc3RDNDMDMxRDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjlCM0MyNjdGRjRGMTFFODkwNDlFRjc3RDNDMDMxRDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6rfusxAAAEP0lEQVR42txZPUwUQRTe27vEKASVxspGAogSgYKfYEEndhBLBDQEFQrRxJ9CEwsKCpVEoYAoEoGT7hKwEjoagqIxGlCESKGVhRc1iDER8BvyDXmuu97e3PLnS77c3OzOe9++fTPz3mxoygpbKUgmUEHkAznsS+P170AcmAWmgDEirhUcXvmVlMGQAWE1oBpoAI4BkSTHK4ajQC8wBMJL60U4BNQBN4AsKxh5D7QCAyC+EiRh9brvA2Uu114DI8BT4B1QD1zhtVtAP5ALlAKVwBEXHRNAI0hPJyJi+yDbBDx3kP0KtDNmC4CrQIxxuijuW2RfjPcUcEw7dWhRul9MhyJNqRBW1zqALmAH+5Zo7ABwGZgzCIM5js2iLh3DykYXSHcAdrKEVf8AcF70zQDFNBYPIH4/U1cxdWtRNge8SHsRvgPUiP+PqfilFbAgbl9S92PRXUMOvgg3OTwbBU4AC9Y6CUgv0EZUetotpm2X1UA+2TBwWsSZtY6kl2hrWL5pkD7sRTjEpUtPsLdArQHZbx5tv6RraVtPxB6QDrkRrhNL1xLjyCQMern29rNtEh41wlFl5PbHxhHmoq93sHbOYGsDQsG1H169jZ9LYkfMVW9Ae7hakFULepu1+dImNpcsclwLiQZxY09A62yqno+TiyU5qpBQ6eAnkXXlGO5ggYYEwyKbqanO8vbZzGU12VcbSdbHw8wxubLIsSJCwlpGArBzEDgKqHRx3LHtmsgTkeGtEs4XF5+loHgXcA846eh/BJx1ZHHJiOSUH2HMWmKzMBU3spboqzXUKznlqEm3IGqwm8CPf+xgaiP44hEGiR42zyM89nAFyPAYt5O59GqNGBFkLXHBS1QCfsqlv9yHp8o9CN9lleJH0mxrm0mEpXgyIeEm4z5sed1zgcupr5BQMfwBjf166QPeGD581GPS6ZWiNtmNg5vHIfXDvx9tsZPoyWMqZ0nM8ljWTCVPtGdtVrVaSlNQvEgvKo80EnnsW0xBb4loT9k8OtJSGcC8UMvbA2ImAH3HRXtsWyY/cZ51yVjcKnJOtEdVymmLskbLGWDvZjOFdzM5D2TptZbAD7EMUbIbuL4FvHuNXHSJNCQJq4KvVdx8ESg0NKRygz5ij6F3C8lBS6s+lpVbszqammBbFaWDQLqBvQbmBvWO0ssv2XTa1seqE+T2V5m/wvj9KRbsqBjoVzI82n7IhmlTbxaKS6M8O3YmP1OOV1EFPDQgbRIGYdqqkqHpPDN2y9a6gU7xX+1UMcPwSCYMYo58oxNkuxOdrclJN+jw9CRQtA5ki6hbenbQ8aYTEl7m8VCnIzFSitWJTGYAXDOpa9KRdCmbdfDucjKENekWoFlMxDCPj+ZpLNuAaDbHzlNXWEywZhBt8SIrz9YSSaKPMk9Y3c6whJIfZfrowRImMil9lPlvP3tJ2TYfFr0mzoZ+uv0twADDBE8I9mhJ7gAAAABJRU5ErkJggg=="},k5RN:function(t,e,i){"use strict";var n=i("F9re");i.n(n).a},tfLl:function(t,e,i){"use strict";var n=(i("k5RN"),i("KHd+")),s=Object(n.a)({name:"",props:["title","hasBack"],data:function(){return{}},methods:{backEvent:function(){this.$emit("backEvent","")},getTotalHeight:function(){return"height:"+(this.$store.state.barHeight+this.$market.getNavHeight())+"px;"}},created:function(){}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigation",style:t.getTotalHeight()},[n("div",{staticClass:"navigation-content",style:{top:this.$store.state.barHeight+"px"}},["1"==t.hasBack?n("div",{staticClass:"back-div",on:{click:function(e){return t.backEvent()}}},[n("img",{staticClass:"back-img",attrs:{src:i("cnNK")}})]):t._e(),t._v(" "),n("div",{staticClass:"page-title"},[t._v(t._s(t.title))])])])}),[],!1,null,"2a7ccb57",null);e.a=s.exports}}]);