(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-373b62d8"],{"20aa":function(e,t,a){},"4d8d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gestures-pwd-set"},[a("nav-top",{attrs:{title:"刷脸支付"},on:{backEvent:e.backEvent}}),a("nav-content",{staticClass:"gestures-pwd-set-container"},[a("div",{staticClass:"table-view list"},[a("div",{staticClass:"table-view-cell item"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[e._v("开启刷脸支付")]),a("div",{staticClass:"right"},[a("van-switch",{attrs:{size:"20px","active-color":"#F80F16"},on:{change:e.change},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)])])])])],1)},n=[],i=a("1da1"),o=(a("96cf"),a("0d03"),a("efff")),c=a("19e7"),d={data:function(){return{digitalPWD:"",facePayPwdState:"",defaultPayPwdMode:"",checked:!1,state:0}},mounted:function(){this.defaultPayPwdMode=this.$route.query.defaultPayPwdMode,this.facePayPwdState=this.$route.query.facePayPwdState,this.checked=13==this.defaultPayPwdMode,this.state=13==this.defaultPayPwdMode?1:0},destroyed:function(){o["a"].close()},methods:{backEvent:function(){this.$router.go(-1)},change:function(){var e=this;1==this.state?this.closeUserSpecialPayPwd():0==this.facePayPwdState?this.$bridgefunc.fingerPrintRe((function(t){"1"==t?e.setUserSpecialPayPwd(13):(e.checked=!1,e.$Toast("面部识别失败"))})):o["a"].open({initData:{payPwdState:2,title:"开启刷脸支付",tips:"请先输入6位数字支付密码已验证身份"},toSettingPwd:function(){e.$router.push({path:"/usercenter/nosetpwd",query:{isSet:2}}),o["a"].close()},inputFinished:function(t){e.digitalPWD=t,o["a"].close(),e.$bridgefunc.fingerPrintRe((function(t){"1"==t?e.openUserSpecialPayPwd(13,e.digitalPWD):(e.checked=!1,e.$Toast("面部识别失败"))}))}})},closeUserSpecialPayPwd:function(){var e=this;this.$request.post("/app/json/user/closeUserSpecialPayPwd",{payPwdMode:13}).then((function(t){0===t.status?(e.$Toast("刷脸支付关闭成功"),e.checked=!1):(e.checked=!0,e.$Toast(t.info?t.info:"刷脸支付关闭失败"))}))},setUserSpecialPayPwd:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,n,i,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$bridgefunc.getArgsWithPromise();case 2:s=a.sent,t.$Loading.open("请求中"),n="/app/json/user/setUserSpecialPayPwd",i=t.$store.state.login.token,o=(new Date).valueOf(),c={token:i,payPwdMode:e,userPayPwd:o,deviceId:s.deviceId},t.$http.post(n,c).then((function(e){t.$Loading.close();var a=e.data;0==a.status?(t.$store.state.pwdStates.facePwd=a.data,t.$bridgefunc.vuexStorage(),t.checked=!0,t.$Toast({message:a.info?a.info:"打开成功！",position:"bottom",duration:2e3}),t.checked=!0):(t.checked=!1,t.$Toast({message:a.info?a.info:"打开失败！",position:"bottom",duration:2e3}))}),(function(e){t.checked=!1,t.$Loading.close(),t.$Toast({message:"打开失败！",position:"bottom",duration:2e3})}));case 9:case"end":return a.stop()}}),a)})))()},openUserSpecialPayPwd:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n,i,o,d;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a.$bridgefunc.getArgsWithPromise();case 2:n=s.sent,a.$Loading.open("请求中"),i="/app/json/user/openUserSpecialPayPwd",o=a.$store.state.login.token,d={token:o,payPwdMode:e,userPayPwd:a.$store.state.pwdStates.facePwd,deviceId:n.deviceId,originalPwd:Object(c["a"])(t)},a.$http.post(i,d).then((function(e){a.$Loading.close();var t=e.data;0==t.status?(a.$store.state.pwdStates.touchPwd=t.data,a.$bridgefunc.vuexStorage(),a.checked=!0,a.$Toast({message:t.info?t.info:"打开成功！",position:"bottom",duration:2e3}),a.checked=!0):(a.checked=!1,a.$Toast({message:t.info?t.info:"打开失败！",position:"bottom",duration:2e3}))}),(function(e){a.checked=!1,a.$Loading.close(),a.$Toast({message:"打开失败！",position:"bottom",duration:2e3})}));case 8:case"end":return s.stop()}}),s)})))()}},components:{}},r=d,u=(a("ebe7"),a("0c7c")),f=Object(u["a"])(r,s,n,!1,null,"60d5394d",null);t["default"]=f.exports},ebe7:function(e,t,a){"use strict";a("20aa")}}]);