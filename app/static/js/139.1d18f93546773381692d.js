(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{"1AQE":function(t,e,s){},"6JyR":function(t,e,s){"use strict";s("5+UC");var a=s("05lO"),i={props:["detail"],name:"",mixins:[s("eX/C").a],components:{},data:function(){return{answerList:[],randomId:null,commitModel:!1,showFlag1:!1,mktAwardList:[],prize:{},hasPrize:null,toEvaluatedNum:null,limitOrderDayNum:null}},computed:{placeHolder:function(){var t=this,e=null;return this.answerList.length>0&&this.answerList.forEach((function(s,a){5==s.kindId&&(console.log(s),e=JSON.parse(t.answerList[a].options)[0].placeHolder)})),e}},methods:{seeView:function(t,e){console.log(t);var s="";if("20030"==t)this.$market.enterGamesFunc({gameTypeCode:e},!0);else if("20010"==t)s="/usercenter/rebatebonus";else if("20020"==t)s="/mall2/integralinfo";else if("20001"==t&&-1!=(s=this.$store.state.globalConfig.questionaire_prize_coupon_list||"/coupon_list").indexOf("uhuitong.com"))return void this.$market.enterNav({link:{type:"3",url:s,useOldProtocal:!0}});this.$router.push({path:s,query:{}})},evaluateData:function(t,e){var s=this.answerList[t];1==s.result?s.evaluate="非常差":2==s.result?s.evaluate="差":3==s.result?s.evaluate="一般":4==s.result?s.evaluate="满意":5==s.result&&(s.evaluate="非常满意")},closeBtn:function(){this.toEvaluatedNum>0?(this.commitModel=!0,this.$router.push({path:"/evaluatelist"})):this.commitModel=!1},commit:function(){this.sub()},sub:function(){var t=this,e=this,s=[];e.answerList.forEach((function(t){s.push({kindId:t.kindId,configId:t.configId,subjectId:t.id,kindName:t.kindName,options:t.options,title:t.title,styleType:t.styleType,orderNo:e.detail.marketOrderNo,result:t.result?t.result.toString():""})})),console.log(s,"params");var i=!0;if(e.answerList.forEach((function(t){1==t.mustAnswer&&""==t.result&&(i=!1)})),i){var o=!0;if(e.answerList.forEach((function(t,s){5==t.kindId&&(t.limitMin&&!t.limitMax&&t.result.length<t.limitMin&&(e.tip="第"+(s+1)+"题简答题最少输入"+t.limitMin+"个字",o=!1),t.limitMax&&!t.limitMin&&t.result.length>t.limitMax&&(e.tip="第"+(s+1)+"题简答题最多输入"+t.limitMax+"个字",o=!1),t.limitMin&&t.limitMax&&(t.result.length>=t.limitMin&&t.result.length<=t.limitMax?o=!0:(e.tip="第"+(s+1)+"题简答题字数限制在"+t.limitMin+"至"+t.limitMax+"之间",o=!1)))})),o){e.$Loading.open();var n=Object.assign({resultJson:JSON.stringify(s),id:e.details.id,orderId:e.detail.marketOrderNo});e.commitData(n).then((function(s){if(e.$Loading.close(),console.log(666),"success"===s.data.result){Object(a.a)("提交成功");var i={id:e.details.id,orderId:e.detail.marketOrderNo};e.$Loading.open(),e.prizeData(i).then((function(s){e.$Loading.close(),"success"===s.data.result?(e.mktAwardList=s.data.data.mktAwardList||[],e.mktAwardList.length>0?t.showFlag1=!0:t.showFlag1=!1,t.getEvaluateOrder()):(e.commitModel=!1,e.$router.go(-1))}))}else Object(a.a)(s.data.info)}))}else Object(a.a)(e.tip)}else Object(a.a)("您还有必答题尚未答完，请先答完必答题！")},getEvaluateOrder:function(t){var e=this;if(""!=this.$store.state.login.token){var s={token:this.$store.state.login.token};this.$http.post("/app/json/questionaire/getLatestAppraise",s).then((function(s){var a=s.data;console.log(a),0==a.status?(e.limitOrderDayNum=a.data.limitOrderDayNum,e.toEvaluatedNum=a.data.toEvaluatedNum,t||(e.toEvaluatedNum>0||1==e.showFlag1?e.commitModel=!0:e.commitModel=!1),e.hasPrize=a.data.hasPrize):e.$Toast("网络加载较慢，请稍后重试!")}),(function(t){}))}},loadData:function(){var t=this;this.randomId=Math.random().toString(36).substr(2);var e=this,s={orderId:this.detail.marketOrderNo};e.$http.post("/app/json/questionaire/getDefaultConfig",s).then((function(s){if(console.log(s),"success"===s.data.result){t.details=s.data.data,t.getQuest(),t.prize=JSON.parse(s.data.data.questionPrize);var a=JSON.parse(s.data.data.subjectJson);e.userId=s.data.data.userId;var i=s.data.data.questionShare?JSON.parse(s.data.data.questionShare):"";console.log(i),a.forEach((function(t){if(t.show=!1,1===t.kindId||2===t.kindId||3===t.kindId||4===t.kindId){var e=JSON.parse(t.options);e.forEach((function(t){t.name=t.lable})),t.options=e}2===t.kindId?t.result=[]:6===t.kindId?t.result=0:(t.result="",4===t.kindId&&(t.show=!1))})),a.forEach((function(t){t.evaluate="",t.tips=""})),e.answerList=JSON.parse(JSON.stringify(a)),e.answerList.forEach((function(t,s,a){2==t.kindId&&t.options.forEach((function(t,a,i){e.$set(e.answerList[s].options[a],"flag",!1)}))})),e.shareTitle=s.data.data.shareTitle,e.shareContent=s.data.data.shareContent,e.shareImgUrl=s.data.data.shareImgUrl}else console.log(s.data.info)}))},getQuest:function(){var t=this;console.log(this.detail,"this.detail");var e={id:this.details.id,orderId:this.detail.marketOrderNo,ouCode:this.detail.storeOuCode};this.$http.post("/app/json/questionaire/startAnswer",e).then((function(e){t.$Loading.close(),console.log(e),e.data.result}))}},created:function(){this.loadData(),this.getEvaluateOrder(!0)}},o=(s("FnIQ"),s("KHd+")),n=Object(o.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title"},[t._v("请您提出意见，我们将持续改进与提升")]),t._v(" "),t._l(t.answerList,(function(e,a){return s("div",{key:a,staticClass:"top"},[6===e.kindId?s("div",{staticClass:"singleList score"},[s("div",{staticClass:" score-con"},[s("label",{staticClass:"title-con"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"evaluteBox"},[1===e.styleType?s("van-rate",{attrs:{color:"#ffd21e","void-icon":"star"},on:{change:function(e){return t.evaluateData(a,e)}},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):t._e(),t._v(" "),2===e.styleType?s("van-rate",{attrs:{color:"#25aff8",icon:"like","void-color":"#25aff8","void-icon":"like-o"},on:{change:function(e){return t.evaluateData(a,e)}},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):t._e(),t._v(" "),3===e.styleType?s("van-rate",{attrs:{color:"#25aff8",icon:"static/image/microShop/xiaoicon.png","void-color":"#25aff8","void-icon":"smile-o"},on:{change:function(e){return t.evaluateData(a,e)}},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):t._e(),t._v(" "),s("p",[t._v(t._s(e.evaluate))])],1)])]):t._e(),t._v(" "),1===e.kindId?s("div",{staticClass:"singleList"},[s("div",{staticClass:"divObj"},[s("span",{staticClass:"wall-title"},[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),s("van-radio-group",{on:{change:t.changeResult},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}},t._l(e.options,(function(e,a){return s("van-radio",{key:a,attrs:{"checked-color":"#25aff8",name:t.optionsObj[a]}},[t._v(t._s(t.optionsObj[a])+" 、"+t._s(e.lable)+"\n            ")])})),1)],1)]):t._e(),t._v(" "),2===e.kindId?s("div",{staticClass:"singleList che-con multipleList"},[s("div",{staticClass:" "},[s("span",{staticClass:"wall-title"},[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),s("div",{staticClass:"checkItem-con"},t._l(e.options,(function(a,i){return s("van-button",{key:i,staticClass:"btn-con",class:a.flag?"select":"",attrs:{round:"",type:"default",size:"small"},on:{click:function(s){return t.selectO(e.options,e,i)}}},[t._v(t._s(a.lable))])})),1)])]):t._e(),t._v(" "),5===e.kindId?s("div",{staticClass:"singleList"},[s("div",{staticClass:"divObj divObj1"},[e.limitMin&&!e.limitMax?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:t.placeHolder?t.placeHolder:"对其他方面不满意，可描述问题帮加油站改善哦～"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}}):t._e(),t._v(" "),e.limitMax&&!e.limitMin?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:t.placeHolder?t.placeHolder:"对其他方面不满意，可描述问题帮加油站改善哦～"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}}):t._e(),t._v(" "),e.limitMin&&e.limitMax?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:t.placeHolder?t.placeHolder:"对其他方面不满意，可描述问题帮加油站改善哦～"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}}):t._e(),t._v(" "),e.limitMin||e.limitMax?t._e():s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{placeholder:t.placeHolder?t.placeHolder:"对其他方面不满意，可描述问题帮加油站改善哦～"},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}})])]):t._e(),t._v(" "),7===e.kindId?s("div",{staticClass:"singleList text-con"},[s("div",{staticClass:"lin-con"}),t._v(" "),s("div",{},[s("span",{staticClass:"wall-title"},[t._v(t._s(e.title))]),t._v(" "),s("van-field",{staticStyle:{width:"100%",background:"white",border:"1px solid #ccc","border-radius":"8px"},attrs:{rows:"2",autosize:"",maxlength:e.limitMax||100,type:"textarea",placeholder:"亲，您对加油站的评价，是我们更好服务的动力哦！","show-word-limit":""},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}})],1)]):t._e(),t._v(" "),4===e.kindId?s("div",{staticClass:"singleList"},[s("div",{staticClass:"divObj"},[s("span",{staticClass:"wall-title"},[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),s("div",{staticClass:"xiala",on:{click:function(s){return t.select1(e)}}},[s("span",[t._v(t._s(e.result||"请选择"))]),t._v(" "),s("span",{staticClass:"icon iconfont mall-xiala"})]),t._v(" "),s("van-action-sheet",{attrs:{id:"xialaView",actions:e.options},on:{select:function(s){return t.onSelect(s,e)}},model:{value:e.show,callback:function(s){t.$set(e,"show",s)},expression:"item.show"}})],1)]):t._e(),t._v(" "),3===e.kindId?s("div",{staticClass:"singleList"},[s("div",{staticClass:"divObj"},[s("span",{staticClass:"wall-title"},[t._v(t._s(e.orderNo)+"、"+t._s(e.title))]),t._v(" "),t._l(e.options,(function(a,i){return s("div",{key:i,staticClass:"pics"},[s("div",[s("span",[t._v(t._s(t.optionsObj[i])+"、")]),t._v(" "),s("img",{attrs:{src:a.imgUrl,alt:""}})]),t._v(" "),s("div",[s("van-radio-group",{model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}},[s("van-radio",{attrs:{"checked-color":"#25aff8",name:t.optionsObj[i]}},[t._v(t._s(a.lable)+"\n                ")])],1)],1)])}))],2)]):t._e()])})),t._v(" "),t.answerList.length>0?s("div",{staticClass:"handler"},[s("van-button",{staticClass:"btn",attrs:{round:"",type:"info",color:"#F02C2D"},on:{click:t.commit}},[t._v("提交")]),t._v(" "),t.hasPrize?s("div",[t.prize.length>0&&"20030"!=t.prize[0].prizeType?s("p",[t._v("* 完成评价后可获赠"+t._s(t.prize[0].prizeName))]):t._e(),t._v(" "),t.prize.length>0&&"20030"==t.prize[0].prizeType?s("p",[t._v("* 完成评价后可获赠"+t._s(t.prize[0].prizeName)+"参与次数"+t._s(t.prize[0].prizeNum))]):t._e()]):t._e()],1):t._e(),t._v(" "),s("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.commitModel,callback:function(e){t.commitModel=e},expression:"commitModel"}},[s("div",{staticClass:"modal"},[s("p",{staticClass:"title-p"},[s("span",[t._v("成功提交问券")]),t.showFlag1?s("span",[t._v("恭喜您获得以下奖品")]):t._e()]),t._v(" "),t.showFlag1?s("ul",t._l(t.mktAwardList,(function(e,a){return s("li",{key:a},[s("img",{attrs:{src:e.prizeImgUrl?e.prizeImgUrl:"static/image/microShop/icon52x.png",alt:""}}),t._v(" "),s("span",[t._v(t._s(e.prizeName)+"("+t._s(e.prizeNum)+")")]),t._v(" "),s("span",{on:{click:function(s){return t.seeView(e.prizeType,e.prizeCode)}}},[t._v("查看")])])})),0):t._e(),t._v(" "),t.toEvaluatedNum?s("div",{staticClass:"order"},[s("div",{staticStyle:{"margin-top":"10px"}},[t._v("您在最近"+t._s(t.limitOrderDayNum)+"天内还有"+t._s(t.toEvaluatedNum)+"条待评价订单\n          ")])]):t._e()]),t._v(" "),s("div",{staticClass:"btns"},[s("span",{staticClass:"theme_bg_red",on:{click:t.closeBtn}},[t._v(t._s(t.toEvaluatedNum?"继续评价":"确定"))])])])],2)}),[],!1,null,"31c2fd20",null);e.a=n.exports},ESSU:function(t,e,s){},FnIQ:function(t,e,s){"use strict";var a=s("Ml9L");s.n(a).a},GgUn:function(t,e,s){"use strict";var a=s("1AQE");s.n(a).a},Ml9L:function(t,e,s){},"N/wz":function(t,e,s){"use strict";s.r(e);var a=s("me9Y"),i=s("dt7e"),o=s("6JyR"),n={data:function(){return{prize:{},hasPrize:null,hasPrizeFlag:!1,month:"",day:"",hour:"",min:"",second:"",millisecond:"",orderDetail:null,fromPage:"",configId:"",detailView:!1,firmdetailSubject:"加油凭证",orderId:"",ouCode:""}},computed:{discountAmountCom:function(){return(Number(this.orderDetail.couponAmount)||0)+(Number(this.orderDetail.pointsAmount)||0)+(Number(this.orderDetail.discountAmount)||0)+(Number(this.orderDetail.rewardsAmount)||0)+(Number(this.orderDetail.empRewardsAmount)||0)+(Number(this.orderDetail.enterpriseAmount)||0)+(Number(this.orderDetail.randomDeductionAmount)||0)},refuelCardNo:function(){var t=this.orderDetail?this.orderDetail.refuelCardNo:"";return this.orderDetail.refuelCardNo&&t.slice(-6)||""}},created:function(){this.orderType=this.$route.query.orderType,this.orderId=this.$route.query.orderId,this.fromPage=this.$route.query.fromPage,1==this.fromPage&&this.counttime(),this._getOrderDetail(),2==this.$store.state.globalConfig.oil_appraise_type&&this.getEvaluateOrder()},methods:{getEvaluateOrder:function(t){var e=this;if(""!=this.$store.state.login.token){var s={token:this.$store.state.login.token};this.$http.post("/app/json/questionaire/getLatestAppraise",s).then((function(t){var s=t.data;console.log(s),0==s.status?(e.hasPrize=s.data.hasPrize,e.hasPrizeFlag=!0,s.data.questionPrize&&(e.prize=JSON.parse(s.data.questionPrize))):e.$Toast("网络加载较慢，请稍后重试!")}),(function(t){}))}},enterEvaluate:function(){this.$router.push({path:"/evaluateList"})},firmData:function(t){this.detailView=t.pageView},goEvaluation:function(){var t=this;this.$Loading.open();var e={token:this.$store.state.login.token,orderId:this.orderDetail.refuelOrderId};this.$http.post("/app/json/questionaire/getQuestionaireByOrderid",e).then((function(e){t.$Loading.close(),0==e.data.status?t.detailView=!0:t.detailView=!1}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},backEvent:function(){this.$router.go(-1)},counttime:function(){var t=new Date;this.month=t.getMonth()+1,this.day=t.getDate(),this.hour=t.getHours(),this.min=this.padZero(t.getMinutes()),this.second=this.padZero(t.getSeconds()+1),this.millisecond=this.padZero(t.getMilliseconds(),3);var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.counttime()}),1)},_getOrderDetail:function(){var t=this;this.$Loading.open();var e={token:this.$store.state.login.token,orderType:this.orderType,orderId:this.orderId};this.$http.post("/app/json/refuel_center/detail",e).then((function(e){t.$Loading.close();var s=e.data;0==s.status?(t.orderDetail=s.data,t.ouCode=s.data.storeOuCode,t.goEvaluation()):t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},padZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,s=t+"";return("0000".substr(0,e)+s).substr(s.length)}},components:{subject:a.default,subjectDetail:i.default,evaluate:o.a,PopupEvaluation:function(){return s.e(50).then(s.bind(null,"0F6z"))}}},r=(s("PGhG"),s("KHd+")),l=Object(r.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"firmdetail"},[s("div",{staticClass:"header"},[s("div",{staticClass:"header-top"},[s("i",{staticClass:"iconfont mall-fanhui theme_font_black backmall",on:{click:t.backEvent}}),t._v(" "),s("span",{staticClass:"title"},[t._v("加油支付凭证详情")])]),t._v(" "),1==t.fromPage?s("div",{staticClass:"headerTime"},[s("div",{staticClass:"time"},[s("span",[t._v(t._s(t.month))]),t._v(" "),s("span",[t._v("月")]),t._v(" "),s("span",[t._v(t._s(t.day))]),t._v(" "),s("span",[t._v("日")]),t._v(" "),s("span",[t._v(t._s(t.hour))]),t._v(" "),s("span",[t._v("时")]),t._v(" "),s("span",[t._v(t._s(t.min))]),t._v(" "),s("span",[t._v("分")]),t._v(" "),s("span",[t._v(t._s(t.second))]),t._v(" "),s("span",[t._v("秒")]),t._v(" "),s("span",{staticClass:"millisecond"},[t._v(t._s(t.millisecond))])])]):t._e()]),t._v(" "),t.orderDetail?[s("div",{staticClass:"detailstation"},[t._v(t._s(t.orderDetail.storeName))]),t._v(" "),s("div",{staticClass:"detailm"},[s("div",{staticClass:"money detailmon"},[t._m(0),t._v(" "),s("p",[t._v("¥"),s("span",[t._v(t._s(t.orderDetail.totalAmount.toFixed(2)))])])]),t._v(" "),s("div",{staticClass:"ttc detailmon"},[s("div",{staticClass:"ttc-content"},[s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v("TTC：")]),t._v(" "),s("span",{staticClass:"con"},[t._v(t._s(t.orderDetail.refuelPosTtc))])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v("枪号：")]),t._v(" "),s("span",{staticClass:"con"},[s("span",{staticClass:"num"},[t._v(t._s(t.orderDetail.refuelGunNo))]),t._v(" "),s("span",{staticClass:"suffix"},[t._v("号枪")])])])])]),t._v(" "),s("div",{staticClass:"ttc detailmon"},[t._m(1),t._v(" "),s("p",[s("span",[t._v(t._s(t.refuelCardNo))])])])]),t._v(" "),s("div",{staticClass:"detailli"},[s("ul",[s("li",[s("span",[t._v("加油时间")]),t._v(" "),s("span",[t._v(t._s(t.orderDetail.submitTime))])]),t._v(" "),s("li",[s("span",[t._v("油品")]),t._v(" "),s("span",[t._v(t._s(t.orderDetail.refuelOilName))])]),t._v(" "),1!=t.$store.state.globalConfig.appOilPayDetailHideFefuelLiter?s("li",[s("span",[t._v("加油升数")]),t._v(" "),s("span",[t._v(t._s(t.orderDetail.refuelLiter)+"L")])]):t._e(),t._v(" "),s("li",[s("span",[t._v("实付金额")]),t._v(" "),s("span",[t._v("¥"+t._s(t.orderDetail.payAmount.toFixed(2)))])]),t._v(" "),s("li",[s("span",[t._v("优惠抵扣金额")]),t._v(" "),s("span",[t._v("¥"+t._s(t.discountAmountCom))])])])]),t._v(" "),1!=t.$store.state.globalConfig.oil_appraise_type&&2!=t.$store.state.globalConfig.oil_appraise_type?s("div",{staticClass:"evaluation"},[s("span",{staticClass:"text",on:{click:t.goEvaluation}},[t._v("去评价")])]):t._e(),t._v(" "),1==t.$store.state.globalConfig.oil_appraise_type?s("div",[s("p",{staticClass:"evaluate"},[t._v("加油评价")]),t._v(" "),t.detailView?t._e():s("div",{staticClass:"question"},[s("subject",{attrs:{firmdetailSubject:t.firmdetailSubject,orderIds:t.orderId,ouCode:t.ouCode},on:{firmData:t.firmData}})],1),t._v(" "),t.detailView?s("div",{staticClass:"question"},[s("subjectDetail",{attrs:{firmdetailSubject:t.firmdetailSubject,orderIds:t.orderId}})],1):t._e()]):t._e(),t._v(" "),s("van-popup",{staticClass:"eva-con",attrs:{closeable:""},model:{value:t.hasPrizeFlag,callback:function(e){t.hasPrizeFlag=e},expression:"hasPrizeFlag"}},[s("p",{staticClass:"title"},[t._v("通知")]),t._v(" "),s("div",{staticClass:"icon-bg"},[s("div",{staticClass:"conten"},[t._v("您在"+t._s(t.orderDetail.storeName))]),t._v(" "),s("div",{staticClass:"conten"},[t._v("加油¥"+t._s(t.orderDetail.payAmount.toFixed(2))+"元")]),t._v(" "),s("div",{staticClass:"conten"},[t._v("请对本次服务进行评价！")])]),t._v(" "),s("van-button",{staticClass:"btn",attrs:{round:"",type:"info",color:"#F02C2D",size:"small"},on:{click:t.enterEvaluate}},[t._v("去评价")]),t._v(" "),t.hasPrize?s("div",[t.prize.length>0&&"20030"!=t.prize[0].prizeType?s("p",[t._v("* 完成评价后有机会获赠"+t._s(t.prize[0].prizeNum)+"张"+t._s(t.prize[0].prizeName)+t._s(t.prize.length>1?"等":""))]):t._e(),t._v(" "),t.prize.length>0&&"20030"==t.prize[0].prizeType?s("p",[t._v("* 完成评价后有机会获赠"+t._s(t.prize[0].prizeName)+t._s(t.prize[0].prizeNum)+"次"+t._s(t.prize.length>1?"等":""))]):t._e()]):t._e()],1)]:t._e(),t._v(" "),s("PopupEvaluation")],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("加油金额")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("员工卡号后六位")])])}],!1,null,"9ea509c0",null);e.default=l.exports},PGhG:function(t,e,s){"use strict";var a=s("ESSU");s.n(a).a},dt7e:function(t,e,s){"use strict";s.r(e);var a=s("ZrzC"),i=s("2nGb"),o=(s("L2JU"),s("T/eX"),{name:"",mixins:[a.a],props:{firmdetailSubject:{type:String,default:!0},orderIds:{type:[String,Number],default:!0}},data:function(){return{answerList:[],listItem:"",i:0,optionsObj:{},paramsData:{},radio:"B",list:["a","b","c","d"],result:["a","b"],value:3,show:!1,actions:[],mktAwardList:[],id:"",url:"",evaluate:"",shareView:!0,shareTitle:"",shareContent:"",shareImgUrl:"",firmId:""}},created:function(){this.getLetter(),this.paramsData=this.$route.query},mounted:function(){var t=this;if("加油凭证"==this.firmdetailSubject){var e={isDefault:1,token:this.$store.state.login.token,type:3};this.questionUrlData(e).then((function(e){console.log(e),"success"===e.data.result&&(t.firmId=e.data.data.id,t.loadData())}))}else this.loadData()},methods:{loadData:function(){var t=this,e={token:this.$store.state.login.token};"加油凭证"==this.firmdetailSubject?(e.orderId=t.orderIds,e.id=t.firmId):(e.orderId=t.paramsData.orderId,e.id=t.paramsData.id),t.historydetailData(e).then((function(e){if(console.log(e),"success"===e.data.result){var s=JSON.parse(e.data.data.resultJson);s.forEach((function(t){t.evaluate=""})),t.userId=e.data.data.userId,0==(e.data.data.questionShare?JSON.parse(e.data.data.questionShare):"").length?t.shareView=!1:t.shareView=!0,s.forEach((function(t,e){if(1===t.kindId||2===t.kindId||3===t.kindId||4===t.kindId){var s=JSON.parse(t.options)||[];s.forEach((function(t){t.name=t.lable})),t.options=s}2===t.kindId?t.result=t.result.split(","):6===t.kindId?(t.result=Number(t.result)||0,1==t.result?t.evaluate="非常差":2==t.result?t.evaluate="差":3==t.result?t.evaluate="一般":4==t.result?t.evaluate="好":5==t.result&&(t.evaluate="非常好")):4===t.kindId&&(t.show=!1)})),t.answerList=s,t.listItem=t.answerList[t.i],t.shareTitle=e.data.data.shareTitle,t.shareContent=e.data.data.shareContent,t.shareImgUrl=e.data.data.shareImgUrl}else console.log(e.data.info)}))},select1:function(t){t.show=!0},generateBig_1:function(){for(var t=[],e=65;e<91;e++)t.push(String.fromCharCode(e));return t},getLetter:function(){this.optionsObj=this.generateBig_1(),console.log(this.optionsObj)},onSelect:function(t,e){e.result=t.name,e.show=!1},sharegoods:function(){var t={title:this.shareTitle,sharetext:this.shareContent,imageurl:this.shareImgUrl,detailurl:""+this.$store.state.globalConfig.wxBaseUrl+i.a.shareUrl+"/service/questionDetail?shareUserid="+this.$store.state.userInfo.userId};console.log(t.detailurl),this.$bridgefunc.wechatShare(t)},Intercept:function(){var t=this.url||window.location.href,e=t.substr(t.indexOf("?")).slice(1).split("=");this.id=e[1]}},computed:{},components:{},watch:{}}),n=(s("GgUn"),s("KHd+")),r=Object(n.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"body"}},[t.firmdetailSubject?t._e():s("nav-top",{attrs:{title:"加油评价"},on:{backEvent:function(e){return t.$router.go(-1)}}},[t.shareView?s("div",{staticClass:"shareBox",on:{click:t.sharegoods}},[s("div",[s("i",{staticClass:"icon iconfont mall-fenxiang"})])]):t._e()]),t._v(" "),s("nav-content",[s("div",{staticClass:"content"},t._l(t.answerList,(function(e,a){return s("div",{key:a,staticClass:"top"},[1===e.kindId?s("div",{staticClass:"singleList"},[s("div",{staticClass:"divObj"},[s("div",{staticClass:"titleHead"},[s("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),t._v(" "),s("van-radio-group",{model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}},t._l(e.options,(function(e,a){return s("van-radio",{key:a,attrs:{disabled:"",name:t.optionsObj[a]}},[t._v(t._s(t.optionsObj[a])+" 、"+t._s(e.lable))])})),1)],1)]):t._e(),t._v(" "),2===e.kindId?s("div",{staticClass:"singleList multipleList"},[s("div",{staticClass:"divObj"},[s("div",{staticClass:"titleHead"},[s("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),t._v(" "),s("van-checkbox-group",{model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}},t._l(e.options,(function(e,a){return s("van-checkbox",{key:a,attrs:{disabled:"","checked-color":"#F80F16",name:t.optionsObj[a]}},[t._v(t._s(t.optionsObj[a])+" 、"+t._s(e.lable))])})),1)],1)]):t._e(),t._v(" "),5===e.kindId?s("div",{staticClass:"singleList"},[s("div",{staticClass:"divObj"},[s("div",{staticClass:"titleHead"},[s("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{disabled:"",maxlength:e.limitMax},domProps:{value:e.result},on:{input:function(s){s.target.composing||t.$set(e,"result",s.target.value)}}})])]):t._e(),t._v(" "),6===e.kindId?s("div",{staticClass:"singleList score"},[s("div",{staticClass:"divObj"},[s("div",{staticClass:"titleHead"},[s("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),t._v(" "),s("div",{staticClass:"evaluteBox"},[1===e.styleType?s("van-rate",{attrs:{"void-color":"#c7c7c7","disabled-color":"#F80F16",disabled:""},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):t._e(),t._v(" "),2===e.styleType?s("van-rate",{attrs:{"void-color":"#c7c7c7",icon:"like","disabled-color":"#F80F16","void-icon":"like-o",disabled:""},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):t._e(),t._v(" "),3===e.styleType?s("van-rate",{attrs:{"void-color":"#c7c7c7",icon:"static/image/microShop/xiaoicon.png","disabled-color":"#F80F16","void-icon":"smile-o",disabled:""},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):t._e(),t._v(" "),s("p",[t._v(t._s(e.evaluate))])],1)])]):t._e(),t._v(" "),4===e.kindId?s("div",{staticClass:"singleList"},[s("div",{staticClass:"divObj"},[s("div",{staticClass:"titleHead"},[s("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),t._v(" "),s("div",{staticClass:"xiala"},[s("span",[t._v(t._s(e.result||"请选择"))]),t._v(" "),s("span",{staticClass:"icon iconfont mall-xiala"})]),t._v(" "),s("van-action-sheet",{attrs:{actions:e.options},on:{select:function(s){return t.onSelect(s,e)}},model:{value:e.show,callback:function(s){t.$set(e,"show",s)},expression:"item.show"}})],1)]):t._e(),t._v(" "),3===e.kindId?s("div",{staticClass:"singleList"},[s("div",{staticClass:"divObj"},[s("div",{staticClass:"titleHead"},[s("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),t._v(" "),t._l(e.options,(function(a,i){return s("div",{key:i,staticClass:"pics"},[s("div",[s("span",[t._v(t._s(t.optionsObj[i])+"、")]),t._v(" "),s("img",{attrs:{src:a.imgUrl,alt:""}})]),t._v(" "),s("div",[s("van-radio-group",{model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}},[s("van-radio",{attrs:{"checked-color":"#F80F16",name:t.optionsObj[i],disabled:""}},[t._v(t._s(a.lable))])],1)],1)])}))],2)]):t._e()])})),0)])],1)}),[],!1,null,"48ac1fe5",null);e.default=r.exports},"eX/C":function(t,e,s){"use strict";e.a={methods:{participateData:function(t){return this.$http.post("/app/json/questionaire/startAnswer",t)},questionData:function(t){return this.$http.post("/app/json/questionaire/appUserConfig",t)},commitData:function(t){return this.$http.post("/app/json/questionaire/submit",t)},prizeData:function(t){return this.$http.post("/app/json/questionaire/completeAct",t)},listData:function(t){return this.$http.post("/app/json/questionaire/findQuestionaireByuserId",t)},historyData:function(t){return this.$http.post("/app/json/questionaire/historyQuestionaireList",t)},historydetailData:function(t){return this.$http.post("/app/json/questionaire/questionaireDetail",t)}}}}}]);