(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70ab71c0","chunk-a8f2ea64"],{"2a7e":function(t,s,e){},"2dd5":function(t,s,e){"use strict";var i,a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"group"},[0!=t.currentIndex&&t.type?t._e():e("div",{staticClass:"time-show"},[e("div",{staticClass:"left"},[t._v("参团倒计时")]),e("div",{staticClass:"right"},[t._v(" 还剩："),e("countdown",{attrs:{endTime:t.$util.getDateFromString(t.details.endTime),type:"theme_bg_black"}})],1)]),e("div",{staticClass:"group-details"},[e("div",{staticClass:"img-text"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:t.details.image,alt:""}})]),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[t._v(t._s(t.details.assembleName))]),e("div",{staticClass:"tips"},[1==t.type?e("div",{staticClass:"left"},[0==t.currentIndex?e("span",[t._v("拼团中("+t._s(1==t.details.assembleState?"未成团":"已成团")+")")]):t._e(),1==t.currentIndex?e("span",[t._v("拼团成功("+t._s(t.state)+")")]):t._e(),2==t.currentIndex?e("span",[t._v("拼团失败")]):t._e()]):e("div",{staticClass:"left"},[t._v("拼团中("+t._s(1==t.details.assembleState?"未成团":"已成团")+")")]),1==t.currentIndex?e("div",{staticClass:"btn",on:{click:t.openDetails}},[t._v("查看详情")]):t._e()])])]),e("div",{staticClass:"details"},[1!=t.currentIndex?e("div",{staticClass:"main"},[e("div",{staticClass:"info"},[e("div",{staticClass:"progress",class:{active:2==t.currentIndex}},[e("van-progress",{attrs:{percentage:t.calculateProgress(),color:t.details.joinNumber<t.details.groupNumber?"#F80F16":"#009800","show-pivot":t.showPivot}})],1),t.details.joinNumber<t.details.groupNumber?e("div",{staticClass:"tips"},[t._v("当前参团人数为"),e("span",{staticClass:"num"},[t._v(t._s(t.details.joinNumber))]),t._v("人，再有"),e("span",{staticClass:"num"},[t._v(t._s((t.details.groupNumber-t.details.joinNumber).toFixed(0)))]),t._v("人参加才可拼团成功")]):e("div",{staticClass:"tips"},[t._v("当前参团人数为"),e("span",{staticClass:"num"},[t._v(t._s(t.details.joinNumber))]),t._v("人，只剩"),e("span",{staticClass:"num"},[t._v(t._s((t.details.groupUpLimit-t.details.joinNumber).toFixed(0)>0?(t.details.groupUpLimit-t.details.joinNumber).toFixed(0):0))]),t._v("个参团名额")])]),2!=t.currentIndex?e("div",{staticClass:"btn",class:{active:t.details.joinNumber==t.details.groupUpLimit},on:{click:t.oilGroupBtn}},[t._v(t._s(1==t.type?"邀请好友":"点击参团"))]):t._e()]):t._e(),1==t.currentIndex?e("div",{staticClass:"special"},[e("div",{staticClass:"oil"},[e("div",{staticClass:"title"},[t._v("已返利油点")]),e("div",{staticClass:"oil-info num"},[t._v(t._s(t.details.oilPointNumber||0))])]),e("div",{staticClass:"oil"},[e("div",{staticClass:"title"},[t._v("返利活动开始时间")]),e("div",{staticClass:"oil-info"},[t._v(t._s(t.details.rebateStartTime))])]),e("div",{staticClass:"oil"},[e("div",{staticClass:"title"},[t._v("返利活动结束时间")]),e("div",{staticClass:"oil-info"},[t._v(t._s(t.details.rebateEndTime))])])]):t._e()]),e("van-collapse",{model:{value:t.activeNames,callback:function(s){t.activeNames=s},expression:"activeNames"}},[e("van-collapse-item",{attrs:{title:"参团优惠规则"}},[e("div",{domProps:{innerHTML:t._s(t.details.activityDesc)}})])],1)],1)])},n=[],r=e("ade3"),c=(e("1075"),e("f600")),l=(e("e25e"),e("0d03"),e("ac1f"),e("5319"),e("99af"),e("b0c0"),e("da71")),o=e("69f4"),d={data:function(){return{showPivot:!1,activeNames:[],state:""}},props:{type:"",currentIndex:"",details:{}},mounted:function(){this.details&&(this.state=this.dealState())},methods:{calculateProgress:function(){if(this.details.groupUpLimit){var t=this.details.joinNumber/this.details.groupUpLimit*100;return parseInt(t)>100?100:parseInt(t)||0}},dealState:function(){if(this.details){var t=new Date,s=new Date(this.details.rebateStartTime.replace(/-/g,"/")),e=new Date(this.details.rebateEndTime.replace(/-/g,"/"));return t<s?"未开始":t<=e?"进行中":t>e?"已结束":"--"}},addAssembleUser:function(){var t=this;this.$request.post("/app/json/app_assemble_activity/addAssembleUser",{assembleId:this.details.id}).then((function(s){0==s.status?(t.$toast("参团成功"),t.$emit("updateData")):t.$Toast(s.info?s.info:"参团失败")}))},shareBtn:function(){var t={title:this.details.assembleName,sharetext:this.details.activityDesc,imageurl:this.details.image,detailurl:"".concat(this.$store.state.globalConfig.wxBaseUrl).concat(l["a"].shareUrl,"/oil-group-share?id=").concat(this.details.groupActivityId)};this.$bridgefunc.wechatShare(t)},oilGroupBtn:function(){this.details.joinNumber==this.details.groupUpLimit?this.$Toast("该活动已达到最大上限人数"):1==this.type?this.shareBtn():this.addAssembleUser()},openDetails:function(){this.$router.push({path:"/oil-group-details",query:{id:this.details.id}})}},components:(i={},Object(r["a"])(i,c["a"].name,c["a"]),Object(r["a"])(i,"countdown",o["default"]),i)},u=d,v=(e("ac73"),e("0c7c")),m=Object(v["a"])(u,a,n,!1,null,"7d592978",null);s["a"]=m.exports},"333a":function(t,s,e){},3887:function(t,s,e){"use strict";e("2a7e")},4002:function(t,s,e){t.exports=e.p+"static/images/4f70c93d00475e613632fb919d200d84.png"},"69f4":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"countdown",class:{quan:"theme_bg_quan"==t.type}},[0==t.d||t.hiddenDay?t._e():e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.d))]),0==t.d||t.hiddenDay?t._e():e("span",[t._v("天")]),e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.h))]),t._v(" : "),e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.m))]),t._v(" : "),e("div",{staticClass:"red-div theme_font_white",class:[t.type||"theme_bg_red"]},[t._v(t._s(t.s))])])},a=[],n=(e("4795"),e("e25e"),e("9d5d")),r={name:"countdown",props:["endTime","type","hiddenDay","callback"],components:{},data:function(){return{d:"0",h:"00",m:"00",s:"00",trigger:!0}},methods:{parsingTime:function(){var t=this;if(this.endTime){var s=this.$store.state.severTime.currentTime,e=this.endTime,i=e-s;this.d=0,this.h="0",this.m="0",this.s="0",i<0?this.trigger&&(this.trigger=!1,setTimeout((function(){t.$emit("timeOut")}),1e3)):(this.trigger=!0,i>59?(this.s=i%60,i=parseInt(i/60),i>59?(this.m=i%60,i=parseInt(i/60),i>23?(this.h=parseInt(i%24),i=parseInt(i/24),this.d=i):this.h=i):this.m=i):i>=0&&(this.s=i),this.h<10&&(this.h="0"+this.h),this.m<10&&(this.m="0"+this.m),this.s<10&&(this.s="0"+this.s))}}},created:function(){this.parsingTime(),n["a"].heartbeat()},destroyed:function(){n["a"].removeHeartbeat()},watch:{"$store.state.severTime.currentTime":function(){this.parsingTime()}}},c=r,l=(e("d49f"),e("0c7c")),o=Object(l["a"])(c,i,a,!1,null,"65b2d2d6",null);s["default"]=o.exports},"7ad7":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"oil-group"},[i("nav-top",{on:{backEvent:function(s){return t.$router.go(-1)}}},[i("div",{staticClass:"my-cards",on:{click:function(s){return s.stopPropagation(),t.myGroup.apply(null,arguments)}}},[t._v("我的拼团")])]),i("nav-content",{staticClass:"oil-group-container"},[t._l(t.groupList,(function(s,e){return i("div",{key:e,staticClass:"group-list"},[i("Group",{attrs:{details:s},on:{updateData:t.updateData}})],1)})),t.groupList.length?t._e():i("div",{staticClass:"no-data"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:e("4002"),alt:""}})]),i("div",{staticClass:"tips"},[t._v("暂无可参与的团")])])],2)],1)},a=[],n=e("2dd5"),r={data:function(){return{groupList:[]}},mounted:function(){this.queryAssembleActivityList()},methods:{updateData:function(){this.queryAssembleActivityList()},queryAssembleActivityList:function(){var t=this;this.$request.post("/app/json/app_assemble_activity/queryAssembleActivityList").then((function(s){0==s.status?t.groupList=s.data:t.$Toast(s.info?s.info:"获取活动失败")}))},myGroup:function(){this.$router.push({path:"/my-oil-group"})}},components:{Group:n["a"]}},c=r,l=(e("3887"),e("0c7c")),o=Object(l["a"])(c,i,a,!1,null,"cc509010",null);s["default"]=o.exports},"9d5d":function(t,s,e){"use strict";e("4795"),e("e25e"),e("0d03");var i,a=e("653a"),n=0,r={heartbeat:function(){n++,i||(i=window.setInterval((function(){var t=parseInt((new Date).getTime()/1e3);a["a"].state.severTime.currentTime=t+a["a"].state.severTime.jetlag}),1e3))},removeHeartbeat:function(){n>0&&n--,0==n&&(window.clearInterval(i),i=null)}};s["a"]=r},ac73:function(t,s,e){"use strict";e("bc69")},bc69:function(t,s,e){},d49f:function(t,s,e){"use strict";e("333a")}}]);