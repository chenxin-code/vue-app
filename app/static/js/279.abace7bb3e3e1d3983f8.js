(window.webpackJsonp=window.webpackJsonp||[]).push([[279],{"4CSE":function(t,i,e){},F9re:function(t,i,e){},YZ5e:function(t,i,e){"use strict";e.r(i);var s=e("dqDD"),n=e("tfLl"),a={name:"refuel-select-oilgun",components:{Toast:s.Toast,MessageBox:s.MessageBox,Navigation:n.a},data:function(){return{showOther:!1,otherGun:"",guns:[],selectedid:-1,otherGunNo:"",gunNo:"",inputting:!0,station:{},longitude:"",latitude:"",topHeight:0,isShowNav:!0}},methods:{chagneStation:function(){this.$bridgefunc.customPush({path:"/refuelstationlist",isnativetop:"1"})},cencleClick:function(){this.showOther=!1,this.otherGun=0},sureEvent:function(t){t&&"0"!=t&&"00"!=t?this.station.stationCode?(this.$bridgefunc.customPush({path:"/refuelinfo",isnativetop:"1",query:{station:encodeURIComponent(JSON.stringify(this.station)),gunNo:t}}),this.showOther=!1):Object(s.Toast)({message:"请选择油站",position:"bottom",duration:2e3}):this.$Toast("枪号输入有误")},inputFocus:function(){this.selectedid=this.guns.length,this.otherGunNo="",this.otherGun=""},inputBlur:function(){if(""==this.otherGunNo)return this.otherGun="其他",void(this.selectedid=-1);this.otherGunNo.indexOf("#")>0&&(this.otherGun=this.otherGunNo.replace("#","")),this.otherGun=this.otherGunNo+" #",this.otherGunNo=""},itemEvent:function(t){this.selectedid=t,this.sureEvent()},otherClick:function(){this.showOther=!0},getStationList:function(){this.$Loading.open();var t=this;this.$http.post("/app/json/refuel/getStationList",{lng:t.longitude,lat:t.latitude,token:t.$store.state.login.token,pageIndex:"1"}).then((function(i){t.$Loading.close();var e=i.data;0==e.status?t.station=e.data[0]:Object(s.Toast)({message:e.info?e.info:"获取附近加油站失败",position:"bottom",duration:2e3})}),(function(i){t.$Loading.close(),Object(s.Toast)({message:"获取附近加油站失败",position:"bottom",duration:2e3})}))},setData:function(){if(this.$route.query.station){this.station=JSON.parse(decodeURIComponent(this.$route.query.station)),this.isShowNav=!1,this.topHeight=0;var t=this;this.$bridgefunc.registePageShow((function(){t.$bridgefunc.vuexRead()}))}else{this.topHeight=this.$store.state.barHeight+this.$market.getNavHeight();var i=this;this.$bridgefunc.getLocation((function(t){i.longitude=t.longitude,i.latitude=t.latitude,i.getStationList()}))}for(var e=1;e<20;e++)this.guns.push({id:e,text:e})}},watch:{"$store.state.refuelStation.stationCode":function(t,i){if(""!=this.$store.state.refuelStation.stationCode){for(var e in this.station=this.$util.cloneDeep(this.$store.state.refuelStation),this.station.stationName.length>10&&(this.station.stationName=this.station.stationName.substring(0,10)+"..."),this.$store.state.refuelStation)this.$store.state.refuelStation[e]="";this.$bridgefunc.vuexStorage()}}},mounted:function(){var t=this;this.$bridgefunc.registePageShow((function(){t.$bridgefunc.vuexRead()}))},created:function(){this.setData()}},o=(e("eQzN"),e("KHd+")),c=Object(o.a)(a,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"bottom"},[t.isShowNav?e("Navigation",{attrs:{title:"加油闪付",hasBack:"0"}}):t._e(),t._v(" "),e("div",{staticClass:"content-div",style:{top:t.topHeight+"px"}},[t._m(0),t._v(" "),e("div",{staticClass:"white-block"},[e("div",{staticClass:"padding-div"},[t._m(1),t._v(" "),e("div",{staticClass:"info-div font-medium"},[e("div",{staticStyle:{flex:"1"}},[e("p",{staticStyle:{color:"#898989"}},[t._v("当前位置:")]),t._v(" "),e("p",{staticClass:"station-p single-line"},[t._v(t._s(""==t.station.stationName?"请选择加油站":t.station.stationName))])]),t._v(" "),e("div",{staticClass:"btn-div",on:{click:function(i){return t.chagneStation()}}},[t._v("更改油站")])])])]),t._v(" "),e("div",{staticClass:"white-block"},[t._m(2),t._v(" "),e("div",{staticClass:"btns-div"},[t._l(t.guns,(function(i,s){return e("div",{staticClass:"item-div",on:{click:function(e){return t.sureEvent(i.text)}}},[t._v("\n          "+t._s(i.text)+"号\n        ")])})),t._v(" "),e("div",{staticClass:"item-div",on:{click:t.otherClick}},[t._v("\n          其他\n          ")])],2)]),t._v(" "),t.showOther?e("div",{staticClass:"float_div"},[e("div",{staticClass:"alert_div"},[e("div",[t._v("请输入油枪号")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.otherGun,expression:"otherGun"}],attrs:{type:"number",placeholder:"",oninput:"if(value.length>2)value=value.slice(0,2)"},domProps:{value:t.otherGun},on:{input:function(i){i.target.composing||(t.otherGun=i.target.value)}}}),t._v(" "),e("div",{staticClass:"btns"},[e("div",{staticClass:"btn1",on:{click:t.cencleClick}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"btn2",on:{click:function(i){return t.sureEvent(t.otherGun+"")}}},[t._v("确认")])])])]):t._e()])],1)}),[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"white-block"},[i("div",{staticClass:"tip-div"},[i("p",{staticClass:"font-medium-s",staticStyle:{color:"#FFFFFF"}},[this._v("警告:加油站请勿下车使用手机！")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"icon-div"},[i("img",{attrs:{src:"static/image/refuel/refuel01.png"}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"padding-div guns-div"},[i("div",{staticClass:"title-div"},[i("div",{staticStyle:{flex:"1"}},[i("div",{staticClass:"text-div font-medium single-line"},[this._v("请选择您加油使用的油枪")]),this._v(" "),i("div",{staticClass:"hint_style"},[this._v("(建议咨询工作人员)")])]),this._v(" "),i("img",{staticClass:"icon-div full-img",attrs:{src:"static/image/refuel/refuel02.png"}})])])}],!1,null,"44a22966",null);i.default=c.exports},cnNK:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABTUlEQVRIS73Uvy5FQRDH8e+v0SoRCYlKo9GJF7ghCpVKxSNolZ5ColPphAKJCCFqjdpTiJCMTLI32dzYe87+ObY/+zkzv9kRjY+ZzQALkj6mXa2WrpmtA1fAPHAs6SR1fzM4oPfAbMBeJW0MCv+BGrAn6WIwOIHuSzofLONS1H+oOOMatBiuRYvgFmg23ArNghPooaSzkiXUa7hao70qNrM14CnaSL4ciisdd2dqxQF9i1rZBO2s2Mwcis9BaaaTc9BV8SS8KemlZJhy4VXgPfroE9iS9FCLd061ma0Aj8BiwL6AUS3eCTtmZsvAc0u8FzwE3htujWfBEe6ZL0WZ70i6yxm4bDjgPmj+rMb4N7CdgxfBLfBiOMK97f7k/PSuvAoO+Fxoe4zvSrqelnk1nMB/Qua3KbwJnMBvJI0GhyP8FPAdfyTp8l/gnHf8C8iaph82lunDAAAAAElFTkSuQmCC"},eQzN:function(t,i,e){"use strict";var s=e("4CSE");e.n(s).a},k5RN:function(t,i,e){"use strict";var s=e("F9re");e.n(s).a},tfLl:function(t,i,e){"use strict";var s=(e("k5RN"),e("KHd+")),n=Object(s.a)({name:"",props:["title","hasBack"],data:function(){return{}},methods:{backEvent:function(){this.$emit("backEvent","")},getTotalHeight:function(){return"height:"+(this.$store.state.barHeight+this.$market.getNavHeight())+"px;"}},created:function(){}},(function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"navigation",style:t.getTotalHeight()},[s("div",{staticClass:"navigation-content",style:{top:this.$store.state.barHeight+"px"}},["1"==t.hasBack?s("div",{staticClass:"back-div",on:{click:function(i){return t.backEvent()}}},[s("img",{staticClass:"back-img",attrs:{src:e("cnNK")}})]):t._e(),t._v(" "),s("div",{staticClass:"page-title"},[t._v(t._s(t.title))])])])}),[],!1,null,"2a7ccb57",null);i.a=n.exports}}]);