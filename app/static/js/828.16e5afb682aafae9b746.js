(window.webpackJsonp=window.webpackJsonp||[]).push([[828],{TY1X:function(e,t,a){"use strict";a.r(t);var n=a("7//l"),s=a("Gedb");function o(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function n(s,o){try{var i=t[s](o),c=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(c).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(c)}("next")}))}}var i={data:function(){return{digitalPWD:"",facePayPwdState:"",defaultPayPwdMode:"",checked:!1,state:0}},mounted:function(){this.defaultPayPwdMode=this.$route.query.defaultPayPwdMode,this.facePayPwdState=this.$route.query.facePayPwdState,this.checked=13==this.defaultPayPwdMode,this.state=13==this.defaultPayPwdMode?1:0},destroyed:function(){n.a.close()},methods:{backEvent:function(){this.$router.go(-1)},change:function(){var e=this;1==this.state?this.closeUserSpecialPayPwd():0==this.facePayPwdState?this.$bridgefunc.fingerPrintRe((function(t){"1"==t?e.setUserSpecialPayPwd(13):(e.checked=!1,e.$Toast("面部识别失败"))})):n.a.open({initData:{payPwdState:2,title:"开启刷脸支付",tips:"请先输入6位数字支付密码已验证身份"},toSettingPwd:function(){e.$router.push({path:"/usercenter/nosetpwd",query:{isSet:2}}),n.a.close()},inputFinished:function(t){e.digitalPWD=t,n.a.close(),e.$bridgefunc.fingerPrintRe((function(t){"1"==t?e.openUserSpecialPayPwd(13,e.digitalPWD):(e.checked=!1,e.$Toast("面部识别失败"))}))}})},closeUserSpecialPayPwd:function(){var e=this;this.$request.post("/app/json/user/closeUserSpecialPayPwd",{payPwdMode:13}).then((function(t){0===t.status?(e.$Toast("刷脸支付关闭成功"),e.checked=!1):(e.checked=!0,e.$Toast(t.info?t.info:"刷脸支付关闭失败"))}))},setUserSpecialPayPwd:function(e){var t=this;return o(regeneratorRuntime.mark((function a(){var n,s,o,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$bridgefunc.getArgsWithPromise();case 2:n=a.sent,t.$Loading.open("请求中"),"/app/json/user/setUserSpecialPayPwd",s=t.$store.state.login.token,o=(new Date).valueOf(),i={token:s,payPwdMode:e,userPayPwd:o,deviceId:n.deviceId},t.$http.post("/app/json/user/setUserSpecialPayPwd",i).then((function(e){t.$Loading.close();var a=e.data;0==a.status?(t.$store.state.pwdStates.facePwd=a.data,t.$bridgefunc.vuexStorage(),t.checked=!0,t.$Toast({message:a.info?a.info:"打开成功！",position:"bottom",duration:2e3}),t.checked=!0):(t.checked=!1,t.$Toast({message:a.info?a.info:"打开失败！",position:"bottom",duration:2e3}))}),(function(e){t.checked=!1,t.$Loading.close(),t.$Toast({message:"打开失败！",position:"bottom",duration:2e3})}));case 9:case"end":return a.stop()}}),a,t)})))()},openUserSpecialPayPwd:function(e,t){var a=this;return o(regeneratorRuntime.mark((function n(){var o,i,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.$bridgefunc.getArgsWithPromise();case 2:o=n.sent,a.$Loading.open("请求中"),"/app/json/user/openUserSpecialPayPwd",i=a.$store.state.login.token,c={token:i,payPwdMode:e,userPayPwd:a.$store.state.pwdStates.facePwd,deviceId:o.deviceId,originalPwd:Object(s.a)(t)},a.$http.post("/app/json/user/openUserSpecialPayPwd",c).then((function(e){a.$Loading.close();var t=e.data;0==t.status?(a.$store.state.pwdStates.touchPwd=t.data,a.$bridgefunc.vuexStorage(),a.checked=!0,a.$Toast({message:t.info?t.info:"打开成功！",position:"bottom",duration:2e3}),a.checked=!0):(a.checked=!1,a.$Toast({message:t.info?t.info:"打开失败！",position:"bottom",duration:2e3}))}),(function(e){a.checked=!1,a.$Loading.close(),a.$Toast({message:"打开失败！",position:"bottom",duration:2e3})}));case 8:case"end":return n.stop()}}),n,a)})))()}},components:{}},c=(a("bMii"),a("KHd+")),r=Object(c.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gestures-pwd-set"},[a("nav-top",{attrs:{title:"刷脸支付"},on:{backEvent:e.backEvent}}),e._v(" "),a("nav-content",{staticClass:"gestures-pwd-set-container"},[a("div",{staticClass:"table-view list"},[a("div",{staticClass:"table-view-cell item"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[e._v("开启刷脸支付")]),e._v(" "),a("div",{staticClass:"right"},[a("van-switch",{attrs:{size:"20px","active-color":"#F80F16"},on:{change:e.change},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)])])])])],1)}),[],!1,null,"32161e28",null);t.default=r.exports},bEwC:function(e,t,a){},bMii:function(e,t,a){"use strict";var n=a("bEwC");a.n(n).a}}]);