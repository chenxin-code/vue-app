(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-982eec1c"],{"194b":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index"},[t._m(0),i("div",{ref:"sroll_list",staticClass:"list"},[i("CardList",{attrs:{listData:t.listData},on:{productEvent:t.productEvent}})],1)])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"recommend-row"},[i("div",{staticClass:"title theme_border_red"},[t._v("同店好货")])])}],o=i("e42a"),l={name:"index",components:{CardList:o["a"]},props:["skuId","deliveryType"],data:function(){return{listData:[]}},methods:{getScrollSite:function(){return this.$refs.sroll_list?this.$refs.sroll_list.scrollTop:0},setScrollSite:function(t){t>0&&(this.$refs.sroll_list.scrollTop=t)},productEvent:function(t){var e="/mall2/detail/"+this.$util.getDataString();2==t.productType&&(e="/mall2/ticketdetail"),this.$router.push({path:e,query:{id:t.id,skuId:t.skuId,lastPath:this.$route.path,productType:t.productType}})},_getRecommendData:function(){var t=this,e="/app/json/product/getAppHotProSkuSaleListModel",i={token:this.$store.state.login.token,skuId:this.skuId,lng:this.$store.state.currentLocation.posx,lat:this.$store.state.currentLocation.posy,deliverType:this.deliveryType};this.$http.post(e,i).then((function(e){var i=e.data;0==i.status?t.listData=i.data.list:t.$Toast(i.info)}),(function(e){t.$Toast("请求数据失败！")}))}},created:function(){this._getRecommendData()}},r=l,n=(i("d1d1"),i("0c7c")),c=Object(n["a"])(r,s,a,!1,null,"2c3f02d2",null);e["a"]=c.exports},2434:function(t,e,i){"use strict";i("dc65")},b67ea:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail mall2"},[i("div",{ref:"detailTop2",staticClass:"detail-top",style:{height:t.$store.state.barHeight+t.$market.getNavHeight(!0)+"px"}},[i("div",{staticClass:"navcontent",style:{top:t.$store.state.barHeight+"px",height:t.$market.getNavHeight(!0)+"px","line-height":t.$market.getNavHeight(!0)+"px"}},[2!=t.$store.state.webtype?i("div",{staticClass:"nav-back-btn",staticStyle:{left:"10px",top:"5px",width:"34px",height:"34px",padding:"5px"},on:{click:t.backEvent}},[i("img",{staticStyle:{display:"block",width:"100%",height:"100%"},attrs:{src:"static/image/mall2/back.png"}})]):t._e()])]),t.detailShow?i("div",{ref:"detailTop1",staticClass:"detail-top",staticStyle:{visibility:"hidden"},style:{height:t.$store.state.barHeight+t.$market.getNavHeight(!0)+"px"}},[i("nav-top",{attrs:{isMust:"true",noBack:2==t.$store.state.webtype,noTitle:!0},on:{backEvent:t.backEvent}},[i("transition",{attrs:{name:"transition1"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.proView,expression:"proView == 1"}],staticClass:"detail-tab",staticStyle:{left:"20%",right:"20%","font-size":"16px"}},[i("div",{staticClass:"btn-div",style:t.getSelectedTabStyle(1),on:{click:function(e){return t.toptabEvent(1)}}},[t._v(" 商品 ")]),i("div",{staticClass:"btn-div",style:t.getSelectedTabStyle(2),on:{click:function(e){return t.toptabEvent(2)}}},[t._v(" 详情 ")]),i("div",{staticClass:"btn-div",style:t.getSelectedTabStyle(3),on:{click:function(e){return t.toptabEvent(3)}}},[t._v(" 评价 ")]),i("div",{staticClass:"btn-div",style:t.getSelectedTabStyle(4),on:{click:function(e){return t.toptabEvent(4)}}},[t._v(" 推荐 ")])])]),i("transition",{attrs:{name:"transition2"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.proView,expression:"proView == 2"}],staticStyle:{position:"absolute",left:"20%",right:"20%","font-size":"18px","font-weight":"500","text-align":"center"}},[t._v(" 图文详情 ")])])],1)],1):t._e(),t.detailShow?i("div",{ref:"scrollView",staticClass:"scroll-div theme_bg_white",style:t.getScrollTop()},[i("swiper",{ref:"mySwiper",staticClass:"main-swiper",attrs:{options:t.mainSwiper}},[i("swiper-slide",{class:{"swiper-no-swiping":2==t.proView}},[i("div",{staticClass:"main-swiper",staticStyle:{position:"relative"}},[i("transition",{attrs:{name:"transition1"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.proView,expression:"proView == 1"}],staticClass:"main-swiper theme_bg_white_f5",staticStyle:{position:"absolute"}},[i("pull-to",{ref:"pullTo1",attrs:{bottomConfig:{pullText:"",triggerText:"释放显示商品详情",loadingText:"加载中...",doneText:"加载完成",failText:"加载失败",loadedStayTime:400,stayDistance:40,triggerDistance:50},"bottom-load-method":t.bottomPull,"top-load-method":t.topPull,"is-bottom-bounce":!0,"is-top-bounce":!1,doSiteCallback:!0},on:{pageSite:t.pullScrollEvent}},[i("div",[i("div",{staticClass:"swiper-div theme_bg_white"},[i("swiper",{attrs:{options:t.swiperOption}},[""!=t.videoUrl?i("swiper-slide",[i("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:t.playerOptions}})],1):t._e(),t._l(t.detailData.picUrls,(function(e,s){return i("swiper-slide",{key:s},[i("div",{staticClass:"swiper-img-div",on:{click:t.showBigImageEvent}},[i("img",{attrs:{src:e}})])])}))],2),i("div",{staticClass:"swiper-index"},t._l(t.arrLen,(function(e,s){return i("div",{staticClass:"si-item theme_bg_white_ef",class:{"cus-index":t.proImgIndex==s,theme_bg_red_i:t.proImgIndex==s}})})),0)],1),i("div",{staticClass:"base-info theme_bg_white"},[3==t.detailData.mktActivityPriceLevel?i("div",{staticClass:"seconds-kill"},[i("div",{staticClass:"left-div"},[i("div",{staticClass:"sk-row"},[i("div",{staticClass:"price theme_font_white"},[i("span",[t._v("￥")]),i("span",{staticClass:"price-z"},[t._v(t._s(t.detailData.dpedData.integer))]),i("span",[t._v("."+t._s(t.detailData.dpedData.decimals))])]),i("div",{staticClass:"progress"},[i("mt-progress",{attrs:{value:t.detailData.soldNum||0,"bar-height":16}})],1),t.detailData.soldNum<100?i("div",{staticClass:"progress-text theme_font_white"},[t._v(" 已抢"+t._s(t.detailData.soldNum||0)+"% ")]):i("div",{staticClass:"progress-text theme_font_white"},[t._v(" 已抢光 ")])]),i("div",{staticClass:"sk-row"},[i("div",{staticClass:"sk-icon"},[i("i",{staticClass:"iconfont mall-icon-test theme_bg_white theme_font_red"}),i("span",{staticClass:"theme_font_white"},[t._v("秒杀价")])]),i("div",{staticClass:"o-price theme_font_white",class:{"line-through":2==t.$store.state.globalConfig.priceShowType}},[1==t.$store.state.globalConfig.priceShowType?i("span",[t._v("原价:")]):t._e(),t._v(":￥"+t._s(t.$util.toDecimal2(t.$util.toDecimal2(t.detailData.dpedData.linePrice)))+" ")])])]),i("div",{staticClass:"right-div theme_bg_light_red"},[i("div",{staticClass:"skr-row theme_font_red"},[t._v(" 距离结束还剩: ")]),i("div",{staticClass:"skr-row"},[i("Countdown",{attrs:{endTime:t.$util.getDateFromString(t.detailData.mktEndDate)}})],1)])]):t._e(),3!=t.detailData.mktActivityPriceLevel?i("div",{staticClass:"price"},[i("PriceOrder",{attrs:{detailitem:t.detailData}}),t.detailData.dpedData.linePrice?i("span",{staticClass:"price-small theme_font_tint left-m-8",class:{"line-through":2==t.$store.state.globalConfig.priceShowType}},[1==t.$store.state.globalConfig.priceShowType?i("span",[t._v("原价:")]):t._e(),t._v("￥"+t._s(t.$util.toDecimal2(t.$util.toDecimal2(t.detailData.dpedData.linePrice))))]):t._e()],1):t._e(),t.noticeIsShow()?i("div",{staticClass:"row"},[i("div",{staticClass:"activity-notice"},[i("div",{staticClass:"sk-icon"},[i("i",{staticClass:"iconfont mall-icon-test theme_bg_red theme_font_white"}),i("span",{staticClass:"theme_font_red"},[t._v(t._s(t.detailData.noticeActivityDetail.activityType)+"价")])]),i("div",{staticClass:"notice-price theme_font_red"},[t._v(" "+t._s(t.getNoticeTime()+" "+t.getNoticePrice())+" ")])])]):t._e(),i("div",{staticClass:"row"},[i("div",{staticClass:"title theme_font_black",domProps:{innerHTML:t._s(t.detailData.showTitle)}})])]),4==t.productType?i("div",{staticClass:"block-div theme_bg_white"},[i("div",{staticClass:"flex-row"},[i("div",{staticClass:"title theme_font_black"},[t._v("套装明细")])]),t._l(t.detailData.packageSkuList,(function(e){return i("div",{staticClass:"pro-row"},[i("div",{staticClass:"img-div"},[i("img",{attrs:{src:e.phMainUrl}})]),i("div",{staticClass:"info-div"},[i("div",{staticClass:"title pro-title-height double-line theme_font_black",domProps:{innerHTML:t._s(e.showTitle)}}),i("div",{staticClass:"feature-names double-line theme_font_tint"},[t._v(t._s(e.featureNames))]),i("div",{staticClass:"price"},[i("span",{staticClass:"font-small theme_font_tint",staticStyle:{float:"right"}},[t._v("x "+t._s(e.skuNum)+" "+t._s(e.metric))]),i("span",{staticClass:"font-small theme_font_red"},[t._v("￥")]),i("span",{staticClass:"price-mid theme_font_red full"},[t._v(t._s(e.salePrice))])])])])}))],2):t._e(),t.singleActivities_2.length>0&&null!=t.curSingleActivity?i("div",{staticClass:"block-div theme_bg_white"},[i("div",{staticClass:"flex-row"},[i("p",{staticClass:"sl-tag theme_border_red_i theme_font_red"},[t._v(t._s(t.curSingleActivity.activityType))]),i("p",{staticClass:"sl-title single-line"},[t._v(t._s(t.curSingleActivity.activityTitle))]),t.singleActivities_2.length>1?i("p",{staticClass:"good-salespro-right",on:{click:function(e){return t.reviseSingleActivity()}}},[t._v("修改")]):t._e(),1==t.singleActivities_2.length?i("p",{staticClass:"good-salespro-right",on:{click:function(e){return t.removeSingleActivity()}}},[t._v("不参加")]):t._e()])]):t._e(),t.singleActivities_2.length>0&&null==t.curSingleActivity?i("div",{staticClass:"block-div theme_bg_white"},t._l(t.singleActivities_2,(function(e){return i("div",{staticClass:"flex-row"},[i("p",{staticClass:"sl-tag theme_border_red_i theme_font_red"},[t._v(t._s(e.activityType))]),i("p",{staticClass:"sl-title single-line"},[t._v(t._s(e.activityTitle))]),i("p",{staticClass:"good-salespro-right",on:{click:function(i){return t.joinSingleActivity(e)}}},[t._v("参加")])])})),0):t._e(),i("div",{staticClass:"block-div theme_bg_white"},[i("div",{staticClass:"flex-row",on:{click:t.couponEvent}},[i("div",{staticClass:"label-middle theme_font_gray"},[t._v("领券")]),""==t.detailData.couponModels?i("div",{staticClass:"font-small theme_font_tint"},[t._v("暂无可用优惠券")]):t._e(),t._l(t.detailData.couponModels,(function(e,s){return""!=t.detailData.couponModels&&s<2?i("div",{staticClass:"act-item-full theme_standard_bg theme_font_white"},[t._v(t._s(e.couTypeTitle)+" ")]):t._e()})),i("div",{staticClass:"full"}),i("div",[i("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])],2),t._l(t.detailData.activityList,(function(e,s){return i("div",{staticClass:"flex-row",on:{click:function(e){t.showActivity=!0}}},[i("div",{staticClass:"label-middle theme_font_gray"},[t._v(t._s(0==s?"促销":""))]),i("div",{staticClass:"act-item-empty theme_standard_font theme_standard_bdr single-line"},[t._v(t._s(e.type))]),i("div",{staticClass:"activity-text theme_font_common full single-line"},[t._v(t._s(e.title))]),0==s?i("div",[i("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})]):t._e()])}))],2),i("div",{staticClass:"block-div theme_bg_white"},[i("div",{staticClass:"flex-row",on:{click:t.proSelectEvent}},[i("div",{staticClass:"label-middle theme_font_gray"},[t._v("已选")]),i("div",{staticClass:"theme_font_black",staticStyle:{"font-weight":"500"}},[t._v(t._s(t.selectedText))]),i("div",{staticClass:"full"}),i("div",[i("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])])]),5!=t.detailData.productType?i("div",{staticClass:"block-div no-padding-bottom theme_bg_white"},["2"==t.detailData.deliveryType?i("div",{staticClass:"flex-row",staticStyle:{"align-items":"flex-start"},on:{click:t.selectArea}},[i("div",{staticClass:"label-middle theme_font_gray"},[t._v("送至")]),""==t.$store.state.mall2.selectAddress.id?i("div",{staticClass:"theme_font_black full address-div"},[t._v(" "+t._s(t.regionText)+" ")]):t._e(),""!=t.$store.state.mall2.selectAddress.id?i("div",{staticClass:"theme_font_black full address-div"},[t._v(" "+t._s(t.$store.state.mall2.selectAddress.addressFull)+" ")]):t._e(),i("div",[i("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])]):t._e(),"1"==t.detailData.deliveryType?i("div",{staticClass:"flex-row",on:{click:t.selectPickUpAddress}},[i("div",{staticClass:"label-middle theme_font_gray"},[t._v("自提点")]),i("div",{staticClass:"theme_font_black"},[t._v(t._s(t.$store.state.mall2.zitiAddress.storeName))]),i("div",{staticClass:"full"}),i("div",[i("i",{staticClass:"iconfont mall-gengduo more-icon theme_font_tint"})])]):t._e(),i("div",{staticClass:"color-row theme_bg_dark"},t._l(t.detailData.saleServices,(function(e){return parseInt(e.days)>0?i("div",{staticClass:"server-item"},[i("i",{staticClass:"iconfont mall-dui theme_standard_font icon-font"}),i("span",[t._v(t._s(t.getServerText(e)))])]):t._e()})),0)]):t._e(),t.detailComment.evaluateCount>0?i("div",{staticClass:"block-div theme_bg_white"},[i("div",{staticClass:"flex-row",on:{click:t.allCommentEvent}},[0==t.detailComment.evaluateCount?i("div",{staticClass:"title theme_font_black"},[t._v("暂无评价")]):t._e(),t.detailComment.evaluateCount>0?i("div",{staticClass:"title theme_font_black"},[t._v(" 评价（"+t._s(t.detailComment.evaluateCount)+"） ")]):t._e(),i("div",{staticClass:"full"}),t.detailComment.evaluateCount>0?i("div",{staticClass:"font-small right-margin theme_font_common"},[i("span",[t._v("好评率")]),i("span",{staticClass:"theme_standard_font"},[t._v(t._s(t.detailComment.evaluateGoodRate))])]):t._e(),i("div",[i("i",{staticClass:"iconfont mall-gengduojiantou icon-font theme_font_common"})])]),t._l(t.detailComment.evaluateList,(function(e){return i("div",{staticClass:"comment-div"},[i("div",{staticClass:"flex-row comment-row theme_font_common"},[i("div",{staticClass:"header-img right-margin"},[i("img",{attrs:{src:""!=e.userAvtUrl?e.userAvtUrl:"static/image/mall2/header.png"}})]),i("div",{staticClass:"right-margin full"},[t._v(t._s(t.getCommentUserStr(e)))]),i("div",{},t._l(5,(function(t){return i("i",{staticClass:"iconfont mall-xingxing icon-level theme_font_tint",class:{theme_standard_font_i:e.score>=t}})})),0)]),i("div",{staticClass:"flex-row comment-row theme_font_gray"},[i("div",{staticStyle:{"line-height":"1.4"}},[t._v(t._s(e.evaluateContent))])]),""!=e.evaluateImages?i("div",{staticClass:"imgs"},t._l(t.getCommentImgs(e.evaluateImages),(function(e,s){return s<4?i("div",{staticClass:"s-img-div"},[i("img",{attrs:{src:e}})]):t._e()})),0):t._e()])}))],2):t._e(),t.detailData.packageList.length>0?i("div",{staticClass:"block-div theme_bg_white"},[i("div",{staticClass:"flex-row"},[i("div",{staticClass:"title theme_font_black"},[t._v("组合套装")])]),i("div",{staticClass:"recommend-div padding-bottom-8"},t._l(t.detailData.packageList,(function(e){return i("div",{staticClass:"pro-div",on:{click:function(i){return t.productPickageEvent(e)}}},[t._v(" "+t._s(t.dataProcessing(e))+" "),i("div",{staticClass:"img-div"},[i("img",{attrs:{src:e.phMainUrl}})]),i("div",{staticClass:"title single-line theme_font_black"},[t._v(t._s(e.skuName))]),i("div",{staticClass:"price single-line"},[i("span",{staticClass:"font-small theme_font_red"},[t._v("￥")]),i("span",{staticClass:"left-no-space price-z theme_font_red"},[t._v(t._s(e.dpedData.integer))]),i("span",{staticClass:"left-no-space font-small theme_font_red"},[t._v("."+t._s(e.dpedData.decimals))]),e.dpedData.linePrice&&e.activityPrice<e.salePrice?i("span",{staticClass:"font-small theme_font_tint left-m-8",class:{"line-through":2==t.$store.state.globalConfig.priceShowType}},[1==t.$store.state.globalConfig.priceShowType?i("span",[t._v("原价:")]):t._e(),t._v("￥"+t._s(t.$util.toDecimal2(e.dpedData.linePrice)))]):t._e()])])})),0)]):t._e(),i("div",{staticClass:"load-next theme_bg_white"},[i("img",{attrs:{src:"static/image/mall2/load-next.png"}}),i("span",{staticClass:"theme_font_tint"},[t._v("上拉加载图文详情")])])])])],1)]),i("transition",{attrs:{name:"transition2"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.proView,expression:"proView == 2"}],staticClass:"main-swiper",staticStyle:{position:"absolute",top:"44px"}},[i("div",{staticClass:"btns-div theme_bg_white"},[i("div",{staticClass:"btn-item theme_font_gray",class:{theme_standard_font_i:1==t.introductionIndex},on:{click:function(e){return t.introductionSelected(1)}}},[t._v("商品介绍 ")]),i("div",{staticClass:"btn-item theme_font_gray",class:{theme_standard_font_i:2==t.introductionIndex},on:{click:function(e){return t.introductionSelected(2)}}},[t._v("规格参数 ")]),i("div",{staticClass:"btn-item theme_font_gray",class:{theme_standard_font_i:3==t.introductionIndex},on:{click:function(e){return t.introductionSelected(3)}}},[t._v("售后包装 ")])]),i("div",{staticClass:"detail-div detail-div-1"},[i("pull-to",{ref:"pullTo2",attrs:{topConfig:{pullText:"",triggerText:"释放显示商品介绍",loadingText:"加载中...",doneText:"加载完成",failText:"加载失败",loadedStayTime:400,stayDistance:40,triggerDistance:50},"top-load-method":t.topPull,"is-bottom-bounce":!1,"is-top-bounce":!0}},[i("div",{staticClass:"detail-content detail-bottom"},[1==t.introductionIndex?i("div",{staticClass:"tip"},[i("span",{staticClass:"line"}),i("span",{staticClass:"text"},[t._v("商品信息")]),i("span",{staticClass:"line"})]):t._e(),1==t.introductionIndex?i("div",{staticClass:"introduction-div",domProps:{innerHTML:t._s(t.introduction1)}}):t._e(),2==t.introductionIndex?i("div",{staticClass:"introduction-div",domProps:{innerHTML:t._s(t.introduction2)}}):t._e(),3==t.introductionIndex?i("div",{staticClass:"introduction-div",domProps:{innerHTML:t._s(t.introduction3)}}):t._e()])])],1)])])],1)]),i("swiper-slide",[i("div",{staticClass:"main-swiper",staticStyle:{position:"relative"}},[i("div",{ref:"scrollView2",staticClass:"main-swiper-scroll-content enable-scroll",staticStyle:{top:"44px"}},[i("div",{staticClass:"detail-div"},[i("div",{staticClass:"btns-div theme_bg_white"},[i("div",{staticClass:"btn-item theme_font_gray",class:{theme_standard_font_i:1==t.introductionIndex},on:{click:function(e){return t.introductionSelected(1)}}},[t._v("商品介绍 ")]),i("div",{staticClass:"btn-item theme_font_gray",class:{theme_standard_font_i:2==t.introductionIndex},on:{click:function(e){return t.introductionSelected(2)}}},[t._v("规格参数 ")]),i("div",{staticClass:"btn-item theme_font_gray",class:{theme_standard_font_i:3==t.introductionIndex},on:{click:function(e){return t.introductionSelected(3)}}},[t._v("售后包装 ")])]),i("div",{staticClass:"detail-content"},[1==t.introductionIndex?i("div",{staticClass:"tip"},[i("span",{staticClass:"line"}),i("span",{staticClass:"text"},[t._v("商品信息")]),i("span",{staticClass:"line"})]):t._e(),1==t.introductionIndex?i("div",{staticClass:"introduction-div",domProps:{innerHTML:t._s(t.introduction1)}}):t._e(),2==t.introductionIndex?i("div",{staticClass:"introduction-div",domProps:{innerHTML:t._s(t.introduction2)}}):t._e(),3==t.introductionIndex?i("div",{staticClass:"introduction-div",domProps:{innerHTML:t._s(t.introduction3)}}):t._e()])])])])]),i("swiper-slide",[i("div",{staticClass:"main-swiper",staticStyle:{position:"relative"}},[i("div",{ref:"scrollView3",staticClass:"main-swiper-scroll-content enable-scroll",staticStyle:{top:"44px"}},[t.load3?i("Judgement",{directives:[{name:"show",rawName:"v-show",value:3==t.toptab,expression:"toptab == 3"}],attrs:{skuId:this.skuId},on:{showBigImgs:t.showBigImgsEvent}}):t._e()],1)])]),i("swiper-slide",[i("div",{staticClass:"main-swiper",staticStyle:{position:"relative"}},[i("div",{ref:"scrollView4",staticClass:"main-swiper-scroll-content enable-scroll",staticStyle:{top:"44px"}},[t.load4?i("Recommend",{directives:[{name:"show",rawName:"v-show",value:4==t.toptab,expression:"toptab == 4"}],attrs:{deliveryType:this.deliveryType,skuId:this.skuId}}):t._e()],1)])])],1)],1):t._e(),0==t.canSale?i("div",{staticClass:"bottom-tip theme_bg_yl theme_standard_font_i"},[t._v("该商品在该地区暂不支持配送，非常抱歉！")]):t._e(),t.detailShow?i("div",{staticClass:"bottom-btns"},[i("div",{ref:"gouwuche",staticClass:"btn full",on:{click:t.toCart}},[t.$store.state.microSho.carts.length+t.$store.state.microSho.groupbuyingCarts.length>0?i("p",{staticClass:"cart-num theme_bg_red theme_font_white"},[t._v(" "+t._s(t.$store.state.microSho.carts.length+t.$store.state.microSho.groupbuyingCarts.length))]):t._e(),i("i",{staticClass:"iconfont mall-gouwuche btn-icon theme_font_gray"}),i("p",{staticClass:"text"},[t._v("购物车")])]),i("div",{staticClass:"btn full",on:{click:t.collectEvent}},["false"==t.isCollect?i("i",{staticClass:"iconfont mall-shoucang btn-icon theme_font_gray"}):t._e(),i("transition",{attrs:{name:t.collectName}},["true"==t.isCollect?i("img",{staticClass:"btn-img",attrs:{src:"static/image/mall2/collect.png"}}):t._e()]),i("p",{staticClass:"text"},[t._v("收藏")])],1),0!=t.stockNum&&1==t.canSale&&"0"!=t.detailData.status?i("div",{staticClass:"btn theme_standard_bg theme_font_white",on:{click:function(e){return t.addToCart(t.detailData)}}},[i("p",{staticClass:"title"},[t._v("加入购物车")])]):t._e(),0!=t.stockNum&&1==t.canSale&&"0"!=t.detailData.status?i("div",{staticClass:"btn theme_bg_y theme_font_white",on:{click:t.buyNowEvent}},[i("p",{staticClass:"title"},[t._v("立即购买")])]):t._e(),0==t.stockNum&&1==t.canSale&&"0"!=t.detailData.status?i("div",{staticClass:"btn big-btn theme_bg_y theme_font_white",on:{click:t.noStockEvent}},[i("p",{staticClass:"title"},[t._v("商品缺货")])]):t._e(),1==t.canSale&&"0"==t.detailData.status?i("div",{staticClass:"btn big-btn theme_bg_y theme_font_white",on:{click:t.canNotSaleEvent}},[i("p",{staticClass:"title"},[t._v("商品已下架")])]):t._e(),0==t.canSale?i("div",{staticClass:"btn big-btn theme_bg_y theme_font_white",on:{click:t.canNotSaleEvent}},[i("p",{staticClass:"title"},[t._v("不在可售区域")])]):t._e()]):t._e(),t.showPop?i("pop-view",{on:{closeEvent:t.popClose}},[i("div",{staticClass:"pop-body"},[i("div",{staticClass:"pro-row"},[i("div",{staticClass:"img-div"},[i("img",{attrs:{src:t.detailData.phMainUrl}})]),i("div",{staticClass:"info-div"},[i("div",{staticClass:"title theme_font_black",domProps:{innerHTML:t._s(t.detailData.showTitle)}}),i("div",{staticClass:"price"},[i("PriceOrder",{attrs:{listitem:t.detailData}})],1)])]),i("div",{staticClass:"pop-scroll-div"},[t._l(t.detailData.featureList,(function(e,s){return t.featureRefresh?i("div",{staticClass:"items-div"},[i("div",{staticClass:"title theme_font_common"},[t._v(t._s(e.featureName))]),t._l(e.featureValueList,(function(e){return i("div",{staticClass:"item theme_font_common theme_bg_white_ef",class:{"theme_light_bg_i theme_standard_font_i theme_standard_bdr_i":e.selected,theme_font_tint_i:t.getCanSelectWith(s,e)},on:{click:function(i){return t.subFeatureEvent(e,s)}}},[t._v(" "+t._s(e.featureValue)+" ")])}))],2):t._e()})),i("div",{staticClass:"count-line"},[i("div",{staticClass:"full theme_font_common"},[t._v("购买数量（库存 "+t._s(t.stockNum)+"）")]),i("van-stepper",{attrs:{min:t.minNum,max:t.maxNum,step:t.stepNum,integer:""},on:{change:t.numChange},model:{value:t.selectedNum,callback:function(e){t.selectedNum=e},expression:"selectedNum"}})],1)],2),"addToCart"==t.popFlag?i("div",{staticClass:"bottom-btn theme_font_white theme_bg_red",on:{click:function(e){return t.popSureEvent(t.detailData)}}},[t._v("加入购物车 ")]):t._e(),"buyNow"==t.popFlag?i("div",{staticClass:"bottom-btn theme_font_white theme_bg_red",on:{click:t.popSureEvent}},[t._v("立即购买 ")]):t._e()])]):t._e(),t.showActivity?i("pop-view",{on:{closeEvent:function(e){t.showActivity=!1}}},[i("div",{staticClass:"pop-body"},[i("div",{staticClass:"pop-title theme_font_common"},[t._v("促销")]),i("div",{staticClass:"pop-scroll-div"},t._l(t.detailData.activityList,(function(e,s){return i("div",{staticClass:"activity-div",on:{click:function(i){return t.activityProducts(e)}}},[i("div",{staticClass:"act-item-empty theme_border_red theme_font_red"},[t._v(t._s(e.type))]),i("div",{staticClass:"activity-text theme_font_common full"},[t._v(t._s(e.title))]),i("i",{staticClass:"iconfont mall-gengduojiantou more-icon theme_font_tint"})])})),0)])]):t._e(),t.showSelectDeliveryType?i("pop-view",{on:{closeEvent:function(e){t.showSelectDeliveryType=!1}}},[i("div",{staticClass:"pop-body"},[i("div",{staticClass:"pop-title theme_font_common"},[t._v("切换配送方式")]),i("div",{staticClass:"pop-scroll-div"},[i("div",{staticClass:"activity-div",on:{click:function(e){return t.changeDelivery("1")}}},[i("div",{staticClass:"act-item-empty theme_border_red theme_font_red"},[t._v("自提")]),i("div",{staticClass:"activity-text theme_font_common full"},[t._v("您需要到选中的自提点提货")]),i("i",{staticClass:"iconfont more-icon",class:"1"==t.detailData.deliveryType?["mall-xuanzhong","theme_font_red"]:["mall-weixuanzhong","theme_font_tint"]})]),i("div",{staticClass:"activity-div",on:{click:function(e){return t.changeDelivery("2")}}},[i("div",{staticClass:"act-item-empty theme_border_red theme_font_red"},[t._v("配送")]),i("div",{staticClass:"activity-text theme_font_common full"},[t._v("将会送至您指定的位置")]),i("i",{staticClass:"iconfont more-icon",class:"2"==t.detailData.deliveryType?["mall-xuanzhong","theme_font_red"]:["mall-weixuanzhong",t.theme_font_tint]})])])])]):t._e(),t.showSelect?i("RegionSelect",{ref:"regionselect",attrs:{initData:t.initData},on:{selectedItemsEvent:t.selectedItemsEvent,closeEvent:t.regionCloseEvent}}):t._e(),i("transition",{attrs:{name:"bounce"},on:{afterEnter:t.productImgAfterEnter}},[t.showProductImg?i("img",{staticClass:"productImg",attrs:{src:this.detailData.phMainUrl,alt:""}}):t._e()]),i("transition",{on:{"after-enter":t.afterEnter,"before-enter":t.beforeEnter}},[t.showAddCartAn?i("div",{staticClass:"anProductImg"},[i("img",{attrs:{src:this.detailData.phMainUrl,alt:""}})]):t._e()]),t.showBigImage?i("BigImage",{attrs:{initIndex:""!=t.videoUrl?t.proImgIndex-1:t.proImgIndex,picUrls:t.detailData.picUrls},on:{closeEvent:t.closeBigImage}}):t._e(),t.showPicUrls?i("BigImage",{attrs:{picUrls:t.picUrls},on:{closeEvent:t.closeBigImage}}):t._e()],1)},a=[],o=i("5530"),l=(i("0d03"),i("ac1f"),i("5319"),i("1276"),i("a434"),i("a15b"),i("b0c0"),i("4160"),i("159b"),i("2f62")),r=(i("fda2"),i("d6d3")),n=i("f648"),c=i("590c"),d=i("da71"),u=i("5b7e"),h=(i("ee7c"),i("72c7")),p=i("662b"),v=i("865a"),m=i("03e7"),f=i("81b7"),_=i("3311"),g=i("49f6"),y=i("194b"),C=i("8431"),b=i("69f4"),$={name:"detail",components:{Countdown:b["default"],Judgement:g["a"],RegionSelect:C["default"],Recommend:y["a"],PullTo:n["a"],BigImage:f["a"],PriceOrder:c["a"],videoPlayer:r["videoPlayer"]},data:function(){var t=this;return{id:"",skuId:"",productType:"",toptab:1,proImgIndex:1,proView:1,page1ScrollTop:0,deliveryType:2,collectName:"",mainSwiper:{autoHeight:!1,spaceBetween:0,speed:200,autoplay:!1,loop:!1,paginationShow:!0,initialSlide:0,observer:!0,observeParents:!0,scrollbarDraggable:!0,scrollbarSnapOnRelease:!0,scrollbarHide:!1,on:{slideChange:function(){if(t.toptab=this.realIndex+1,3==t.toptab?t.load3=!0:4==t.toptab&&(t.load4=!0),0==this.realIndex){if(t.page1ScrollTop<200){var e=t.page1ScrollTop/200;return void(e<.2?(t.$refs.detailTop2.style.visibility="visible",t.$refs.detailTop1.style.visibility="hidden",t.$refs.detailTop2.style.opacity=1):e<1&&(t.$refs.detailTop2.style.visibility="visible",t.$refs.detailTop1.style.visibility="visible",t.$refs.detailTop2.style.opacity=1-e,t.$refs.detailTop1.style.opacity=e))}t.$refs.detailTop2.style.visibility="visible",t.$refs.detailTop1.style.visibility="visible",t.$refs.detailTop2.style.opacity=0,t.$refs.detailTop1.style.opacity=1}else t.$refs.detailTop2.style.visibility="visible",t.$refs.detailTop1.style.visibility="visible",t.$refs.detailTop2.style.opacity=0,t.$refs.detailTop1.style.opacity=1}}},swiperOption:{autoHeight:!1,spaceBetween:0,speed:500,autoplay:{delay:3e3,clickable:!0,disableOnInteraction:!1},loop:!0,paginationShow:!0,initialSlide:0,observer:!0,observeParents:!0,scrollbarDraggable:!0,scrollbarSnapOnRelease:!0,scrollbarHide:!1,on:{slideChange:function(){t.proImgIndex=this.realIndex}}},introductionIndex:1,showPop:!1,selectedText:"",itemSelected:1,selectedNum:1,stepNum:1,maxNum:1,minNum:1,stockNum:1,detailData:{},detailShow:!1,popFlag:"addToCart",detailComment:{},commentListShow:!1,selectedAddress:"",showSelect:!1,regionText:"请选择配送区域",region:[],initData:{title:"请选择地区"},recommendListShow:!1,showActivity:!1,myFeatures:[],introduction1:"",introduction2:"",introduction3:"",isCollect:"false",scrollTopValue2:0,scrollTopValue3:0,scrollTopValue4:0,scrollTopValue5:0,load3:!1,load4:!1,showProductImg:!1,showAddCartAn:!1,addressies:[],backLoadStock:!1,showBigImage:!1,picUrls:[],showPicUrls:!1,lastPath:"",featureRefresh:!0,canSale:!0,matchAddress:null,mktStockNum:-1,activityId:"",singleActivities_2:[],curSingleActivity:null,showSelectDeliveryType:!1,videoUrl:"",playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!0,preload:"auto",language:"zh-CN",aspectRatio:"1:1",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!0,fullscreenToggle:!0}},arrLen:0,storeName:"",storeID:"",proSkuDistributionId:"",microStoreCode:""}},computed:Object(o["a"])({},Object(l["c"])(["getPutaggregate"])),methods:{changeDelivery:function(t){this.showSelectDeliveryType=!1,this.$store.state.mall2.staticDeliverType=t,this.$bridgefunc.vuexStorage(),this.deliveryType=this.$route.query.deliveryType,2==this.$store.state.webtype?this.getWechatDatas():this.getDatas()},selectDeliveryType:function(){this.showSelectDeliveryType=!0},removeSingleActivity:function(){this.activityId="-2",this._getProductDetail()},reviseSingleActivity:function(){for(var t=this,e=[],i=0;i<this.singleActivities_2.length;i++){var s=this.singleActivities_2[i];e.push({mktActivityId:s.activityId,title:s.activityTitle,checked:s.activityId==this.curSingleActivity.activityId})}e.push({mktActivityId:"-2",title:"不参加兑换活动",checked:!1}),_["a"].open({listData:e,sureFunc:function(e){t.activityId=e.mktActivityId,t._getProductDetail()}})},joinSingleActivity:function(t){this.activityId=t.activityId,this._getProductDetail()},noticeIsShow:function(){if(this.detailData.noticeActivityDetail&&""!=this.detailData.noticeActivityDetail&&this.detailData.noticeActivityDetail.activityPrice&&""!=this.detailData.noticeActivityDetail.activityPrice){var t=new Date(this.detailData.noticeActivityDetail.startTime.replace(/\-/g,"/")).getTime()>1e3*this.$store.state.severTime.currentTime;return t}return!1},getNoticeTime:function(){var t=this.detailData.noticeActivityDetail.startTime.replace(/\-/g,"/"),e=new Date(t),i=e.getMonth()+1,s=e.getDate(),a=e.getHours(),o=e.getMinutes(),l=this.$util.getzf(i)+"月"+this.$util.getzf(s)+"日"+this.$util.getzf(a)+":"+this.$util.getzf(o);return l},getNoticePrice:function(){var t=this.detailData.noticeActivityDetail.activityPrice,e=this.detailData.noticeActivityDetail.activityType;return e+"价￥"+this.$util.toDecimal2(t)},getScrollTop:function(){return"top: "+this.$store.state.barHeight+"px;"},canNotSaleEvent:function(){this.$Toast("当前区域不可售")},noStockEvent:function(){this.$Toast("当前地区没有库存！")},descartesInList:function(t,e){for(var i=!1,s=0;s<e.length;s++){var a=e[s],o=a.split(",");if(t.length==o.length){for(var l=0;l<o.length;l++){var r=t[l];if("*"!=r){var n=o[l];if(r!=n){i=!1;break}i=!0}else i=!0}if(i)return!1}}return!0},getCanSelectWith:function(t,e){if(e.selected)return!1;for(var i=this.detailData.kyList,s=this.detailData.featureList,a=[],o=0;o<s.length;o++)if(o!=t){for(var l=s[o],r=!1,n=0;n<l.featureValueList.length;n++){var c=l.featureValueList[n];if(c.selected){r=!0,a.push(c.featureValueId);break}}r||a.push("*")}else a.push(e.featureValueId);return this.descartesInList(a,i)},productPickageEvent:function(t){var e="/mall2/detail/"+this.$util.getDataString();2==t.productType&&(e="/mall2/ticketdetail"),this.$router.push({path:e,query:{id:t.id,skuId:t.skuId,lastPath:this.$route.path,productType:t.productType}})},getSelectedTabStyle:function(t){if(t==this.toptab)return{fontWeight:"600",fontSize:"18px"}},showBigImgsEvent:function(t){this.picUrls=t,this.showPicUrls=!0},getCommentImgs:function(t){return""!=t?t.split(","):[]},closeBigImage:function(){this.showBigImage=!1,this.showPicUrls=!1},showBigImageEvent:function(){this.showBigImage=!0},productImgAfterEnter:function(t){this.showProductImg=!1,this.showAddCartAn=!0},beforeEnter:function(t){t.style.transform="translate3d(0,0,0)",t.children[0].style.opacity=0},afterEnter:function(t){var e=t.getBoundingClientRect().bottom,i=t.children[0].getBoundingClientRect().left,s=this.$refs.gouwuche.getBoundingClientRect().left,a=this.$refs.gouwuche.getBoundingClientRect().top;t.style.transform="translate3d(0,".concat(a-e,"px,0)"),t.style.transition="transform .55s cubic-bezier(0.3, -0.25, 0.7, -0.15)",t.children[0].style.transform="translate3d(".concat(s-i,"px,0,0)"),t.children[0].style.transition="transform .55s linear",t.children[0].style.opacity=1,this.showAddCartAn=!1},_setDefaultPickupAddress:function(t){var e="/app/json/user_address/addDefaultAddress",i={token:this.$store.state.login.token,selfId:t};this.$http.post(e,i).then((function(t){}),(function(t){}))},selectPickUpAddress:function(){var t=this;m["a"].open({initData:{selectedId:this.$store.state.mall2.zitiAddress.id,token:this.$store.state.login.token,posx:this.$store.state.currentLocation.posx,posy:this.$store.state.currentLocation.posy,skuIds:[this.detailData.skuId]},addressEvent:function(e){m["a"].close(),e&&(t.$store.state.mall2.zitiAddress=e,t.$bridgefunc.vuexStorage(),t._getProductDetail(),t._setDefaultPickupAddress(e.id))},otherAddressEvent:function(){t.backLoadStock=!0;var e="/mall2/selfliftingsite",i=[t.detailData.skuId];t.$router.push({path:e,query:{skuIds:JSON.stringify(i)}}),m["a"].close()}})},touchend:function(){var t=this.$refs.scrollView1.scrollTop,e=this.$refs.scrollView1.scrollHeight-this.$refs.scrollView1.offsetHeight;t>e+50&&(this.proView=2)},pageSite:function(){var t=this.$refs.scrollView1.scrollTop;this.pullScrollEvent(t)},pullScrollEvent:function(t){if(1==this.proView){if(this.page1ScrollTop=t,t<200){var e=t/200;return void(e<.5?(this.$refs.detailTop2.style.visibility="visible",this.$refs.detailTop1.style.visibility="hidden",this.$refs.detailTop2.style.opacity=1):e<1&&(this.$refs.detailTop2.style.visibility="visible",this.$refs.detailTop1.style.visibility="visible",this.$refs.detailTop2.style.opacity=1-e,this.$refs.detailTop1.style.opacity=e))}this.$refs.detailTop2.style.visibility="visible",this.$refs.detailTop1.style.visibility="visible",this.$refs.detailTop2.style.opacity=0,this.$refs.detailTop1.style.opacity=1}else this.scrollTopValue2=t},getCommentUserStr:function(t){if(""!=t.userName)return t.userName;var e=t.userPhone+"";if(11==e.length){var i=e.split("");return i.splice(1,9,"*********"),i.join("")}return"未知用户"},bottomPull:function(t){t("done"),this.proView=2},topPull:function(t){t("done"),this.proView=1},toCart:function(){var t="/micro_sho/cart";1==this.$store.state.globalConfig.microshop_groupbuying_exhibition&&(t="/micro_sho/buyingCart"),this.$router.push({path:t,query:{microStoreCode:this.microStoreCode}})},backEvent:function(){2!=this.proView?this.$router.go(-1):this.proView=1},activityProducts:function(t){this.showActivity=!1;var e="/mall2/list/"+this.$util.getDataString();this.$router.push({path:e,query:{pageType:"activity",activity:t.id,delivertype:this.deliveryType,skuId:this.detailData.skuId,storeOuCode:this.detailData.storeOuCode,lastPath:this.$route.path}})},couponProducts:function(t){var e="/mall2/list/"+this.$util.getDataString();this.$router.push({path:e,query:{pageType:"coupon",coupon:t.couTypeCode,couThresholdAmount:t.couThresholdAmount,couFaceValue:t.couFaceValue,skuId:this.detailData.skuId,lastPath:this.$route.path,storeOuCode:this.detailData.storeOuCode,endTime:this.$util.getDateFromString(t.validEndDate)}})},couponEvent:function(){var t=this;""!=this.detailData.couponInList?p["a"].open({initData:{listData:this.detailData.couponInList,skuId:this.detailData.skuId,storeOuCode:this.detailData.storeOuCode,type:"receive",categoryId:this.detailData.categoryId,token:this.$store.state.login.token},selectedCoupon:function(t){p["a"].close()},getedCoupon:function(e){for(var i=0;i<t.detailData.couponInList.length;i++){var s=t.detailData.couponInList[i];if(s.couTypeNo==e.couTypeNo){""==e.validEndDate&&(e.validEndDate=(new Date).getTime()+2592e6),t.detailData.couponInList.splice(i,1,e);break}}},couponProducts:function(e){t.couponProducts(e),p["a"].close()}}):this.$Toast("当前商品没有可领优惠券！")},getServerText:function(t){return 1==t.key?t.days+"天换货":2==t.key?t.days+"天退货":3==t.key?t.days+"天维修":void 0},proSelectEvent:function(){this.popFlag="addToCart",this.showPop=!0},subFeatureEvent:function(t,e){var i=this;if(this.getCanSelectWith(e,t))this.$Toast("当前规格组合没有商品!");else{if(t.selected)return t.selected=!1,this.featureRefresh=!1,void this.$nextTick((function(){i.featureRefresh=!0}));for(var s=this.detailData.featureList[e],a=0;a<s.featureValueList.length;a++){var o=s.featureValueList[a];o.selected=!1}t.selected=!0,this.generateSelectedText(),this.myFeatures.length==this.detailData.featureList.length&&this._getProductDetail()}},numChange:function(){this.generateSelectedText()},generateSelectedText:function(){this.selectedText="",this.myFeatures=[];for(var t=0;t<this.detailData.featureList.length;t++)for(var e=this.detailData.featureList[t],i=0;i<e.featureValueList.length;i++){var s=e.featureValueList[i];if(s.selected){this.selectedText+=s.featureValue+"，",this.myFeatures.push(s.featureValueId);break}}this.selectedText+=this.selectedNum+(this.detailData.metric?this.detailData.metric:"件")},dataProcessing:function(t){var e=this.$mallCommon.priceFromItem(t);t.dpedData=e},_getCustomStock:function(){var t=this;if((2!=this.deliveryType||""!=this.$store.state.mall2.selectAddress.id&&void 0!=this.$store.state.mall2.selectAddress.id)&&(1!=this.deliveryType||""!=this.$store.state.mall2.zitiAddress.id&&void 0!=this.$store.state.mall2.zitiAddress.id)){var e="/app/json/app_stock/querySkuStockByApp",i={token:this.$store.state.login.token,productList:[{skuId:this.detailData.skuId}],areaAddress:{province:this.$store.state.mall2.selectAddress.provinceId,city:this.$store.state.mall2.selectAddress.cityId,area:this.$store.state.mall2.selectAddress.countryId,town:this.$store.state.mall2.selectAddress.townId},deliverType:this.deliveryType,selfPickStore:this.$store.state.mall2.zitiAddress.id,storeCode:this.detailData.storeOuCode};this.$http.post(e,i).then((function(e){var i=e.data;if(0==i.status){t.canSale=!0;var s=i.data.productList;s.length>0&&(t.stockNum=s[0].stockCurrentNumber,-1!=t.mktStockNum&&(t.stockNum=t.mktStockNum<t.stockNum?t.mktStockNum:t.stockNum),t.maxNum=""!=t.detailData.saleNumMax?t.detailData.saleNumMax:-1,void 0!=t.detailData.discountGoodsCntPerOrder&&""!=t.detailData.discountGoodsCntPerOrder&&t.maxNum>t.detailData.discountGoodsCntPerOrder&&(t.maxNum=t.detailData.discountGoodsCntPerOrder),t.maxNum=t.maxNum>t.stockNum?t.stockNum:t.maxNum)}else 2201==i.errorCode?t.canSale=!1:t.$Toast(i.info)}),(function(e){t.$Toast("请求数据失败！")}))}},selectArea:function(){var t=this;v["a"].open({initData:{selectedId:this.$store.state.mall2.selectAddress.id,token:this.$store.state.login.token},addressEvent:function(e,i){t.matchAddress=i,t.$store.state.mall2.selectAddress=e,t.$bridgefunc.vuexStorage(),t._getCustomStock(),v["a"].close()}})},selectedItemsEvent:function(t){var e=t.item;if(this.selectedItems=t.selecteds,4==this.selectedItems.length)return this.showSelect=!1,this.region=this.selectedItems,void this.getRegionText();this._getRegionData(e.id)},regionCloseEvent:function(){this.showSelect=!1},_getRegionData:function(t){var e=this;this.$Loading.open();var i="/app/json/area/loadAreaList",s={token:this.$store.state.login.token,parentId:t};this.$http.post(i,s).then((function(t){e.$Loading.close();var i=t.data;if(0==i.status){var s=i.data;s.length>0?e.$nextTick((function(){this.$refs.regionselect.pushCustomOptions(s)})):(e.showSelect=!1,e.region=e.selectedItems,e.getRegionText())}else e.$Toast(i.info)}),(function(t){e.$Loading.close(),e.$Toast("获取数据失败")}))},getRegionText:function(){for(var t="",e={provinceId:"",provinceName:"",cityId:"",cityName:"",countryId:"",countryName:"",townId:"",townName:"",id:"-1"},i=0;i<this.region.length;i++){var s=this.region[i];t+=s.name,0==i?(e.provinceId=s.id,e.provinceName=s.name):1==i?(e.cityId=s.id,e.cityName=s.name):2==i?(e.countryId=s.id,e.countryName=s.name):3==i&&(e.townId=s.id,e.townName=s.name)}e.addressFull=e.provinceName+e.cityName+e.countryName+e.townName,this.$store.state.mall2.selectAddress=e,this.$bridgefunc.vuexStorage(),this._getCustomStock(),this.regionText=t,this.$refs.regionselect.reset(null)},allCommentEvent:function(){this.commentListShow=!0,this.toptabEvent(3)},toptabEvent:function(t){this.toptab=t,3==this.toptab?this.load3=!0:4==this.toptab&&(this.load4=!0),this.$refs.mySwiper.swiper.slideTo(t-1)},introductionSelected:function(t){this.introductionIndex=t},addToCart:function(t){var e=this,i=this.$store.state.microSho.carts;if(0==i.length)this.$store.state.microSho.carts.push({skuId:t.skuId,storeOuCode:t.storeOuCode,deliverType:this.$store.state.mall2.staticDeliverType,proSkuDistributionId:this.proSkuDistributionId,number:this.selectedNum,checked:1,selfActivityId:-2});else{var s=null,a=this.$store.state.microSho.carts;a.forEach((function(i,a){if(t.skuId==i.skuId)return e.$store.state.microSho.carts[a].number+=1,void(s=!0)})),s||this.$store.state.microSho.carts.push({skuId:t.skuId,storeOuCode:t.storeOuCode,deliverType:this.$store.state.mall2.staticDeliverType,proSkuDistributionId:this.proSkuDistributionId,number:this.selectedNum,checked:1,selfActivityId:-2})}this.showPop=!1,this.showProductImg=!0},buyNowEvent:function(){if(3==this.detailData.mktActivityPriceLevel&&this.detailData.soldNum>=100&&this.$Toast("该商品已抢光，将会使用原价购买！"),""!=this.$store.state.login.token||2!=this.$store.state.webtype){if(2==this.deliveryType){if(""==this.$store.state.mall2.selectAddress.id)return void this.$Toast("请选择配送区域")}else if(""==this.$store.state.mall2.zitiAddress.id)return void this.$Toast("请选择自提点");this.popFlag="buyNow",this.showPop=!0}else this.bindWechat()},popClose:function(){this.showPop=!1},popSureEvent:function(t){"addToCart"==this.popFlag?this._addToCart(t):"buyNow"==this.popFlag&&this._buyNow(),this.showPop=!1},_getProductDetail:function(){var t=this;this.$Loading.open();var e="/app/json/product/getAppProDetail",i={token:this.$store.state.login.token,productType:this.productType,skuId:this.skuId,featureValueIds:this.myFeatures,lng:this.$store.state.currentLocation.posx,lat:this.$store.state.currentLocation.posy,deliverType:this.deliveryType};this.id&&""!=this.id||(i.storeOuCode=this.$route.query.storeOuCode?this.$route.query.storeOuCode:"",i.pickupStoreOuCode=this.$route.query.storeOuCode?this.$route.query.storeOuCode:""),""!=this.activityId&&(i.activityId=this.activityId),1==this.deliveryType&&(i.pickUpId=this.$store.state.mall2.zitiAddress.id,i.pickupStoreOuCode=this.$store.state.mall2.zitiAddress.storeCode?this.$store.state.mall2.zitiAddress.storeCode:this.$route.query.storeOuCode?this.$route.query.storeOuCode:""),this.$http.post(e,i).then((function(e){t.$Loading.close();var i=e.data;if(0==i.status){t.detailData=i.data,0===t.detailData.remainNum&&t.$Toast("活动商品库存已售空，需原价购买！");var s=t.detailData.skuId,a=t.$route.query.deliveryType;1!=t.detailData.deliveryType&&2!=t.detailData.deliveryType||(a=t.detailData.deliveryType),t.deliveryType=a,t.$store.state.mall2.staticDeliverType=a,1==a&&h["a"].checkIsInitialLoad((function(e){e&&t._getProductDetail()})),s&&a&&t.$mallCommon.pushBrowsingHistory(s,a),t.selectedNum<t.detailData.saleNumBegin&&(t.selectedNum=""!=t.detailData.saleNumBegin?t.detailData.saleNumBegin:1),t.stepNum=""!=t.detailData.saleNumStep?t.detailData.saleNumStep:1,t.minNum=""!=t.detailData.saleNumBegin?t.detailData.saleNumBegin:1,t.maxNum=""!=t.detailData.saleNumMax?t.detailData.saleNumMax:-1,void 0!=t.detailData.discountGoodsCntPerOrder&&""!=t.detailData.discountGoodsCntPerOrder&&t.maxNum>t.detailData.discountGoodsCntPerOrder&&(t.maxNum=t.detailData.discountGoodsCntPerOrder),t.mktStockNum=""!=t.detailData.mktStockNum?t.detailData.mktStockNum:-1;for(var o=0;o<t.detailData.featureList.length;o++)for(var l=t.detailData.featureList[o],r=0;r<l.featureValueList.length;r++)for(var n=l.featureValueList[r],c=0;c<t.detailData.myFeatureValueList.length;c++){var d=t.detailData.myFeatureValueList[c];if(n.featureValueId==d.featureValueId){n.selected=!0;break}}t.generateSelectedText(),t.singleActivities_2=[],t.curSingleActivity=null;for(var u=t.detailData.activityDetail||{},p=t.detailData.skuActivityList,v=0;v<p.length;v++){var m=p[v];m.activityId,u.activityId}var f=t.$mallCommon.priceFromItem(t.detailData);t.detailData.dpedData=f,t.introduction1=t.detailData.proSkuMediaModel.mobileDetail,t.introduction2=t.detailData.proSkuMediaModel.mobileParam,t.introduction3=t.detailData.afterHelp,t.id=t.detailData.id,t.skuId!=t.detailData.skuId&&(t.skuId=t.detailData.skuId,t.load3=!1,t._getDetailComment(t.skuId)),t.detailShow=!0,t._getCustomStock(),t._getCollectState(),t.setWxShareArgs(),t.arrLen=t.detailData.picUrls.length;var _=t.detailData.proSkuMediaModel.videoUrl;_&&void 0!=_&&""!=_&&(t.arrLen++,t.videoUrl=_,t.playerOptions.sources[0].src=_,t.swiperOption.autoplay=!1,t.swiperOption.loop=!1,t.proImgIndex=0)}else t.$Toast(i.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},_getDetailComment:function(t){var e=this,i="/app/json/evaluate/loadSkuDetailTwoEvaluate",s={token:this.$store.state.login.token,skuId:t};this.$http.post(i,s).then((function(t){var i=t.data;0==i.status?e.detailComment=i.data:e.$Toast(i.info)}),(function(t){e.$Toast("请求数据失败！")}))},_addToCart:function(t){var e=this,i=this.$store.state.microSho.carts;if(0==i.length)this.$store.state.microSho.carts.push({skuId:t.skuId,storeOuCode:t.storeOuCode,deliverType:this.$store.state.mall2.staticDeliverType,proSkuDistributionId:this.proSkuDistributionId,number:this.selectedNum,checked:1,selfActivityId:-2});else{var s=null,a=this.$store.state.microSho.carts;a.forEach((function(i,a){if(t.skuId==i.skuId)return e.$store.state.microSho.carts[a].number+=1,void(s=!0)})),s||this.$store.state.microSho.carts.push({skuId:t.skuId,storeOuCode:t.storeOuCode,deliverType:this.$store.state.mall2.staticDeliverType,proSkuDistributionId:this.proSkuDistributionId,number:this.selectedNum,checked:1,selfActivityId:-2})}},_buyNow:function(){var t=this;if(this.stockNum<this.selectedNum)this.$Toast("当前商品库存不足！");else{this.$Loading.open();var e="/app/json/app_cart/SettleCart",i={token:this.$store.state.login.token,carts:[{skuId:this.detailData.skuId,storeOuCode:this.detailData.storeOuCode,number:this.selectedNum,proSkuDistributionId:this.proSkuDistributionId,selfActivityId:this.activityId,checked:"1"}],microStoreCode:this.microStoreCode,deliveryType:this.$store.state.mall2.staticDeliverType,userAddress:this.$store.state.mall2.selectAddress,pickupId:this.$store.state.mall2.zitiAddress.id,userAddressId:""};2==this.deliveryType&&this.$store.state.mall2.selectAddress.id>0&&(i.userAddressId=this.$store.state.mall2.selectAddress.id),this.$http.post(e,i).then((function(e){t.$Loading.close();var s=e.data;if(0==s.status){var a={res:s.data,paramsData:i,deliveryType:t.detailData.deliveryType};t.$store.state.mall2.selectAddress.id>0||2!=t.detailData.deliveryType||(t.matchAddress?(t.$store.state.mall2.selectAddress=t.matchAddress,t.$bridgefunc.vuexStorage((function(){}))):a.noMatch=!0),1==t.$mallCommon.isExistCanNotAttendActivity(s.data.occur)?t.$MessageBox.confirm("部分商品不能参加活动</br>将按原价购买，是否继续？","提示",{confirmButtonText:"确定"}).then((function(e){t.$router.push({name:"填写订单",params:a})}))["catch"]((function(t){})):t.$router.push({name:"填写订单",params:a})}else t.$Toast(s.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))}},_getCollectState:function(){var t=this;if(""!=this.$store.state.login.token){var e="/app/json/user_pro_collect/checkUserHasCollectPro",i={token:this.$store.state.login.token,productId:this.id};this.$http.post(e,i).then((function(e){var i=e.data;0==i.status?(t.isCollect=i.data,t.$nextTick((function(){t.collectName="collectName"}))):(t.$Toast(i.info),t.collectName="collectName")}),(function(e){t.$Toast("请求数据失败！")}))}},collectEvent:function(){var t=this;if(""!=this.$store.state.login.token||2!=this.$store.state.webtype){var e="/app/json/user_pro_collect/addOrCancelUserProCollect",i={token:this.$store.state.login.token,id:this.id,skuId:this.detailData.skuId,deliveryType:this.detailData.deliveryType,storeOuCode:this.detailData.storeOuCode};this.$http.post(e,i).then((function(e){var i=e.data;0==i.status?"false"==t.isCollect?t.isCollect="true":t.isCollect="false":t.$Toast(i.info)}),(function(e){t.$Toast("请求数据失败！")}))}else this.bindWechat()},getDatas:function(){this._getProductDetail(),""!=this.$store.state.login.token&&(this._getDetailComment(this.skuId),this.$userCenter._getCartCount())},getWechatDatas:function(){var t=this;1==this.deliveryType?void 0==this.$store.state.mall2.zitiAddress.id||""==this.$store.state.mall2.zitiAddress.id?this.getSysStoreById():this.getDatas():""==this.$store.state.mall2.selectAddress.id||"undefined"==this.$store.state.mall2.selectAddress.id?this.$store.state.login.token&&this.$store.state.login.token.length?this.$userCenter._getUserLocalhistory((function(){""==t.$store.state.mall2.selectAddress.id||"undefined"==t.$store.state.mall2.selectAddress.id?t.getWechatSignature():t.getDatas()})):this.getWechatSignature():this.getDatas()},getSysStoreById:function(){var t=this;this.$Loading.open();var e="/app/json/user_address/getSysStoreById",i=this.$route.query.storeOuCodeNew,s={id:i};this.$http.post(e,s).then((function(e){t.$Loading.close();var i=e.data;0==i.status?(t.$store.state.mall2.zitiAddress=i.data,t.getDatas()):t.$Toast(i.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},getWechatSignature:function(){var t=this;u["a"].getWechatSignature((function(e){e?u["a"].wxGetLocation((function(e){t.$mallCommon.addressAnalysis((function(e){t.getDatas()}),e)})):t.getDatas()}))},bindWechat:function(t){t&&(this.$store.state.pushData.pushData=t,this.$store.state.pushData.pushType=0,this.$store.state.indexData.selectedIndex="",this.$bridgefunc.vuexStorage((function(){}))),this.$util.wechatBind()},setWxShareArgs:function(){if(2==this.$store.state.webtype){var t={};t={},t.title=this.detailData.skuName,t.sharetext=this.detailData.skuName,t.imageurl=this.detailData.phMainUrl,t.detailurl=this.$store.state.globalConfig.wxBaseUrl+d["a"].shareUrl+this.$route.fullPath,1==this.detailData.deliveryType&&(t.detailurl=t.detailurl+"&storeID="+this.$store.state.mall2.zitiAddress.id),this.$store.state.login.token&&""!=this.$store.state.login.token&&(t.detailurl=t.detailurl+"&recommend="+this.$store.state.userInfo.userId,t.detailurl=t.detailurl+"&recommendPhone="+this.$store.state.login.phone),u["a"].getWechatSignature((function(e){e&&u["a"].wxSetShareData(t)}))}}},created:function(){this.microStoreCode=this.$route.query.microStoreCode?this.$route.query.microStoreCode:"",this.lastPath=this.$route.query.lastPath?this.$route.query.lastPath:"",this.id=this.$route.query.id?this.$route.query.id:"",this.skuId=this.$route.query.skuId?this.$route.query.skuId:"",this.storeName=this.$route.query.storeName?this.$route.query.storeName:"",this.storeID=this.$route.query.storeID?this.$route.query.storeID:"",this.proSkuDistributionId=this.$route.query.proSkuDistributionId?this.$route.query.proSkuDistributionId:"",this.$route.query.deliveryType&&(this.$store.state.mall2.staticDeliverType=this.$route.query.deliveryType),this.deliveryType=this.$store.state.mall2.staticDeliverType,this.productType=this.$route.query.productType?this.$route.query.productType:"",this.activityId=this.$route.query.activityId?this.$route.query.activityId:"",""==this.id&&""==this.skuId||(2==this.$store.state.webtype?this.getWechatDatas():this.getDatas())},activated:function(){0!=this.scrollTopValue3&&(this.$refs.scrollView2.scrollTop=this.scrollTopValue3),0!=this.scrollTopValue4&&(this.$refs.scrollView3.scrollTop=this.scrollTopValue4),0!=this.scrollTopValue5&&(this.$refs.scrollView4.scrollTop=this.scrollTopValue5),0!=this.scrollTopValue2&&this.$refs.pullTo2.setScrollTopValue(this.scrollTopValue2),0!=this.page1ScrollTop&&this.$refs.pullTo1.setScrollTopValue(this.page1ScrollTop),this.backLoadStock&&this._getCustomStock()},beforeRouteLeave:function(t,e,i){t.path==this.lastPath?this.$keepaliveHelper.deleteCache(this):(this.$refs.scrollView2&&(this.scrollTopValue3=this.$refs.scrollView2.scrollTop),this.$refs.scrollView3&&(this.scrollTopValue4=this.$refs.scrollView3.scrollTop),this.$refs.scrollView4&&(this.scrollTopValue5=this.$refs.scrollView4.scrollTop)),i()},beforeDestroy:function(){}},k=$,D=(i("2434"),i("0c7c")),T=Object(D["a"])(k,s,a,!1,null,"5df91317",null);e["default"]=T.exports},c167:function(t,e,i){},d1d1:function(t,e,i){"use strict";i("c167")},dc65:function(t,e,i){}}]);