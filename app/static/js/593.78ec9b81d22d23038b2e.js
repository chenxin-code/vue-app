(window.webpackJsonp=window.webpackJsonp||[]).push([[593],{"/VSX":function(e,t,o){},"8F2q":function(e,t,o){"use strict";o.r(t),o("5+UC");var s=o("05lO"),a=o("R20A"),n=(o("ZToj"),o("L2JU")),i=o("uQt8"),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},c={name:"openIndex",mixins:[a.a],data:function(){return{employeeCode:"",employeeName:"",phone:"",departmentName:"",departmentNo:"",radio:!1,isChecked:!1,msgCode:"",showView:!0,registerView:!1,reason:"",stateView:!1,backgroundImgUrl:"",successView:!1,referrerUserId:"",closeView:!1,referrer:!1,rfrCodeType:"",info:""}},watch:{msgCode:function(e){this.msgCode=this.$util.checkVerifyCodeLenght(this.msgCode)}},created:function(){},mounted:function(){var e=this;if(console.log(222,this.$store.state.globalConfig.microshop_backgroundurl),1==this.$store.state.globalConfig.microshop_open){var t={token:this.$store.state.login.token};this.stateDatahn(t).then((function(t){0==t.data.status?0==(t.data.data||{}).empFlag&&(e.referrer=!0):Object(s.a)(t.data.info)}))}else this.loadState(),this.loadDetail()},computed:r({},Object(n.c)(["getPutaggregate"])),methods:r({},Object(n.d)(["putaggregate"]),{loadState:function(){var e=this,t=this,o={token:t.$store.state.login.token};t.stateData(o).then((function(o){if("success"===o.data.result){t.reason=o.data.data.reviewOpinion;var a=o.data.data;e.putaggregate(a),0==a.approvalState?t.stateView=!0:2==a.approvalState?t.showView=!1:a.approvalState}else Object(s.a)(o.data.info)}))},allSelect:function(){this.isChecked?this.isChecked=!1:this.isChecked=!0},changeRfrCodeType:function(){this.rfrCodeType=1},sweep:function(){var e=this;this.$bridgefunc.scanCode((function(t){e.rfrCodeType=2,e.theScanCode=t.code,e.referrerUserId=t.code}))},loadDetail:function(){var e=this,t={token:e.$store.state.login.token};e.detailData(t).then((function(t){if("success"===t.data.result){var o=t.data.data;e.employeeCode=o.employeeCode,e.employeeName=o.employeeName,e.phone=o.phone,e.departmentName=o.departmentName,e.departmentNo=o.departmentNo}else Object(s.a)(t.data.info)}))},getReferrer:function(){var e=this,t={token:this.$store.state.login.token,referrerUserId:this.referrerUserId,rfrCodeType:this.rfrCodeType};this.$request.post("/app/json/micro_store_front_end/saveReferrerUserId",t).then((function(t){console.log(t),"success"==t.result?(e.$toast("提交成功"),e.referrer=!1):(e.info=t.info||"",e.$Toast(t.info))}))},getMsgCode:function(e,t){var o=this;if(""!=this.phone)if(this.$util.checkMobile(this.phone)){this.$refs.countBtn.startTime(),this.$Loading.open();var s={smsType:"1020",phone:this.phone,imgVerifyCode:e,uuid:t};this.$http.post("/app/json/login/sendSms",s).then((function(e){o.$Loading.close(),console.log(e.data);var t=e.data;0==t.status?o.$Toast("获取验证码成功"):(o.$refs.countBtn.resetClock(),o.$Toast(t.info?t.info:"获取短信验证码失败"))}),(function(e){o.$Loading.close(),o.$refs.countBtn.resetClock(),o.$Toast("系统运行过程中遇到问题，请稍候再试")}))}else this.$Toast("请输入正确的手机号码！");else this.$Toast("手机号不能为空!")},submit:function(){this.$Toast("请先勾选开通条款")},submitBtn:function(){this.$router.push({path:"/micro_sho/authentication"})},commit:function(){var e=this,t=this;if(""!=t.msgCode){this.$Loading.open();var o={token:t.$store.state.login.token,employeeCode:t.employeeCode,employeeName:t.employeeName,phone:t.phone,phoneCode:t.msgCode,departmentName:t.departmentName,departmentNo:t.departmentNo};t.applyData(o).then((function(o){e.$Loading.close(),"success"===o.data.result?t.successView=!0:Object(s.a)(o.data.info)}))}else this.$Toast("验证码不能为空")},commitAgain:function(){this.showView=!0},returnUp:function(){this.$router.go(-1)}}),components:{CountButton:i.a}},l=(o("GMzf"),o("KHd+")),p=Object(l.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"body"},[o("nav-top",{attrs:{title:"我的微店"},on:{backEvent:function(t){return e.$router.go(-1)}}}),e._v(" "),o("nav-content",[e.showView&&1!=e.$store.state.globalConfig.microshop_open?o("van-cell-group",[o("van-field",{attrs:{label:"员工号",disabled:""},model:{value:e.employeeCode,callback:function(t){e.employeeCode=t},expression:"employeeCode"}}),e._v(" "),o("van-field",{attrs:{label:"员工姓名",disabled:""},model:{value:e.employeeName,callback:function(t){e.employeeName=t},expression:"employeeName"}}),e._v(" "),o("van-field",{attrs:{type:"tel",label:"手机号",disabled:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),o("van-field",{attrs:{label:"所属部门",disabled:""},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}}),e._v(" "),o("div",{staticClass:"publicInvoiceDiv"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.msgCode,expression:"msgCode"}],attrs:{placeholder:"请输入短信验证码"},domProps:{value:e.msgCode},on:{input:function(t){t.target.composing||(e.msgCode=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"mingxi"},[o("count-button",{ref:"countBtn",staticClass:"theme_standard_font",attrs:{phone:e.phone},on:{getSmsEvent:e.getMsgCode}})],1)])],1):e._e(),e._v(" "),1==e.$store.state.globalConfig.microshop_open?o("div",{staticClass:"openDiv"},[o("div",{staticClass:"divPic"},[o("div",[o("img",{staticClass:"img",attrs:{src:e.$store.state.globalConfig.microshop_backgroundurl?e.$store.state.globalConfig.microshop_backgroundurl:"static/image/microShop/mishbac.png",alt:""}})]),e._v(" "),o("div",{staticClass:"radios"},[o("div",{staticClass:"div1"},[o("div",{staticClass:"agree"},[o("div",{staticClass:"ifselect",class:e.isChecked?"is-selected":"unselect",on:{click:function(t){return e.allSelect()}}},[o("i",{staticClass:"selected-icon"})]),e._v(" "),o("p",{staticClass:"text"},[e._v("我同意"),o("span",[o("router-link",{attrs:{to:"/micro_sho/agreement"}},[e._v("《微店开通条款》")])],1)])])]),e._v(" "),1==e.$store.state.globalConfig.microshop_open&&0==e.isChecked?o("div",{staticClass:"answer theme_bg_red1 theme_bg_red2",on:{click:e.submit}},[e._v("申请开通\n          ")]):e._e(),e._v(" "),1==e.$store.state.globalConfig.microshop_open&&1==e.isChecked?o("div",{staticClass:"answer theme_bg_red1",on:{click:e.submitBtn}},[e._v("申请开通\n          ")]):e._e()])])]):e._e(),e._v(" "),e.showView||1==e.$store.state.globalConfig.microshop_open?e._e():o("div",{staticClass:"noPass"},[o("div",[o("img",{attrs:{src:"static/image/microShop/icon.png",alt:""}})]),e._v(" "),o("p",{staticClass:"p1"},[e._v("很遗憾，微店申请未通过...")]),e._v(" "),o("p",{staticClass:"p2"},[e._v("原因："+e._s(e.reason))])]),e._v(" "),o("div",{staticClass:"answerBox"},[e.showView&&1!=e.$store.state.globalConfig.microshop_open?o("div",{staticClass:"answer theme_bg_red",on:{click:e.commit}},[e._v("立即申请\n      ")]):e._e(),e._v(" "),e.showView||1==e.$store.state.globalConfig.microshop_open?e._e():o("div",{staticClass:"answer theme_bg_red",on:{click:e.commitAgain}},[e._v("重新提交申请\n      ")])])],1),e._v(" "),o("van-popup",{staticClass:"successBox",on:{"click-overlay":e.returnUp},model:{value:e.successView,callback:function(t){e.successView=t},expression:"successView"}},[o("img",{staticClass:"img1",attrs:{src:"static/image/microShop/succee-icon.png"}}),e._v(" "),o("p",[e._v("申请成功！")])]),e._v(" "),o("van-popup",{staticClass:"successBox",on:{"click-overlay":e.returnUp},model:{value:e.stateView,callback:function(t){e.stateView=t},expression:"stateView"}},[o("img",{attrs:{src:"static/image/microShop/shen.png"}}),e._v(" "),o("p",[e._v("正在审核中，敬请期待......")])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.referrer,expression:"referrer"}]},[o("van-popup",{staticClass:"successBox successBox1 ",attrs:{"close-on-click-overlay":!1},model:{value:e.referrer,callback:function(t){e.referrer=t},expression:"referrer"}},[o("div",{staticClass:"referrerUser"},[o("div",{staticClass:"referrer"},[o("span",{staticClass:"span"},[e._v("开店邀请码")]),e._v(" "),o("div",{staticClass:"sacn"},[o("mt-field",{attrs:{label:"邀请码",placeholder:"请输入邀请码"},on:{change:e.changeRfrCodeType},model:{value:e.referrerUserId,callback:function(t){e.referrerUserId=t},expression:"referrerUserId"}},[o("img",{attrs:{src:"static/image/fuelcard//btn_Sweep.png",width:"25",height:"25"},on:{click:e.sweep}})])],1),e._v(" "),e.info?o("span",{staticClass:"tip"},[e._v(e._s(e.info))]):e._e()]),e._v(" "),o("div",{staticClass:"grayBtn"},[o("span",{on:{click:function(t){e.referrer=!1}}},[e._v("无邀请码")]),e._v(" "),o("span",{staticClass:"theme_bg_red",on:{click:e.getReferrer}},[e._v("提交邀请码")])])])])],1)],1)}),[],!1,null,"86c53f1e",null);t.default=p.exports},GMzf:function(e,t,o){"use strict";var s=o("/VSX");o.n(s).a},R20A:function(e,t,o){"use strict";t.a={methods:{applyData:function(e){return this.$http.post("/app/json/micro_store_front_end/applyMicroStore",e)},stateData:function(e){return this.$http.post("/app/json/micro_store_front_end/queryMicroStoreOpenState",e)},stateDatahn:function(e){return this.$http.post("/app/json/micro_store_front_end/queryMicroStoreOpenProcess",e)},profitData:function(e){return this.$http.post("/app/json/micro_store_front_end/queryMicroStoreForProfit",e)},profitDatahn:function(e){return this.$http.post("/app/json/micro_store_front_end/cashEarningsDetail",e)},monthData:function(e){return this.$http.post("/app/json/micro_store_front_end/getMonthProfitList",e)},detailData:function(e){return this.$http.post("/app/json/micro_store_front_end/getEmployeeInfoByUserId",e)},modifyData:function(e){return this.$http.post("/app/json/micro_store_front_end/queryMicroStoreForDecoration",e)},getRewardData:function(e){return this.$http.post("/app/json/micro_store_front_end/getRewardTypeList",e)},modifyafterData:function(e){return this.$http.post("/app/json/micro_store_front_end/updateMicroStoreInfoById",e)},modifyBankData:function(e){return this.$http.post("/app/json/micro_store_front_end/saveBankInfo",e)}}}}}]);