(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3da9af7a"],{"0694":function(t,e,i){t.exports=i.p+"static/images/a181dd19107a3f9fd76346643c334b8f.png"},"12a3":function(t,e,i){"use strict";i("b67e")},"35fc":function(t,e,i){},"3de7":function(t,e,i){"use strict";i("4795"),i("d3b7");e["a"]={data:function(){return{getResultTimes:0,clearTimer:null,payTime:0}},mounted:function(){},methods:{checkPayResult:function(){var t=this;this.queryState().then((function(e){if(1==e)t.resultHand(1);else if(2==e)t.resultHand(0);else if(0==e){if(t.getResultTimes++,t.getResultTimes>20)return;t.clearTimer=setTimeout((function(){t.checkPayResult()}),1e3)}}))},queryState:function(){var t=this;return new Promise((function(e,i){var a="/app/json/refuel_center/queryPayState";t.isScan&&(a="/app/json/refuel_scan_code/queryPayState");var s={token:t.$store.state.login.token,tradeNo:t.payData.tradeNo};t.$Loading.open(),t.$http.post(a,s).then((function(a){t.$Loading.close();var s=a.data;0==s.status?e(s.data.state):i(),s.data.msg}))["catch"]((function(){t.$Loading.close()}))}))}},destroyed:function(){clearTimeout(this.clearTimer)}}},"3e1d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("van-popup",{on:{"click-overlay":t.closeBtn},model:{value:t.showView,callback:function(e){t.showView=e},expression:"showView"}},[i("div",{ref:"elementboxModal",staticClass:"boxModal"},[i("div",{ref:"top",staticClass:"top"},[i("p",[t._v("偏好选择")]),i("span",[t._v("共需选择"+t._s(t.answerList.length)+"题，已选"+t._s(t.itemIndex.index)+"题")])]),i("div",{staticClass:"contain",style:t.height},[1==t.itemIndex.topicType?i("div",{staticClass:"div2"},[i("p",[t._v(t._s(t.itemIndex.index)+"、"+t._s(t.itemIndex.title)+"（单选）")]),i("van-radio-group",{model:{value:t.itemIndex.answer,callback:function(e){t.$set(t.itemIndex,"answer",e)},expression:"itemIndex.answer"}},t._l(t.itemIndex.options,(function(e,a){return i("van-radio",{key:a,attrs:{"checked-color":"#f79596",name:e.id}},[t._v(t._s(t.optionsObj[a])+" 、"+t._s(e.optionContent))])})),1)],1):t._e(),2==t.itemIndex.topicType?i("div",{staticClass:"div3"},[i("p",[t._v(t._s(t.itemIndex.index)+"、"+t._s(t.itemIndex.title)+"（多选）")]),i("van-checkbox-group",{model:{value:t.itemIndex.answer,callback:function(e){t.$set(t.itemIndex,"answer",e)},expression:"itemIndex.answer"}},t._l(t.itemIndex.options,(function(e,a){return i("van-checkbox",{key:a,attrs:{"checked-color":"#f79596",name:e.id}},[t._v(t._s(t.optionsObj[a])+" 、"+t._s(e.optionContent))])})),1)],1):t._e(),3==t.itemIndex.topicType?i("div",{staticClass:"div3",staticStyle:{display:"flex"}},[i("p",[t._v(t._s(t.itemIndex.index)+"、"+t._s(t.itemIndex.title)+"（下拉）")]),i("div",{staticClass:"xiala",staticStyle:{"margin-left":"20px"},on:{click:function(e){return t.select1(t.itemIndex)}}},[i("span",[t._v(t._s(t.itemIndex.name||"请选择"))]),i("span",{staticClass:"icon iconfont mall-xiala"})]),i("van-action-sheet",{attrs:{actions:t.itemIndex.options},on:{select:function(e){return t.onSelect(e,t.itemIndex)}},model:{value:t.itemIndex.show,callback:function(e){t.$set(t.itemIndex,"show",e)},expression:"itemIndex.show"}})],1):t._e()]),i("div",{ref:"element",staticClass:"bottom"},[i("div",{staticClass:"tips"},[i("p",[t._v("系统将根据您的偏好为您推荐适合您的优惠活动")]),t.submitView?i("div",{staticClass:"btn",on:{click:t.commit}},[t._v("确认提交")]):i("div",{staticClass:"btn",on:{click:t.nextQuestion}},[t._v("下一题")])]),i("div",{staticClass:"upDiv"})])])]),t.showView?i("div",{staticClass:"closeBtn",on:{click:t.closeBtn}},[i("img",{attrs:{src:"static/images/design/X.png",alt:""}})]):t._e()],1)},s=[],n=(i("4160"),i("159b"),i("b0c0"),i("c975"),{name:"hobby",data:function(){return{showView:!1,answerList:[],options:[],i:0,actions:[],itemIndex:{},index:1,optionsObj:[],submitView:!1,height:{height:""}}},mounted:function(){1==window.localStorage.getItem("hobby")&&1==this.$store.state.globalConfig.isShowMyPrefer&&(this.getLetter(),this.getList())},methods:{getLetter:function(){this.optionsObj=this.generateBig_1()},generateBig_1:function(){for(var t=[],e=65;e<91;e++)t.push(String.fromCharCode(e));return t},closeBtn:function(){this.showView=!1,window.localStorage.setItem("hobby",0)},getList:function(){var t=this,e="/app/json/prefer/getPreferSetList",i={token:this.$store.state.login.token};this.$http.post(e,i).then((function(e){var i=e.data;if(0==i.status){var a=i.data||[];a.forEach((function(e){"2"==e.topicType?e.answer=[]:e.answer="",e.index=t.index++,e.options.forEach((function(t){"1"==t.isAnswer&&("2"==e.topicType?e.answer.push(t.id):(e.answer=t.id,e.name=t.optionContent)),t.name=t.optionContent})),e.show=!1})),t.answerList=a,t.itemIndex=t.answerList[t.i],t.answerList.length>0&&(t.showView=!0,t.$nextTick((function(){t.height.height=t.$refs.elementboxModal.offsetHeight-t.$refs.element.offsetHeight-t.$refs.top.offsetHeight-10+"px"})))}else t.$Toast(i.info)}))["catch"]((function(t){}))},select1:function(t){t.show=!0},onSelect:function(t,e){e.answer=t.id,e.name=t.name,e.show=!1},nextQuestion:function(){if("2"==this.itemIndex.topicType){if(!this.itemIndex.answer.length)return void this.$Toast("当前题目还未作答！")}else if(!this.itemIndex.answer)return void this.$Toast("当前题目还未作答！");this.i++,this.itemIndex=this.answerList[this.i],this.disappearData()},disappearData:function(){this.i+1>=this.answerList.length&&(this.submitView=!0)},commit:function(){var t=this,e="/app/json/prefer/updatePreferSet",i={preferSets:[]};this.answerList.forEach((function(t){var e={};e.id=t.id,e.topicType=t.topicType,e.title=t.title,e.options=[],t.options.forEach((function(i){"number"==typeof t.answer?String(t.answer):t.answer,"number"==typeof i.id?String(i.id):i.id;String(t.answer).indexOf(String(i.id))>-1&&e.options.push({id:i.id,optionContent:i.optionContent})})),i.preferSets.push(e)})),this.$Loading.open(),this.$http.post(e,i).then((function(e){t.$Loading.close();var i=e.data;0==i.status?(t.$Toast("保存成功"),window.localStorage.setItem("hobby",0),t.showView=!1):t.$Toast(i.info)}))}}}),l=n,o=(i("12a3"),i("0c7c")),r=Object(o["a"])(l,a,s,!1,null,"27c8677e",null);e["a"]=r.exports},4620:function(t,e,i){"use strict";i("763b")},5463:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pay-mode"},[i("div",{staticClass:"title"},[t._v("支付方式")]),t._l(t.payWay,(function(e){return i("div",{staticClass:"pay-mode-item",on:{click:function(i){return t.payWaySelected(e)}}},["210009"!=e.payModeSub||"210009"==e.payModeSub&&3==t.$store.state.webtype?[i("div",{staticClass:"icon"},[i("img",{attrs:{src:e.icon}})]),i("div",{staticClass:"text"},[t._v(t._s(e.text))]),i("div",{staticClass:"selected"},[t.selectedPayWay.payModeSub!=e.payModeSub?i("i",{staticClass:"iconfont mall-weixuanzhong theme_font_tint"}):t._e(),t.selectedPayWay.payModeSub==e.payModeSub?i("i",{staticClass:"iconfont mall-xuanzhong theme_font_red"}):t._e()])]:t._e()],2)}))],2)},s=[],n=i("75bd"),l={name:"pay-mode",props:{supportCompany:Boolean},data:function(){return{payWay:[],selectedPayWay:{}}},mounted:function(){},methods:{init:function(t,e){var i=this;n["a"].getPayWays(t,e).then((function(t){i.payWay=t||[],i.supportCompany?i.selectedPayWay=[]:i.selectedPayWay=i.payWay[0],i.$emit("setPayWay",i.selectedPayWay,"init")}))},payWaySelected:function(t){t.payMode?(this.selectedPayWay=t,this.$emit("setPayWay",this.selectedPayWay)):this.$Toast("暂未开通！")}},components:{}},o=l,r=(i("9099"),i("0c7c")),c=Object(r["a"])(o,a,s,!1,null,"6197c526",null);e["a"]=c.exports},"5f88":function(t,e,i){},"763b":function(t,e,i){},"76ded":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"body"}},[t.firmdetailSubject?t._e():i("nav-top",{attrs:{title:"加油评价"},on:{backEvent:function(e){return t.$router.go(-1)}}},[t.shareView?i("div",{staticClass:"shareBox",on:{click:t.sharegoods}},[i("div",[i("i",{staticClass:"icon iconfont mall-fenxiang"})])]):t._e()]),i("nav-content",[i("div",{staticClass:"content"},t._l(t.answerList,(function(e,a){return i("div",{key:a,staticClass:"top"},[1===e.kindId?i("div",{staticClass:"singleList"},[i("div",{staticClass:"divObj"},[i("div",{staticClass:"titleHead"},[i("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),i("van-radio-group",{model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}},t._l(e.options,(function(e,a){return i("van-radio",{key:a,attrs:{disabled:"",name:t.optionsObj[a]}},[t._v(t._s(t.optionsObj[a])+" 、"+t._s(e.lable))])})),1)],1)]):t._e(),2===e.kindId?i("div",{staticClass:"singleList multipleList"},[i("div",{staticClass:"divObj"},[i("div",{staticClass:"titleHead"},[i("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),i("van-checkbox-group",{model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}},t._l(e.options,(function(e,a){return i("van-checkbox",{key:a,attrs:{disabled:"","checked-color":"#F80F16",name:t.optionsObj[a]}},[t._v(t._s(t.optionsObj[a])+" 、"+t._s(e.lable))])})),1)],1)]):t._e(),5===e.kindId?i("div",{staticClass:"singleList"},[i("div",{staticClass:"divObj"},[i("div",{staticClass:"titleHead"},[i("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],staticClass:"textType",staticStyle:{"min-height":"90px"},attrs:{disabled:"",maxlength:e.limitMax},domProps:{value:e.result},on:{input:function(i){i.target.composing||t.$set(e,"result",i.target.value)}}})])]):t._e(),6===e.kindId?i("div",{staticClass:"singleList score"},[i("div",{staticClass:"divObj"},[i("div",{staticClass:"titleHead"},[i("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),i("div",{staticClass:"evaluteBox"},[1===e.styleType?i("van-rate",{attrs:{"void-color":"#c7c7c7","disabled-color":"#F80F16",disabled:""},model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}}):t._e(),2===e.styleType?i("van-rate",{attrs:{"void-color":"#c7c7c7",icon:"like","disabled-color":"#F80F16","void-icon":"like-o",disabled:""},model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}}):t._e(),3===e.styleType?i("van-rate",{attrs:{"void-color":"#c7c7c7",icon:"static/image/microShop/xiaoicon.png","disabled-color":"#F80F16","void-icon":"smile-o",disabled:""},model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}}):t._e(),i("p",[t._v(t._s(e.evaluate))])],1)])]):t._e(),4===e.kindId?i("div",{staticClass:"singleList"},[i("div",{staticClass:"divObj"},[i("div",{staticClass:"titleHead"},[i("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),i("div",{staticClass:"xiala"},[i("span",[t._v(t._s(e.result||"请选择"))]),i("span",{staticClass:"icon iconfont mall-xiala"})]),i("van-action-sheet",{attrs:{actions:e.options},on:{select:function(i){return t.onSelect(i,e)}},model:{value:e.show,callback:function(i){t.$set(e,"show",i)},expression:"item.show"}})],1)]):t._e(),3===e.kindId?i("div",{staticClass:"singleList"},[i("div",{staticClass:"divObj"},[i("div",{staticClass:"titleHead"},[i("span",{domProps:{innerHTML:t._s(t.listItem.title)}})]),t._l(e.options,(function(a,s){return i("div",{key:s,staticClass:"pics"},[i("div",[i("span",[t._v(t._s(t.optionsObj[s])+"、")]),i("img",{attrs:{src:a.imgUrl,alt:""}})]),i("div",[i("van-radio-group",{model:{value:e.result,callback:function(i){t.$set(e,"result",i)},expression:"item.result"}},[i("van-radio",{attrs:{"checked-color":"#F80F16",name:t.optionsObj[s],disabled:""}},[t._v(t._s(a.lable))])],1)],1)])}))],2)]):t._e()])})),0)])],1)},s=[],n=(i("a9e3"),i("4160"),i("159b"),i("b0c0"),i("ac1f"),i("1276"),i("99af"),i("c975"),i("fb6a"),i("66bc")),l=i("da71"),o=(i("4ff7"),{name:"",mixins:[n["a"]],props:{firmdetailSubject:{type:String,default:!0},orderIds:{type:[String,Number],default:!0}},data:function(){return{answerList:[],listItem:"",i:0,optionsObj:{},paramsData:{},radio:"B",list:["a","b","c","d"],result:["a","b"],value:3,show:!1,actions:[],mktAwardList:[],id:"",url:"",evaluate:"",shareView:!0,shareTitle:"",shareContent:"",shareImgUrl:"",firmId:""}},created:function(){var t=this;t.getLetter(),t.paramsData=t.$route.query},mounted:function(){var t=this;if("加油凭证"==this.firmdetailSubject){var e={isDefault:1,token:this.$store.state.login.token,type:3};this.questionUrlData(e).then((function(e){"success"===e.data.result&&(t.firmId=e.data.data.id,t.loadData())}))}else this.loadData()},methods:{loadData:function(){var t=this,e={token:this.$store.state.login.token};"加油凭证"==this.firmdetailSubject?(e.orderId=t.orderIds,e.id=t.firmId):(e.orderId=t.paramsData.orderId,e.id=t.paramsData.id),t.historydetailData(e).then((function(e){if("success"===e.data.result){var i=JSON.parse(e.data.data.resultJson);i.forEach((function(t){t.evaluate=""})),t.userId=e.data.data.userId;var a=e.data.data.questionShare?JSON.parse(e.data.data.questionShare):"";0==a.length?t.shareView=!1:t.shareView=!0,i.forEach((function(t,e){if(1===t.kindId||2===t.kindId||3===t.kindId||4===t.kindId){var i=JSON.parse(t.options)||[];i.forEach((function(t){t.name=t.lable})),t.options=i}2===t.kindId?t.result=t.result.split(","):6===t.kindId?(t.result=Number(t.result)||0,1==t.result?t.evaluate="非常差":2==t.result?t.evaluate="差":3==t.result?t.evaluate="一般":4==t.result?t.evaluate="好":5==t.result&&(t.evaluate="非常好")):4===t.kindId&&(t.show=!1)})),t.answerList=i,t.listItem=t.answerList[t.i],t.shareTitle=e.data.data.shareTitle,t.shareContent=e.data.data.shareContent,t.shareImgUrl=e.data.data.shareImgUrl}}))},select1:function(t){t.show=!0},generateBig_1:function(){for(var t=[],e=65;e<91;e++)t.push(String.fromCharCode(e));return t},getLetter:function(){this.optionsObj=this.generateBig_1()},onSelect:function(t,e){e.result=t.name,e.show=!1},sharegoods:function(){var t=this,e={title:t.shareTitle,sharetext:t.shareContent,imageurl:t.shareImgUrl,detailurl:"".concat(this.$store.state.globalConfig.wxBaseUrl).concat(l["a"].shareUrl,"/service/questionDetail?shareUserid=").concat(this.$store.state.userInfo.userId)};this.$bridgefunc.wechatShare(e)},Intercept:function(){var t=this.url||window.location.href,e=t.substr(t.indexOf("?")),i=e.slice(1).split("=");this.id=i[1]}},computed:{},components:{},watch:{}}),r=o,c=(i("bb52"),i("0c7c")),d=Object(c["a"])(r,a,s,!1,null,"8e938fc0",null);e["default"]=d.exports},9099:function(t,e,i){"use strict";i("35fc")},"97af":function(t,e,i){t.exports=i.p+"static/images/96e1fadf5dcd8d7d657a05dfbcea2a4c.png"},"9b3c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"firmdetail"},[a("nav-top",{attrs:{title:t.isOfflineScan?"商品支付凭证详情":"加油支付凭证详情"},on:{backEvent:function(e){return t.$router.go(-1)}}}),a("nav-content",{staticClass:"firmdetail-recharge-details"},[t.orderDetail?[a("div",{staticClass:"top-show"},[a("div",{staticClass:"title"},[a("div",{staticClass:"num"},[t._v("¥"+t._s(t.orderDetail.payAmount.toFixed(2)))]),a("div",{staticClass:"img"},[a("img",{attrs:{src:i("ba1a"),alt:""}}),t._v(t._s(t.orderDetail.storeName)+" ")])]),t.isOfflineScan?a("div",{staticClass:"card"},[a("div",{staticClass:"table-view"},[t.isOfflineScan?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("便利店编码")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.storeStandCode))])])]):t._e(),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("员工编号")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.refuelCashierId))])])]),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("员工姓名")]),a("div",{staticClass:"right name"},[t._v(t._s(t.orderDetail.refuelCashierName))])])]),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("员工手机号")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.mobile))])])])])]):t._e(),t.isOfflineScan?a("div",{staticClass:"card"},[a("div",{staticClass:"table-view"},[a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("支付方式")]),a("div",{staticClass:"right"},[t._v(t._s(t.payTypeStr))])])]),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("商品付款类型")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.payBody))])])]),t.isOfflineScan?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("创建时间")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.createTime))])])]):t._e()])]):t._e(),t.isOfflineScan?t._e():a("div",{staticClass:"card"},[a("div",{staticClass:"table-view"},[a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("支付方式")]),a("div",{staticClass:"right"},[t._v(t._s(t.payTypeStr))])])]),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("油品名称")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.refuelOilName))])])]),1!=t.$store.state.globalConfig.appOilPayDetailHideFefuelLiter?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("加油升数")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.refuelLiter||0)+"L")])])]):t._e(),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("创建时间")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.createTime))])])])])]),t.isOfflineScan?t._e():a("div",{staticClass:"card"},[a("div",{staticClass:"table-view"},[a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("油站编码")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.refuelOuCode))])])]),t.isScan?t._e():a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("TTC")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.refuelPosTtc))])])]),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("员工姓名")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.refuelCashierName))])])]),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("asn加油卡序列号")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.refuelCardNo))])])]),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("员工卡后六位")]),a("div",{staticClass:"right special"},[t._v(t._s(t.refuelCardNo))])])]),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("油枪编号")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.refuelGunNo))])])])])]),a("div",{staticClass:"card"},[a("div",{staticClass:"table-view"},[a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("订单编号")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.tradeNo))])])]),a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("交易总金额")]),a("div",{staticClass:"right"},[t._v("￥"+t._s(t.orderDetail.realAmount.toFixed(2)))])])]),t.isOfflineScan&&3==t.orderDetail.state?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("支付完成时间")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.paidTime))])])]):t._e(),t.isOfflineScan&&7==t.orderDetail.state?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("支付取消时间")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.cancelTime))])])]):t._e(),t.isOfflineScan?t._e():a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("优惠抵扣")]),a("div",{staticClass:"right"},[t._v("¥"+t._s(t.discountAmountCom))])])]),t.isOfflineScan?t._e():a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("油点抵扣")]),a("div",{staticClass:"right"},[t._v(t._s(t.orderDetail.deductionRewards))])])]),!t.isOfflineScan&&t.settleMobelAmount(t.orderDetail.thirdDiscountAmount,t.orderDetail.thirdDiscountAmount2)?a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("移动优惠金额")]),a("div",{staticClass:"right"},[t._v("￥"+t._s(t.settleMobelAmount(t.orderDetail.thirdDiscountAmount,t.orderDetail.thirdDiscountAmount2)))])])]):t._e(),t.isOfflineScan?t._e():a("div",{staticClass:"table-view-cell"},[a("div",{staticClass:"table-view-cell-text"},[a("div",{staticClass:"left"},[t._v("开票状态")]),a("div",{staticClass:"right theme_font_red"},[t._v(t._s(t.invoiceUse(t.orderDetail.invoiceUse)))])])])])]),1==t.orderDetail.state?a("div",{staticClass:"pay-btn"},[a("div",{staticClass:"con wait-pay",staticStyle:{"margin-right":"15px"},on:{click:function(e){return t.cancelOrderHandler(t.orderDetail)}}},[t._v("取消订单")]),a("div",{staticClass:"con wait-pay",on:{click:function(e){return t.repayment(t.orderDetail)}}},[t._v("重新支付")])]):t._e()]),a("div",{staticClass:"state"},[3==t.orderDetail.state?a("img",{staticClass:"icon",attrs:{src:i("b6fc"),alt:""}}):1==t.orderDetail.state?a("img",{staticClass:"icon",attrs:{src:i("97af"),alt:""}}):a("img",{staticClass:"icon",attrs:{src:i("0694"),alt:""}})]),1!=t.orderDetail.state||t.isOfflineScan?t._e():a("div",{staticClass:"query-state",on:{click:t.queryHandle}},[a("span",[t._v("刷新状态")])])]:t._e(),1!=t.$store.state.globalConfig.oil_appraise_type||t.isOfflineScan?t._e():a("div",[a("p",{staticClass:"evaluate"},[t._v("加油评价")]),t.detailView?t._e():a("div",{staticClass:"question"},[a("subject",{attrs:{firmdetailSubject:t.firmdetailSubject,orderIds:t.orderId,ouCode:t.ouCode},on:{firmData:t.firmData}})],1),t.detailView?a("div",{staticClass:"question"},[a("subjectDetail",{attrs:{firmdetailSubject:t.firmdetailSubject,orderIds:t.orderId}})],1):t._e()])],2),a("repayments",{ref:"repay",attrs:{isScan:t.isScan,isOfflineScan:t.isOfflineScan},on:{queryOrder:t.queryHandle}})],1)},s=[],n=(i("a9e3"),i("fb6a"),i("0d03"),i("4795"),i("3e1d"),i("99ef")),l=i("76ded"),o=i("75bd"),r=i("3de7"),c=i("ecbf"),d={components:{repayments:c["a"],subject:n["default"],subjectDetail:l["default"]},data:function(){return{month:"",day:"",hour:"",min:"",second:"",millisecond:"",orderDetail:null,fromPage:"",firmdetailSubject:"加油凭证",orderId:"",ouCode:"",detailView:!1}},mixins:[r["a"]],filters:{formatState:function(t){var e="";return 1==t?e="待支付":3==t?e="已支付":7!=t&&8!=t||(e="已取消"),e}},computed:{discountAmountCom:function(){var t=Number(this.orderDetail.couponAmount)||0,e=Number(this.orderDetail.pointsAmount)||0,i=Number(this.orderDetail.discountAmount)||0,a=Number(this.orderDetail.rewardsAmount)||0,s=Number(this.orderDetail.empRewardsAmount)||0,n=Number(this.orderDetail.enterpriseAmount)||0,l=Number(this.orderDetail.randomDeductionAmount)||0;return t+e+i+a+s+n+l},refuelCardNo:function(){var t=this.orderDetail?this.orderDetail.refuelCardNo:"";return t.slice(-6)||""},isScan:function(){return"/firmHistoryScanDetail"===this.$route.path},isOfflineScan:function(){return"/firmOfflineScanDetail"===this.$route.path},payTypeStr:function(){var t=this.orderDetail.payMode;return o["a"].getPayWayStr(t)}},created:function(){this.orderType=this.$route.query.orderType,this.orderId=this.$route.query.orderId,this.fromPage=this.$route.query.fromPage,1==this.fromPage&&this.counttime(),this._getOrderDetail(),this.goEvaluation()},methods:{firmData:function(t){this.detailView=t.pageView},settleMobelAmount:function(t,e){var i=t||0,a=e||0;return i+a},goEvaluation:function(){var t=this;this.$Loading.open();var e="/app/json/questionaire/getQuestionaireByOrderid",i={token:this.$store.state.login.token,orderId:this.orderId};this.$http.post(e,i).then((function(e){t.$Loading.close();var i=e.data;0==i.status?t.detailView=!0:t.detailView=!1}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},queryHandle:function(){var t=this;this.queryState().then((function(e){t.$toast("刷新完毕"),1==e&&t._getOrderDetail()}))},repayment:function(t){this.$refs.repay.open(t)},cancelOrderHandler:function(t){var e=this;this.$dialog.confirm({message:"确定取消当前订单吗？"}).then((function(){e.cancelOrder(t)}))},cancelOrder:function(t){var e=this,i={token:this.$store.state.login.token,orderType:t.orderType,orderId:t.id},a="/app/json/refuel_center/cancelOrder";100002002==t.orderType&&(a="/app/json/refuel_scan_code/cancelOrder"),this.isOfflineScan&&(a="/app/json/shopping_scan_code/cancelOrder"),this.$http.post(a,i).then((function(t){var i=t.data;0==i.status?(e.$Toast("支付已取消"),e._getOrderDetail()):e.$Toast(i.info)}))},invoiceUse:function(t){var e="";return 0===t?e="未开票":1===t?e="已开票":2===t&&(e="开票中"),e},backEvent:function(){this.$router.go(-1)},counttime:function(){var t=new Date;this.month=t.getMonth()+1,this.day=t.getDate(),this.hour=t.getHours(),this.min=this.padZero(t.getMinutes()),this.second=this.padZero(t.getSeconds()+1),this.millisecond=this.padZero(t.getMilliseconds(),3);var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.counttime()}),1)},_getOrderDetail:function(){var t=this;this.$Loading.open();var e="/app/json/refuel_center/detail";this.isScan&&(e="/app/json/refuel_scan_code/detail"),this.isOfflineScan&&(e="/app/json/shopping_scan_code/detail");var i={token:this.$store.state.login.token,orderType:this.orderType,orderId:this.orderId};this.$http.post(e,i).then((function(e){t.$Loading.close();var i=e.data;0==i.status?(t.orderDetail=i.data||{},t.payData=i.data||{},t.ouCode=i.data.storeOuCode):t.$Toast(i.info)}),(function(e){t.$Loading.close(),t.$Toast("请求数据失败！")}))},padZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=t+"";return("0000".substr(0,e)+i).substr(i.length)}}},u=d,v=(i("f983"),i("0c7c")),f=Object(v["a"])(u,a,s,!1,null,"f351abde",null);e["default"]=f.exports},b67e:function(t,e,i){},b6fc:function(t,e,i){t.exports=i.p+"static/images/46cfbbc1db45f3b247701ae7a8fc1bd1.png"},ba1a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUQ1NDNGQkY1N0FEMTFFQTg5RjhCRUZGNkI3QjIzOTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUQ1NDNGQzA1N0FEMTFFQTg5RjhCRUZGNkI3QjIzOTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEMkEyQjJFQzU3N0YxMUVBODlGOEJFRkY2QjdCMjM5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBRDU0M0ZCRTU3QUQxMUVBODlGOEJFRkY2QjdCMjM5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqAY4qQAAAReSURBVHja1FldaBxVFP7m7sxus7PJmrTUNtYHDe2LK1oEW0Nj6kuLIliwKm26LS0+WIsYVKhPeQjSh+LDSoQKRRMTDUWoxgexpkpNK/lR6w9df0hZfZAoitmN6abJdnZmPHdzNyzpbvbOdjPJfPAxy3Ln3m/OnHvOuWcU3AKS90Ya6NIqGCFuIfL/dDFkhg8jjhPjxCHOhivxZKVrKhWI9NFlD/EIcRdRdThFljhIfIc4QOLNZRFMQvnYKLGD2ITqIEHsJPaRcLtqgkksf92niduxPBglPkuifyo3kEmIfY4u3y6jWIi5L4u1KrMw3cwfJkZ8Ae6ii9hO1rakBQuxfcT9WBn08/1STHQpl4itoFiItWNSFhZ+dAqrA0fJym+VFCyiAd9ggSUdPxhE6Njz8O1+FMr69aUH2jbsPyeQ/fgjpE+/DZimU8EZ4gOF0UNZFGeHy0UDRfOjrqcbyu0bcKO3G9ZviSX3tEo20A4ehjk6jOmXXq405DXn43RhlorKhK7g00+C3XU3rj2zF9k/Jsov99Uw/CMj0N99D4GdDyPz5cVKQh7X1ruw6US67ZC5W93RAnPwUzmxAjd+vALr6zH4W1oq9eUOoXHBwntk060S1GGmUrnfvnVroW29H4rqKzrWmpuDcfk7WNNp2MlJKHqoUsFNQuPZvOAjTmdQNzUidOYDKIE1VM4YxQf5A7D/+RvTT+0tnmYbboOVnJJd8nBOsCgRdzkVrG3bBuX6LFKtrSV3PwvpCF+8BC0XfBY98B0bUfvJOcwcaiOXicssuZtrZaKWdVoiQvEx2OnpJUOVlaZyOJMhl7k5P2Un/oI1MozgK8dpMqkajGtszQt2Bb7tzQj39KD21eO0F2pw/fWTUO6JoOaJx2WnyAmOuCXYTv4L84fvoVLC0Q+0wUj8DuNMPwLHXqSn8clMEVHFscYxrKn/oGy6E3q0DXZmrrjbhOvpsBSCOTW/sazxcaRjb6Bu8+aFDJn58Cy0AwehNm6QCZVbVHEGc4y58xegPTgAbV8b+ahWIrFSWDv1Joz4L6gpZfVsVviLlIUb1IIDo8P3a+LaayfcLoZ0Bo+BiaO4VzDDRN/AK0gy0eTwCsaZ6Mh4BXEm2kdewVBecNbVZWdnwerq5pNLSJSchiHT4hpiojE36KZe4/PzYJSe60fHEOp9Hzala14MlcFnXGu+SuONucdcM/C5QWSvXoVKKdpOp5EZ+0bmtu7CE8eAaMw1uWZlXvgQJZEQGufPdKLl2bmKN1tnvi1bWLjz1tTRUidn/9b7wPQgUBsC29iINTsecpZS167LXfl9ZjIF4+dfnRzz+xw1Ulh9GOEvLtDjadWx1+QkUo/svLVGildaVTdVa2JA1yoQ27VYbFHBAu2Yb3muFPqFBkgJFn3Z6ApZmq8ZddTQLuLTMZTpaFYBfIO1F3MDR4ILooc3PsoIF+ElaDPxkMg61UJCzNksI1bawous7Y0PiyXEu/7p9n8BBgAatoEQzin+hgAAAABJRU5ErkJggg=="},bb52:function(t,e,i){"use strict";i("d39d")},d39d:function(t,e,i){},ecbf:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showModal?i("div",{staticClass:"confirm-pay-modal"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-title"},[t._v("确认支付？")]),i("div",{staticClass:"content"},[t.payData.payMode?i("div",{staticClass:"item"},[i("span",[t._v("支付方式")]),i("span",[t._v(t._s(t.payTypeStr(t.payData.payMode)))])]):t.isOfflineScan?i("div",{staticClass:"item"},[i("span",[t._v("支付方式")]),i("span",[t._v(t._s(t.payStyle.text))])]):t.isOfflineScan?t._e():i("div",{staticClass:"item"},[i("pay-mode",{ref:"payModeRef",staticStyle:{width:"100%","margin-top":"0"},on:{setPayWay:t.setPayWays}})],1),i("div",{staticClass:"item"},[t.isOfflineScan?i("span",[t._v("支付时间")]):i("span",[t._v("加油时间")]),i("span",[t._v(t._s(t.payData.createTime))])]),t.isOfflineScan?t._e():i("div",{staticClass:"item"},[i("span",[t._v("加油升数")]),i("span",[t._v(t._s(t.payData.refuelLiter)+"L")])]),i("div",{staticClass:"item"},[i("span",[t._v(t._s(t.isOfflineScan?"支付金额":"金额"))]),i("span",{staticClass:"theme_font_red"},[t._v("￥"+t._s(t.payData.totalAmount.toFixed(2)))])])]),i("div",{staticClass:"btns"},[i("p",{staticClass:"btn cancel-btn",on:{click:function(e){t.showModal=!1}}},[t._v("否")]),i("p",{staticClass:"btn",on:{click:function(e){return t.payBill(t.payData)}}},[t._v("是")])])])]):t._e()},s=[],n=(i("fb6a"),i("ac1f"),i("5319"),i("75bd")),l=i("6461"),o=i("5463"),r={props:{isScan:{type:Boolean,default:!1},isOfflineScan:{type:Boolean,default:!1},payStyle:{type:Object}},components:{PayMode:o["a"]},data:function(){return{showModal:!1,payData:{},selectedPayWay:null}},mounted:function(){},methods:{open:function(t){var e=this;this.payData=t,this.showModal=!0,t.payMode||this.isOfflineScan||this.$nextTick((function(){e.$refs.payModeRef.init(t.orderType.slice(0,t.orderType.length-3),t.storeOuCode)}))},setPayWays:function(t){this.selectedPayWay=Object.assign({},t)},payBill:function(t){var e=this,i=this.selectedPayWay;this.selectedPayWay||(i=this.payStyle);var a="refuelPayEvent";100002002==t.orderType?a="refuelScanPayEvent":200401002==t.orderType&&(a="refuelOfflinePayEvent");var s=Object.assign({},t);t.payMode||(s=Object.assign({},s,i)),n["a"][a](s,t.orderType,t.id).then((function(){e.resultHand("1",t)}))["catch"]((function(){e.resultHand("0",t)}))},payTypeStr:function(t){return n["a"].getPayWayStr(t)},resultHand:function(t,e){this.$Loading.close(),l["a"].addLog("支付结果",t?"成功":"失败");var i="/firmDetail",a="";this.isScan&&(i="/firmScanDetail"),this.isOfflineScan&&(i="/offline_payment/pay_success",a=1),"1"==t?this.$router.replace({path:i,query:{orderType:this.payData.orderType,orderId:this.payData.id,fromPage:1,source:a}}):this.cancelOrder(e)},cancelOrder:function(t){var e=this,i={token:this.$store.state.login.token,orderType:t.orderType,orderId:t.id},a="/app/json/refuel_center/cancelOrder";this.isScan&&(a="/app/json/refuel_scan_code/cancelOrder"),this.isOfflineScan&&(a="/app/json/shopping_scan_code/cancelOrder"),this.$http.post(a,i).then((function(t){var i=t.data;0==i.status?(e.$Toast("支付已取消"),e.$emit("queryOrder")):e.$Toast(i.info)}))}}},c=r,d=(i("4620"),i("0c7c")),u=Object(d["a"])(c,a,s,!1,null,"07191ea5",null);e["a"]=u.exports},f983:function(t,e,i){"use strict";i("5f88")}}]);